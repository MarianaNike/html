"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6352],{30502:function(e,n,t){var r=t(72006),i=t(4405),o=t(74985),a=t(52035),l=t(56412),c=t(81995),u=t(1819),s=t(28737);a.kL.register(a.uw,a.f$,a.od,a.jn,a.u);n.Z=function(e){var n=e.labels,t=e.datasets,a=(0,s.F)().values,d={labels:n.map((function(e){return e.toISOString()})),datasets:t.map((function(e){return(0,i.Z)((0,r.Z)({},e),{data:e.data.map((function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}})),pointRadius:1,tension:.1})}))};return(0,o.tZ)(u.x1,{options:{responsive:!0,plugins:{tooltip:{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,l.Z)(n,"MMM d, HH:mm (z)")}}}},scales:{y:{grid:{borderColor:a.global.backgroundHigher,color:a.global.backgroundHigher},ticks:{color:a.global.foregroundDimmer},min:0},x:{grid:{borderColor:a.global.backgroundHighest,color:a.global.backgroundHighest},ticks:{color:a.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(r.toISOString()===(0,c.Z)(r).toISOString())return(0,l.Z)(r,"MMM d")}}}}},data:d})}},10434:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(74985),i=t(86306),o=t(50959),a=t(39541),l=t(25198),c=t(61284),u=t(85368),s=t(28737),d=t(32104),f=t(72006),p=t(43119),h=t(71440),v=t(24635);function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(g()),w=(0,h.Ps)(m(),b),x=(0,h.Ps)(y(),w);var k=t(30502),C=function(e){var n=e.data,t=e.start,o=e.hours,a=(0,s.F)().values,l=new Array(o).fill(0).map((function(e,n){return(0,i.Z)(t,n)})),c=n.results.reduce((function(e,n){return e.set(n.timestamp,n),e}),new Map),u=[{label:"Connected",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{success:0}).success,x:e}})),borderColor:a.global.accentPrimaryDefault,backgroundColor:a.global.accentPrimaryDefault},{label:"Failed",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{failure:0}).failure,x:e}})),borderColor:a.global.accentNegativeDefault,backgroundColor:a.global.accentNegativeDefault}];return(0,r.tZ)(k.Z,{labels:l,datasets:u})},S=function(e){var n,t,i=e.replId,s=e.start,p=e.hours,h=e.deployment,g=(0,o.useState)(void 0),m=g[0],y=g[1],b=function(e){var n=(0,f.Z)({},Z,e);return v.a(x,n)}({variables:{id:i,input:{start:s,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":y(new Error(e.repl.analyticsPageViews.message))}}}),w=b.data,k=b.loading,S=b.error,T="Repl"===(null===w||void 0===w||null===(n=w.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsPageViews"===(null===(t=w.repl.analyticsPageViews)||void 0===t?void 0:t.__typename)?w.repl.analyticsPageViews:void 0,E=T?T.uniques:void 0;return S&&y(S),(0,r.BX)(u.G,{css:[a.l0.colWithGap(8)],children:[(0,r.BX)(u.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Requests"}),E?(0,r.BX)(c.xv,{children:[(0,r.tZ)("strong",{children:E})," unique visitors"]}):null]}),(0,r.BX)(u.G,{children:[k?(0,r.tZ)(d.Z,{}):null,m?(0,r.tZ)(l.E,{text:m.message,colorway:"negative"}):null,T?(0,r.tZ)(C,{data:T,start:s,hours:p}):null]})]})}},76232:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(74985),i=t(50959),o=t(52035),a=t(39541),l=t(25198),c=t(61284),u=t(85368),s=t(32104),d=t(55021),f=t(1819),p=t(72006),h=t(43119),v=t(71440),g=t(24635);function m(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return m=function(){return e},e}function y(){var e=(0,h.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,v.Ps)(m()),w=(0,v.Ps)(y(),b);var x=t(28737),k=t(73194),C=t.n(k),S=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,r.tZ)(c.xv,{children:"No results"});switch(t){case"map":return(0,r.tZ)(R,{data:n});case"pie":return(0,r.tZ)(E,{data:n});case"table":return(0,r.tZ)(T,{data:n})}},T=function(e){var n=e.data;return o.kL.register(o.qi),(0,r.tZ)(u.G,{children:n.results.map((function(e){return(0,r.BX)(u.G,{css:[a.l0.rowWithGap(16),a.l0.py(8),{borderBottom:"1px solid ".concat(a.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,r.tZ)(u.G,{css:[a.l0.flex.grow(1),a.l0.maxWidth("90%")],children:(0,r.tZ)(c.xv,{title:e.value,children:e.value})}),(0,r.tZ)(u.G,{children:(0,r.tZ)(c.xv,{children:e.count})})]})}))})},E=function(e){var n=e.data,t=(0,x.F)().values,i=[t.global.blueDefault,t.global.blurpleDefault,t.global.greenDefault,t.global.limeDefault,t.global.magentaDefault,t.global.orangeDefault,t.global.pinkDefault,t.global.purpleDefault,t.global.redDefault,t.global.tealDefault,t.global.yellowDefault];return(0,r.tZ)(f.by,{options:{radius:"80%"},data:{labels:n.results.map((function(e){return e.value})),datasets:[{hoverOffset:20,borderWidth:2,data:n.results.map((function(e){return e.count})),backgroundColor:Array(n.results.length).fill(0).map((function(e,n){return i[n%i.length]}))}]}})},R=function(e){var n=e.data,i=C()((function(){return Promise.all([t.e(5381),t.e(4096),t.e(2738),t.e(7016)]).then(t.bind(t,17016))}),{loadableGenerated:{webpack:function(){return[17016]}},ssr:!1}),o=n.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,r.tZ)(u.G,{css:[a.l0.maxWidth(450)],children:(0,r.tZ)(i,{countries:o})})},I=function(e){var n,t,o=e.replId,f=e.start,h=e.hours,v=e.metric,m=e.deployment,y=e.count,b=e.variant,x=void 0===b?"table":b,k=(0,d.CZ)(v),C=(0,i.useState)(void 0),T=C[0],E=C[1],R=function(e){var n=(0,p.Z)({},Z,e);return g.a(w,n)}({variables:{id:o,input:{metric:v,start:f,hours:h,deployment:m,count:y}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":E(new Error(e.repl.analyticsTopList.message))}}}),I=R.data,D=R.loading,G=R.error;return G&&E(G),(0,r.BX)(u.G,{css:a.l0.colWithGap(8),children:[(0,r.BX)(c.xv,{variant:"subheadDefault",children:["Top ",k]}),(0,r.BX)(u.G,{children:[D?(0,r.tZ)(s.Z,{}):null,T?(0,r.tZ)(l.E,{text:T.message,colorway:"negative"}):null,"Repl"===(null===I||void 0===I||null===(n=I.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsTopList"===(null===(t=I.repl.analyticsTopList)||void 0===t?void 0:t.__typename)?(0,r.tZ)(S,{variant:x,data:I.repl.analyticsTopList}):null]})]})}},67036:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(74985),i=t(48306),o=t.n(i),a=(t(50959),t(97754)),l=t.n(a);function c(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,a=e.count,c=void 0===a?null:a,u=c&&c>99,s=u?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),n?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:u})||""),children:s}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},91015:function(e,n,t){t.d(n,{AS:function(){return R},Hj:function(){return B},Rp:function(){return D},Tt:function(){return U},gE:function(){return P},j7:function(){return C},xT:function(){return T},yi:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216),c=t(86615);function u(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return m=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(u()),x=(0,o.Ps)(s()),k=(0,o.Ps)(d(),w,x),C=(0,o.Ps)(f(),w,k),S=(0,o.Ps)(p(),C);function T(e){var n=(0,r.Z)({},b,e);return a.a(S,n)}var E=(0,o.Ps)(h(),C);function R(e){var n=(0,r.Z)({},b,e);return l.D(E,n)}var I=(0,o.Ps)(v(),C);function D(e){var n=(0,r.Z)({},b,e);return l.D(I,n)}var G=(0,o.Ps)(g(),C);function P(e){var n=(0,r.Z)({},b,e);return l.D(G,n)}var _=(0,o.Ps)(m());function B(e){var n=(0,r.Z)({},b,e);return l.D(_,n)}var A=(0,o.Ps)(y(),C);function U(e){var n=(0,r.Z)({},b,e);return c.m(A,n)}Z()},62199:function(e,n,t){t.d(n,{Ft:function(){return f},Vy:function(){return g},kL:function(){return v}});var r=t(57135),i=t(2272),o=t(96583),a=t(14806);function l(e,n,t){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(e,n,t){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?t===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}}))}))).apply(this,arguments)}var u=t(45285),s=t(1468),d=t(50959);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var n,t,r,i,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,n.path?[4,l(n,r,t)]:[2,null];case 1:return(c=o.sent())?[2,{anchor:n,newSelection:c,newPosition:undefined,getHighlight:function(){if(c){var e=c.indexStart,n=c.indexEnd;try{var t=a.xv.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),l=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:l,code:t.sliceString(e,n),postcode:u}}catch(d){s.c_.captureException(d)}}},snippet:h(i,c)}]:[2,null]}}))}))).apply(this,arguments)}var h=function(e,n){var t=a.xv.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var l=r;l<=i;l++)o.push(t.line(l).text);return{startLineNumber:r,lines:o}};function v(e){var n=(0,u.Z)().fs,t=d.useRef(null),r=d.useRef(null),o=(0,i.Z)(d.useState(!1),2),a=o[0],l=o[1];return d.useEffect((function(){if(e){var i=function(){r.current=null,l(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection,i=e.initialContent;t.current=i.toString(),r.current=n,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var n=e.latestContent;t.current=n}});return function(){i(),o()}}}),[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:a}}function g(e){var n=(0,u.Z)().fs,t=(0,i.Z)(d.useState(null),2),r=t[0],o=t[1],a=v(null===e||void 0===e?void 0:e.path),l=a.contentRef,c=a.loadedFile,p=a.transformSelectionRef;return d.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&c&&p.current&&null!==l.current&&f({anchor:e,version:n.getOTVersion(e.path),transformSelection:p.current,content:l.current}).then((function(e){o(e)})).catch((function(e){o(null),s.c_.captureException(e)}))}),[n,e,c,p,l]),r}},89475:function(e,n,t){t.d(n,{Q:function(){return r}});var r=(0,t(62946).cn)(null)},35856:function(e,n,t){t.d(n,{n:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.D(u,n)}},73785:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(48330),a=t(35856);function l(e){var n=(0,o.Z)(),t=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[n,e,t])}},46179:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());var s=t(48330);function d(){var e,n=function(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}({variables:{replId:(0,s.Z)()}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var t=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&t.push(n.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=n.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p,h=d.value;(null===(p=h.user)||void 0===p?void 0:p.username)&&t.push(h.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return t}},75015:function(e,n,t){t.d(n,{S:function(){return o}});var r=t(59053),i=t(7225);function o(e,n,t){if(i.Command.is(e))n.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:t,client:n}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,u=void 0;try{for(var s,d=a.arguments[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;i.WorkspaceEdit.is(f)&&(0,r.w)({edit:f,fs:t,client:n})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}a&&n.request.executeCommand(a.command,a.arguments)}}},45076:function(e,n,t){t.d(n,{p:function(){return W},O:function(){return L}});var r=t(66091),i=t(5683),o=t(72006),a=t(4405),l=t(2272),c=t(45347),u=t(74985),s=t(50959),d=t(10422),f=t(69994),p=t(14806),h=t(39541),v=t(71540),g=t(61284),m=t(64491),y=t(45285),Z=t(27256),b=t(13405),w=t(75015);function x(e){var n=e.containerProps,t=e.codeActions,r=e.onExecuted,i=e.path,l=(0,y.Z)().fs,c=(0,m.Z)(i);return t.length&&c?(0,u.tZ)(Z.XZ,(0,a.Z)((0,o.Z)({},n),{children:t.map((function(e,n){return(0,u.tZ)(b.Z,{onClick:function(n){n.stopPropagation(),(0,w.S)(e,c,l),r()},children:(0,u.tZ)(Z.sN,{isFirst:0===n,isLast:n===t.length-1,children:(0,u.tZ)(g.xv,{children:e.title})})},n)}))})):null}var k=t(57135),C=t(96583),S=t(9970),T=t(86763),E=t.n(T),R=t(18171);var I=new Map;var D="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,G=t(63064);function P(e){var n=e.path,t=e.range,r=e.lspClient;t=function(e){var n,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(n=I.get(t))||void 0===n?void 0:n.deref();return null!=r?r:(I.set(t,new D(e)),e)}(t);var i=(0,G.Z)(),o=s.useRef(null),a=(0,l.Z)(function(e,n){var t=s.useRef(),r=(0,R.Z)((function(){return E()((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(void 0,(0,S.Z)(r)).then((function(e){var n;null===(n=t.current)||void 0===n||n.call(t,e)}))}),n)}),[e,n]);return[r,s.useCallback((function(e){t.current=e}),[])]}(s.useCallback(function(){var e=(0,k.Z)((function(e,n){return(0,C.__generator)(this,(function(t){return r.isOpen(e)?(o.current={requestPath:e,requestRange:n},[2,r.request.codeActions(e,n)]):[2,{result:null}]}))}));return function(n,t){return e.apply(this,arguments)}}(),[r]),1e3),2),c=a[0],u=a[1],d=(0,l.Z)(s.useState([]),2),f=d[0],p=d[1],h=s.useCallback((0,k.Z)((function(){return(0,C.__generator)(this,(function(e){return r&&n?(u((function(e){i.current&&("error"in e||null===e.result||0===e.result.length?p([]):p(e.result))})),c(n,t),[2]):[2]}))})),[r,n,c,t,u,i]);return s.useEffect((function(){return h(),function(){c.cancel()}}),[h,c]),[f,h]}var _=t(85577),B=t(35981),A=t(73872),U=t(45634),L=p.Py.define();function N(e){var n=e.state,t=n.doc,r=n.selection.main,i=r.from,o=r.to;return{start:(0,_.s)(t,i),end:(0,_.s)(t,o)}}var X=function(e){var n=e.view,t=e.path,r=e.lspClient,i=e.visible,o=e.coords,a=(0,l.Z)(s.useState({x:0,y:0}),2),c=a[0],d=a[1],f=(0,l.Z)(P({path:t,lspClient:r,range:N(n)}),2),p=f[0],h=f[1],g=(0,A.Z)(i),m=(0,A.Z)(o),y=s.useCallback((function(){i.current=!1,n.focus()}),[n,i]);if(s.useEffect((function(){m&&d({x:m.left,y:m.top})}),[m]),s.useEffect((function(){var e=function(e){"Escape"===e.key&&y()};if(g)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[y,g]),!p.length)return null;var b=p.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,u.BX)("div",{role:"presentation",onMouseDown:function(e){g||(e.stopPropagation(),e.preventDefault(),d({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!g)},children:[(0,u.tZ)(v.Z,{css:{fill:b,color:b,cursor:"pointer"},className:"lightbulb"}),g?(0,u.tZ)(x,{path:t,containerProps:{view:n,verticalOffset:Z.R$*p.length,closeMenu:y,width:"auto",coords:c},onExecuted:function(){y(),h()},codeActions:p}):null]})},F=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).visible=(0,B.u)(!1),e.coords=(0,B.u)(null),e.container=s.createRef(),e}var l=t.prototype;return l.toDOM=function(e){var n=document.createElement("div");return n.setAttribute("aria-hidden","true"),n.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(d.createPortal((0,u.tZ)("span",{ref:this.container,children:(0,u.tZ)(X,(0,a.Z)((0,o.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),n)),n},l.contains=function(e){var n;return(null===(n=this.container.current)||void 0===n?void 0:n.contains(e))||!1},l.updateDOM=function(){return!0},t}(f.l9);var O=function(e){return f.lg.fromClass(function(){function n(t){(0,r.Z)(this,n),this.widget=new F,this.widget.props=e,this.decoration=f.p.widget({widget:this.widget,side:0}),this.updateDecorations(t)}var t=n.prototype;return t.update=function(e){var n=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,U.j)(e,L,(function(t){var r=t.value;n.widget.visible.current=!0,n.widget.coords.current=r,n.updateDecorations(e.view)}))},t.updateDecorations=function(e){var n,t=e.state,r=t.doc,i=t.selection,o=r.lineAt(i.main.from);n=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=f.p.set([this.decoration.range(n)])},n}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},M=f.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:h.TV.fontFamilyDefault,"& svg":{display:"block"}}});function W(e){return[M,O(e)]}},27256:function(e,n,t){t.d(n,{R$:function(){return ne},Wo:function(){return J},D2:function(){return j},XZ:function(){return re},JJ:function(){return Q},sN:function(){return oe},ZP:function(){return ie},s3:function(){return ee}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(39541),s=t(61284),d=t(85368),f=t(99964),p=t(9839),h=t(12260),v=t(1050),g=t(15544),m=t(50575),y=t(22642),Z=t(24941),b=t(77806),w=t(49085),x=t(32973),k=t(42256),C=t(63128),S=t(35086),T=t(88477),E=t(71540),R=t(99397),I=t(21134),D=t(85577),G=t(13233),P=t(625),_=t(87076),B=t(17807),A=t(57913),U=t(32104),L=t(66016),N=t(64491),X=t(45285),F=t(1468),O=t(1169),M=t(56169),W=t(75015),H=t(951),z=t(13405);function V(e){var n=e.view,t=e.metadata,r=e.closeMenu,i=t.text,o=t.icon,f=(0,G.Z)().showError,p=c.useRef(!1),h=(0,a.Z)(c.useState(!1),2),v=h[0],g=h[1],m=(0,a.Z)(c.useState(null),2),y=m[0],Z=m[1],b=(0,X.Z)().fs,w=n.state.facet(H.Yp),x=(0,N.Z)(w||""),k=(0,M.H)(),C=k("label"),S=k("menu"),T=c.useRef(null),E=(0,a.Z)((0,O.XZ)(T,!1),4),R=(E[0],E[1]),I=E[2],V=E[3];return(0,O.Ym)(R,T),c.useEffect((function(){if(x&&w&&v&&x.isOpen(w)&&!p.current){var e=n.state,t=e.selection.main,r={start:(0,D.s)(e.doc,t.from),end:(0,D.s)(e.doc,t.to)};p.current=!0,x.request.codeActions(w,r).then((function(e){if((0,P.j)(P.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return p.current=!1,Z([]),f("Something went wrong fetching code actions"),void F.c_.captureException(new Error(e.error.message));null!==e.result&&0!==e.result.length?Z(e.result):Z([])}))}}),[x,v,w,y,n,f]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),g((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:[B.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:[o,(0,l.tZ)(d.G,{css:[u.l0.pl(8),u.l0.flex.growAndShrink(1)],children:(0,l.tZ)(s.xv,{id:C,children:i})}),(0,l.tZ)(d.G,{children:(0,l.tZ)(_.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":v,"aria-controls":S,onClick:function(){V(),g((function(e){return!e}))},innerRef:T,onKeyDown:I,children:(0,l.tZ)(A.Z,{rotate:v?90:0,style:{transition:"200ms ease"}})})})]}),v&&!y?(0,l.BX)(d.G,{css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:[(0,l.tZ)(s.xv,{color:"dimmer",children:"Loading actions..."}),(0,l.tZ)(d.G,{css:[u.l0.align.center,u.l0.justify.center,u.l0.position.absolute,u.l0.right(4),u.l0.width(24),u.l0.height(24)],children:(0,l.tZ)(U.Z,{})})]}):null,v&&y&&x?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":C,id:S,children:[y.map((function(e,n){return(0,l.tZ)(z.Z,{onClick:function(){(0,W.S)(e,x,b),r()},children:(0,l.tZ)(d.G,{css:[B.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.center,u.l0.width("100%")],children:[(0,l.tZ)(s.xv,{css:[u.l0.maxWidth("90%")],children:e.title}),(0,l.tZ)(d.G,{tag:"span",children:(0,l.tZ)(L.Z,{size:12})})]})})},n)})),0===y.length?(0,l.tZ)(d.G,{css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:(0,l.tZ)(s.xv,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var j,q,Y=t(1809),K=t(72370),$=t(85357),Q="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(j||(j={}));var J=(q={},(0,r.Z)(q,j.Cut,{text:"Cut",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)(q,j.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)(q,j.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)(q,j.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)(q,j.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(R.Z,{})}),(0,r.Z)(q,j.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(I.Z,{})}),(0,r.Z)(q,j.FindReferences,{text:"Find references",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)(q,j.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)(q,j.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)(q,j.CodeActions,{text:"Code actions",icon:(0,l.tZ)(E.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)(q,j.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)(q,j.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)(q,j.StartThread,{text:"Start thread",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)(q,j.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(T.Z,{})}),(0,r.Z)(q,j.GenerateCode,{text:"Generate code",icon:(0,l.tZ)(Y.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)(q,j.TransformCode,{text:"Edit code",icon:(0,l.tZ)(K.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)(q,j.SearchCode,{text:"Search code",icon:(0,l.tZ)(h.Z,{})}),q);function ee(e){return e===Q}var ne=35;function te(e){var n=e.dom,t=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=n.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+t>a){var c=o-t;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}function re(e){var n=e.view,t=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,s=e.width,p=void 0===s?275:s,h=n.dom,v=(0,f.Z)(r,[]),g=(0,a.Z)(c.useState((function(){return te({dom:h,verticalOffset:i,coords:t})})),2),m=g[0],y=m.x,Z=m.y,b=g[1];return c.useEffect((function(){b(te({dom:h,verticalOffset:i,coords:t}))}),[t,i,h]),(0,l.tZ)(C.T,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[u.l0.position.fixed,u.l0.flex.column,u.l0.justify.center,u.l0.borderRadius(8),u.l0.shadow(1),u.l0.width(p),u.l0.zIndex(101),{border:"1px solid ".concat(u.TV.outlineDimmest)},{left:y,top:Z}],children:(0,l.tZ)($.ZP,{children:(0,l.tZ)(O.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",css:[u.l0.maxHeight("100vh"),u.l0.overflowY("auto")],children:o})})})})}function ie(e){var n=e.view,t=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case j.TransformCode:case j.ExplainCode:return!n.state.selection.main.empty;case j.StartThread:return 0!==n.state.doc.length;default:return!0}})),u=c.map((function(e){return ee(e)?1:ne})).reduce((function(e,n){return e+n}),0);return(0,l.tZ)(re,(0,o.Z)((0,i.Z)({verticalOffset:u},e),{children:c.map((function(e,r){return ee(e)?(0,l.tZ)(d.G,{css:[{borderBottom:"1px solid var(--background-highest)"}]},r):e===j.CodeActions?(0,l.tZ)(V,{view:n,closeMenu:t,metadata:J[e]},e):(0,l.tZ)(z.Z,{onClick:function(n){var r=(0,k.j)(n);a(e,{isCmdOrCtrl:r}),t()},isFirst:0===r,isLast:r===c.length-1,children:(0,l.tZ)(ae,{item:e,isFirst:0===r,isLast:r===c.length-1})},e)}))}))}function oe(e){var n=e.children,t=e.isFirst,r=e.isLast,i=e.item;return(0,l.tZ)(d.G,{"data-cy":i?"context-menu-".concat(i):null,css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center,t&&{borderRadius:"inherit"},r&&{borderRadius:"inherit"}],children:n})}function ae(e){var n=e.item,t=e.isFirst,r=e.isLast,i=J[n],o=i.text,a=i.icon,c=i.keyboardShortcut;return(0,l.BX)(oe,{item:n,isFirst:t,isLast:r,children:[a,(0,l.tZ)(d.G,{css:[u.l0.px(8),u.l0.flex.growAndShrink(1),u.l0.align.start],children:(0,l.tZ)(s.xv,{children:o})}),c?(0,l.tZ)(d.G,{children:(0,l.tZ)(S.ZP,{shortcut:c,size:"small",css:[u.l0.color.foregroundDimmest]})}):null]})}},13405:function(e,n,t){var r=t(2272),i=t(74985),o=t(1169),a=t(85368),l=t(17807),c=t(39541),u=t(50959),s=a.K.button;n.Z=function(e){var n=e.onClick,t=e.children,a=e.isFirst,d=e.isLast,f=u.useRef(null),p=(0,r.Z)((0,o.XZ)(f,!1),4),h=p[0],v=p[1],g=p[2],m=p[3];return(0,o.Ym)(v,f),(0,i.tZ)(s,{ref:f,role:"menuitem",css:[c.l0.reset.button,l.gU.listItem,a&&{borderTopLeftRadius:4,borderTopRightRadius:4},d&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],onClick:function(e){m(),n(e)},onKeyDown:g,tabIndex:h,children:t})}},83293:function(e,n,t){t.d(n,{q:function(){return D},J:function(){return I}});var r=t(72006),i=t(4405),o=t(77637),a=t(2272),l=t(74985),c=t(66091),u=t(5683),s=t(45347),d=t(14806),f=t(69994),p=t(63230),h=f.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),v=f.p.line({attributes:{class:"cm-diff-inserted"}}),g=f.p.line({attributes:{class:"cm-diff-deleted"}}),m=d.Py.define({map:function(e,n){return e.map(n)}}),y=function(e){(0,u.Z)(t,e);var n=(0,s.Z)(t);function t(){return(0,c.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(f.l9);function Z(e){var n=new d.f_,t=new y;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,s=c.padding,p=0;p<s;p++)n.add(u,u,f.p.widget({widget:t,side:-1,block:!0}))}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function b(e){var n=e.coloredLines,t=e.colorDecoration,r=f.lg.fromClass((function e(r){(0,c.Z)(this,e);var i=new d.f_,o=!0,a=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var f=u.value,p=r.state.doc.line(f);i.add(p.from,p.from,t)}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=d.QQ.define({create:function(){return f.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(m))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.tk.decorations.from(e)}});return[h,r,i]}var w=function(){var e=function(e,n){return f.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new d.F6,t=new d.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},x=t(37313),k=t(64804),C=t(50959),S=t(6394),T=w(),E=T.extensions,R=T.setup;function I(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,s=(0,o.Z)(n,["code"]),f=t.code,h=(0,o.Z)(t,["code"]),y=(0,k.Z)(),w=y.ref,x=y.view,S=(0,k.Z)(),T=S.ref,I=S.view,D=C.useMemo((function(){var e=E().left;return s.extensions?[s.extensions,e]:e}),[s.extensions]),G=C.useMemo((function(){var e=E().right;return h.extensions?[h.extensions,e]:e}),[h.extensions]);s=(0,i.Z)((0,r.Z)({},s),{extensions:D}),h=(0,i.Z)((0,r.Z)({},h),{extensions:G});var P=(0,a.Z)(C.useState(!1),2),_=P[0],B=P[1],A=(0,a.Z)(C.useState(!1),2),U=A[0],L=A[1];return C.useEffect((function(){if(x&&I&&_&&U&&c){var e=setTimeout((function(){R(x,I),function(e,n){var t=(0,p.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:g})),m.of(Z(t.leftPadded))]}),n.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:v})),m.of(Z(t.rightPadded))]})}(x,I)}));return function(){return clearTimeout(e)}}}),[x,I,_,U,c]),C.useEffect((function(){x&&(x.dispatch({changes:{from:0,to:x.state.doc.length,insert:u}}),B(!0))}),[u,x]),C.useEffect((function(){I&&(I.dispatch({changes:{from:0,to:I.state.doc.length,insert:f}}),L(!0))}),[f,I]),{left:{view:x,ref:w,code:u,options:s,ready:_},right:{view:I,ref:T,code:f,options:h,ready:U}}}function D(e){var n=e.diffViewer,t=(0,o.Z)(e,["diffViewer"]),i=(0,r.Z)({},n.options,t);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(x.Z,(0,r.Z)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.tZ)(S.Z,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},63230:function(e,n,t){t.d(n,{Bz:function(){return v},PO:function(){return g}});var r=t(66091),i=t(2272),o=t(96583),a=t(85386),l=t.n(a),c=l().DIFF_DELETE,u=l().DIFF_INSERT,s=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,c=t.diff_main(i,o,!1);return t.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function p(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var r=e.indexOf("\n",t);return-1===r?null:1===n?r+1:p(e,n-1,r+1)}function h(e,n,t){if(e>0){var r=p(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function v(e,n){for(var t,r,o=d(e+((t="\n"===e[e.length-1])?"":"\n"),n+((r="\n"===n[n.length-1])?"":"\n")),a=0,l=0,p=[],v=[],g=[],m=[],y=0,Z=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],k=f(w[1]);switch(x){case c:var C,S=(0,i.Z)(null!==(C=o[b+1])&&void 0!==C?C:[],2),T=S[0],E=S[1];a+=k;for(var R=0;R<k;R++)p.push(a-R);var I=k;T===u&&(I-=f(E));var D=h(I,l,n);D&&m.push(D);break;case u:var G,P=(0,i.Z)(null!==(G=o[b-1])&&void 0!==G?G:[],2),_=P[0],B=P[1];l+=k;for(var A=0;A<k;A++)v.push(l-A);var U=k;_===c&&(U-=f(B));var L=h(U,a,e);L&&g.push(L);break;case s:l>Z&&(Z=l),a>y&&(y=a),a+=k,l+=k}}var N=g.filter((function(e){return e.lineNumber<Z})),X=m.filter((function(e){return e.lineNumber<y}));return{leftPadded:N,rightPadded:X,leftColored:p,rightColored:v,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var g=function(){function e(n,t){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,f=!1,p=void 0;try{for(var h,v=o[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var g=(0,i.Z)(h.value,2),m=g[0],y=g[1].split("\n");""===y[y.length-1]&&y.pop();var Z=!0,b=!1,w=void 0;try{for(var x,k=y[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value;a.push([m,C])}}catch(N){b=!0,w=N}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}catch(N){f=!0,p=N}finally{try{l||null==v.return||v.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([u,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([s,""]);var S=1,T=0,E=1,R=!0,I=!1,D=void 0;try{for(var G,P=a[Symbol.iterator]();!(R=(G=P.next()).done);R=!0){var _=(0,i.Z)(G.value,2),B=_[0],A=_[1];switch(B){case c:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),this.deleted.add(S),T+=A.length+1,S++;break;case u:var U=S-1,L=this.inserted.get(U);L||(L=[],this.inserted.set(U,L)),L.push({number:E,content:A}),E++;break;case s:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),T+=A.length+1,S++,E++}}}catch(N){I=!0,D=N}finally{try{R||null==P.return||P.return()}finally{if(I)throw D}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map((function(e){return e.content})).join("\n"):null},n.offsetFor=function(e){var n,t,r=0;r+=null!==(t=null===(n=this.inserted.get(0))||void 0===n?void 0:n.length)&&void 0!==t?t:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!==(n=this.linePositions.get(e))&&void 0!==n?n:null},n.lineLength=function(e){var n;return null!==(n=this.lineLengths.get(e))&&void 0!==n?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);return null===n||null===t?null:{number:e,from:n,to:n+t,length:t,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},n.lines=function(){var e,n,t,r,a,l,c,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(u=this.line(c)))throw new Error("line should not be null");return[4,u];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),n=!0,t=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},e}()},52276:function(e,n,t){t.d(n,{z:function(){return a}});var r=t(66091),i=t(96583),o=t(92111),a=function(){function e(n,t,i,o){(0,r.Z)(this,e),this.a=n,this.b=t,this.chunks=i,this.map=o}var n=e.prototype;return n.line=function(e,n){return n===o.MF.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,o.Cf)(this.chunks[0],e),t=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t){var r=this.b,i=(0,o.U_)(n,r,{chunks:this.chunks,changesA:t});return new e(n,r,i,(0,o.XW)(n,r,i))},n.updateB=function(n,t){var r=this.a,i=(0,o.U_)(r,n,{chunks:this.chunks,changesB:t});return new e(r,n,i,(0,o.XW)(r,n,i))},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,n);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===o.MF.A?-e:e);return t?this.line(t,(0,o.rN)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===o.MF.A?-e:e))return o.dQ.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,o.dx)(t,n,r.changes,r):o.dQ.UNCHANGED},n.iterLines=function(e){var n,t,r,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=e===o.MF.A?this.a:this.b,t=1,i.label=1;case 1:return t<=n.lines?(r=n.line(t),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},n.iterRanges=function(){var e,n,t,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,i.label=2;case 2:return r<this.chunks[e].changes.length?(o=this.chunks[e].changes[r],[4,{fromA:n+o.fromA,toA:n+o.toA,fromB:t+o.fromB,toB:t+o.toB}]):[3,5];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.create=function(n,t){var r=(0,o.U_)(n,t);return new e(n,t,r,(0,o.XW)(n,t,r))},e}()},33767:function(e,n,t){t.d(n,{y:function(){return u},m:function(){return s}});var r,i=t(14806),o=t(66091),a=t(96583),l=t(92111),c=function(){function e(n,t,r,i,a,l){(0,o.Z)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=a,this.ranges=l}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.original,a=this.chunks,c=this.desc,u=this.pending,s=this.ranges,d=this.pending?this.pending.length:this.current.length,f=Math.abs(d-n.length);if(f>=250||r){var p=(0,l.Gj)(c,u,t),h=p.pending;a=(0,l.U_)(o,n,{chunks:a,changesB:h}),c=(0,l.fu)(a,o.length),u=null,s=(0,l.Hu)(c)}else{var v;u=(v=(0,l.Gj)(c,u,t)).pending,c=v.desc,s=(0,l.Hu)(c)}return u&&n.eq(o)&&(a=[],c=i.as.empty(o.length),u=null,s=[]),new e(o,n,a,c,u,s)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?l.dQ.COVERED:(0,l.dx)(n,l.MF.B,this.ranges)},n.iterRanges=function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[5,(0,a.__values)(this.ranges)];case 1:return e.sent(),[2]}}))},e.create=function(n,t){var r=(0,l.U_)(n,t),i=(0,l.fu)(r,n.length);return new e(n,t,r,i,null,(0,l.Hu)(i))},e}(),u=i.r$.define({combine:function(e){return null!==(r=e.filter(Boolean)[0])&&void 0!==r?r:null}});var s=i.QQ.define({create:function(){return null},update:function(e,n){var t=n.state.facet(u);return t?(e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(n))):e=c.create(t,n.newDoc),e):null}})},88253:function(e,n,t){t.d(n,{U:function(){return l}});var r=t(69994),i=t(55143),o=r.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),a=r.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}}),l=new i.j((function(e){return e?o:a}))},16988:function(e,n,t){t.d(n,{v:function(){return p}});var r=t(28229),i=t(64918),o=t(5894),a=t(72006),l=t(43119),c=t(71440),u=t(24635);function s(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(){var e,n,t=(0,r.Z)().preferences,l=function(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}().data,c=null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride,s=null===t||void 0===t?void 0:t.chatEngine,p=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine;return c&&s&&(0,i.uL)(s)?s:(0,i.uL)(p)?p:o.Fp}},31858:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(28229),i=t(98416),o=t(72006),a=t(43119),l=t(71440),c=t(24635);function u(){var e=(0,a.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());function f(){var e,n,t,a=(0,r.Z)().preferences,l=function(e){var n=(0,o.Z)({},s,e);return c.a(d,n)}().data,u=null===a||void 0===a?void 0:a.completeCodeEngine;if(u&&(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride)&&i.vw.has(u))return{engine:u,settings:i.Uw[u]};var f=null!==(t=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==t?t:i.OO;return{engine:f,settings:i.Uw[f]}}},57866:function(e,n,t){t.d(n,{Z:function(){return Te}});var r=t(88733),i=t(73012),o=t(72006),a=t(11858),l=t(96583),c=t(45853),u=t(28229),s=t(48330),d=t(18171),f=t(49146),p=t(24746),h=t(45285),v=t(49520),g=t(50959),m=t(9608),y=t(66091),Z=t(57988),b=function e(n,t){(0,y.Z)(this,e),this.next=null,this.prev=null,this.key=n,this.data=t},w=function(){function e(){(0,y.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var n=e.prototype;return n.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},n.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},n.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,Z.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),x=function(){function e(n){(0,y.Z)(this,e),this.items=Object.create(null),this.evictList=new w,this.maxSize=n}var n=e.prototype;return n.update=function(e,n){var t=this.items[e];if(t)return this.evictList.moveToFront(t),t.data=n(t.data),t.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new b(e,n());return this.evictList.addFront(i),this.items[e]=i,i.data},n.getOrAdd=function(e,n){return this.update(e,(function(e){return null!==e&&void 0!==e?e:n}))},n.set=function(e,n){this.update(e,(function(){return n}))},n.get=function(e){var n=this.items[e];return n?n.data:null},n.has=function(e){return e in this.items},(0,Z.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}(),k=t(65210),C=function(){function e(){(0,y.Z)(this,e),this.cache=new x(k.vq)}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){return this.cache.get(e)},n.set=function(e,n){this.cache.set(e,n)},n.setSuggestion=function(e,n){this.cache.set(e,JSON.stringify({text:n})+"\n")},e}(),S=t(57135),T=t(4405),E=t(23398),R=t(68935),I=t(14806),D=t(69994),G=t(88254),P=t(45634),_=t(625);var B,A=t(86763),U=t.n(A),L=t(2272),N=t(74985),X=t(40675),F=t(45447),O=t(13233),M=t(11969),W=t(2041),H=t(39541),z=t(85368),V=t(61284),j=t(93658),q=function(e){var n=e.onClose,t=(0,O.Z)(),r=t.showNotice,i=t.hideMessage,o=(0,L.Z)(g.useState(!1),2),a=o[0],l=o[1];return(0,g.useEffect)((function(){var e=function(){l(!0),i(n)},n=r((0,N.BX)(z.G,{css:[H.l0.rowWithGap(4),H.l0.align.center],children:[(0,N.tZ)(j.Z,{}),(0,N.BX)(V.xv,{css:{fontSize:"calc(".concat(H.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":H.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,N.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(n){"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),e())},onClick:function(n){n.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:H.TV.accentPrimaryStrongest,fontWeight:H.TV.fontWeightRegular})}),[i,r,n]),(0,N.tZ)(F.b5,{children:(0,N.tZ)(W.u,{isOpen:a,onRequestClose:function(){l(!1)},children:(0,N.tZ)(X.Z,{setFeedbackFormOpen:l,feature:X.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(B||(B={}));var Y=t(24601),K=t(38353),$=t(36577),Q=t(57806);function J(e){var n=e.onComplete,t=e.onEscape,r=null,i=null;return D.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&n(o),t(o),!0}})}var ee=t(1468),ne=t(250);var te=t(49500);function re(e,n){var t=null,r=function(){};return{queue:function(i){t&&clearTimeout(t);var a=function(){(0,_.j)(_.U3.CODE_SUGGESTION_USED,(0,o.Z)({type:e},i))};t=setTimeout(a,n),r=a},flush:function(){t&&clearTimeout(t),r()},cancel:function(){t&&clearTimeout(t)}}}function ie(e){var n=e.language,t=e.infill,i=e.completeCode,a=e.decorations,c=e.logMetadata,u=e.newRendering,s=e.keybindings,d=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var n=new AbortController;return null===e||void 0===e||e.abort(),e=n,n.signal}}}(),f=re("suggestionPresented",500),p=re("suggestionCompletelyPresented",500),h=null,v=U()(function(){var e=(0,S.Z)((function(e){var a,u,s,v,g,m,y,Z,b,w,x,C,S,I,D,G,P,B,A,U;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(u=e.state,s=u.doc,v=u.selection,0===(g=v.main.head))return[2];if(m=s.sliceString(g-1,g),[";",")","}","]","{"].includes(m))return[2];if(!(y=s.sliceString(Math.max(0,g-k.ed),g))||y.length<k.jr)return[2];h=y.length,y=e.state.facet(R.c)+"\n"+y,Z=t?function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.split("\n"),r=0;r<t.length;r++){var i=t[r];if(i[0]&&i[0].match(/\S/))return n?t.slice(0,r).join("\n")+"\n":t.slice(0,r+1).join("\n")}return e}(s.sliceString(g),k.NX.has(n)):void 0,b=(0,$.i)(e.state)?k.Pz:k._7,w=null===(a=y.match(/[^\s]([ \t]+)$/))||void 0===a?void 0:a[1],l.label=1;case 1:l.trys.push([1,14,,15]),x=!0,C=!1,S=!1,l.label=2;case 2:l.trys.push([2,7,8,13]),D=(0,r.Z)(i({code:w?y.slice(0,-w.length):y,suffix:Z,maxTokens:b,signal:d.requestSignal()})),l.label=3;case 3:return[4,D.next()];case 4:if(!(C=!(G=l.sent()).done))return[3,6];if(P=G.value,B=P,"active"===(0,E.LR)(e.state))return d.abort(),[3,6];if(x&&w){if(!B.startsWith(w))return d.abort(),[3,6];B=B.slice(w.length)}x&&(ee.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),f.queue((0,T.Z)((0,o.Z)({},c),{prefixLength:h}))),e.dispatch({effects:x?Y.t8.of({code:B,language:n,infill:t}):Y.R3.of(B)}),x=!1,l.label=5;case 5:return C=!1,[3,3];case 6:return[3,13];case 7:return A=l.sent(),S=!0,I=A,[3,13];case 8:return l.trys.push([8,,11,12]),C&&null!=D.return?[4,D.return()]:[3,10];case 9:l.sent(),l.label=10;case 10:return[3,12];case 11:if(S)throw I;return[7];case 12:return[7];case 13:return!1!==x?(ee.c_.addBreadcrumb({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,_.j)(_.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,o.Z)({type:"suggestionNotPresented"},c),{reason:"noSuggestion"})),e.dispatch({effects:Y.t8.of(null)}),[2]):(ee.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),p.queue((0,T.Z)((0,o.Z)({},c),{prefixLength:h})),e.dispatch({effects:Y.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(U=l.sent())||void 0===U?void 0:U.name)?[2]:(ee.c_.withScope((function(e){e.setExtra("prefix",y),e.setExtra("maxTokens",b),e.setExtra("language",n),e.setExtra("selection-head",g),e.setExtra("previous-character",m),e.setExtras(c),e.setTag("ghostwriter",!0),ee.c_.captureException(U)})),te.error("CodeSuggestionExtension"),te.error(U),[3,15]);case 15:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),k.co),g=function(e){var n=function(){e.update((function(e){return e.delete("feedback")}))},t=function(){var t,r,i=(null!==(t=M.Z.get("ghostWriter.acceptance","number"))&&void 0!==t?t:0)+(null!==(r=M.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);k.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,N.tZ)(q,{onClose:n}))})):n()};return{recordAccept:function(){M.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()},recordReject:function(){M.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()}}}(a),m=function(e){var n=(0,K.$o)(e);if(n){var t=n.texts.reduce((function(e,n){return e+n.text.length}),0);return f.flush(),p.flush(),(0,_.j)(_.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,o.Z)({type:"suggestionAccepted"},c),{prefixLength:h,suggestionLength:t})),ee.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),g.recordAccept(),(0,E._B)(e),!0}return!1};return[I.Wl.high(D.$f.of([{key:(0,ne.cU)(s.acceptPrimaryCompletion),run:m},{key:(0,ne.cU)(s.cancelCompletion),run:function(e){return!!(0,K._n)(e)&&(d.abort(),f.flush(),p.flush(),(0,_.j)(_.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,o.Z)({type:"suggestionDismissed"},c),{prefixLength:h})),G.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),g.recordReject(),!0)}},{key:"Enter",run:K.gT}])),D.tk.domEventHandlers({blur:function(e,n){setTimeout((function(){n.dispatch({effects:Y.t8.of(null)})}),100),f.cancel(),p.cancel(),d.abort()}}),D.tk.updateListener.of((function(e){(0,P.j)(e,Y.he,(function(n){var t,r;n.value!==Q.z.Stop?(t=e.view,r=n.value,f.cancel(),p.cancel(),d.abort(),v(t),r===Q.z.Now&&v.flush()):(f.cancel(),p.cancel(),d.abort())}))})),(0,K.G0)(u),J({onComplete:m,onEscape:K._n})]}var oe=t(95851),ae=t(31858),le=t(88541),ce=t(87978);function ue(e,n,t){var r=(0,m.S)(n),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-t)).join("\n"),language:r,filePath:n}}var se=t(13716);function de(e,n,t){var r=(0,g.useState)([]),i=r[0],o=r[1],a=(0,g.useState)(!1),c=a[0],u=a[1];return(0,g.useEffect)((function(){e&&(u(!0),(0,S.Z)((function(){var r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,S.Z)((function(e){var r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,n(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),u(!1),o(r),[2]}}))}))())}),[e,t,n]),{cachedFiles:i,loading:c}}var fe={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},pe=["json"];function he(e,n){var t=e.toLowerCase(),r=n.toLowerCase();return t===r||(!!pe.includes(t)||!!fe[t]&&fe[t].includes(r))}function ve(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,le.P5)({controlName:"flag-ghostwriter-neighboring-context",logFlagToAnalytics:!1}),i=(0,se.Bx)(),o=(0,g.useState)(null),a=o[0],l=o[1];return(0,g.useEffect)((function(){l(r?i.filter((function(t){return he((0,m.S)(t),e)&&t!==n&&(0,ce.Mb)(t)})).slice(0,t):null)}),[e,n,r,t,i]),a}var ge=t(11796),me=t(82001),ye=t(52841),Ze=t(43119),be=t(71440),we=t(24635);function xe(){var e=(0,Ze.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return xe=function(){return e},e}var ke={},Ce=(0,be.Ps)(xe());function Se(){var e,n,t,r=function(e){var n=(0,o.Z)({},ke,e);return we.a(Ce,n)}().data;return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(n=e.userPowerUpsByType)||void 0===n?void 0:n.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&!(null===r||void 0===r||null===(t=r.currentUser)||void 0===t?void 0:t.hasKillswitch)}function Te(e){var n,t=e.filePath,y=e.view,Z=e.decorations,b=(0,s.Z)(),w=(0,m.S)(t),x=(0,u.Z)().preferences,T=(0,ae.Z)(),E=T.engine,R=T.settings,I=null!==(n=null===R||void 0===R?void 0:R.infill)&&void 0!==n&&n,D=(0,me.gf)(ye.CN.acceptPrimaryCompletion.id),P=(0,me.gf)(ye.CN.cancelCompletion.id),_=Se(),B=function(){var e=(0,h.Z)().presence,n=(0,p.Z)({presence:e});return!!(0,le.P5)({controlName:"flag-code-suggestion-multiplayer",logFlagToAnalytics:!1})||n.length<=1}(),A=(0,le.P5)({controlName:"flag-code-suggestion-markdown",logFlagToAnalytics:!1}),U="markdown"===w&&A,L=(0,le.P5)({controlName:"flag-gw-new-ghost-text",logFlagToAnalytics:!1}),N=(0,c.Z)({view:y}),X=(0,d.Z)((function(){return new C}),[w,t,b,E]);(0,g.useEffect)((function(){v.YX.toggle(Boolean(x.codeSuggestion))}),[x.codeSuggestion]);var F=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,h.Z)().fs,o=de(ve(e,n,r),(0,g.useCallback)((function(e,n){return ue(e,n,t)}),[t]),(0,g.useCallback)(function(){var e=(0,S.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.readFile(e)];case 1:return[2,n.sent()]}}))}));return function(n){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(w,t);(0,g.useEffect)((function(){if(y&&_&&B){if(x.codeSuggestion&&(k.PE.has(w)||U)){var e=function(){var e=(0,a.Z)((function(e){var n,c,u,s,d,p,h,g,m,y,Z,x,k,C,S,T,R,D,P,_,B,A,L,N,O,M,W,H,z,V,j,q;return(0,l.__generator)(this,(function(Y){switch(Y.label){case 0:return n=e.code,c=e.suffix,u=e.signal,s=e.maxTokens,n?(G.n_({category:"ghostwriter",message:"Called completeCode: "+E,level:"debug"}),d=f.kg.timeStart({language:w,engine:E,replid:b,codeLength:n.length}),p=U?{maxTokens:75,stop:[]}:{},h=(0,o.Z)({language:w,code:n,suffix:I?c:void 0,replId:b,filePath:t,engine:E,maxTokens:s,additionalContext:F,stop:["\n\n","```"]},p),g=v.YX.add(h),u.addEventListener("abort",(function(){v.YX.abort(g)})),null==(y=X.get(n))?[3,1]:(m=(0,a.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,y];case 1:return e.sent(),[2]}}))})),[3,5])):[2];case 1:return[4,(0,i.Z)(fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:u,body:JSON.stringify(h)}))];case 2:return Z=Y.sent(),x=Z.body,200===(k=Z.status)?[3,4]:(C=Error.bind,T=(S="Error (".concat(k,") response from /ai/complete: ")).concat,[4,(0,i.Z)(Z.text())]);case 3:throw new(C.apply(Error,[void 0,T.apply(S,[Y.sent()])]));case 4:if(!x)throw new Error("No body in response");m=function(){return(0,ge.n)(x)},Y.label=5;case 5:R="",D="",P=!0,_=!1,B=!1,A=!1,Y.label=6;case 6:Y.trys.push([6,14,15,20]),N=(0,r.Z)(m()),Y.label=7;case 7:return[4,(0,i.Z)(N.next())];case 8:if(!(B=!(O=Y.sent()).done))return[3,13];M=O.value,D+=M,W=void 0,Y.label=9;case 9:return-1===(W=D.indexOf("\n"))?[3,12]:(H=JSON.parse(D.substring(0,W)),z=H.text,D=D.substring(W+1),V=(0,oe.Hy)(z,w),j=V.replacementSuggestion,R+=j,_?[3,11]:[4,j]);case 10:Y.sent(),Y.label=11;case 11:return P&&(G.n_({category:"ghostwriter",message:"Suggestion emitted: "+j,level:"debug"}),d("code suggestion",{type:"success"}),P=!1),(0,oe.cx)(R).haltAfter&&(_=!0),[3,9];case 12:return B=!1,[3,7];case 13:return[3,20];case 14:return q=Y.sent(),A=!0,L=q,[3,20];case 15:return Y.trys.push([15,,18,19]),B&&null!=N.return?[4,N.return()]:[3,17];case 16:Y.sent(),Y.label=17;case 17:return[3,19];case 18:if(A)throw L;return[7];case 19:return[7];case 20:return R.trim().length&&!X.has(n)&&X.setSuggestion(n,R),_||!D?[3,22]:[4,D];case 21:Y.sent(),Y.label=22;case 22:return v.YX.complete(g,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:R}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),n={filePath:t,language:w,engine:E,additionalContextCount:F.length,additionalContextLength:F.reduce((function(e,n){return e+n.code.length}),0)};return y.dispatch({effects:N.reconfigure(ie({language:w,infill:I,completeCode:e,decorations:Z,logMetadata:n,newRendering:L,keybindings:{acceptPrimaryCompletion:D,cancelCompletion:P}}))}),function(){y.dispatch({effects:N.reconfigure([])})}}G.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[y,X,_,B,N,t,w,b,Z,E,x.codeSuggestion,I,F,D,P,U,L])}},7006:function(e,n,t){t.d(n,{B:function(){return r}});var r={author:"ghostwriter"}},69310:function(e,n,t){t.d(n,{Ut:function(){return ce},Ou:function(){return Ee},W2:function(){return Ie},x9:function(){return Te}});var r,i,o,a=t(57135),l=t(66091),c=t(96583),u=t(69994),s=t(14806),d=t(33767),f=t(57389),p=t(5683),h=t(45347),v=t(39541),g=v.TV.space2,m="cm-diff-gutter",y="".concat(m,"-element"),Z="".concat(y,"-insertion"),b="".concat(y,"-modified"),w="".concat(y,"-deleted"),x="".concat(y,"-file-added"),k=v.TV.greenDefault,C=v.TV.greenStronger,S=v.TV.blueDefault,T=v.TV.blueStronger,E=v.TV.redDefault,R=v.TV.redStronger,I=v.TV.greenDimmer,D=v.TV.greenDefault,G=u.tk.theme((r={},(0,f.Z)(r,".".concat(y),{width:g}),(0,f.Z)(r,".".concat(Z),{backgroundColor:k,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,f.Z)(r,".".concat(b),{backgroundColor:S,"&.cm-activeLineGutter":{backgroundColor:T}}),(0,f.Z)(r,".".concat(w),{backgroundColor:E,"&.cm-activeLineGutter":{backgroundColor:R}}),(0,f.Z)(r,".".concat(x),{backgroundColor:I,"&.cm-activeLineGutter":{backgroundColor:D}}),r)),P=new(function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;return(0,l.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(y," ").concat(Z),e}return t}(u.SJ)),_=new(function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;return(0,l.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(y," ").concat(w),e}return t}(u.SJ)),B=new(function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;return(0,l.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(y," ").concat(b),e}return t}(u.SJ)),A=new(function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;return(0,l.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(y," ").concat(x),e}return t}(u.SJ)),U=new(function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){return(0,l.Z)(this,t),n.apply(this,arguments)}return t}(u.SJ)),L=t(92111),N=(0,u.v5)({class:m,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(d.m,!1);if(!t||!t.hasChanges())return null;if(0===t.original.length)return A;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case L.dQ.COVERED:return P;case L.dQ.MODIFIED:return B;default:return null}},initialSpacer:function(e){return e.state.field(d.m,!1)?A:U},updateSpacer:function(e,n){var t=n.state.field(d.m,!1)?A:U;return e===t?e:t}}),X=s.r$.define({enables:function(e){return[d.y.computeN([e],(function(n){return n.facet(e)})),G,d.m,s.Wl.highest(N)]}}),F=t(57988),O=t(81962),M=t(68935),W=t(57600),H=t(52276),z=t(78194),V=s.r$.define({combine:function(e){return null!==(i=e.filter(Boolean)[0])&&void 0!==i?i:null}}),j=s.QQ.define({create:function(){return{diff:null,tree:W.mp.empty}},update:function(e,n){var t,r,i=n.state.facet(V),o=null===(t=n.state.facet(M.dK))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===W.mp.empty?e:{diff:null,tree:W.mp.empty};var a=e.diff,l=e.tree;return a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=H.z.create(i,n.newDoc),l=W.mp.empty),(null===(r=n.startState.facet(M.dK))||void 0===r?void 0:r.parser)!==o&&(l=W.mp.empty),o&&l.length!==a.a.length?{diff:a,tree:l=(0,z.p)({parser:o,text:a.a,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),q="cm-inline-diff-line-deletion-base",Y="cm-inline-diff-line-deletion",K="cm-inline-diff-text-deletion",$="cm-inline-diff-line-insertion-base",Q="cm-inline-diff-line-insertion",J="cm-inline-diff-text-insertion",ee="rgba(180, 0, 0, 0.075)",ne="rgba(180, 0, 0, 0.125)",te="rgba(0, 180, 0, 0.075)",re="rgba(0, 180, 0, 0.125)",ie="cm-inline-diff-marker",oe="cm-inline-diff-marker-left",ae="cm-inline-diff-marker-right";function le(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var ce,ue=u.tk.theme((o={},(0,f.Z)(o,".".concat(q,", .").concat(Y),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(v.TV.accentPrimaryDimmest," !important")}}),(0,f.Z)(o,".".concat(q),{background:le(ee)}),(0,f.Z)(o,".".concat(Y),{background:le(ee,ne)}),(0,f.Z)(o,".".concat($),{background:le(te)}),(0,f.Z)(o,".".concat(Q),{background:le(te,re)}),(0,f.Z)(o,".".concat(J),{display:"inline-block",background:re,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(re),paddingLeft:"3px",marginLeft:"-6px"}}),(0,f.Z)(o,".".concat(K),{display:"inline-block",background:ne,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(ne),paddingLeft:"3px",marginLeft:"-6px"}}),(0,f.Z)(o,".".concat(ie),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,f.Z)(o,".".concat(oe),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,f.Z)(o,".".concat(ae),{width:"50%",textAlign:"right"}),o)),se=t(18599),de=t(3341),fe=t.n(de),pe=function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(e,r,i){var o;return(0,l.Z)(this,t),(o=n.call(this)).line=e,o.index=r,o.changed=i,o}var r=t.prototype;return r.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(q):"cm-line ".concat(Y),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",n.appendChild(s)}}catch(C){r=!0,i=C}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,f=0,p=null,h=null,v=function(n,t){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,t-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",n.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var g=this.line[f].text;p={from:d,to:d+g.length}}if(!h){var m=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=K,h={from:x.from,to:x.to,dom:k},d<h.from&&v(n,h.from),n.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{m||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(n,p.to),d>=p.to&&(p=null,f++)}return n},r.eq=function(e){var n,r;return(0,O.Z)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null===(n=this.changed)||void 0===n?void 0:n.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&fe()(this.line,e.line)&&fe()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,F.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(u.l9),he=u.p.line({class:$}),ve=u.p.line({class:Q}),ge=u.p.mark({class:J}),me=u.tk.decorations.compute([j],(function(e){var n=function(e,n){if(r.getLineChangeType(e.number,L.MF.B)===L.dQ.COVERED)o.push(ve.range(e.from));else{o.push(he.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,c=(0,L.Po)(e,n,L.MF.B,!1)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;o.push(ge.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}}},t=e.field(j,!1);if(!t||!t.diff)return u.p.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,c=void 0;try{for(var s,d=r.chunks[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value;if(f.fromB!==f.endB)for(var p=r.b.lineAt(f.fromB),h=r.b.lineAt(f.endB),v=p.number;v<=h.number;v++)n(r.b.line(v),f);else f.fromA===f.endA&&n(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),m=(0,se.CT)(i,r.a,e,f.fromA,f.endA),y=0;y<m.length;y++){var Z=m[y],b=r.a.line(g.number+y),w=r.getLineChangeType(b.number,L.MF.A)===L.dQ.COVERED?null:(0,L.Po)(b,f,L.MF.A,!0),x=u.p.widget({widget:new pe(Z,b.number,w),block:!0,side:-(m.length-y)});o.push(x.range(f.fromB))}}}catch(k){l=!0,c=k}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return u.p.set(o,!0)})),ye=(0,u.v5)({class:m,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(j,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return P;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,L.MF.B)){case L.dQ.COVERED:case L.dQ.MODIFIED:return P;default:return null}},widgetMarker:function(e,n){if(!(0,O.Z)(n,pe))return null;var t=e.state.field(j,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,L.MF.A)){case L.dQ.COVERED:case L.dQ.MODIFIED:return _;default:return null}},initialSpacer:function(e){var n=e.state.field(j,!1);return(null===n||void 0===n?void 0:n.diff)?P:U},updateSpacer:function(e,n){var t=n.state.field(j,!1),r=(null===t||void 0===t?void 0:t.diff)?P:U;return e===r?e:r}}),Ze=t(96302),be=function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(e,r){var i;return(0,l.Z)(this,t),(i=n.call(this)).left=e,i.right=r,i}var r=t.prototype;return r.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=ie,r.className=oe,i.className=ae,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},r.eq=function(e){return(0,O.Z)(e,t)&&this.left===e.left&&this.right===e.right},t}(u.SJ),we=Ze.X4.of((function(e,n){if((0,O.Z)(n,pe))return new be(n.index,null)})),xe=Ze.gy.of((function(e,n){var t=e.state.field(j,!1);if(t&&t.diff&&t.diff.hasChanges()){var r,i=e.state.doc.lineAt(n.from),o=t.diff.getCorrespondingLine(i.number,L.MF.B);return new be(null!==(r=null===o||void 0===o?void 0:o.number)&&void 0!==r?r:null,i.number)}})),ke=[xe,we],Ce=s.r$.define({enables:function(e){return[V.computeN([e],(function(n){return n.facet(e)})),G,j,ue,me,ke,ye]}});!function(e){e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF"}(ce||(ce={}));var Se=s.Py.define(),Te=s.Py.define(),Ee=s.QQ.define({create:function(){return{head:null,mode:ce.GUTTER_DIFF}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(Se)?t=u.value:u.is(Te)&&(r=u.value)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[X.from(e,(function(e){return e.mode===ce.GUTTER_DIFF?e.head:null})),Ce.from(e,(function(e){return e.mode===ce.INLINE_DIFF?e.head:null}))]}}),Re=function(){function e(n,t,r){var i=this;(0,l.Z)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,a.Z)((function(){var n,t,r,i,o;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return n=a.sent(),e.disposed?[2]:(t=e.view.state.field(Ee,!1))?(i=n.error?null:null!==(r=n.content)&&void 0!==r?r:"",(!(o=null===i?null:e.view.state.toText(i))!==!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:Se.of(o)}),[2]):[2]}}))}))()},n.destroy=function(){this.dispose(),this.disposed=!0},e}();function Ie(e,n){if(!n)return[];var t=u.lg.define((function(t){return new Re(t,e,n)}));return[Ee,t]}},22917:function(e,n,t){t.d(n,{S:function(){return l},Z:function(){return c}});var r=t(50959),i=t(14806),o=t(45285),a=t(69994);function l(e){var n=e.view,t=e.line,r=e.col,o=n.state.doc,l=Math.max(1,Math.min(t,o.lines)),c=o.line(l),u=c.to,s=c.from,d=r||0,f=Math.min(s+d,u),p=i.jT.cursor(f);n.dispatch({selection:p,effects:[a.tk.scrollIntoView(f,{x:"center",y:"center"})]})}function c(e){var n=e.filePath,t=e.view,i=e.isLoading,a=e.deeplink,c=e.onDeeplinkUpdated,u=(0,o.Z)().session;r.useEffect((function(){if(t&&!i&&a){var e=a.line,n=a.col;void 0!==e&&(l({view:t,line:e,col:n}),c&&c())}}),[t,i,a,c]),r.useEffect((function(){if(t&&!i)return u.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===n&&i&&l({view:t,line:i,col:o})}))}),[u,t,n,i])}},90288:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(69994),i=t(14806),o=t(51697),a=t(50959);function l(e){var n=e.view,t=e.onUpdate,l=(0,a.useRef)(0);(0,o.M)((function(){return t?r.tk.updateListener.of((function(e){var n=!0,r=!1,o=void 0;try{for(var a,c=e.transactions[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value;if(!(l.current>0)&&(!u.annotation(i.YW.remote)&&(u.isUserEvent("input")||u.isUserEvent("delete"))))return void(t&&(l.current+=1,setTimeout(t)))}}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}})):null}),[t],n,"useDidUpdateOnce")}},51697:function(e,n,t){t.d(n,{M:function(){return c}});var r=t(9970),i=t(50959),o=t(94716),a=t(14806),l=t(70065);function c(e,n,t,c){var u=(0,i.useState)((function(){return new a.F6}))[0],s=(0,o.Z)(e);(0,i.useEffect)((function(){if(t){var e=s.current();if(e){var n=void 0===u.get(t.state)?a.Py.appendConfig.of(u.of(e)):u.reconfigure(e);try{t.dispatch({effects:n})}catch(r){throw l.Z.wrap(r).setExtras({callsiteForBSODs:c})}return function(){try{t.dispatch({effects:u.reconfigure([])})}catch(r){throw l.Z.wrap(r).setExtras({callsiteForBSODs:c})}}}}}),[t,u,s,c].concat((0,r.Z)(n)))}},42785:function(e,n,t){t.d(n,{EE:function(){return h},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return p},gm:function(){return d},yK:function(){return u}});var r=t(2272),i=t(56440),o=t(4385),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,n,t){var r=Number(e)+t.movementX;isNaN(r)||n(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,n){switch(e){case"true":return n("false");case"false":return n("true")}}};function c(e){var n=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),t=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:n,cursor:"move",onDrag:function(n,r,i){var o,a,l=t.exec(n),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),u=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(u)&&(u=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(u+i.movementY)))}}}var u=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function s(e){var n=new RegExp("".concat(e,"\\(.*\\)"),"g"),t=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:n,cursor:"pointer",onClick:function(n,o){var a,l,c,u=t.exec(n),s=Number(null===u||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.r),d=Number(null===u||void 0===u||null===(l=u.groups)||void 0===l?void 0:l.g),f=Number(null===u||void 0===u||null===(c=u.groups)||void 0===c?void 0:c.b),p=document.createElement("input");p.type="color",isNaN(s+d+f)||(p.value=(0,i.C)(s,d,f)),p.addEventListener("input",(function(n){var t=n.target;if(t.value){var a=(0,r.Z)((0,i.w)(t.value),3),l=a[0],c=a[1],u=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(u,")"))}})),p.click()}}}var d=s("rgb"),f=s("background"),p=s("fill"),h=s("stroke"),v={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},36900:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(2272),i=t(9970),o=t(74985),a=t(48306),l=t.n(a),c=t(50959),u=t(2187),s=t(85368),d=t(39541),f=t(76328),p=t(67543),h=t(74376),v=t(86763),g=t.n(v),m=t(56997),y=t(74121),Z=t(95245),b=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,o.BX)("nav",{className:"jsx-43582faf24448cbd",children:[n.map((function(e){return(0,o.tZ)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,o.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,o.tZ)(f.Z,{})}),(0,o.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,o.tZ)(p.Z,{})}),(0,o.tZ)(l(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},w=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],x=function(e){var n=e.path,t=(0,i.Z)(w).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},k="visualViewport"in window;function C(e){var n=e.filePath,t=e.isLoading,i=(0,y.uN)(),a=(0,Z.d)({tablet:!1}),l=(0,u.Z)();c.useEffect((function(){l&&i&&i.requestMeasure({read:function(){return{cursor:i.coordsAtPos(i.state.selection.main.head),scroller:i.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var r=(n.top+n.bottom)/2,o=(t.top+t.bottom)/2;Math.abs(r-o)>5&&(i.scrollDOM.scrollTop+=r-o+(m.gn?50:0))}}})}),[l,i]);var f=(0,r.Z)(c.useState(0),2),p=f[0],v=f[1];if(c.useEffect((function(){if(m.gn){var e=window.visualViewport;if(k&&e){var n=g()((function(){v(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}}),[]),!l||t)return null;if(!a)return null;var w=(0,o.tZ)(b,{onUndo:function(){i&&((0,h.Yw)(i),i.focus())},onRedo:function(){i&&((0,h.KX)(i),i.focus())},onClick:function(e){if(i){var n,t=null!==(n=i.state.selection.ranges[0].from)&&void 0!==n?n:0;i.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),i.focus()}},buttons:x({path:n})});return!m.gn||k?(0,o.tZ)(s.G,{css:[d.l0.position.fixed,d.l0.width("100%"),d.l0.zIndex(100),d.l0.bottom(p),d.l0.left(0)],children:w}):w}},42864:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(68935);function i(e){var n=e.facet(r.dK);return null===n||void 0===n?void 0:n.name}},49129:function(e,n,t){t.d(n,{Iq:function(){return s},Lh:function(){return u}});var r=t(2272),i=t(74985),o=t(50959),a=t(35981),l=t(73872),c=t(18171);t(21449),t(6955);function u(){var e=o.useRef((0,a.u)(new Map)).current,n=o.useCallback((function(n){var t=new Map(e.current);n(t),e.current=t}),[e]),t=o.useCallback((function(){e.current=new Map}),[e]);return(0,c.Z)((function(){return{observable:e,update:n,unmount:t}}),[n,e,t])}var s=function(e){var n=e.source,t=(0,l.Z)(n);return(0,i.tZ)(i.HY,{children:Array.from(t,(function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,i.tZ)(o.Fragment,{children:a},t)}))})}},17077:function(e,n,t){t.d(n,{A:function(){return f},e:function(){return v}});var r=t(57135),i=t(96583),o=t(14806),a=t(69994),l=t(12290),c=t(45634),u=t(4653),s=t(51697),d=o.Py.define(),f=o.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,c.j)(n,d,(function(e){t=e.value})),t}});function p(e,n){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e,n){var t,r,o,a,l,c,u,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.request.documentSymbol(n)];case 1:if(!(t=i.sent())||t.cancelled)return[2,null];if(!(r="result"in t&&!t.cancelled?t.result:null))return[2,null];o=[],a=!0,l=!1,c=void 0;try{for(u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)(d=s.value)&&"range"in d&&o.push(d)}catch(f){l=!0,c=f}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[2,o.length?o:null]}}))}))).apply(this,arguments)}function v(e){var n=e.view,t=e.filePath,o=e.lspClient;(0,s.M)((function(){if(!n||!t||!o)return null;if(!(0,u.Z)(o).isDocumentSymbolSupported)return null;var e=(0,l.Z)((0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,p(o,t)];case 1:return e=r.sent(),n.dispatch({effects:d.of(e)}),[2]}}))})),{wait:200}),c=a.tk.updateListener.of((function(n){n.docChanged&&e()}));return e(),[c,f]}),[n,t,o],n,"useDocumentSymbols")}},42685:function(e,n,t){t.d(n,{Fq:function(){return s},_c:function(){return d},wB:function(){return f}});var r=t(81962),i=t(28814),o=t(69994),a=t(85577),l=t(1468),c=t(53028),u=t(7225);function s(e){var n=e.lspClient,t=e.path,s=e.askGhostwriter;return[o.lg.define((function(e){var n=function(e){var n=e.target;(0,r.Z)(n,HTMLElement)&&n.classList.contains("cm-diagnosticAction")&&e.stopPropagation()};return e.dom.addEventListener("mousedown",n),{destroy:function(){e.dom.removeEventListener("mousedown",n)}}})),o.lg.define((function(e){var r=n.onDiagnostics((function(n){if(n.path===t){var r=function(e,n,t){var r=[],i=!0,o=!1,s=void 0;try{for(var d,f=function(){var e=d.value,i=(0,a.R)(n.doc,e.range.start),o=(0,a.R)(n.doc,e.range.end);if(i===o){var s=n.wordAt(o);if(s)i=s.from,o=s.to;else if(o<n.doc.length)o+=1;else{if(!(i>0))return"continue";i-=1}}if(i>=o)return l.c_.withScope((function(n){n.setExtra("diagnostic",JSON.stringify(e)),n.setExtra("range",{from:i,to:o}),l.c_.captureException(new Error("Expected diagnostic range to not be empty"))})),"continue";var f="info";switch(e.severity){case u.DiagnosticSeverity.Error:f="error";break;case u.DiagnosticSeverity.Warning:f="warning";break;case u.DiagnosticSeverity.Hint:case u.DiagnosticSeverity.Information:f="info"}var p=[];t&&p.push({name:"\ud83d\udd2e Debug",apply:function(){return t({text:(0,c.Vh)(e.message,"lsp"),type:"debugger",errorType:"lsp"})}}),r.push({from:i,to:o,severity:f,message:e.message,source:e.source,actions:p})},p=e[Symbol.iterator]();!(i=(d=p.next()).done);i=!0)f()}catch(v){o=!0,s=v}finally{try{i||null==p.return||p.return()}finally{if(o)throw s}}var h={error:1,warning:2,info:3,hint:4};return r.sort((function(e,n){return h[n.severity]-h[e.severity]}))}(n.diagnostics,e.state,s);e.dispatch((0,i.p0)(e.state,r))}}));return{destroy:function(){r()}}}))]}function d(e){return(0,i.p0)(e,[])}function f(){return[o.tk.updateListener.of((function(e){e.docChanged&&(0,i.KS)(e.state)>0&&e.view.dispatch(d(e.startState))}))]}},19204:function(e,n,t){t.d(n,{B:function(){return m},j:function(){return Z}});var r=t(57135),i=t(2272),o=t(96583),a=t(85577),l=t(42256),c=t(4653),u=t(69994),s=t(951),d=t(9951),f=t(49146),p=t(42864),h=t(22917),v=t(87042),g={current:null};function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r,l,u,m,y,Z,b,w,x,k,C,S,T,E,R,I;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.offset,t=e.lspClient,r=e.openFile,l=e.view,u=e.newPane,(m=l.state.facet(s.Yp))?(0,c.Z)(t).isFindDefinitionSupported?(g.current&&t.notify.cancelRequest(g.current),g.current=t.generateId(),y=(0,a.s)(l.state.doc,n),Z=setTimeout((function(){var e;g.current&&t.notify.cancelRequest(g.current);var r=null!==(e=(0,p.Z)(l.state))&&void 0!==e?e:"unknown";f.kg.warn("Timed out looking for definition",{filePath:m,offset:n,language:r}),(0,d.J)(l,{message:"Timed out looking for your definition. Try again",offset:n})}),12e3),[4,t.request.findDefinitions(m,y,{id:g.current,tap:function(e){return(0,v.SC)(l,e)}})]):[2]:[2];case 1:if(b=o.sent(),clearTimeout(Z),g.current=null,"error"in b)throw new Error("Something went wrong fetching definition location: ".concat(b.error.message));return w=b.result,b.cancelled?[2]:w&&0!==w.length?(x=(0,i.Z)(w,1),k=x[0],C=k.uri,S=k.range,T=S.start,E=t.documentUriToPath(C),R=T.line+1,I=T.character,E!==m||u?(r({path:E,line:R,col:I,newPane:u,newPaneEdge:"right"}),[2]):((0,h.S)({view:l,line:R,col:I}),l.focus(),[2])):((0,d.J)(l,{message:"No definition found",offset:n}),[2])}}))}))).apply(this,arguments)}function Z(e){var n=e.lspClient,t=e.openFile;return u.tk.domEventHandlers({click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,l.j)(e)){var o=e.clientX,a=e.clientY,c=r.posAtCoords({x:o,y:a});if(null!==c){var u=e.altKey;return m({offset:c,lspClient:n,openFile:t,view:r,newPane:u}),!1}}}})}},21449:function(e,n,t){t.d(n,{w:function(){return L},h:function(){return U}});var r,i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(9970),u=t(96583),s=t(74985),d=t(14806),f=t(69994),p=t(85577),h=t(4653),v=t(57389),g=t(77637),m=t(40871),y=t(93970),Z=t(99964),b=t(61284),w=t(39541),x=t(85368),k=t(64491),C=t(45285),S=t(27522),T=t(80336),E=t(32104),R=t(50959),I=t(10422);function D(e){var n=e.dom,t=(0,g.Z)(e,["dom"]);return I.createPortal((0,s.tZ)(P,(0,o.Z)({},t)),n)}function G(e){var n=e.matchesMap,t=e.fileToContents,i=e.type,o=e.onClose,a=e.jumpToPosition,c=Object.keys(n);if(0===c.length){var u=i===r.REFERENCES?"No references found":"No definitions found";return(0,s.tZ)(b.xv,{color:"dimmer",css:[w.l0.pl(8),w.l0.py(8)],children:u})}return(0,s.tZ)(x.G,{children:c.map((function(e){var r=n[e],i=t[e],u=(0,m.Z)(r,i);return(0,s.tZ)(x.G,{css:[w.l0.p(4)],children:(0,s.tZ)(y.V,{path:e,extensions:[u],doc:i,numMatches:r.length,initiallyExpanded:1===c.length,onNavigateToCode:function(n){if(null!==n)a({path:e,line:n.line+1,col:n.character});else{var t=(0,l.Z)(r,1)[0],c=i.lineAt(t.from),u=t.from-c.from;a({path:e,line:c.number,col:u})}o()}})},e)}))})}function P(e){var n=e.files,t=e.onClose,a=e.references,f=e.definitions,p=e.currentFile,h=e.currentFileContents,g=e.jumpToPosition,m=function(e,n){if(!I)throw new Error("Expected LSP Client");var t=I.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;t in n||(n[t]=[]);var a=_[t],l=a.line(i.line+1),c=a.line(o.line+1);n[t].push({from:l.from+i.character,to:c.from+o.character})},y=(0,C.Z)().fs,I=(0,k.Z)(p),D=(0,Z.Z)(t,[]),P=(0,l.Z)(R.useState((0,v.Z)({},p,d.xv.of(h.split("\n")))),2),_=P[0],B=P[1];R.useEffect((function(){if(n.length){var e=!1;return function(){t.apply(this,arguments)}(),function(){e=!0}}function t(){return t=(0,i.Z)((function(){var t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t={},[4,Promise.all(n.map(function(){var e=(0,i.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,y.readFile(e)];case 1:if((n=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=d.xv.of(n.content.toString().split("\n")),[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(B((function(e){return(0,o.Z)({},e,t)})),[2])}}))})),t.apply(this,arguments)}}),[y,n]);var A=(0,c.Z)(a).concat((0,c.Z)(f));if(!I||A.some((function(e){return!(I.documentUriToPath(e.uri)in _)})))return(0,s.tZ)(x.G,{style:{width:w.TV.space128,height:w.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.tZ)(E.Z,{size:32})});var U={},L={};return a.forEach((function(e){m(e,U)})),f.forEach((function(e){m(e,L)})),(0,s.BX)(x.G,{innerRef:D,css:[w.l0.minWidth("375px"),w.l0.maxWidth("500px"),w.l0.pt(4),w.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,s.tZ)(x.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.BX)(x.G,{css:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.align.center,w.l0.pr(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"Definitions"}),(0,s.tZ)(S.Z,{filled:!1,border:!1,onClick:t,children:(0,s.tZ)(T.Z,{})})]}),(0,s.tZ)(G,{matchesMap:L,fileToContents:_,type:r.DEFINITION,onClose:t,currentFile:p,jumpToPosition:g})]})}),(0,s.tZ)(x.G,{children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"References"}),(0,s.tZ)(G,{matchesMap:U,fileToContents:_,type:r.REFERENCES,onClose:t,currentFile:p,jumpToPosition:g})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(r||(r={}));var _=t(9951),B=t(22917),A=t(87042),U=d.Py.define();function L(e){var n=e.setDecoration,t=e.lspClient,r=e.path,v=e.openFile,g=d.Py.define(),m=d.Py.define(),y=f.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var n,i,o,a,s,d,f,v,y,Z,b,w,x,k,C,S,T,E,R,I,D,G,P,B,L,N,X,F,O,M,W;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:n=null,i=!0,o=!1,a=void 0;try{for(s=e.transactions[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){f=d.value,v=!0,y=!1,Z=void 0;try{for(b=f.effects[Symbol.iterator]();!(v=(w=b.next()).done);v=!0)(x=w.value).is(U)&&(n=x.value)}catch(H){y=!0,Z=H}finally{try{v||null==b.return||b.return()}finally{if(y)throw Z}}}}catch(H){o=!0,a=H}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n?(k=(0,h.Z)(t),C=e.state.doc,S=(0,p.s)(C,n),T=Promise.all([k.isFindReferencesSupported?t.request.findReferences(r,S,{includeDeclaration:!1}):{result:null},k.isFindDefinitionSupported?t.request.findDefinitions(r,S):{result:null}]),(0,A.SC)(e.view,T),[4,T]):[2];case 1:if(E=l.Z.apply(void 0,[u.sent(),2]),R=E[0],I=E[1],"error"in R)throw new Error("Something went wrong fetching references: ".concat(R.error.message));if("error"in I)throw new Error("Something went wrong fetching definition: ".concat(I.error.message));return D=R.result,G=I.result,P=D&&D.length>0,B=G&&G.length>0,P||B?(L=[],N=[],D&&D.length>0&&(X=L).push.apply(X,(0,c.Z)(D)),G&&G.length>0&&(F=N).push.apply(F,(0,c.Z)(G)),O=(0,c.Z)(L).concat((0,c.Z)(N)).map((function(e){return t.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),M=(0,c.Z)(new Set(O)),W=C.toJSON().join("\n"),e.view.dispatch({effects:g.of({references:L,definitions:N,currentFile:r,currentFileContents:W,files:M})}),[2]):((0,_.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:m.of(null)}),[2])}}))}));return function(n){return e.apply(this,arguments)}}());return[y,d.QQ.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(g)&&(t=c.value),c.is(m)&&(t=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return f.hJ.compute([e],(function(t){var i=t.field(e);if(!i)return n(null),null;var l=t.selection.asSingle().main;return{pos:l.from,end:l.to,create:function(e){var t=document.createElement("div");return t.classList.add("cm-lsp-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0",n((0,s.tZ)(D,(0,a.Z)((0,o.Z)({},i),{onClose:function(){e.dispatch({effects:m.of(null)})},dom:t,jumpToPosition:function(n){if(n.path===r){var t=n.line,i=n.col;(0,B.S)({view:e,line:t,col:i})}else v(n)}}))),{dom:t}}}}))}})]}},6955:function(e,n,t){t.d(n,{J:function(){return k},n:function(){return x}});var r=t(74985),i=t(14806),o=t(69994),a=t(72006),l=t(77637),c=t(50959),u=t(10422),s=t(39541),d=t(85368),f=t(99964),p=t(94971),h=t(12318),v=t(45510),g=t(87076),m=t(61284),y=t(80336),Z=t(63837);function b(e){var n=e.dom,t=(0,l.Z)(e,["dom"]);return u.createPortal((0,r.tZ)(w,(0,a.Z)({},t)),n)}function w(e){var n=e.onRename,t=e.closeInput,i=e.variable,o=(0,f.Z)(t,[]),a=c.useRef(null),l=(0,h.Y)(i,(function(e){return e?e===i?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return c.useEffect((function(){var e=function(e){"Escape"===e.key&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),(0,r.tZ)(d.G,{innerRef:o,css:[s.l0.flex.column,s.l0.justify.center,s.l0.borderRadius(4),s.l0.shadow(2),s.l0.width(200)],children:(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),l.error||(t(),n(l.value))},children:(0,r.BX)(d.G,{css:[s.l0.justify.center],children:[(0,r.BX)(d.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.pr(4)],children:[(0,r.tZ)(m.h4,{level:2,variant:"subheadDefault",css:[s.l0.p(4),s.l0.pl(8)],children:"Rename"}),(0,r.tZ)(m.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[s.l0.maxWidth(100),s.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:i}),(0,r.tZ)(g.h,{alt:"Close rename input",tooltipHidden:!0,onClick:t,css:[s.l0.position.absolute,s.l0.top(4),s.l0.right(4)],children:(0,r.tZ)(y.Z,{})})]}),(0,r.tZ)(d.G,{css:[s.l0.justify.center,s.l0.align.center,s.l0.p(8),s.l0.pt(4)],children:(0,r.tZ)(p.ZP,{name:"rename",ref:a,onBlur:l.handleBlur,onChange:function(e){return l.setValue(e.target.value)},value:l.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,style:{padding:s.TV.space4,borderRadius:s.TV.borderRadius4}})}),(0,r.tZ)(d.G,{css:[s.l0.flex.rowReverse,s.l0.p(8),s.l0.pt(0)],children:(0,r.tZ)(v.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,r.tZ)(Z.Z,{}),disabled:Boolean(l.error)||!l.value})})]})})})}var x=i.Py.define();function k(e){var n=e.setDecoration,t=e.hook;return i.QQ.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(x)&&(t=c.value)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return o.hJ.compute([e],(function(i){var o=i.field(e);if(null===o)return n(null),null;if(o>i.doc.length)return null;var a=i.wordAt(o);return a?{pos:o,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var l=i.sliceDoc(a.from,a.to);return n((0,r.tZ)(b,{variable:l,dom:e,onRename:function(e){return t.onRename(e,o)},closeInput:t.closeRenameInput})),{dom:e}}}:null}))}})}},57530:function(e,n,t){t.d(n,{sn:function(){return yn},hI:function(){return un.h},nD:function(){return sn.n}});var r=t(4653),i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(96583),u=t(74985),s=t(50959),d=t(10422),f=t(86763),p=t.n(f),h=t(14806),v=t(23398),g=t(69994),m=t(85577),y=t(39541),Z=t(47581),b=t(45634),w=t(85368),x=t(61284),k=t(47900),C=t(7225),S=t(34979),T={p:{padding:"".concat(y.TV.space2," ").concat(y.TV.space8),lineHeight:1.4,marginBottom:"".concat(y.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(y.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(y.TV.space4," !important")},pre:{margin:"".concat(y.TV.space2," ").concat(y.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(y.TV.outlineDimmest),paddingTop:y.TV.space4},"h1, h2, h3":{margin:"".concat(y.TV.space8," !important"),marginTop:"".concat(y.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(y.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(y.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(y.TV.space4," !important")},hr:{margin:"".concat(y.TV.space8," !important"),borderTop:"2px solid ".concat(y.TV.backgroundHighest," !important")},li:{margin:"".concat(y.TV.space2," ").concat(y.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(y.TV.backgroundHighest),marginBottom:y.TV.space4},".cm-line":{paddingLeft:y.TV.space4,paddingRight:y.TV.space4},".cm-content":{paddingLeft:y.TV.space4,paddingRight:y.TV.space4}},E=s.memo((function(e){var n=e.content,t=e.className;return(0,u.tZ)(w.G,{css:T,children:(0,u.tZ)(k.ZP,{className:t,components:{code:function(e){return(0,u.tZ)(S.Z,(0,o.Z)({minimal:!0,disableCopy:!0},e))}},children:n})})}));function R(e){var n=e.content,t=e.className;return"string"===typeof n?(0,u.tZ)(E,{css:[{p:{whiteSpace:"pre-wrap"}}],className:t,content:n}):n.kind===C.MarkupKind.PlainText?(0,u.tZ)(w.G,{children:(0,u.tZ)(x.xv,{className:t,multiline:!0,children:n.value})}):(0,u.tZ)(E,{className:t,content:n.value})}var I=(0,Z.B)(),D=h.Py.define(),G=h.QQ.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type"))return e;if(n.changes.empty)return e;var t="";return n.changes.iterChanges((function(e,n,r,i,o){t=o.sliceString(0,1)})),t||null}});function P(e){var n=e.lspClient,t=e.path,r=e.setDecoration,l=function(e){return d.createPortal((0,u.tZ)(_,(0,o.Z)({},e)),f)},s=function(e,n){var t=e.state.field(I.state,!1);return"active"!==(0,v.LR)(e.state)&&(null!=t&&("navigate"!==n||t.signatures.length>1))},f=document.createElement("div"),m={};function y(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((function(e,r){var i,o,a,l,u,s,d;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(l=(null===(i=n.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(u=e.field(w,!1),s=e.field(G,!1),u||null!=s&&l.includes(s)?[4,A(e,r,n,t)]:[2,null]):[2,null];case 1:return(null===(d=c.sent())||void 0===d||null===(a=d.signatures)||void 0===a?void 0:a.length)?[2,d]:[2,null]}}))}))).apply(this,arguments)}var w=h.QQ.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,a.Z)((0,o.Z)({},e),{pos:n.newSelection.main.from})),(0,b.j)(n,I.effect,(function(t){var i=t.value;e=i?{pos:n.newSelection.main.from,create:function(){return function(e){var n=0,t=function(t){r((0,u.tZ)(l,{help:e,index:n,onLayout:t}))};return t(),m.dom=f,m.update=function(r){(0,b.j)(r,D,(function(i){var o=n+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:I.effect.of(null)})})):n=o,t((function(){(0,g.E2)(r.view)}))}))},m}(i)},above:!0}:null})),e)},provide:function(e){return g.hJ.from(e)}}),x=g.lg.define((function(){var e=p()(function(){var e=(0,i.Z)((function(e){var n,t,r;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return(n=e.state.selection.main).empty?(t=e.state.field(I.state,!1),[4,y(e.state,n.from)]):[3,2];case 1:(r=i.sent())&&!t&&(0,v._B)(e),e.dispatch({effects:I.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),0);return{update:function(n){n.transactions.some((function(e){return e.selection}))&&n.state.selection.main.empty&&e(n.view)}}})),k=function(e){return function(n){return!!s(n,"navigate")&&(n.dispatch({effects:D.of(e)}),!0)}},C=[{key:"ArrowDown",run:k(1)},{key:"ArrowUp",run:k(-1)},{key:"Escape",run:function(e){return!!s(e,"dismiss")&&(e.dispatch({effects:I.effect.of(null)}),!0)}}];return[w,I.state,G,x,h.Wl.high(g.$f.of(C))]}var _=function(e){var n,t,r=e.help,i=e.index,o=e.onLayout,a="1px solid ".concat(y.TV.outlineDimmer),l="min(425px, 80vw)";s.useLayoutEffect((function(){return null===o||void 0===o?void 0:o()}),[o]);var c=r.signatures[i],d=r.signatures.length>1;if(!c)return null;var f=c.documentation,p=null!=r.activeParameter&&(null===(n=c.parameters)||void 0===n||null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,u.BX)(w.G,{css:[y.l0.flex.row,y.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[d?(0,u.tZ)(w.G,{css:[y.l0.flex.row,y.l0.pl(4),{borderRight:a,paddingBottom:5}],children:(0,u.BX)("span",{css:[{alignSelf:"flex-end"},y.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,u.BX)(w.G,{children:[(0,u.tZ)(w.G,{css:[y.l0.py(4),y.l0.pl(d?4:8),y.l0.pr(8),y.l0.maxHeight(100),y.l0.overflowY("scroll"),y.l0.font.code,{lineHeight:y.TV.lineHeightSmall,maxWidth:l}],children:(0,u.tZ)(B,{signature:c,activeParameter:r.activeParameter})}),Boolean(f||p)&&(0,u.BX)(w.G,{css:[y.l0.px(d?4:8),y.l0.py(2),y.l0.maxHeight(200),y.l0.overflow("scroll"),{borderTop:a,maxWidth:l}],children:[p?(0,u.tZ)(R,{content:p}):null,f?(0,u.tZ)(R,{content:f}):null]})]})]})};function B(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,u.tZ)("span",{children:r});var a=null===(n=i[o])||void 0===n?void 0:n.label;if(!a)return(0,u.tZ)("span",{children:r});var c=(0,l.Z)("string"===typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=c[0],d=c[1];return(0,u.BX)("div",{children:[(0,u.tZ)("span",{children:r.slice(0,s)}),(0,u.tZ)("strong",{children:a}),(0,u.tZ)("span",{children:r.slice(d)})]})}function A(e,n,t,r){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)((function(e,n,t,r){var i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.request.signatureHelp(r,(0,m.s)(e.doc,n))];case 1:return"error"in(i=o.sent())?[2,null]:[2,i.result]}}))}))).apply(this,arguments)}var L=t(9970),N=t(99127),X=t(92674),F=t.n(X),O=t(67745),M=new Map;function W(e){var n=e.lspClient,t=e.path,r=e.view,i=F().v4();return function(){var e,o=null!==(e=M.get(t))&&void 0!==e?e:[];M.set(t,(0,L.Z)(o).concat([i])),n.notify.didOpen(t,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=M.get(t))&&void 0!==e?e:[]).filter((function(e){return e!==i}));n.getServerState()===O.a.INITIALIZED&&n.isOpen(t)&&n.notify.didClose(t),0===r.length?M.delete(t):M.set(t,r)},update:function(e){var r;if(function(){var e;return(null!==(e=M.get(t))&&void 0!==e?e:[])[0]===i}()&&e.docChanged){var o=null===(r=n.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==N.TextDocumentSyncKind.None&&n.isOpen(t))if(o!==N.TextDocumentSyncKind.Full)n.notify.didChange(t,function(e,n){var t=[],r=n;return e.iterChanges((function(e,n,i,o,a){var l=a.sliceString(0),c=n-e,u=c+i;t.push({range:{start:(0,m.s)(r,i),end:(0,m.s)(r,u)},rangeLength:c,text:l}),r=r.replace(i,u,a)})),t}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();n.notify.didChange(t,[{text:a}])}}}}}function H(e){var n=e.lspClient,t=e.path;return g.lg.define((function(e){return W({lspClient:n,path:t,view:e})}))}var z,V,j=t(42685),q=t(57389),Y=t(44478),K=t(48960),$=t(66091),Q=t(5683),J=t(77637),ee=t(45347),ne=t(68935),te=t(57988),re=t(98539),ie=t(7742),oe=t(81962);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(z||(z={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(V||(V={}));var ae,le=function(){function e(){(0,$.Z)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"===typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do{r+=1,i=this.value.charCodeAt(t+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do{i=this.value.charCodeAt(t+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do{r+=1,i=this.value.charCodeAt(t+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();le._table=(ae={},(0,q.Z)(ae,36,0),(0,q.Z)(ae,58,1),(0,q.Z)(ae,44,2),(0,q.Z)(ae,123,3),(0,q.Z)(ae,125,4),(0,q.Z)(ae,92,5),(0,q.Z)(ae,47,6),(0,q.Z)(ae,124,7),(0,q.Z)(ae,43,11),(0,q.Z)(ae,45,12),(0,q.Z)(ae,63,13),ae);var ce=function(){function e(){var n;(0,$.Z)(this,e),this._children=[],n=this,["parent"].forEach((function(e){Object.defineProperty(n,e,{enumerable:!1,writable:!0})}))}var n=e.prototype;return n.appendChild=function(e){return(0,oe.Z)(e,ue)&&(0,oe.Z)(this._children[this._children.length-1],ue)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t,r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);(t=o).splice.apply(t,[i,1].concat((0,L.Z)(n))),r._children=o,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=t,e(c.children,c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,r)},n.toString=function(){return this.children.reduce((function(e,n){return e+n.toString()}),"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(Ze)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,l.Z)(i.value,2),c=a[0],u=a[1];if((0,oe.Z)(this,u)&&c in e)return e[c](this)}}catch(s){t=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,te.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,oe.Z)(e,me))return e;e=e.parent}}}]),e}(),ue=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,$.Z)(this,t),(r=n.call(this)).value=e,r}var r=t.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return t.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new t(this.value)},t.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},t}(ce),se=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,$.Z)(this,t),n.apply(this,arguments)}return t}(ce),de=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,$.Z)(this,t),(r=n.call(this)).index=e,r}var r=t.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t.compareByIndex=function(e,n){return e.index===n.index?0:e.isFinalTabstop?1:n.isFinalTabstop||e.index<n.index?-1:e.index>n.index?1:0},(0,te.Z)(t,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,oe.Z)(this._children[0],fe)?this._children[0]:void 0}}]),t}(se),fe=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){var e;return(0,$.Z)(this,t),(e=n.apply(this,arguments)).options=[],e}var r=t.prototype;return r.appendChild=function(e){return(0,oe.Z)(e,ue)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new t;return this.options.forEach(e.appendChild,e),e},t}(ce),pe=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){var e;return(0,$.Z)(this,t),(e=n.apply(this,arguments)).regexp=new RegExp(""),e}var r=t.prototype;return r.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))}));return!t&&this._children.some((function(e){return(0,oe.Z)(e,he)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if((0,oe.Z)(l,he)){var c=e[l.index]||"";n+=c=l.resolve(c)}else n+=l.toString()}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},t}(ce),he=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e,r,i,o){var a;return(0,$.Z)(this,t),(a=n.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=t.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)},t}(ce),ve=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,$.Z)(this,t),(r=n.call(this)).name=e,r}var r=t.prototype;return r.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new ue(n)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t}(se);function ge(e,n){for(var t=(0,L.Z)(e);t.length>0;){var r,i=t.shift();if(!n(i))break;(r=t).unshift.apply(r,(0,L.Z)(i.children))}}var me=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,$.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.offset=function(e){var n=0,t=!1;return this.walk((function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)})),t?n:-1},r.fullLen=function(e){var n=0;return ge([e],(function(e){return n+=e.len(),!0})),n},r.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)(0,oe.Z)(t,de)&&n.push(t),t=t.parent;return n},r.resolveVariables=function(e){var n=this;return this.walk((function(t){return(0,oe.Z)(t,ve)&&t.resolve(e)&&delete n._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,re.Z)((0,ie.Z)(t.prototype),"appendChild",this).call(this,e)},r.replace=function(e,n){return delete this._placeholders,(0,re.Z)((0,ie.Z)(t.prototype),"replace",this).call(this,e,n)},r.toTextmateString=function(){return this.children.reduce((function(e,n){return e+n.toTextmateString()}),"")},r.clone=function(){var e=new t;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){ge(this.children,e)},(0,te.Z)(t,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk((function(t){return(0,oe.Z)(t,de)&&(n.push(t),e=!e||e.index<t.index?t:e),!0})),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),t}(ce),ye=function(){function e(){(0,$.Z)(this,e),this._scanner=new le,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new me;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==t&&void 0!==t&&t,null!==n&&void 0!==n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk((function(e){return(0,oe.Z)(e,de)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,t){var i=r.get(e.index);if(i){var a=new de(e.index);a.transform=e.transform;var l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value.clone();a.appendChild(f),(0,oe.Z)(f,de)&&r.has(f.index)&&!t.has(f.index)&&(t.add(f.index),o(f,t),t.delete(f.index))}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n.replace(e,[a])}},a=new Set,l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;o(f,a)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new de(0)))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new ue(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new de(Number(n)):new ve(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new de(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ue("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(var i=new fe;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}}},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new ue(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new ve(n);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ue("${"+n+":")),r.children.forEach(e.appendChild,e),!0}},n._parseTransform=function(e){for(var n=new pe,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))t+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;t+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new ue(o));else if(!this._parseFormatString(n)&&!this._parseAnything(n))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{n.regexp=new RegExp(t,r)}catch(a){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new he(Number(r))),!0;if(this._accept(4))return e.appendChild(new he(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new he(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new he(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new he(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new he(Number(r),void 0,l,c)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new he(Number(r),void 0,void 0,u)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new ue(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return(new e).parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),Ze={Text:ue,Placeholder:de,Variable:ve,FormatString:he,Choice:fe};function be(e,n){var t=n.mapPos(e.from,-1,h.gc.TrackDel),r=n.mapPos(e.to,1,h.gc.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}var we=function(){function e(n){(0,$.Z)(this,e),this.lines=n.split(/\r\n?|\n/).map((function(e){return(new ye).parse(e).children}))}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,c={from:r,to:i,insert:h.xv.of(a)},u={changes:c,scrollIntoView:!0,annotations:v.Jv.of(n.completion)};if(l.length&&(u.selection=Re(l,0)),l.length>1){var s=new Ce(l,0),d=u.effects=[Se.of(s)];void 0===t.state.field(Ee,!1)&&d.push(h.Py.appendConfig.of([Ee,De,Ge]))}if(r===i&&!l.length){var f=h.as.of(c,t.state.doc.length),p=t.state.selection.ranges.map((function(e){return e.map(f,0)}));u.selection=h.jT.create(p,t.state.selection.mainIndex)}return u},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,K.basename)(i);case"TM_FILENAME_BASE":return(0,K.basename)(i,(0,K.extname)(i));case"TM_DIRECTORY":return(0,K.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r,i=t.view,l=t.from,c=i.state,u=[],s=[],d=c.doc.lineAt(l),f=/^\s*/.exec(d.text)[0],p=c.facet(ne.c),h=!0,v=!1,g=void 0;try{for(var m,y=function(){var n=m.value,r=0,i="",o=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var o=f+p.repeat(n);e=o+e.slice(n),t+=o.length}return i+=e,r+=e.length,{line:u.length,from:t,to:r}},a=function(n){var i=!0,c=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(n){var r=n.name,i=n.transform,a=e.resolveVariable(r,t);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var n,t=u.length?l+u.map((function(e){return e.length})).reduce((function(e,n){return e+n})):l;if(null===(n=e.children)||void 0===n?void 0:n.length){var i={field:e.index,from:t+r,to:null};s.push(i),a(e.children),i.to=t+r}else{o("");var c=t+r;s.push({field:e.index,from:c,to:c})}}})}}catch(h){c=!0,d=h}finally{try{i||null==p.return||p.return()}finally{if(c)throw d}}};a(n),u.push(i)},Z=n[Symbol.iterator]();!(h=(m=Z.next()).done);h=!0)y()}catch(w){v=!0,g=w}finally{try{h||null==Z.return||Z.return()}finally{if(v)throw g}}var b=(r=Math).max.apply(r,(0,L.Z)(s.map((function(e){return e.field}))));return{text:u,ranges:s.map((function(e){var n=e.field,t=(0,J.Z)(e,["field"]);return(0,a.Z)((0,o.Z)({},t),{field:0===n?b:n-1})}))}},e}(),xe=g.p.widget({widget:new(function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,$.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},t}(g.l9))}),ke=g.p.mark({class:"cm-snippetField"}),Ce=function(){function e(n,t){(0,$.Z)(this,e),this.ranges=n,this.active=t,this.deco=g.p.set(n.map((function(e){return(e.from===e.to?xe:ke).range(e.from,e.to)})))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=be(a.value,n);if(!c)return null;t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every((function(e){return n.ranges.some((function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to}))}))},e}(),Se=h.Py.define({map:function(e,n){return null===e||void 0===e?void 0:e.map(n)}}),Te=h.Py.define(),Ee=h.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Se))return l.value;if(l.is(Te)&&e)return new Ce(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return g.tk.decorations.from(e,(function(e){return e?e.deco:g.p.none}))}});function Re(e,n){var t=e.filter((function(e){return e.field===n})).map((function(e){return h.jT.range(e.from,e.to)}));if(0!==t.length)return h.jT.create(t)}function Ie(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(Ee,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,L.Z)(o.ranges.map((function(e){return e.field})))),c=e>0&&o.active>=l;return i(r.update({selection:Re(o.ranges,a),effects:Se.of(c?null:new Ce(o.ranges,a))})),!0}}var De=h.Wl.highest(g.$f.of([{key:"Tab",run:Ie(1),shift:Ie(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(Ee,!1)&&(t(n.update({effects:Se.of(null)})),!0)}}])),Ge=g.tk.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(Ee,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=t&&e.to>=t}));return!(!i||i.field===r.active)&&(n.dispatch({selection:Re(r.ranges,i.field),effects:Se.of(r.ranges.some((function(e){return e.field>i.field}))?new Ce(r.ranges,i.field):null)}),!0)}}),Pe=t(35086),_e=t(93731),Be=t(625),Ae=t(42864),Ue=t(49146),Le=t(43e3),Ne=t(47880),Xe=t(72669),Fe=t(82568),Oe="cm-ghostwriter-hint-tooltip",Me=g.tk.theme((0,q.Z)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:y.TV.backgroundHigher,borderTop:"solid 1px ".concat(y.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(Oe," .cm-ghostwriter-hint"),{display:"block"})),We=(0,Fe.X)({hint:[y.l0.p(4),y.l0.rowWithGap(8),y.l0.align.center,y.l0.font.default,{opacity:.6}],prompt:[y.l0.rowWithGap(4),y.l0.align.center]});function He(){return(0,u.BX)(w.G,{css:We.hint,children:[(0,u.tZ)(Ne.Z,{width:8,height:8}),(0,u.BX)(w.G,{css:We.prompt,children:[(0,u.tZ)(Pe.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,u.tZ)(x.xv,{variant:"small",children:"to use Ghostwriter suggestion."})]})]})}var ze=g.lg.define((function(e){var n=function(){return Array.from(e.dom.children).filter((function(e){return e.classList.contains("cm-tooltip-autocomplete")}))},t=function(e){return Array.from(e.children).filter((function(e){return e.classList.contains("cm-ghostwriter-hint")}))},r=!1;return{update:function(){null!==(0,v.LR)(e.state)&&Promise.resolve().then((function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value;if(0===t(c).length){var s=(0,Xe.VV)((0,u.tZ)(He,{}));s.className="cm-ghostwriter-hint",c.appendChild(s)}}}catch(d){i=!0,o=d}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}}))},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,u=!0,s=!1,d=void 0;try{for(var f,p=t(c)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;c.removeChild(h)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}catch(v){i=!0,o=v}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}));function Ve(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function je(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:N.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===n||void 0===n?void 0:n.includes(o)){var l=o;return{triggerKind:N.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:N.CompletionTriggerKind.Invoked}:null}var qe=Object.entries(C.CompletionItemKind).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],i=t[1];return(0,o.Z)((0,q.Z)({},i,r.toLowerCase()),e)}),{});function Ye(e,n){var t=(0,m.R)(e.state.doc,n.range.start),r=(0,m.R)(e.state.doc,n.range.end);if(null!==t&&null!==r)return{from:t,to:r,insert:n.newText}}function Ke(e){var n,t=e.context,s=e.items,f=e.client,p=e.path,g=e.setDecoration,y=e.trackCompletion,Z=0,b=null!==(n=(0,Ae.Z)(t.state))&&void 0!==n?n:"unknown",w=function(e,n){var t=new Set;return e.filter((function(e){var r=n.map((function(n){return e[n]})).join("\u241e");return!t.has(r)&&(t.add(r),!0)}))}(s.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var n=e.additionalTextEdits,t={label:e.label,detail:e.detail,apply:function(t,r,i,c){if(e.insertTextFormat===C.InsertTextFormat.Snippet){var u,s,d,f,g=[];n&&g.push({changes:n.map((function(e){return Ye(t,e)}))});var Z=null!==(f=null!==(d=null===(s=e.textEdit)||void 0===s?void 0:s.newText)&&void 0!==d?d:e.insertText)&&void 0!==f?f:e.label,w=new we(Z);e.textEdit&&"range"in e.textEdit&&(i=(0,m.R)(t.state.doc,e.textEdit.range.start),c=Math.max(c,(0,m.R)(t.state.doc,e.textEdit.range.end)));var x=w.apply({view:t,from:i,to:c,path:p,completion:r});return(u=t).dispatch.apply(u,(0,L.Z)(g).concat([x])),void y("completion-accepted",{language:b,completionKind:e.kind,insertTextFormat:e.insertTextFormat})}var k=function(e){var n,t=e.view,r=e.item,i=e.from,c=e.to,u=t.state,s=u.doc,d=u.selection,f=[];if(r.textEdit){var p=r.textEdit,v=p.range,g=p.newText,y=(0,m.R)(s,v.start),Z=(0,m.R)(s,v.end);if(null===y||null===Z)return;f.push({from:y,insert:g,to:Math.max(Z,d.main.to)})}else{var b=r.insertText||r.label,w=t.state.wordAt(c);w&&w.to>c&&b.includes(t.state.doc.sliceString(c,w.to))&&(c=w.to),f.push({from:i,to:c,insert:b})}var x=(0,l.Z)(f,1)[0],k="";null===(n=r.additionalTextEdits)||void 0===n||n.forEach((function(e){var n=Ye(t,e);n&&("from"in x&&n.from===x.from&&(k=n.insert),f.push(n))}));var C=c-i;d.ranges.forEach((function(e){if(e!==d.main){if(!("insert"in x)||!x.insert)throw new Error("Expected insert in mainChange");var n=e.from-C,t=k+x.insert;f.push({from:n,to:e.to,insert:t})}}));var S=f.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,a.Z)((0,o.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),T=h.as.of(S,s.length),E=d.ranges.map((function(e){return e.map(T,0)}));return{changes:T,selection:h.jT.create(E,d.mainIndex)}}({view:t,item:(0,a.Z)((0,o.Z)({},e),{additionalTextEdits:n}),to:c,from:i});k&&(y("completion-accepted",{language:b,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),t.dispatch({changes:k.changes,selection:k.selection,annotations:v.Jv.of(r)}))},type:e.kind&&qe[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},s=(0,r.Z)(f).isCompletionItemResolveSupported;return f&&s?t.info=(0,i.Z)((function(){var t,r,i,o,a,l,s;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,f.request.resolveCompletionItem(e)];case 1:return t=c.sent(),r="cancelled"in t&&t.cancelled,i="result"in t?t.result:null,r||!i?[2,null]:(i.additionalTextEdits&&(n=i.additionalTextEdits),Z++,o=[],i.detail&&i.detail!==e.detail&&i.detail!==e.label&&(a=(0,K.extname)(p).slice(1),l=["```"+a,i.detail,"```"].join("\n"),o.push((0,u.tZ)(R,{className:"lsp-completion-detail",content:{value:l,kind:"markdown"}},"".concat(Z,"-detail")))),i.documentation&&o.push((0,u.tZ)(R,{content:i.documentation},"".concat(Z,"-documentation"))),0===o.length?[2,null]:(y("resolution-presented",{language:b,resolutionSource:"request",completionKind:e.kind}),s=document.createElement("div"),g(d.createPortal((0,u.tZ)(u.HY,{children:o}),s)),[2,s]))}}))})):e.documentation&&(t.info=function(){if(!e.documentation)return null;y("resolution-presented",{language:b,resolutionSource:"documentation",completionKind:e.kind});var n=document.createElement("div");return g(d.createPortal((0,u.tZ)(u.HY,{children:(0,u.tZ)(R,{content:e.documentation})}),n)),n}),t}));w=w.sort((function(e,n){return e.sortText<n.sortText?-1:e.sortText>n.sortText?1:0}));for(var x=0;x<w.length;x++)w[x-1]&&w[x].sortText===w[x-x].sortText?w[x].boost=w[x-1].boost:w[x].boost=w.length-x;var k=(0,l.Z)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;n[c[0]]=!0;for(var u=1;u<c.length;u++)t[c[u]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var s=Ve(n)+Ve(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(w),2),S=k[0],T=k[1],E=t.matchBefore(T),I=t.pos;return E&&(I=E.from),w.length&&y("completion-options-presented",{language:b}),{from:I,options:w,validFor:S}}var $e=g.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),Qe=t(45285),Je=t(73872),en=t(38453),nn=t(88541),tn=t(28229);function rn(e){var n=e.content,t=e.className,r=e.showHoveredVariable,i=(0,tn.Z)().preferences;if("string"!==typeof n&&"kind"in n)return(0,u.tZ)(R,{content:n});var a=(Array.isArray(n)?n:[n]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,u.tZ)(k.ZP,{css:[{p:{fontSize:i.fontSize}},r?[y.l0.maxHeight(an),y.l0.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,u.tZ)(S.Z,(0,o.Z)({minimal:!0,disableCopy:!0},e))}},children:a})}function on(e){var n=e.dom,t=(0,J.Z)(e,["dom"]);return d.createPortal((0,u.tZ)(ln,(0,o.Z)({},t)),n)}var an=100;function ln(e){var n=e.className,t=e.content,r=e.textHovered,a=(0,nn.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),d=(0,Qe.Z)().debuggest,f=(0,Je.Z)(d.mainClient),p=f&&("running"===f.state.current||"paused"===f.state.current),h=(0,l.Z)(s.useState(!1),2),v=h[0],g=h[1],m=(0,l.Z)(s.useState(void 0),2),Z=m[0],b=m[1],x=a&&p&&Z;return s.useEffect((function(){function e(){return e=(0,i.Z)((function(){var e,n,t;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:if(!a||!p)return[3,4];g(!0),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,f.evaluate({expression:r,context:"hover"})];case 2:return n=i.sent(),(null===(e=n.body)||void 0===e?void 0:e.result)&&(t=(0,o.Z)({name:r,value:n.body.result},n.body),b(t)),[3,4];case 3:return g(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,f,p,r]),(0,u.BX)(w.G,{css:[T,x?y.l0.maxHeight(an+190):y.l0.maxHeight(190),y.l0.minHeight(30),y.l0.overflowY("auto"),y.l0.borderRadius(4),y.l0.backgroundColor.backgroundHigher],children:[v?void 0:(0,u.tZ)(rn,{content:t,className:n,showHoveredVariable:Boolean(x)}),x?(0,u.tZ)(w.G,{css:[y.l0.maxHeight(190),y.l0.overflowY("auto")],children:(0,u.tZ)(en._,{depth:0,client:f,variable:Z})}):void 0]})}function cn(e){var n,t,r=e.hover,i=e.state,o=e.offset,a=e.languageId,l=e.setDecoration;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return l(null),null;a.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var c="",s=i.doc;if(r.range)n=(0,m.R)(s,r.range.start),t=(0,m.R)(s,r.range.end),c=s.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var d=i.wordAt(n);d?(c=s.sliceString(d.from,d.to),n=Math.min(n,d.from),t=d.to):c=s.sliceString(n,n+1)}return{pos:n,end:t,create:function(){var e=document.createElement("div");return e.classList.add("hover-tooltip"),e.style.padding="0",l((0,u.tZ)(on,{dom:e,content:r.contents,textHovered:c})),{dom:e,mount:function(e){var n;n=function(){(0,g.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(n,e)}))}}},above:!0}}var un=t(21449),sn=t(6955),dn=t(45076),fn=t(19204),pn=t(42256),hn=t(56997),vn=g.p.mark({class:"cm-lsp-definition-target-word"}),gn=g.tk.baseTheme({".cm-lsp-definition-target-word span":{backgroundColor:y.TV.backgroundHigher,color:y.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"}});var mn=t(22488);function yn(e){var n=e.lspClient,t=e.path,a=e.decorations,l=e.rename,s=e.openFile,d=e.askGhostwriter,f=e.hintDefinitionEnabled,p=(0,r.Z)(n),y=function(e){return function(n){setTimeout((function(){a.update((function(t){return t.set(e,n)}))}))}},Z=[H({lspClient:n,path:t}),(0,j.Fq)({lspClient:n,path:t,askGhostwriter:d})];return(0,mn.isMobile)()||(p.isAutoCompleteSupported&&Z.push(function(e){var n=e.lspClient,t=e.path,r=e.setDecoration,a=Math.random()<.01,l=function(e,r){if(a){var i=n.getLanguageId(t);return Ue.kg.info("lsp:autocomplete:".concat(e),(0,o.Z)({languageId:i},r)),(0,Be.j)(Be.U3.LSP_COMPLETION_USED,(0,o.Z)({type:e,sampleRate:.01},r))}};function s(){return(s=(0,i.Z)((function(e){var i,o,a,u,s,d,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(o=n.getServerCapabilities())?(a=(null===o||void 0===o||null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],(u=je(e,a))?[4,n.request.completion(t,(0,m.s)(e.state.doc,e.pos),u)]:[2,null]):[2,null];case 1:return"error"in(s=c.sent())?[2,null]:(d=s.result,e.aborted?[2,null]:d?(f=Array.isArray(d)?d:d.items,[2,Ke({context:e,items:f,client:n,path:t,setDecoration:r,trackCompletion:l})]):[2,null])}}))}))).apply(this,arguments)}return[Me,ze,(0,v.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,_e.Z)(e)?Oe:""},addToOptions:[{render:function(e,n){if(!(0,_e.Z)(n))return null;var t=document.createElement("div");return t.className="lsp-completion-keyboard-shortcuts",(0,Y.createRoot)(t).render((0,u.tZ)(Le.C,{children:(0,u.tZ)(Pe.ZP,{size:"inherit",shortcut:{key:"\u23ce"}})})),t},position:200}],override:[(0,v.eC)(["LineComment","BlockComment"],(function(e){return s.apply(this,arguments)}))]}),$e]}({setDecoration:y("autocomplete"),lspClient:n,path:t})),p.isSignatureHelpSupported&&Z.push(P({setDecoration:y("signatureSuggestion"),lspClient:n,path:t})),p.isHoverSupported&&Z.push(function(e){var n=e.lspClient,t=e.path,r=e.setDecoration,o=null,a=(0,g.bF)(function(){var e=(0,i.Z)((function(e,i){var a,l,u,s,d,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:a=(0,m.s)(e.state.doc,i);try{l=e.state.wordAt(i)}catch(p){return[2,null]}if(o){if(o.from===(null===l||void 0===l?void 0:l.from)&&o.to===(null===l||void 0===l?void 0:l.to))return[2,null];n.notify.cancelRequest(o.id)}return u=n.generateId(),o={id:u,from:null===l||void 0===l?void 0:l.from,to:null===l||void 0===l?void 0:l.to},[4,n.request.hover(t,a,{id:u})];case 1:return s=c.sent(),o=null,d=n.getLanguageId(t),"error"in s||null===(f=s.result)?(r(null),[2,null]):[2,cn({hover:f,offset:i,state:e.state,languageId:d,setDecoration:r})]}}))}));return function(n,t){return e.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(h.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return a}({setDecoration:y("hoverTooltip"),lspClient:n,path:t})),p.isCodeActionsSupported&&Z.push((0,dn.p)({setDecoration:y("codeActions"),lspClient:n,path:t})),p.isFindDefinitionSupported&&s&&(Z.push((0,fn.j)({lspClient:n,openFile:s})),f&&Z.push(function(e){var n=e.filePath,t=e.lspClient,r={current:null},o=h.Py.define(),a=h.Py.define(),l=h.Py.define(),u=h.QQ.define({create:function(){return{keyDown:!1,mousePosition:null}},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;u.is(o)&&(e.mousePosition=u.value),u.is(a)&&(e.keyDown=u.value)}}catch(s){r=!0,i=s}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}return e}}),s=h.QQ.define({create:function(){return{exists:!1,range:null}},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=o.value;c.is(l)&&(e=c.value)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),d=h.QQ.define({create:function(){return g.p.none},update:function(e,n){var t=n.state.field(u,!1);if(!t)return g.p.none;var r=t.keyDown,i=t.mousePosition;if(!r)return g.p.none;if(!i)return g.p.none;var o=n.state.field(s,!1);if(!o||!o.exists||!o.range)return g.p.none;var a=(0,m.R)(n.state.doc,o.range.start),l=(0,m.R)(n.state.doc,o.range.end);if(a===l)return g.p.none;var c=(0,m.R)(n.state.doc,i);return c<a||c>l?g.p.none:g.p.set(vn.range(a,l),!0)},provide:function(e){return g.tk.decorations.from(e)}}),f=g.lg.fromClass(function(){function e(n){(0,$.Z)(this,e),this.view=n,document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))}var n=e.prototype;return n.destroy=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))},n.onKeyDown=function(e){(0,pn.j)(e)&&this.view.dispatch({effects:a.of(e.key===(hn.V5?"Meta":"Control"))})},n.onKeyUp=function(e){(0,pn.j)(e)&&this.view.dispatch({effects:a.of(!1)})},e}(),{eventHandlers:{mousemove:function(e,n){if(0!==e.buttons){var t=n.state.selection.main;if(t.from!==t.to)return void n.dispatch({effects:o.of(null)})}var r=e.clientX,i=e.clientY,l=n.posAtCoords({x:r,y:i}),c=null;null!=l&&(c=(0,m.s)(n.state.doc,l)),n.dispatch({effects:[o.of(c),a.of((0,pn.j)(e))]})},click:function(e,n){var t;(null===(t=n.state.field(u,!1))||void 0===t?void 0:t.keyDown)&&n.dispatch({effects:a.of(!1)})}}}),p=g.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var i,o,a,d,f,p,h,v,g,y,Z;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(i=e.state.field(u)).keyDown&&i.mousePosition?(o=(0,m.R)(e.state.doc,i.mousePosition),!e.docChanged&&(a=e.state.field(s))&&a.range&&(d=(0,m.R)(e.state.doc,a.range.start),f=(0,m.R)(e.state.doc,a.range.end),o>=d&&o<=f)?[2]:(p=e.state.wordAt(o))?r.current&&(h=r.current.word,v=p.from===h.from,g=p.to===h.to,v&&g)?[2]:(r.current&&t.notify.cancelRequest(r.current.id),y=t.generateId(),r.current={id:y,word:p},Z=(0,m.s)(e.state.doc,o),[4,t.request.findDefinitions(n,Z,{id:y}).then((function(n){if(r.current=null,void 0!==n.cancelled&&!0!==n.cancelled){var t=n.result;if(t){var i=e.state.wordAt(o),a=t.length>0&&null!=i,c=null;if(i){var u=(0,m.s)(e.state.doc,i.from),s=(0,m.s)(e.state.doc,i.to);c=C.Range.create(u,s)}e.view.dispatch({effects:l.of({exists:a,range:c})})}}}))]):[2]):[2];case 1:return c.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}());return[gn,p,f,u,s,d]}({lspClient:n,filePath:t}))),(p.isFindDefinitionSupported||p.isFindReferencesSupported)&&s&&Z.push((0,un.w)({setDecoration:y("tooltip"),lspClient:n,path:t,openFile:s})),p.isRenameSupported&&Z.push((0,sn.J)({setDecoration:y("renameInput"),hook:l}))),Z}},47434:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(50959),i=t(64491),o=t(96796),a=t(28229),l=t(57530),c=t(45285),u=t(45853),s=t(57135),d=t(96583),f=t(85577),p=t(59053),h=t(87042);var v=t(17077),g=t(88541),m=t(4653),y=t(42685);function Z(e){var n=e.view,t=e.filePath,Z=e.isLoading,b=e.decorations,w=e.openFile,x=e.askGhostwriter,k=(0,a.Z)().preferences.codeIntelligence,C=(0,c.Z)().fs,S=(0,i.Z)(t),T=(0,o.Z)(S),E=(0,g.P5)({controlName:"flag-lsp-hover-cmd-definition",logFlagToAnalytics:!1}),R=function(e){var n=e.view,t=e.filePath,o=r.useRef(null),a=(0,c.Z)().fs,u=(0,i.Z)(t),v=r.useCallback(function(){var e=(0,s.Z)((function(e,r){var i,c,s;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:if(!n)throw new Error("Expected view");if(!u)throw new Error("Expected client");if(!t)throw new Error("Expected non-null file path");if(null==r)throw new Error("Expected rename input params");return o.current&&u.notify.cancelRequest(o.current),i=u.generateId(),o.current=i,[4,u.request.rename(t,(0,f.s)(n.state.doc,r),e,{id:i,tap:function(e){return(0,h.SC)(n,e)}})];case 1:if(c=d.sent(),o.current=null,"error"in c)throw new Error("Something went wrong renaming ".concat(c.error.message));return c.cancelled?[2]:(s=c.result)?((0,p.w)({edit:s,fs:a,client:u}),n.dispatch({effects:[l.nD.of(null)]}),[2]):[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[u,n,t,a]),g=r.useCallback((function(){if(!n)throw new Error("Expected view");n.dispatch({effects:[l.nD.of(null)]}),n.focus()}),[n]);return r.useMemo((function(){return{onRename:v,closeRenameInput:g}}),[v,g])}({view:n,filePath:t});(0,v.e)({view:n,filePath:t,lspClient:S});var I=Z||!k||!n||!S||!T||!S.isSupportedFile(t),D=(0,u.Z)({view:n});r.useEffect((function(){if(!I)return n.dispatch({effects:D.reconfigure([(0,l.sn)({lspClient:S,path:t,decorations:b,rename:R,openFile:w,askGhostwriter:x,hintDefinitionEnabled:E})])}),function(){n.dispatch({effects:D.reconfigure([(0,y.wB)()])}),b.unmount()};n&&!k&&n.dispatch((0,y._c)(n.state))}),[S,n,T,D,t,w,b,R,I,x,E]),r.useEffect((function(){if(S&&(t&&(0,m.Z)(S).isTextDocumentSyncSupported))return C.watchTextFile(t,{onFlush:function(){S.isOpen(t)&&S.notify.didSave(t)}})}),[C,t,S])}},12372:function(e,n,t){t.d(n,{Z:function(){return L}});var r=t(69994),i=t(50959),o=t(14806),a=t(63064),l=t(45853),c=t(48224),u=t(4561),s=t(13424),d=t(10103),f=t(86528),p=o.q6.define();var h=t(57389),v=t(72006),g=t(4405),m=t(24746),y=t(2272),Z=t(21084),b={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var w=o.Py.define(),x=o.Py.define(),k=o.Py.define(),C=o.QQ.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r[u.id]=(0,g.Z)((0,v.Z)({},u),{position:t(u.position),selectionStart:t(u.selectionStart),selectionEnd:t(u.selectionEnd)})}}catch(D){o=!0,a=D}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var s=!0,d=!1,f=void 0;try{for(var p,h=n.effects[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var m=p.value;if(m.is(Z.R)&&(e=(0,v.Z)({},e)),m.is(w)&&m.value.position<=n.newDoc.length&&((e=(0,v.Z)({},e))[m.value.id]=(0,v.Z)({},m.value)),m.is(x)&&(e=(0,v.Z)({},e),m.is(x)&&delete e[m.value]),m.is(k)){e=(0,v.Z)({},e);var b=!0,C=!1,S=void 0;try{for(var T,E=Object.entries(e)[Symbol.iterator]();!(b=(T=E.next()).done);b=!0){var R=(0,y.Z)(T.value,2),I=R[0];R[1].username===m.value&&delete e[I]}}catch(D){C=!0,S=D}finally{try{b||null==E.return||E.return()}finally{if(C)throw S}}}}}catch(D){d=!0,f=D}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return e},provide:function(e){return[r.tk.decorations.computeN([e],(function(n){var t=n.field(e);return Object.values(t).map((function(e){var n=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,t=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return n===t?null:r.p.set(r.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(n,t))})).filter((function(e){return null!==e}))}))]}});function S(e){return r.tk.updateListener.of((function(n){var t=n.state.selection;t!==n.startState.selection&&(n.transactions.every((function(e){return e.annotation(o.YW.remote)}))||e(t.ranges.map((function(e){var t=n.state.doc.lineAt(e.head);return{position:e.head,line:t.number,column:e.head-t.from+1,selectionStart:e.from,selectionEnd:e.to}})),t.mainIndex))}))}function T(e){var n=e.view,t=e.presence,r=e.fs,o=e.filePath,c=(0,i.useState)(null),u=c[0],s=c[1],d=(0,m.Z)({presence:t}),f=(0,i.useRef)({}),p=(0,a.Z)();(0,i.useEffect)((function(){var e=d.reduce((function(e,n){return n.username&&n.color?(0,g.Z)((0,v.Z)({},e),(0,h.Z)({},n.username,n.color)):e}),{});f.current=e}),[d]);var y=(0,l.Z)({view:n});return(0,i.useEffect)((function(){if(n){var e=t.onUserLeave((function(e){n.dispatch({effects:k.of(e.username)})})),i=r.watchTextFile(o,{onReady:function(e){var t=e.updateSelections;n.dispatch({effects:y.reconfigure([C,S((function(e){t(e)}))])}),s(o)},onCursor:function(e){var t=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null===(n=t.user)||void 0===n?void 0:n.name;if(i){var o,a=t.id,l=t.position,c=t.selectionStart,u=t.selectionEnd,s=r[i];if(s&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof u)return w.of({id:a,username:i,position:l,color:{cursor:s,selection:(o=s,b[o]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:f.current});t&&n.dispatch({effects:t})},onRemoveCursor:function(e){n.dispatch({effects:x.of(e)})},onError:function(){n.dispatch({effects:y.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:y.reconfigure([])})}});return function(){e(),i(),n.dispatch({effects:y.reconfigure([])}),p.current&&s(null)}}}),[n,o,r,t,y]),{loadedFile:u}}var E=t(84630),R=t(45285);var I=t(9970),D=t(39541),G=t(56997),P=r.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:D.TV.shadow1,borderRadius:D.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function _(e){e.style.transform="translate(-10000px, -10000px)"}function B(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=G.gn?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var A=new Map;var U=[P,r.lg.define((function(e){var n=function(){c&&(c.disconnect(),o.forEach((function(e){c.observe(e.view.dom)})))},t=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(s),a!==e.inView)){if(a=e.inView)return;o.forEach((function(e){_(e.view.dom)}))}},r=function(){null===u&&(u=setTimeout((function(){u=null,t()}),50))},i=e.state.field(C,!1),o=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:B(e),cursor:e}]}))),a=!0,l=0,c="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>l-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;n();var u=null;window.addEventListener("resize",r);var s={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(n){var t=o.get(n.id),r=t?function(e,n){var t=A.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return A.set(e,r),r}(n.username,t.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:r}]})))}},write:function(e){o.forEach((function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(t&&r){var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1)_(o);else{var c=t.left+r-i.right,u="0px";c>0?(u="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(u,", -100%)");var s=G.gn?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=s.x,f=s.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else _(o)}({cursorView:n.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(l=Date.now());var a=r.state.field(C,!1);if(a!==r.startState.field(C,!1)){var c=new Map,u=new Set;if(a){var s=new Map((0,I.Z)(o.values()).map((function(e){return[e.cursor.id,e.view]})));Object.values(a).forEach((function(n){var t=s.get(n.id);if(t)u.add(t),c.set(n.id,{view:t,cursor:n});else{var r=B(n);c.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}}))}o.forEach((function(e){u.has(e.view)||e.view.dom.remove()})),o=c,i=a,n(),t()}else r.geometryChanged&&t()},destroy:function(){window.removeEventListener("resize",r),o.forEach((function(e){e.view.dom.remove()})),i=void 0,o=new Map,null===c||void 0===c||c.disconnect(),u&&clearTimeout(u)},maybeMeasure:t}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}})];function L(e){var n=e.view,t=e.presence,h=e.fs,v=e.filePath,g=function(e){var n=e.view,t=e.fs,h=e.filePath,v=(0,i.useState)(null),g=v[0],m=v[1],y=(0,a.Z)(),Z=(0,l.Z)({view:n}),b=(0,c.Z)().trackTimeToLoadFileEnd,w=(0,s.uV)(),x=(0,s.Id)(),k=(0,s.I7)();return(0,i.useEffect)((function(){if(n){var e=0,i=0,a=0,l=null,c=t.watchTextFile(h,{onReady:function(c){var u=c.initialContent,s=c.writeChange,v=c.version;e=v,i=v,x({filePath:h,version:v}),b(h),n.dispatch({changes:{from:0,to:n.state.doc.length,insert:u},annotations:[o.YW.addToHistory.of(!1),o.YW.remote.of(!0),p.of(!0)]}),n.dispatch({effects:Z.reconfigure(r.tk.updateListener.of((function(n){if(n.docChanged){var r=!0,c=!1,u=void 0;try{for(var v,g=function(){var r=v.value;if(r.annotation(o.YW.remote)||r.annotation(p))return"continue";a++;var c=r.annotation(d.Z)?{author:"ghostwriter"}:{};try{s(r.changes,c),l=r.changes}catch(u){throw t.readFile(h,{fromDisk:!1}).then((function(t){var o="replitReadError: "+t.error;t.error||(o=t.content.toString());var a=n.view.contentDOM.innerText,c=n.view.plugin(f.k),s=null===c||void 0===c?void 0:c.logs();null===c||void 0===c||c.flush(),w({origin:"Codemirror: ot/writeChange",error:u,tags:{ot:!0},extras:{filePath:h,previousChanges:JSON.stringify(l),transactionChanges:JSON.stringify(r.changes),otherTransactionChanges:JSON.stringify(n.transactions.filter((function(e){return e!==r})).map((function(e){return e.changes}))),transactionDoc:r.newDoc.sliceString(0),updateDoc:n.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:i,latestReceivedVersion:e,keystrokes:JSON.stringify(s)}})})),u}},m=n.transactions[Symbol.iterator]();!(r=(v=m.next()).done);r=!0)g()}catch(y){c=!0,u=y}finally{try{r||null==m.return||m.return()}finally{if(c)throw u}}}})))}),m(h)},onChange:function(r){var c=r.changes,s=r.changeSource,d=r.version;e=d,x({filePath:h,version:d});try{n.dispatch({changes:c,annotations:[o.YW.remote.of(s===u.Fl.Container),o.YW.addToHistory.of(s===u.Fl.Local),p.of(!0)]})}catch(f){throw t.readFile(h,{fromDisk:!1}).then((function(e){var t="replitReadError: "+e.error;e.error||(t=e.content.toString());var r=n.contentDOM.innerText;w({origin:"Codemirror: ot/syncRemoteOp",error:f,tags:{ot:!0},extras:{filePath:h,previousChanges:JSON.stringify(l),changes:JSON.stringify(c),changeSource:s,otClientDoc:t,domText:r,cmDoc:n.state.doc.sliceString(0),openVersion:i,version:d,initiatedChanges:a}})})),f}},onError:function(){n.dispatch({effects:Z.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:Z.reconfigure([])})}});return function(){k({filePath:h}),c(),e=0,i=0,a=0,n.dispatch({effects:[Z.reconfigure([])]}),y.current&&m(null)}}}),[n,h,t,y,Z,b,w,x,k]),{loadedFile:g}}({view:n,fs:h,filePath:v}),m=g.loadedFile,y=T({view:n,fs:h,filePath:v,presence:t}).loadedFile;!function(e){var n=e.view,t=(0,R.Z)().presence,a=(0,E.Z)(),c=(0,l.Z)({view:n});i.useEffect((function(){if(a&&n){var e=function(){t.getFollowedUser()&&t.unfollowUser()};return n.dispatch({effects:c.reconfigure(r.tk.domEventHandlers({wheel:e,keydown:function(n){"Control"!==n.key&&"Meta"!==n.key&&e()},click:e}))}),function(){n.dispatch({effects:c.reconfigure([])})}}}),[a,n,t,c]);var u=(0,l.Z)({view:n});i.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n){var t=o.jT.cursor(e);n.dispatch({effects:[r.tk.scrollIntoView(t,{x:"center",y:"center"})]})}};if(n&&a){var t=n.state.field(C,!1);if(t){var i=Object.values(t).find((function(e){return e.username===a.username}));i&&e(i.position)}return n.dispatch({effects:u.reconfigure(r.tk.updateListener.of((function(n){var t,r=!0,i=!1,o=void 0;try{for(var l,c=n.transactions[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,s=!0,d=!1,f=void 0;try{for(var p,h=u.effects[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;v.is(w)&&v.value.username===a.username&&(t=v.value)}}catch(g){d=!0,f=g}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}catch(g){i=!0,o=g}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}t&&e(t.position)})))}),function(){n.dispatch({effects:u.reconfigure([])})}}}),[n,a,u])}({view:n});var Z=v!==m||v!==y,b=(0,l.Z)({view:n});return(0,l.Z)({view:n,initialExtension:U}),(0,i.useEffect)((function(){n&&n.dispatch({effects:b.reconfigure([r.tk.editable.of(!Z),o.yy.readOnly.of(Z)])})}),[n,Z,b]),{isLoading:Z}}},89047:function(e,n,t){t.d(n,{hx:function(){return p},l:function(){return d},sy:function(){return f}});var r=t(14806),i=t(69994),o=t(951),a=t(91669),l=t(4385),c=t(87978),u=t(52118),s=t(55143);function d(e){var n=e.view,t=e.event,i=e.clipboardText,o=e.filePath,a=n.state.selection,u=function(){if(!t){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;n.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else n.dispatch(n.state.replaceSelection(e))}};if(o&&(0,c.gK)(o))if(a.ranges.length>1)u();else if(a.main.from!==a.main.to)if(i&&(0,l.Z)(i)){t&&t.preventDefault();var s=n.state.sliceDoc(a.main.from,a.main.to),d="[".concat(s,"](").concat(i,")"),f=a.main.from+d.length;n.dispatch({changes:{from:a.main.from,to:a.main.to,insert:d},selection:r.jT.range(f,f)})}else u();else u();else u()}var f=i.tk.domEventHandlers({paste:function(e,n){var t;d({filePath:n.state.facet(o.Yp),view:n,event:e,clipboardText:null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text")})}}),p=new s.j((function(e,n){return i.tk.domEventHandlers({paste:function(t,r){var i,l=r.state.facet(o.Yp),s=null===t||void 0===t||null===(i=t.clipboardData)||void 0===i?void 0:i.files,d=function(e){var n=r.state.selection.main.head;r.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(s){var f=!0,p=!1,h=void 0;try{for(var v,g=s[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;e?(0,a.L0)(m).then((function(e){return d('"'+e+'"')})):l&&(0,c.gK)(l)&&(0,u.r)(m,n,l).then(d)}}catch(y){p=!0,h=y}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}}})}))},94889:function(e,n,t){t.d(n,{p:function(){return c}});var r=t(14806),i=t(69994),o=t(55143),a=t(49146);function l(e,n){var t=performance.now();a.kg.time(e,t-n)}var c=new o.j((function(e){var n=e?.01:.001;return r.Wl.highest(i.tk.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame((function(){l("editor input latency",t),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){l("editor input latency after layout",t)})):setTimeout((function(){l("editor input latency after layout",t)}))}))}}}))}))},20293:function(e,n,t){t.d(n,{Z:function(){return re}});var r=t(74985),i=t(50959),o=t(10422),a=t(72006),l=t(2272),c=t(91926),u=t(19281),s=t(39541);function d(){var e=(0,l.Z)(i.useState(!1),2),n=e[0],t=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:function(){return t(!0)},onKeyDown:function(){return t(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,r.tZ)(u.Z,{context:"workspace_placeholder_text",isOpen:n,onRequestClose:function(){return t(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var f=t(43119),p=t(71440),h=t(24635);function v(){var e=(0,f.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return v=function(){return e},e}var g={},m=(0,p.Ps)(v());var y=function(e){var n,t,r=function(e){var n=(0,a.Z)({},g,e);return h.a(m,n)}({variables:{replId:e.replId}}),i=r.data,o=r.loading;return{isLesson:"Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&"UserCourseLesson"===(null===i||void 0===i||null===(n=i.repl)||void 0===n||null===(t=n.lesson)||void 0===t?void 0:t.__typename),isLoading:o}},Z=t(48330),b=t(27562),w=t(77511),x=t(625),k=t(49770),C=t(13474),S=t(2041),T=t(82568),E=t(89565),R=t(57389);function I(){var e=(0,f.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return I=function(){return e},e}var D={},G=(0,p.Ps)(I());var P=t(85368),_=t(61284),B=t(17807),A=t(4421),U=t(43312),L=t(32104),N=t(6394),X=P.K.button;function F(e){var n=e.name,t=e.children,i=e.onClick;return(0,r.BX)(X,{onClick:function(){return i()},css:[B.gU.nofill,s.l0.p(8),s.l0.focusRing,s.l0.textAlign.left],children:[(0,r.tZ)(_.xv,{variant:"subheadDefault",css:s.l0.pb(16),children:n}),(0,r.tZ)(P.G,{css:[s.l0.backgroundColor.backgroundDefault,s.l0.p(8),s.l0.borderRadius(8)],children:t})]})}var O="@media (min-width: ".concat(A.j.tabletMax,"px)"),M=(0,U.iv)([s.l0.colWithGap(16),(0,R.Z)({},O,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function W(e){var n=e.children;return(0,r.tZ)(P.G,{css:[(0,R.Z)({},O,[s.l0.rowWithGap(16)])],children:n})}function H(e){var n=e.mainFile,t=e.examples,i=e.onSelect;return(0,r.BX)(P.G,{css:[s.l0.colWithGap(24)],children:[(0,r.tZ)(_.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,r.tZ)(_.xv,{multiline:!0,children:"Get started with some program examples."}),(0,r.BX)(W,{css:[s.l0.colWithGap(16)],children:[(0,r.tZ)(P.G,{css:M,children:t.slice(0,(t.length+1)/2).map((function(e){return(0,r.tZ)(F,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(N.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))}),(0,r.tZ)(P.G,{css:M,children:t.slice((t.length+1)/2).map((function(e){return(0,r.tZ)(F,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(N.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))})]})]})}function z(e){var n=e.replId,t=e.onSelect,i=function(e){var n=(0,a.Z)({},D,e);return h.a(G,n)}({variables:{replId:n}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,r.tZ)(P.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:(0,r.tZ)(L.Z,{})});if(c)return(0,r.tZ)(P.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:c.message});var u="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!u)return null;var d=u.deprecatedLanguageConfig,f=d.mainFile,p=d.examples;return(null===p||void 0===p?void 0:p.length)?(0,r.tZ)(H,{mainFile:f,examples:p,onSelect:t}):(0,r.tZ)(P.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:(0,r.BX)(_.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,r.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var V=t(31672),j=t(51631);function q(){var e=(0,f.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}var Y={},K=(0,p.Ps)(q());function $(e){var n=e.onRequestClose,t=e.filePath,o=(0,E.e)(C.y.Examples),a=(0,E.e)(C.y.Editor),c=(0,l.Z)(i.useState(!1),2),u=c[0],s=c[1],d=(0,V.Z)(t),f=(0,Z.Z)(),p=i.useRef(null===o||void 0===o?void 0:o.isActive),h=i.useRef();h.current=null===o||void 0===o?void 0:o.isActive;var v=i.useRef(null===o||void 0===o?void 0:o.goto);return v.current=null===o||void 0===o?void 0:o.goto,i.useEffect((function(){return function(){var e;h.current&&(null===(e=v.current)||void 0===e||e.call(v,C.y.Editor))}}),[]),i.useEffect((function(){(null===a||void 0===a?void 0:a.isActive)&&!p.current&&(u?a.goto(C.y.Examples):s(!0))}),[a,n,u]),i.useEffect((function(){(null===o||void 0===o?void 0:o.isActive)?p.current=!0:p.current&&n(null)}),[n,null===o||void 0===o?void 0:o.isActive]),d?(0,r.tZ)("div",{ref:null===o||void 0===o?void 0:o.delegateTooltip,children:(0,r.tZ)(z,{replId:f,onSelect:function(e){d({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,r.tZ)("div",{children:"Please make sure you have a file open"})}function Q(e){var n=(0,l.Z)(i.useState(!1),2),t=n[0],o=n[1],c=(0,Z.Z)(),u=(0,b.Z)(),d=i.useCallback((function(e){(0,x.j)(x.U3.LANGUAGE_EXAMPLES_VIEWED,(0,a.Z)({language:u,replId:c},e)),o(!1)}),[u,c]);return(0,r.BX)(r.HY,{children:["Not sure what to do? Run some"," ",(0,r.tZ)("a",{"data-cy":"ws-editor-examples",css:s.l0.linkStyle,onClick:function(){o(!0)},onKeyDown:function(){o(!0)},role:"button",tabIndex:0,children:"examples"}),(0,r.tZ)(S.u,{maxWidth:872,isOpen:t,onRequestClose:function(){return d(null)},children:(0,r.tZ)($,{onRequestClose:d,filePath:e.filePath})})]})}function J(e){var n,t,i=e.onShowGenerateCodeModal,o=e.filePath,l=(0,Z.Z)(),u=(0,b.Z)(),f=y({replId:l}),p=f.isLesson,v=f.isLoading,g=function(e){var n=(0,a.Z)({},Y,e);return h.a(K,n)}(),m=g.data,w=g.loading,x=c.Z.getDocs(u),C=(0,k.yR)();if(v||w)return null;var S="UserPowerUpsTypes"===(null===m||void 0===m||null===(n=m.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&m.currentUser.userPowerUpsByType.ghostwriter.CTA,T="UserPowerUpsTypes"===(null===m||void 0===m||null===(t=m.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&m.currentUser.userPowerUpsByType.ghostwriter.active,E=!T&&S===j.e4.Activate;return p&&C?(0,r.BX)(r.HY,{children:["Not sure what to do?"," ",(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:function(){C&&C()},onKeyDown:function(){C&&C()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Q,{filePath:o}),T?(0,r.BX)(r.HY,{children:[x?", ":" or ",(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:i,onKeyDown:i,role:"button",tabIndex:0,children:"generate code"})]}):null,E?(0,r.BX)(r.HY,{children:[x?", ":" or ",(0,r.tZ)(d,{})]}):null,x&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",css:s.l0.linkStyle,href:x,children:"documentation"})]})," ","(start typing to dismiss)"]})}function ee(e){var n=e.filePath,t=(0,b.Z)(),i=c.Z.getDocs(t);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Q,{filePath:n}),i&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",css:s.l0.linkStyle,href:i,children:"documentation"})]})," ","(start typing to dismiss)"]})}var ne=(0,T.X)({root:[s.l0.color.foregroundDimmest,{fontFamily:s.TV.fontFamilyCode}]});var te=function(e){var n=e.onShowGenerateCodeModal,t=e.filePath,i=(0,w.T3)();return(0,r.tZ)("div",{css:ne.root,children:i?(0,r.tZ)(ee,{filePath:t}):(0,r.tZ)(J,{filePath:t,onShowGenerateCodeModal:n})})};function re(e){var n=e.dom,t=e.onShowGenerateCodeModal,i=e.filePath;return o.createPortal((0,r.tZ)(te,{onShowGenerateCodeModal:t,filePath:i}),n)}},39799:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(2272),i=t(50959),o=t(69994),a=t(45853),l=t(48330),c=t(72006),u=t(43119),s=t(71440),d=t(24635);function f(){var e=(0,u.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,s.Ps)(f());function v(e){var n=function(e){var n=(0,c.Z)({},p,e);return d.a(h,n)}({variables:{replId:e.replId}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.deprecatedLanguageConfig:null}function g(e){var n=e.view,t=e.filePath,c=e.isLoading,u=v({replId:(0,l.Z)()}),s=(0,r.Z)(i.useState(null),2),d=s[0],f=s[1],p=(0,a.Z)({view:n});return i.useEffect((function(){if(n&&u&&!c&&t===u.mainFile){var e=document.createElement("div");return f(e),n.dispatch({effects:p.reconfigure((0,o.W$)(e))}),function(){n.dispatch({effects:p.reconfigure([])}),f(null)}}}),[n,u,t,c,p]),d}},49880:function(e,n,t){t.d(n,{Z:function(){return G}});var r=t(2272),i=t(74985),o=t(50959),a=t(40675),l=t(40417),c=t(625),u=t(45510),s=t(87076),d=t(39541),f=t(61284),p=t(85368),h=t(80336),v=t(45667),g=t(25439),m=t(3516),y=t(1459),Z=t(80629),b=t(51631),w=t(72006),x=t(43119),k=t(71440),C=t(50216);function S(){var e=(0,x.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return S=function(){return e},e}var T={},E=(0,k.Ps)(S());var R=function(e){var n=e.provideFeedback;return(0,i.BX)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:[(0,i.tZ)(s.h,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(y.Z,{css:{"&:not(:hover)":[d.l0.color.foregroundDimmer]},onClick:function(){return n(b.TY.Yes)}})}),(0,i.tZ)(s.h,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(g.Z,{css:{"&:not(:hover)":[d.l0.color.foregroundDimmer]},onClick:function(){return n(b.TY.No)}})})]})},I=function(e){var n=e.provideFeedback;return(0,i.BX)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:[(0,i.tZ)(u.zx,{text:"Yes",onClick:function(){return n(b.TY.Yes)},small:!0,colorway:"positive",iconLeft:(0,i.tZ)(v.Z,{}),css:{backgroundColor:d.TV.backgroundHighest,":hover":{backgroundColor:d.TV.accentPositiveDimmest}}}),(0,i.tZ)(u.zx,{text:"No",onClick:function(){return n(b.TY.No)},colorway:"negative",small:!0,iconLeft:(0,i.tZ)(h.Z,{}),css:{backgroundColor:d.TV.backgroundHighest,":hover":{backgroundColor:d.TV.accentNegativeDimmest}}})]})},D=function(e){var n=e.feedback;return e.minimumStyle?n===b.TY.Yes?(0,i.tZ)(Z.Z,{}):(0,i.tZ)(m.Z,{}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(v.Z,{}),(0,i.tZ)(f.xv,{variant:"small",children:"Thanks for the feedback!"})]})};function G(e){var n=e.inferenceId,t=e.language,u=e.inferenceClass,s=e.feedbackFeature,h=e.minimumStyle,v=(0,o.useState)(null),g=v[0],m=v[1],y=(0,r.Z)(function(e){var n=(0,w.Z)({},T,e);return C.D(E,n)}(),2),Z=y[0],x=y[1],k=x.data,S=x.error,G=x.called,_=function(e){u===b.Sg.Generation?(0,c.j)(c.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:t,feature:"generation"}):u===b.Sg.Chat&&(0,c.j)(c.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),Z({variables:{input:{feedback:e,inferenceClass:u,inferenceId:n}}}),m(e)};return(0,i.tZ)(p.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.start,d.l0.rowWithGap(4),d.l0.width("100%"),d.l0.color.foregroundDimmer],children:G&&g&&"NotFoundError"!==(null===k||void 0===k?void 0:k.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===k||void 0===k?void 0:k.giveCodexFeedback2.__typename)&&!S?(0,i.tZ)(D,{feedback:g,minimumStyle:h||u===b.Sg.Chat}):(0,i.tZ)(i.HY,{children:(0,i.BX)(p.G,{css:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.align.center,d.l0.maxWidth("100%"),d.l0.flex.wrap,d.l0.justify.spaceBetween,d.l0.fontSize(12),{gap:"4px"}],children:[(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:h?"":P(u)}),(0,i.tZ)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:h||u===b.Sg.Chat?(0,i.tZ)(R,{provideFeedback:_}):(0,i.tZ)(I,{provideFeedback:_})}),s?(0,i.tZ)(l.Z,{feature:a.l.AI}):null]})})})}function P(e){switch(e){case b.Sg.Explanation:return"Is this a good explanation?";case b.Sg.Chat:return"";default:return"Is this code valuable?"}}},93970:function(e,n,t){t.d(n,{F:function(){return R},V:function(){return I}});var r=t(2272),i=t(74985),o=t(48306),a=t.n(o),l=t(50959),c=t(24025),u=t(97754),s=t.n(u),d=t(69994),f=t(83005),p=t(85368),h=t(39541),v=t(87076),g=t(36443),m=t(61284),y=t(2757),Z=t(45853),b=t(85577),w=t(37313),x=t(43312),k=t(64804);function C(e){var n=e.height,t=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[n]]])+" "+(s()("loader",{loading:t})||""),children:[(0,i.BX)(c.Z,{viewBox:"0 0 100 36",backgroundColor:h.TV.backgroundHighest,foregroundColor:h.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[n],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(n,";display:block}")})]})}var S=(0,x.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),T=(0,x.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),E={root:h.l0.backgroundColor.backgroundRoot,higher:h.l0.backgroundColor.backgroundHigher,highest:h.l0.backgroundColor.backgroundHighest,default:h.l0.backgroundColor.backgroundDefault};function R(e){var n=e.maxHeight,t=e.minHeight,o=e.extensions,a=void 0===o?[]:o,c=e.allowScroll,u=void 0===c||c,s=e.fontSize,f=e.hideGutter,p=e.path,h=e.snippet,v=e.style,g=e.elevation,m=e.onNavigateToCode,y=(0,r.Z)(l.useState(!1),2),R=y[0],I=y[1],D=(0,k.Z)(),G=D.ref,P=D.view,_=l.useMemo((function(){return function(e){return(0,x.iv)({".cm-editor":e,".cm-gutters":e})}(E[null!==g&&void 0!==g?g:"default"])}),[g]),B=(0,Z.Z)({view:P});return l.useEffect((function(){if(P&&h&&p){var e="lines"in h?h.lines.join("\n"):h.doc;return P.dispatch({changes:{from:0,to:P.state.doc.length,insert:e},effects:B.reconfigure([(0,d.Eu)({formatNumber:function(e,n){for(var t=String(n.doc.lines).length,r=String(e+h.startLineNumber-1);t>r.length;)r="\xa0"+r;return r}}),a])}),I(!0),function(){P.dispatch({effects:B.reconfigure([])})}}}),[P,h,p,B,a,g]),(0,i.BX)("div",{style:v,children:[(0,i.tZ)(w.Z,{ref:G,css:[S,_,u?null:T],style:{minHeight:t,maxHeight:null!==n&&void 0!==n?n:"10em"},hideGutter:f,filePath:p,fontSize:s,readOnly:!0,onClick:function(e){if(m&&P){var n=e.clientX,t=e.clientY,r=P.posAtCoords({x:n,y:t}),i=null!==r?(0,b.s)(P.state.doc,r):null;m(i)}}}),(0,i.tZ)(C,{loading:!R,height:n})]})}function I(e){var n=e.path,t=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,u=e.onNavigateToCode,s=e.initiallyExpanded,d=(0,r.Z)(l.useState(s),2),Z=d[0],b=d[1],w=Z?"block":"none",x=Z?180:0,k=Z?"Collapse snippet":"Expand snippet";return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,{css:[h.l0.width("100%"),h.l0.p(4),h.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(f.Z,{path:n}),(0,i.tZ)(m.xv,{title:n,css:[h.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:n}),(0,i.tZ)(m.xv,{color:"dimmest",children:(0,y.Z)("match",c,!0)}),(0,i.tZ)(p.G,{css:h.l0.flex.grow(1)}),(0,i.tZ)(v.h,{alt:k,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(g.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(p.G,{css:[h.l0.p(4),{display:w}],children:(0,i.tZ)(R,{path:n,snippet:{doc:t,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:u})})]})}},40871:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(66091),i=t(5683),o=t(45347),a=t(69994),l=t(14806),c=t(39541),u=t(2757),s=new(function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.call(this)).elementClass="cm-gutterElement-hidden",e}return t.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},t}(a.SJ)),d=function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).numLines=e,i}var a=t.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,u.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},t}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),p=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function h(e,n){var t=e.sort((function(e,n){return e.from-n.from})),r=t.map((function(e){var n=e.from,t=e.to;return f.range(n,t)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,n){var t=[],r=1;e.forEach((function(i,o){var a=n.lineAt(i.from),l=n.lineAt(i.to);r<a.number-2&&t.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<n.lines&&t.push({startLine:r,endLine:n.lines})}));var i=t.map((function(e){var t=n.line(e.startLine),r=n.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(t.from,r.to)})),o=t.map((function(e){var t=n.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(t.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),u=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=t.map((function(e){var t=n.line(e.startLine);return s.range(t.from)})),h=a.p2.of(l.Xs.of(f));return[c,u,p,h]}(t,n);return[i,o]}},93766:function(e,n,t){var r=t(50959).createContext(null);n.Z=r},64642:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(72006),i=t(4405),o=t(9970),a=t(93766),l=t(50959),c=t(69994),u=t(68935),s=t(74376),d=t(45853);function f(e){var n=e.view,t=e.filePath,f=e.isLoading,p=function(){var e=(0,l.useContext)(a.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),h=(0,d.Z)({view:n});(0,l.useEffect)((function(){if(n&&!f){var e,a=p.current.fileMap.get(t);if(a&&n.state.doc.eq(a.doc)){if(n.state.field(s.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var l=[];a.foldedRanges.between(0,n.state.doc.length,(function(e,n){l.push(u.SW.of({from:e,to:n}))})),n.dispatch({effects:(0,o.Z)(l).concat([c.tk.scrollIntoView(a.scrollPos,{y:"start"})]),selection:a.selection}),e=[s.cE.init((function(){return a.history})),(0,s.m8)()]}else e=(0,s.m8)();var d=!1,v={read:function(e){if(!d){var n=p.current.fileMap.get(t);if(n){var o=function(e){var n=e.scrollDOM.getBoundingClientRect();if(0===n.top&&0===n.bottom)return null;var t=n.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:t},!1)}(e);null===o||o>n.doc.length||p.current.fileMap.set(t,(0,i.Z)((0,r.Z)({},n),{scrollPos:o}))}}}},g=!1;return n.dispatch({effects:h.reconfigure([e,c.tk.updateListener.of((function(e){d||(!function(e){var n,r=p.current.fileMap.get(t),i=null!==(n=null===r||void 0===r?void 0:r.scrollPos)&&void 0!==n?n:0;p.current.fileMap.set(t,{history:e.field(s.cE,!1),foldedRanges:(0,u.q2)(e),selection:e.selection,doc:e.doc,scrollPos:i})}(e.state),g||(g=!0,e.view.requestMeasure(v),setTimeout((function(){return g=!1}),500)))}))])}),function(){d=!0,n.dispatch({effects:h.reconfigure([])})}}}),[n,t,p,f,h])}},67530:function(e,n,t){t.d(n,{nE:function(){return $},OQ:function(){return q},qi:function(){return M},UQ:function(){return W},YM:function(){return V},PQ:function(){return K},ZS:function(){return Y},eR:function(){return z},zj:function(){return J},cR:function(){return j}});var r=t(66091),i=t(57389),o=t(5683),a=t(72006),l=t(4405),c=t(45347),u=t(74985),s=t(50959),d=t(44478),f=t(14806),p=t(45634),h=t(39541),v=t(69994),g=t(87076),m=t(67036),y=t(58784),Z=t(71888),b=function(e){var n=e.isOpen,t=e.threadId,r=(0,s.useState)(!1),i=r[0],o=r[1],a=(0,y.GD)({variables:{id:t}});(0,s.useEffect)((function(){var e;if(a&&!a.error){var n=null===(e=a.data)||void 0===e?void 0:e.thread;n&&o("AnnotationAnchor"===(null===n||void 0===n?void 0:n.__typename)&&(null===n||void 0===n?void 0:n.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,u.tZ)(g.h,{alt:n?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[h.l0.width(20),h.l0.height(20),h.l0.transition.snappy,h.l0.cursor.pointer,h.l0.display.flex,h.l0.borderRadius(8),h.l0.position.relative,h.l0.overflow("visible"),n?h.l0.color.accentPrimaryStrongest:h.l0.color.foregroundDimmest,{borderWidth:h.TV.borderWidthDefault,borderStyle:"solid",borderColor:n?h.TV.accentPrimaryDefault:"transparent",backgroundColor:n?h.TV.accentPrimaryDimmer:h.TV.backgroundHigher,outline:0},{":hover":{borderColor:n?h.TV.accentPrimaryStronger:h.TV.outlineDimmer,color:n?h.TV.accentPrimaryStrongest:h.TV.foregroundDimmer,background:n?h.TV.accentPrimaryDefault+" !important":h.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,u.BX)(u.HY,{children:[i?(0,u.tZ)("div",{css:[h.l0.width(8),h.l0.height(8),h.l0.backgroundColor.redStronger,h.l0.position.absolute,h.l0.top(-1),h.l0.left(-1),h.l0.borderRadius("full")]}):null,(0,u.tZ)(m.Z,{})]})})},w=function(e){return e.apolloClient?(0,u.tZ)(Z.e,{client:e.apolloClient,children:(0,u.tZ)(b,(0,a.Z)({},e))}):null},x=t(91513),k=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}var i=t.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},t}(f.uU);k.prototype.elementClass="",k.prototype.toDOM=void 0,k.prototype.mapMode=f.gc.TrackBefore,k.prototype.startSide=k.prototype.endSide=-1,k.prototype.point=!0;var C=f.r$.define(),S={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return f.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},T=f.r$.define();var E=f.r$.define({combine:function(e){return e.some((function(e){return e}))}});function R(e){var n=[I];return e&&!1===e.fixed&&n.push(E.of(!0)),n}var I=v.lg.fromClass(function(){function e(n){(0,r.Z)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(T).map((function(e){return new _(n,e)}));var t=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(u){i=!0,o=u}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!n.state.facet(E),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(this.updateGutters(e)){var n=this.prevViewport,t=e.view.viewport,r=Math.min(n.to,t.to)-Math.max(n.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=f.Xs.iter(this.view.state.facet(C),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new P(e,n.view.viewport,-n.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var u,s=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=void 0;if(Array.isArray(d.type)){var h=!0,g=!1,m=void 0;try{for(var y,Z=d.type[Symbol.iterator]();!(h=(y=Z.next()).done);h=!0){var b=y.value;if(b.type==v.kH.Text){p=b;break}}}catch(B){g=!0,m=B}finally{try{h||null==Z.return||Z.return()}finally{if(g)throw m}}}else p=d.type==v.kH.Text?d:void 0;if(p){i.length&&(i=[]),G(r,i,d.from);var w=!0,x=!1,k=void 0;try{for(var S,T=o[Symbol.iterator]();!(w=(S=T.next()).done);w=!0){S.value.line(this.view,p,i)}}catch(B){x=!0,k=B}finally{try{w||null==T.return||T.return()}finally{if(x)throw k}}}}}catch(B){l=!0,c=B}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var E=!0,R=!1,I=void 0;try{for(var D,_=o[Symbol.iterator]();!(E=(D=_.next()).done);E=!0){D.value.finish()}}catch(B){R=!0,I=B}finally{try{E||null==_.return||_.return()}finally{if(R)throw I}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(T),t=e.state.facet(T),r=e.docChanged||e.heightChanged||e.viewportChanged||!f.Xs.eq(e.startState.facet(C),e.state.facet(C),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(P){o=!0,a=P}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var u=[],s=!0,d=!1,p=void 0;try{for(var h,v=t[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var g=h.value,m=n.indexOf(g);m<0?u.push(new _(this.view,g)):(this.gutters[m].update(e),u.push(this.gutters[m]))}}catch(P){d=!0,p=P}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}var y=!0,Z=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;k.dom.remove(),u.indexOf(k)<0&&k.destroy()}}catch(P){Z=!0,b=P}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}var S=!0,E=!1,R=void 0;try{for(var I,D=u[Symbol.iterator]();!(S=(I=D.next()).done);S=!0){var G=I.value;this.dom.appendChild(G.dom)}}catch(P){E=!0,R=P}finally{try{S||null==D.return||D.return()}finally{if(E)throw R}}this.gutters=u}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return v.tk.scrollMargins.of((function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==v.Nm.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null}))}});function D(e){return Array.isArray(e)?e:[e]}function G(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var P=function(){function e(n,t,i){(0,r.Z)(this,e),this.gutter=n,this.height=i,this.localMarkers=[],this.i=0,this.cursor=f.Xs.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),G(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new B(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),_=function(){function e(n,t){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)o(a);this.markers=D(t.markers(n)),t.initialSpacer&&(this.spacer=new B(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=D(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!f.Xs.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),B=function(){function e(n,t,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,i,o)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,c=!1;if(l){var u=l.elementClass;u&&(t+=" "+u);for(var s=o;s<this.markers.length;s++)if(this.markers[s].compare(l)){a=s,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}();var A=f.r$.define(),U=f.r$.define({combine:function(e){return(0,f.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=function(e){var t=r[e],i=n[e];r[e]=t?function(e,n,r){return t(e,n,r)||i(e,n,r)}:i},r=Object.assign({},e);for(var i in n)t(i);return r}})}}),L=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).number=e,i}var i=t.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},t}(k);function N(e,n){return e.state.facet(U).formatNumber(n,e.state)}T.compute([U],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(A)},lineMarker:function(e,n,t){return t.some((function(e){return e.toDOM}))?null:new L(N(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(U)!=e.state.facet(U)},initialSpacer:function(e){return new L(N(e,X(e.state.doc.lines)))},updateSpacer:function(e,n){var t=N(n.view,X(n.view.state.doc.lines));return t==e.number?e:new L(t)},domEventHandlers:e.facet(U).domEventHandlers}}));function X(e){for(var n=9;n<e;)n=10*n+9;return n}var F=new(function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return t}(k));C.compute(["selection"],(function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var u=e.doc.lineAt(c.head).from;u>t&&(t=u,n.push(F.range(u)))}}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return f.Xs.of(n)}));var O=t(43e3),M=f.Py.define(),W=f.Py.define(),H=f.Py.define(),z=f.Py.define(),V=f.Py.define(),j=v.tk.baseTheme({".replit-thread-highlight":{background:h.TV.accentPrimaryDimmest,transition:"".concat(h.TV.transitionDurationSnappy," all\n            ").concat(h.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),q=f.QQ.define({create:function(){return{}},update:function(e,n){var t=e;return(0,p.j)(n,M,(function(e){t=e.value})),n.changes.empty?t:t=Object.values(t).map((function(e){var t=e.indexStart>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexStart),r=e.indexEnd>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexEnd);return(0,l.Z)((0,a.Z)({},e),{indexStart:t,indexEnd:r})})).reduce((function(e,n){return e[n.id]=n,e}),{})}}),Y=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,W,(function(e){var r=n.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}t={id:e.value,indexStart:o,indexEnd:a}})),(0,p.j)(n,H,(function(){t=null})),(0,p.j)(n,V,(function(){t=null})),null!==t&&(0,p.j)(n,M,(function(e){if(!t)throw new Error("expected newPlaceholder");e.value[t.id]&&(t=null)})),!n.changes.empty&&t&&(t=(0,l.Z)((0,a.Z)({},t),{indexStart:n.changes.mapPos(t.indexStart),indexEnd:n.changes.mapPos(t.indexEnd)})),t}}),K=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,V,(function(e){t=e.value})),(0,p.j)(n,W,(function(e){t=e.value})),t}}),$=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i){var o;return(0,r.Z)(this,t),(o=n.call(this)).id=e,o.setThreadElements=i,o}var u=t.prototype;return u.eq=function(e){return e.id===this.id},u.toDOM=function(e){var n=this,t=document.createElement("div");t.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,x.L)(t,r,o),setTimeout((function(){n.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},n.id,t))}))})),t},u.destroy=function(e){var n=this;e.remove(),setTimeout((function(){n.setThreadElements((function(e){var t=(0,a.Z)({},e);return delete t[n.id],t}))}))},u.ignoreEvent=function(){return!0},t}(v.l9),Q=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i,o){var a;return(0,r.Z)(this,t),(a=n.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=t.prototype;return i.toDOM=function(e){var n=this,t=document.createElement("span");return t.setAttribute("aria-hidden","true"),t.className="cm-thread-indicator-widget",(0,d.createRoot)(t).render((0,u.tZ)(O.C,{children:(0,u.tZ)(w,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient})})),t.style.cursor="pointer",t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[V.of(e.state.field(K)===n.id?null:n.id)]})},t},i.eq=function(e){return e.id===this.id&&e.active===this.active},t}(k),J=function(e){return n={class:"cm-thread-indicator-gutter",markers:function(n){var t=n.state.field(q),r=n.state.field(K);return f.Xs.of(Object.values(t).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(t){var i=n.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new Q(t.id,t.id===r,e).range(i)})),!0)},initialSpacer:function(){return new Q("initial-spacer",!1)}},[R(),T.of((0,a.Z)({},S,n))];var n}},91513:function(e,n,t){function r(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}t.d(n,{L:function(){return r}})},58784:function(e,n,t){t.d(n,{AL:function(){return w},GD:function(){return v},VO:function(){return h},Y:function(){return Z},tT:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),a=t(91015),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(u(),a.j7);function v(e){var n=(0,r.Z)({},p,e);return l.a(h,n)}var g=(0,o.Ps)(s(),a.j7);function m(e){var n=(0,r.Z)({},p,e);return c.D(g,n)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var n=(0,r.Z)({},p,e);return c.D(y,n)}var b=(0,o.Ps)(f(),a.j7);function w(e){var n=(0,r.Z)({},p,e);return c.D(b,n)}},97318:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(72006),i=t(4405),o=t(2272),a=t(9970),l=t(50959),c=t(13233),u=t(58784),s=t(53828),d=t(91015),f=t(46179),p=t(48330),h=t(29599),v=t(45285),g=t(67530),m=t(18171),y=t(30826),Z=t.n(y);function b(e,n){if(!e)return null;var t,r=e.state.field(g.OQ),i=e.state.field(g.ZS),o=null!==(t=r[n])&&void 0!==t?t:(null===i||void 0===i?void 0:i.id)===n?i:null;return o||null}function w(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,n,t){var y=(0,c.Z)().showError,x=(0,p.Z)(),k=(0,f.Z)().map((function(e){return e.username})),C=(0,v.Z)().fs,S=(0,u.GD)({variables:{id:e}}),T=S.data,E=S.error,R=S.loading,I=S.client,D=function(){var t;return R||!T?!!n&&(null===(t=n.state.field(g.ZS))||void 0===t?void 0:t.id)===e:"AnnotationAnchor"!==T.thread.__typename}(),G=R,P=l.useMemo((function(){return G||!T?null:"UserError"===T.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===T.thread.__typename?T.thread:null}),[T,e,G]),_=(0,o.Z)((0,u.tT)({onError:function(e){return y(e.message)},update:function(e,n){var t,r;n.errors?n.errors.forEach((function(e){return y(e.message)})):"UserError"!==(null===(t=n.data)||void 0===t||null===(r=t.createThread)||void 0===r?void 0:r.__typename)||y(n.data.createThread.message)}}),1),B=_[0],A=(0,o.Z)((0,u.AL)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}}),1),U=A[0],L=(0,o.Z)((0,u.Y)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}}),1),N=L[0],X=(0,o.Z)((0,d.Hj)(),1)[0],F=(0,m.Z)((function(){return Z()(X,1e3,{trailing:!1})}),[X]),O=function(){var e=null===T||void 0===T?void 0:T.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:P,isPlaceholder:D,error:E,loading:G,getHighlight:w,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o="AnnotationAnchor"===(null===T||void 0===T||null===(n=T.thread)||void 0===n?void 0:n.__typename)?T.thread:null;if(!o)throw new Error("expected thread");N({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i.Z)((0,r.Z)({},o,t),{isResolved:"boolean"===typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,h.kW)(c,{users:(0,a.Z)(k).concat(["everyone"])}).mentions};if(D&&n&&t){var p=n.state.field(g.ZS),v={id:e,replId:x,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:C.getOTVersion(t),path:t};B({variables:{thread:v,message:f,highlight:w(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),I.writeQuery({query:u.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===T||void 0===T?void 0:T.currentUser}});var m=I.readQuery({query:s.Jq,variables:{replId:x,path:t}});if(m){var y,Z="ThreadsByFileResult"===(null===(y=m.threadsByFile)||void 0===y?void 0:y.__typename)?m.threadsByFile.threads:[],b=O().user;I.writeQuery({query:s.Jq,variables:{replId:x,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(Z).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:b,isResolved:!1,participants:[b]},v)])}}})}}else{var S="AnnotationAnchor"===(null===T||void 0===T||null===(l=T.thread)||void 0===l?void 0:l.__typename)?T.thread:null;if(!S)throw new Error("expected thread");U({variables:{replId:x,threadId:S.id,threadMessage:f,highlight:w(n,S.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},O(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(n){var t=n.messageId;F({variables:{threadId:e,messageId:t,message:null}})}}}},53828:function(e,n,t){t.d(n,{Jq:function(){return u},eR:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}},45634:function(e,n,t){function r(e,n,t){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(n)&&t(u)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var s=!0,d=!1,f=void 0;try{for(var p,h=e.transactions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){r(p.value,n,t)}}catch(v){d=!0,f=v}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}t.d(n,{j:function(){return r}})},47581:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(14806),i=t(45634);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Py.define(),o=r.QQ.define({create:function(){return n},update:function(n,r){return(0,i.j)(r,t,(function(t){n=e(t.value,n)})),n}});return{effect:t,state:o}}},2954:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(74985),i=t(6394),o=t(50959);function a(e){var n=e.json,t=(0,o.useMemo)((function(){return JSON.stringify(n,null,2)}),[n]);return(0,r.tZ)(i.Z,{language:"json",code:t})}},62227:function(e,n,t){t.d(n,{X:function(){return hn}});var r=t(72006),i=t(74985),o=t(45353),a=t(82568),l=t(27691),c=t(39541),u=t(25198),s=t(85368),d=t(50959),f=t(18171),p=t(94716),h=t(32104),v=t(17807),g=t(2272),m=t(42445),y=t(92153),Z=t(56169),b=t(9970);function w(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}function x(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,b.Z)(new Set(t))}function k(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return-1}return t.length-r.length}var C=t(33523),S=t(13525),T=(0,d.createContext)(void 0);function E(){var e=(0,d.useContext)(T);if(!e)throw new Error("Expected store in context");return e}function R(e){var n=E();return(0,C.Dv)(e,{store:n})}var I=function(e){var n=E();return(0,C.b9)(e,{store:n})};function D(e){return(0,S.b)(e,E())}var G=t(23457),P=function(e){return"item-"+e},_=(0,m.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),B=(0,m.cn)(!0);function A(){return R(B)}var U=(0,m.cn)(!1);function L(){return R(U)}var N=(0,m.cn)(null),X=(0,m.cn)(!1),F=(0,m.cn)((function(e){return!e(X)})),O=(0,m.cn)(!1),M=(0,m.cn)(null),W=(0,m.cn)((function(e){return e(Y)>-1})),H=(0,m.cn)((function(e){var n=e(_);return!n.isLoading&&0===n.rows.length})),z=(0,m.cn)({label:"",input:"",menu:""});var V=(0,m.cn)(""),j=(0,m.cn)(""),q=(0,m.cn)(""),Y=(0,m.cn)(-1),K=(0,m.cn)((function(e){var n=e(Y);return e($).findIndex((function(e){return"item"===e.type&&e.index===n}))}));var $=(0,m.cn)((function(e){return e(_).rows})),Q=(0,m.cn)((function(e){return e(_).items})),J=(0,m.cn)((function(e){return e(Q).length})),ee=(0,m.cn)((function(e){return e(se).filter((function(e){return"context"===e.data.type&&Boolean(e.match)}))})),ne=(0,m.cn)((function(e){return e(ee).length>0})),te=(0,m.cn)(!1),re=(0,m.cn)(null,(function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n(te,!0),n(_,(function(e){return(0,y.ZP)(e,(function(e){e.path=[e.path[0]]}))})),e(ke).setPath(e(se)),n(Y,-1),n(V,""),n(j,""),n(q,""),e(X)&&n(B,!1),r.focus)&&(null===(t=e(ye))||void 0===t||t.focus())})),ie=(0,m.cn)((function(e){return e(_).placeholder}));var oe=(0,m.cn)((function(e){return e(_).isLoading}));var ae=(0,m.cn)((function(e){return e(_).path.length}));function le(){return R(ae)}var ce=(0,m.cn)((function(e){return e(ne)||Boolean(e(V))}));var ue=(0,m.cn)(null,(function(e,n,t){var r;n(M,t),"context"===t.data.type&&(null===(r=e(ye))||void 0===r||r.focus())}));var se=(0,m.cn)((function(e){return e(_).path})),de=(0,m.cn)((function(e){return 1===e(se).length})),fe=(0,m.cn)(null,(function(e,n,t){var r=e(se),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(Y,0),e(ke).setPath(r),n(V,""))}));function pe(e,n){return n.match.score-e.match.score}var he=(0,m.cn)(null,(function(e,n,t){var r=e(q);if(r===e(q)){var i,o=t.items.sort(pe),a=t.path.length?t.path[t.path.length-1]:null,l=function(e,n){var t=new Map;e.forEach((function(e){var n=e.path.slice(0,-1),r="section:"+w(n),i=t.get(r);if(i)i.items.push(e);else{var o=n[n.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,b.Z)(t.entries()).sort((function(e,t){var r=(0,g.Z)(e,2),i=r[0],o=r[1],a=(0,g.Z)(t,2),l=a[0],c=a[1];if(!n||!n.includes(i)&&!n.includes(l))return c.score-o.score;var u=n.indexOf(i),s=n.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1})),i={items:[],rows:[]},o=0;return r.forEach((function(e){var n=(0,g.Z)(e,2),t=n[0],r=n[1];i.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})}))})),i}(o,r?e(_).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),c=l.items,u=l.rows,s=null!==(i=null===a||void 0===a?void 0:a.data)&&void 0!==i?i:null,d=null===s||void 0===s?void 0:s.description;e(O)&&"group"!==(null===s||void 0===s?void 0:s.type)&&(d=null===s||void 0===s?void 0:s.label),n(_,(function(e){return{items:c,rows:u,isLoading:Boolean(t.partial),path:t.path,placeholder:d||e.placeholder}}))}})),ve=(0,m.cn)(null,(function(e,n,t){n(N,t),n(_,(function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}}))})),ge=(0,m.cn)(null,(function(e,n,t){n(V,t),n(Y,t?0:-1),n(N,null),n(_,(function(e){return(0,y.ZP)(e,(function(e){e.isLoading=Boolean(t)}))})),e(X)&&n(B,Boolean(t))}));var me=(0,m.cn)(null,(function(e,n,t){n(_,(function(e){return(0,y.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=t}))})),n(ge,""),n(j,""),n(q,"")})),ye=(0,m.cn)(null),Ze=(0,m.cn)(null,(function(e,n){var t=e(Y);if(!(t<0)){var r=e(Q)[t];r&&n(M,r)}})),be=(0,m.cn)(null,(function(e,n,t){var r=e(B),i=e(J),o=e(Y);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;return n(Y,a<i?a:0),void n(B,!0);case"ArrowUp":t.preventDefault();var l=o-1;return void n(Y,Math.max(-1,l));case"Home":return t.preventDefault(),void(t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0));case"End":t.preventDefault();var c=t.currentTarget.value.length;return void(t.shiftKey?t.currentTarget.selectionEnd=c:t.currentTarget.setSelectionRange(c,c));case"Escape":if(!e(V))return;if(t.preventDefault(),n(ge,""),n(j,""),e(F))return;return void n(B,!1);case"Enter":if(!r)return;return t.preventDefault(),void n(Ze);case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var u="PageUp"===t.key?-10:10;return void n(Y,(function(e){return Math.max(Math.min(e+u,i-1),0)}))}}));function we(){var e=I(ye),n=R(ie),t=(0,g.Z)(function(){var e=R(V),n=I(ge),t=I(j),r=(0,d.useTransition)()[1];return[e,(0,d.useCallback)((function(e){var i="string"===typeof e?e:e.currentTarget.value;n(i),r((function(){return t(i)}))}),[n,r,t])]}(),2),r=t[0],i=t[1],o=I(Y),a=R(Y),l=R(z),c=A();return{onBlur:function(){return o(-1)},onChange:i,placeholder:n,value:r,ref:e,disabled:L(),ariaAttrs:{id:l.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":a>-1?P(a):"","aria-controls":l.menu,"aria-expanded":c,"aria-labelledby":l.label}}}var xe=(0,m.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t];e(te)&&(r=[r[0]]);var i=e(j);n(q,i),e(ke).setPath(r,i)})),ke=(0,m.cn)({});var Ce=(0,m.cn)(null,(function(e,n){var t=e(se),r=e(ee);if(r.pop()){var i=r.pop();if(i){var o=t.indexOf(i);t=t.slice(0,o+1),n(Y,0),n(me,t),e(ke).setPath(t)}else n(re)}}));function Se(e){var n=e.command,t=e.onSelect,r=e.onAction,i=A(),o=R(ce),a=R(V),l=I(Y),c=R(M),u=R(H),s=I(me),h=I(U),v=I(ve),g=L(),m=R(N),y=I(be),Z=R(W),b=I(re),w=function(e){var n=R(ke),t=D(de),r=D(j),i=I(q),o=I(xe),a=(0,p.Z)(e);return(0,d.useEffect)((function(){t.current&&o(e)}),[n,t,e,r,o]),(0,d.useEffect)((function(){return t.subscribe((function(e){e&&o(a.current)}))}),[n,r,t,o,a]),(0,d.useEffect)((function(){var e=function(e){i(e),n.search(e)};return e(r.current),r.subscribe(e)}),[n,r,t,i,a]),n}(n),x=(0,p.Z)({input:R(ye),onSelect:t,onAction:r}),k=(0,f.Z)((function(){return function(){var e,n;return null===(e=x.current)||void 0===e||null===(n=e.input)||void 0===n?void 0:n.focus()}}),[x]),C=(0,f.Z)((function(){return function(){var e,n;return null===(e=x.current)||void 0===e||null===(n=e.input)||void 0===n?void 0:n.blur()}}),[x]),S=I(Ce),T=(0,f.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return y(e);S()}}),[y,S]);return(0,d.useEffect)((function(){var e=function(e){v(null!==e&&void 0!==e?e:"Something went wrong"),k()};if(c&&"group"!==c.data.type){if("context"===c.data.type){var n=c.path;return s(n),l(-1),void w.setPath(n)}switch(c.data.type){case"output":case"openPane":case"error":var t,r;return null===(r=(t=x.current).onSelect)||void 0===r||r.call(t,c),void b()}var i=null;try{i=c.data.run()}catch(a){return void e()}var o=!1;return h(!0),Promise.resolve(i).then((function(n){var t,r;o||(h(!1),"error"!==(null===n||void 0===n?void 0:n.type)?(null===(r=(t=x.current).onAction)||void 0===r||r.call(t),b()):e(n.message))})).catch((function(){e()})),function(){o=!0}}}),[x,c,s,l,b,h,v,C,k,w]),{focus:k,onKeyDown:T,inputValue:a,isOpen:i,isClearable:o,noResults:u,hasHighlightedItem:Z,isRunning:g,actionError:m,clearCommads:b}}function Te(e){var n={label:(0,Z.D)(),input:(0,Z.D)(),menu:(0,Z.D)()},t=(0,d.useState)((function(){var t,r=(0,m.MT)();r.set(z,n),r.set(O,Boolean(e.iconBreadcrumbs)),r.set(X,Boolean(e.openOnInput)),r.set(B,!e.openOnInput),r.set(ke,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var n=++l,i=0,c=[],u=o[o.length-1];u.commands?(void 0!==t&&(a=setTimeout((function(){c.length&&r({items:(0,b.Z)(c).sort(k),partial:!0,path:o})}),t)),function t(u,s,d){if(i++,!u.commands)throw new Error("Expected commands");var f=(0,b.Z)(s).concat([u]),p=f.length===o.length;Promise.resolve(u.commands({active:p,search:e,path:f})).then((function(u){n===l?(i--,u.forEach((function(n,r){var i=(0,b.Z)(f).concat([n]),o=(0,b.Z)(d).concat([r]),a=n.match?n.match({search:e,data:n.data,path:i,active:p}):null;a&&c.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,f,o)})),i>0||(a&&clearTimeout(a),r({items:(0,b.Z)(c).sort(k),path:o}))):a&&clearTimeout(a)}))}(u,o.slice(0,o.length-1),[])):r({items:c,path:o})},o=n,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return r.set(he,e)}}));var i,o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(i=null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.description)&&void 0!==i?i:null;return a&&r.set(_,(function(e){return(0,y.ZP)(e,(function(e){e.placeholder=a}))})),r}));return t[0]}var Ee=t(57913),Re=(0,a.X)({root:[c.l0.reset.button,c.l0.viewStyle,c.l0.rowWithGap(4),c.l0.align.center,c.l0.borderRadius(0),c.l0.px(4),c.l0.cursor.pointer,c.l0.color.foregroundDimmer,{"&:hover":{color:c.TV.foregroundDefault}}],icon:[c.l0.width(16),c.l0.height(16),c.l0.position.relative],text:[c.l0.truncate,c.l0.flex.shrink(1),{fontSize:c.TV.fontSizeDefault}]}),Ie=(0,d.memo)((function(){var e={iconOnly:R(O),breadcrumbs:R(ee),onClick:I(fe)},n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,i.tZ)(i.HY,{children:n.map((function(e,n){if(!e.data)return null;if(!("label"in e.data))return null;var o=e.data,a=o.label,l=o.icon,c=a+n;return(0,i.BX)("button",{css:Re.root,onClick:function(){return r(e)},children:[(0,i.tZ)(s.G,{css:Re.icon,children:(0,d.cloneElement)(l,{size:16})}),t?null:(0,i.tZ)(s.G,{css:Re.text,children:a}),(0,i.tZ)(Ee.Z,{size:12})]},c)}))}):null})),De=t(43312),Ge=t(80336),Pe=(0,De.iv)([c.l0.reset.button,c.l0.viewStyle,c.l0.center,c.l0.height("100%"),c.l0.px(4),c.l0.cursor.pointer,c.l0.color.foregroundDimmest,{"&:hover":{color:c.TV.foregroundDefault}}]);function _e(e){return(0,i.tZ)("button",{css:Pe,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,i.tZ)(h.Z,{}):(0,i.tZ)(Ge.Z,{})})}var Be=t(4405),Ae=t(94629),Ue=t(63128),Le=t(4421),Ne=t(92508),Xe=t(13716),Fe=t(71321),Oe=t(49944);function Me(e){var n=e.data,t="openPane"===n.type?n.pane:void 0;return t&&!(0,Ne.Ur)(t)?t:null}var We={transitionDuration:Le.H.duration,transitionTimingFunction:Le.H.timingFunction},He=(0,a.X)({background:[We,{transitionProperty:"background-color"}],opacity:[We,{transitionProperty:"opacity"}],color:[We,{transitionProperty:"color"}]}),ze=[c.l0.position.absolute,c.l0.top(0),c.l0.left(0),c.l0.width("100%")],Ve=(0,a.X)({item:[ze,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(v.dj.interactiveBackground,")")},"& > div > div":{transition:"120ms ease-out"},"&:hover > div > div":{backgroundColor:"var(".concat(v.dj.interactiveBackground,")"),color:"".concat(c.TV.foregroundDefault," !important")}}],divider:[ze,c.l0.justify.center,c.l0.px(8)]}),je=(0,d.memo)((function(e){var n=function(e){var n=I(ue),t=(0,d.useRef)(null),r=R((0,d.useMemo)((function(){return(0,G.kv)($,(function(n){return n[e]}))}),[e])),i="item"===r.type?r.index:null,o=R((0,d.useMemo)((function(){return(0,m.cn)((function(e){return null!==i&&e(Y)===i}))}),[i])),a="item"===(null===r||void 0===r?void 0:r.type)?function(){return n(r.item)}:void 0,l="item"===r.type?{id:P(e),role:"option","aria-selected":o}:void 0;return{row:r,active:o,ref:t,onClick:a,ariaAttrs:l}}(e.index),t=n.row,o=n.active,a=n.onClick,l=n.ariaAttrs,c=n.ref;if(!t)return null;var u={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===t.type)return(0,i.tZ)(tn,{path:t.path,style:u,border:e.index>0});var f=t.item,p=f.data,h=f.match;if("group"===p.type)return null;var v=h.render;if(v&&"content"in v&&v.content)return(0,i.tZ)(s.G,(0,Be.Z)((0,r.Z)({innerRef:c,css:Ve.item,style:u,onClick:a},l),{children:(0,i.tZ)(Ue.T,{elevated:o,css:He.background,children:(0,d.cloneElement)(v.content,{active:o})})}));var g=Me(f),y=p.label,Z=p.icon,b=v&&"ranges"in v?v.ranges:void 0;return(0,i.tZ)(s.G,(0,Be.Z)((0,r.Z)({innerRef:c,css:Ve.item,style:u,onClick:a},l),{children:g?(0,i.tZ)(en,{active:o,pane:g,highlight:b}):(0,i.tZ)(Ke,{active:o,icon:Z,text:y,highlight:b,description:p.description,shortcut:p.keyboardShortcut,hasChildren:"context"===f.data.type})}))})),qe=[c.l0.p(8),He.background],Ye=(0,a.X)({root:[qe,c.l0.rowWithGap(8),c.l0.align.center,{userSelect:"none"}],iconText:[c.l0.rowWithGap(8),c.l0.align.center],description:[c.l0.truncate,c.l0.flex.growAndShrink(1),{fontSize:c.TV.fontSizeSmall}],shortcut:{justifySelf:"end",marginLeft:"auto"}});function Ke(e){return(0,i.BX)(Ue.T,{elevated:e.active,css:Ye.root,children:[(0,i.BX)(s.G,{css:Ye.iconText,children:[(0,i.tZ)(s.G,{css:Je.root,style:{opacity:e.active?1:.7},children:(0,d.cloneElement)(e.icon,{size:$e})}),(0,i.tZ)(Oe.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,i.tZ)(s.G,{style:{color:e.active?c.TV.foregroundDimmer:c.TV.foregroundDimmest},css:Ye.description,children:e.description}):null,e.shortcut?(0,i.tZ)(s.G,{css:Ye.shortcut,children:(0,i.tZ)(o.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,i.tZ)(s.G,{css:Ye.shortcut,children:(0,i.tZ)(Ee.Z,{size:12})}):null]})}var $e=16,Qe=(0,a.X)({root:[qe,c.l0.align.center,c.l0.rowWithGap(8)],iconSurface:[c.l0.p(8),c.l0.borderRadius(8),c.l0.position.relative,He.background]}),Je=(0,a.X)({root:[He.opacity,c.l0.width($e),c.l0.height($e),c.l0.position.relative]});function en(e){var n=e.pane,t=e.active,r=e.highlight,o=(0,Ne.Se)(),a=o.Icon({pane:n,size:$e}),l=o.getTitle(n),c=(0,Xe.b2)({paneType:n.type});return(0,i.BX)(Ue.T,{elevated:t,css:Qe.root,children:[(0,i.tZ)(Ue.T,{elevated:!0,css:Qe.iconSurface,children:(0,i.BX)(s.G,{css:Je.root,style:{opacity:e.active?1:.7},children:[a,c?(0,i.tZ)(Fe.B,{}):null]})}),(0,i.tZ)(Oe.x,{dimmed:!t,text:l,highlight:r})]})}var nn=(0,a.X)({borderHeaderWrap:[{userSelect:"none"},ze,c.l0.p(8),c.l0.pt(8),c.l0.pb(4),c.l0.colWithGap(0),c.l0.justify.spaceBetween],borderWrap:[{userSelect:"none"},ze,c.l0.justify.center,c.l0.px(8)],headerWrap:[{userSelect:"none"},ze,c.l0.justify.end,c.l0.pb(4),c.l0.px(8)],header:[{userSelect:"none"},c.l0.rowWithGap(4),c.l0.align.center],text:[{userSelect:"none"},c.l0.flex.shrink(1),c.l0.color.foregroundDimmest,c.l0.truncate,{fontSize:c.TV.fontSizeSmall}],border:[c.l0.height(1),c.l0.width("100%")]}),tn=(0,d.memo)((function(e){var n=le(),t=x(e.path,n),r=(0,i.tZ)(Ue.T,{elevated:!0,css:nn.border}),o=0===t.length;if(e.border&&o)return(0,i.tZ)(s.G,{css:nn.borderWrap,style:e.style,children:r});var a=(0,i.tZ)(s.G,{css:nn.header,children:t.map((function(e,n){return(0,i.BX)(d.Fragment,{children:[n>0?(0,i.tZ)(Ee.Z,{size:12,color:c.TV.foregroundDimmest}):null,(0,i.tZ)(s.G,{css:nn.text,children:e})]},e+n)}))});return e.border||o?(0,i.BX)(s.G,{css:nn.borderHeaderWrap,style:e.style,children:[r,a]}):(0,i.tZ)(s.G,{css:nn.headerWrap,style:e.style,children:a})})),rn=(0,a.X)({root:[c.l0.flex.growAndShrink(1),c.l0.overflow("hidden"),c.l0.pt(8)],scrollParent:[c.l0.height("100%"),c.l0.overflowY("auto"),c.l0.flex.growAndShrink(1)]}),on=(0,d.memo)((function(e){var n,t=function(){var e=R($),n=A(),t=(0,d.useRef)(null),r=le(),i=R(z);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),o=t.rows,a=t.isOpen,l=t.scrollRef,u=t.currentPathIndex,f=t.ariaAttrs,p=(0,Ae.MG)({count:o.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,getScrollElement:function(){return l.current},getItemKey:function(e){var n=o[e];return n?"section"===n.type?n.key:w(n.item.path):""},estimateSize:function(e){var n=o[e];return n?function(e){var n=e.row,t=e.currentPathIndex,r=e.isFirst;if("section"===n.type){var i=x(n.path,t).length?24:0;return r?i:i+16}var o,a=n.item.match.render;return a&&"content"in a?null!==(o=a.height)&&void 0!==o?o:32:Me(n.item)?48:32}({row:n,currentPathIndex:u,isFirst:0===e}):0}}),h={borderRadius:e.hasFooter?void 0:c.TV.space8,display:a?void 0:"none"},v=p.scrollToIndex,g=R(K);return(0,d.useEffect)((function(){var e=g;e<0||(1===e&&(e=0),v(e,{behavior:"smooth"}))}),[v,g]),(0,i.tZ)(s.G,(0,Be.Z)((0,r.Z)({css:rn.root},f),{style:h,children:(0,i.tZ)(s.G,{innerRef:l,css:rn.scrollParent,children:(0,i.tZ)(s.G,{style:{height:"".concat(p.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:a?p.getVirtualItems().map((function(e){return(0,i.tZ)(je,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),an=(0,a.X)({root:[c.l0.flex.shrink(1),c.l0.height("100%")],footer:[c.l0.pt(8)],keyComboBlocks:[c.l0.pr(8)],menuWrap:[c.l0.flex.shrink(1)],row:[c.l0.position.absolute,c.l0.top(0),c.l0.left(0),c.l0.width("100%")],menu:[c.l0.flex.shrink(1),c.l0.overflow("auto")],running:[c.l0.center,c.l0.flex.growAndShrink(1)],error:c.l0.p(8)}),ln=(0,a.X)({root:[c.l0.viewStyle,c.l0.flex.growAndShrink(1),c.l0.fontSize("default"),c.l0.height("100%"),c.l0.px(4),{backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:c.TV.foregroundDimmest},"&:hover::placeholder":{color:c.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:c.TV.foregroundDimmest}},c.l0.px(8),{fontSize:c.TV.fontSizeDefault}]}),cn=(0,d.memo)((function(e){var n=we();return(0,i.tZ)("input",(0,r.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:ln.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoComplete:"off"},n.ariaAttrs))})),un=[v.gU.filled,c.l0.viewStyle,c.l0.flex.row,c.l0.align.center,c.l0.flex.growAndShrink(1),c.l0.height(32)],sn=(0,a.X)({container:[c.l0.p(8),c.l0.pb(0),{"& > div > button + input":{paddingLeft:0}}],surface:un,surfaceRunning:[un,l.p.foregroundPulse()]});function dn(e){var n=L();return(0,i.tZ)(s.G,{css:sn.container,children:(0,i.tZ)(s.G,{css:n?sn.surfaceRunning:sn.surface,children:e.children})})}var fn=(0,d.memo)((function(e){var n=R(ce),t=R(oe);return n?(0,i.tZ)(_e,{onClick:e.onClick,isLoading:t}):null}));function pn(e){!function(e){var n=I(O);(0,d.useEffect)((function(){n(Boolean(e.iconBreadcrumbs))}),[n,e.iconBreadcrumbs]);var t=I(X);(0,d.useEffect)((function(){t(Boolean(e.openOnInput))}),[t,e.openOnInput])}({iconBreadcrumbs:e.iconBreadcrumbs,openOnInput:e.openOnInput});var n=Se({command:e.command,onSelect:e.onSelect,onAction:e.onAction}),t=n.isOpen,r=n.focus,a=n.clearCommads,l=n.isClearable,v=n.onKeyDown,g=n.inputValue,m=n.noResults,y=n.hasHighlightedItem,Z=n.isRunning,b=n.actionError,w=(0,p.Z)({inputValue:g,noResults:m,hasHighlightedItem:y,onSubmit:e.onSubmit,onKeyDown:e.onKeyDown}),x=(0,f.Z)((function(){return function(e){var n,t=w.current;null===(n=t.onKeyDown)||void 0===n||n.call(t,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&t.inputValue&&t.noResults&&t.onSubmit?t.onSubmit(t.inputValue):v(e))}}),[w,v]),k=e.focusRef;(0,d.useEffect)((function(){k&&(k.current=r)}),[r,k]);var C=R(z);return(0,i.BX)(s.G,{css:an.root,children:[(0,i.tZ)("label",{id:C.label,htmlFor:C.input,css:c.l0.visuallyHidden,children:"Commands"}),(0,i.BX)(dn,{children:[(0,i.tZ)(Ie,{}),(0,i.tZ)(cn,{autoFocus:Boolean(e.autoFocus),onKeyDown:x}),(0,i.tZ)(fn,{onClick:function(){return a({focus:!0})}}),e.keyboardShortcut&&!l?(0,i.tZ)(s.G,{css:an.keyComboBlocks,children:(0,i.tZ)(o.bM,{keyCombo:e.keyboardShortcut,small:!0})}):null]}),b?(0,i.tZ)(s.G,{css:an.error,children:(0,i.tZ)(u.E,{colorway:"warning",text:b})}):null,t&&!Z?(0,i.BX)(i.HY,{children:[(0,i.tZ)(on,{overscan:e.overscan,hasFooter:Boolean(e.footer)}),e.footer?(0,i.tZ)(s.G,{css:an.footer,children:e.footer}):null]}):null,Z?(0,i.tZ)(s.G,{css:an.running,children:(0,i.tZ)(h.Z,{size:24})}):null]})}function hn(e){var n=Te({iconBreadcrumbs:e.iconBreadcrumbs,command:e.command,openOnInput:e.openOnInput});return(0,i.tZ)(T.Provider,{value:n,children:(0,i.tZ)(pn,{overscan:e.overscan,onSelect:e.onSelect,onAction:e.onAction,onSubmit:e.onSubmit,command:e.command,autoFocus:Boolean(e.autoFocus),focusRef:e.focusRef,keyboardShortcut:e.keyboardShortcut,openOnInput:e.openOnInput,onKeyDown:e.onKeyDown,footer:e.footer,iconBreadcrumbs:e.iconBreadcrumbs})})}},56029:function(e,n,t){t.d(n,{m:function(){return f}});var r=t(72006),i=t(4405),o=t(77637),a=t(2272),l=t(74985),c=t(50959),u=t(45510),s=t(60566),d=t(66539);function f(e){var n=e.textToCopy,t=e.tooltip,f=(0,o.Z)(e,["textToCopy","tooltip"]),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],g=c.useRef(null);return c.useEffect((function(){return function(){g.current&&clearTimeout(g.current)}}),[]),(0,l.tZ)(d.u,{isOpen:h,tooltip:null!==t&&void 0!==t?t:"".concat(n," copied to clipboard"),placement:"bottom-end",children:(0,l.tZ)(u.zx,(0,i.Z)((0,r.Z)({},f),{onClick:function(e){(0,s.Z)(n),v(!0),g.current&&clearTimeout(g.current),g.current=setTimeout((function(){return v(!1)}),4e3),f.onClick&&f.onClick(e)}}))})}},11983:function(e,n,t){t.d(n,{KG:function(){return g},bx:function(){return y},h3:function(){return b},pC:function(){return x}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216);function c(){var e=(0,i.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(c()),v=(0,o.Ps)(u(),h);function g(e){var n=(0,r.Z)({},p,e);return a.a(v,n)}var m=(0,o.Ps)(s());function y(e){var n=(0,r.Z)({},p,e);return a.a(m,n)}var Z=(0,o.Ps)(d(),h);function b(e){var n=(0,r.Z)({},p,e);return l.D(Z,n)}var w=(0,o.Ps)(f(),h);function x(e){var n=(0,r.Z)({},p,e);return l.D(w,n)}},8907:function(e,n,t){t.d(n,{Z:function(){return _}});var r,i=t(77637),o=t(2272),a=t(74985),l=t(48306),c=t.n(l),u=t(50959),s=t(11983),d=t(85368),f=t(61284),p=t(45510),h=t(39541),v=t(39137),g=t(66539),m=t(60566),y=t(88254),Z=t(32508),b=t.n(Z),w=t(8622),x=t(56169),k=t(15544),C=t(54873),S=t(32104),T=t(63837),E=t(80336),R=d.K.span;function I(e){switch(e.status){case r.Verified:return(0,a.tZ)(T.Z,{color:h.TV.accentPositiveDefault});case r.Failed:return(0,a.tZ)(E.Z,{color:h.TV.accentNegativeDefault});case r.Verifying:return(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault});default:return null}}function D(e){var n=e.repl,t=e.existingDomain,r=e.deploymentId,i=e.onLink,l=e.onGoBack,c=e.onLinkStarted,g=e.onStateChanged,Z=(0,u.useState)(t?"loading":null),w=Z[0],C=Z[1],S=(0,u.useState)(!1),T=S[0],E=S[1],R=(0,u.useState)(null),I=R[0],D=R[1],P=(0,u.useState)(!1),_=P[0],B=P[1],A=(0,u.useState)(!0),U=A[0],L=A[1],N=(0,o.Z)((0,s.h3)(),2),X=N[0],F=N[1],O=(0,u.useRef)(null),M=(0,u.useRef)(null),W=(0,u.useRef)(null),H=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},z=function(e){var n;(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.value)&&(0,m.Z)(e.current.value).catch((function(e){y.$e((function(n){n.setTag("domain-link",!0),n.setExtra("type","copy"),y.Tb(e)}))}))},V=(0,u.useState)(t||""),j=V[0],q=V[1];(0,u.useEffect)((function(){F.data&&"Repl"===F.data.linkReplDomain2.__typename&&i()}),[F.data,i]),(0,u.useEffect)((function(){L(!r)}),[r]);var Y=function(e){C(e),g()},K=b()(j,{require_valid_protocol:!1})&&j.split(".").length>=2,$=K&&2===j.split(".").length,Q=function(e,n,t){var r=e.replace(/^https:\/\//,"");return t?r.replace(n,t):r}(n.hostedUrl,n.id,r),J=n.apexProxy,ee="replit-verify=".concat(null!==r&&void 0!==r?r:n.id),ne=(0,x.H)();return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,a.BX)(f.xv,{multiline:!0,children:["Learn more"," ",(0,a.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("domain"),children:(0,a.tZ)(f.xv,{color:"dimmer",variant:"small",children:"Step 1: Enter your domain"})}),(0,a.tZ)(v.II,{className:"cname-url",readOnly:"loading"===w,value:j,onChange:function(e){q(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",j);q(e.hostname)}catch(n){}}()},placeholder:"example.com",id:ne("domain")})]}),!$&&U||_?null:(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("record"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add an ",(0,a.tZ)("code",{children:"A"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"A"}),(0,a.tZ)(v.II,{readOnly:!0,ref:O,onChange:function(){return null},value:J,onFocus:function(){return H(O)},id:ne("record")}),(0,a.tZ)(p.zx,{onClick:function(){return z(O)},text:"Copy"})]})]}),U?(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{outlined:!0,onClick:function(){return B(!0)},text:"Use CNAME record instead."})}):null]}),K&&(_||U&&!$)?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("CNAMERecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add a ",(0,a.tZ)("code",{children:"CNAME"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"CNAME"}),(0,a.tZ)(v.II,{readOnly:!0,ref:W,onChange:function(){return null},value:Q,onFocus:function(){return H(W)},id:ne("CNAMERecord")}),(0,a.tZ)(p.zx,{onClick:function(){return z(W)},text:"Copy"})]}),$?(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{onClick:function(){return B(!1)},text:"Use A record instead",outlined:!0})})]}):null]}):null,K?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[$?(0,a.tZ)("label",{htmlFor:ne("txtRecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["This domain also requires a ",(0,a.tZ)("code",{children:"TXT"})," Record"]})}):(0,a.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,a.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"TXT"}),(0,a.tZ)(v.II,{readOnly:!0,ref:M,onChange:function(){return null},value:ee,onClick:function(){return H(M)},id:ne("txtRecord")}),(0,a.tZ)(p.zx,{onClick:function(){return z(M)},text:"Copy"})]})]}):null,"loading"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(G,{replId:n.id,domain:j,onVerified:function(){return Y("verified")},onError:function(){return Y("error")}})}):null,"verified"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(f.xv,{children:"Your domain has been verified."})}):null,"error"===w||I?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.BX)(f.xv,{children:["Creating the domain link failed",I?": "+I:"","."]})}):null,(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:l,text:"Close"}),K&&null===w?(0,a.tZ)(p.zx,{disabled:T,onClick:function(){E(!0),D(null),X({variables:{replId:n.id,domain:j,deploymentId:r}}).then((function(e){var n,t=(null===(n=e.data)||void 0===n?void 0:n.linkReplDomain2)||null;"Repl"===(null===t||void 0===t?void 0:t.__typename)?(D(null),Y("loading")):("ServiceUnavailable"!==(null===t||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===t||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===t||void 0===t?void 0:t.__typename)||D(null===t||void 0===t?void 0:t.message),Y("error")),E(!1),c()})).catch((function(e){E(!1),D(e.message)}))},text:"".concat(T?"Linking domain...":"Link domain"),iconLeft:(0,a.tZ)(k.Z,{}),colorway:"primary"}):null]})]})}function G(e){var n,t=e.domain,r=e.replId,l=e.onVerified,p=e.onError,v=(0,s.bx)({variables:{replId:r,domain:t},pollInterval:1e3}),g=v.data,m=v.stopPolling;if((0,u.useEffect)((function(){var e,n;if(g&&"Repl"===g.repl.__typename){var t=g.repl;if("NotFoundError"!==(null===(e=t.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(n=t.checkDomain2)||void 0===n?void 0:n.__typename)){var r=t.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||m(),o&&l()):p()}}else p()}}),[g,m,l,p]),"Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&g.repl.checkDomain2){var y,Z,b,w="DomainStatus2"===g.repl.checkDomain2.__typename?g.repl.checkDomain2:null,x=null;if(null===w||void 0===w?void 0:w.records){var k=w.records;k.__typename;x=(0,i.Z)(k,["__typename"])}var C,S=null;if(!(null===w||void 0===w?void 0:w.status))"ServiceUnavailable"===(null===(C=g.repl.checkDomain2)||void 0===C?void 0:C.__typename)&&(S=g.repl.checkDomain2.message),S||(S="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16),h.l0.justify.spaceBetween],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(16),h.l0.align.center],children:[(0,a.tZ)("div",{css:[h.l0.width("20px"),h.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:h.TV.accentPrimaryDimmer},{borderTopColor:h.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,a.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:S})]}),x||"DomainStatus2"===(null===(y=g.repl.checkDomain2)||void 0===y?void 0:y.__typename)&&(null===(Z=g.repl.checkDomain2)||void 0===Z?void 0:Z.retry)||"ServiceUnavailable"===(null===(b=g.repl.checkDomain2)||void 0===b?void 0:b.__typename)?(0,a.BX)(d.G,{children:[(0,a.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),x?(0,a.BX)(d.G,{children:["Currently, your domain\u2019s records show:",(0,a.tZ)("pre",{css:[h.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(x).map((function(e){var n=(0,o.Z)(e,2),r=n[0],i=n[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,a.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[t," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,a.tZ)(f.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,a.tZ)(c(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&"NotFoundError"===(null===(n=g.repl.checkDomain2)||void 0===n?void 0:n.__typename)?(0,a.tZ)(a.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function P(e){var n=e.replId,t=e.domain,r=e.onUnlink,i=e.onGoBack,l=(0,o.Z)((0,s.pC)({variables:{input:{id:n,removeDomain:t}}}),2),c=l[0],v=l[1];return(0,u.useEffect)((function(){v.data&&v.data.updateRepl.repl&&r()}),[v.data,r]),(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,a.BX)(f.xv,{multiline:!0,children:["Are you sure you want to unlink"," ",(0,a.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+t,children:t}),"?"]})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:i,text:"Cancel"}),(0,a.tZ)(p.zx,{onClick:function(){v.loading||c()},text:v.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,a.tZ)(C.Z,{}),disabled:v.loading})]})]})}function _(e){var n=e.replId,t=e.deploymentId,r=e.showTitle,i=void 0===r||r,o=e.onUnlink,l=e.onLink,c=(0,s.KG)({variables:{replId:n}}),v=c.data,m=c.loading,y=c.refetch,Z=(0,u.useState)("listing"),b=Z[0],x=Z[1],k=(0,u.useState)(null),C=k[0],T=k[1],E=null;if(m)E=(0,a.tZ)(d.G,{css:[h.l0.colWithGap(8),h.l0.align.center,h.l0.justify.center],children:(0,a.BX)(d.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault}),(0,a.tZ)(R,{children:"Loading"})]})});else if(v&&"Repl"===v.repl.__typename){var G=v.repl,_=null;if(G.domains){var B=G.domains.filter(Boolean).filter((function(e){return t?(null===e||void 0===e?void 0:e.hosting_deployment_id)===t:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));_=0===B.length?(0,a.tZ)(f.xv,{children:"No domains are currently linked."}):(0,a.BX)(d.G,{children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,a.tZ)(d.G,{css:[h.l0.colWithGap(16)],children:B.map((function(e){return e?(0,a.tZ)(d.G,{children:(0,a.BX)(d.G,{css:[h.l0.colWithGap(4),h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.width("100%")],children:[(0,a.tZ)(d.G,{css:[h.l0.flex.shrink(1)],children:(0,a.tZ)(g.u,{tooltip:e.domain,children:(0,a.tZ)(f.xv,{children:e.domain})})}),(0,a.tZ)(d.G,{children:(0,a.tZ)(g.u,{tooltip:(0,a.tZ)(f.xv,{css:{textTransform:"capitalize"},children:e.state}),children:(0,a.tZ)(I,{status:e.state})})})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,h.l0.align.center,h.l0.width("100%"),"verified"!==e.state&&h.l0.pl(12)],children:[(0,a.tZ)(p.zx,{text:"Unlink",css:h.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){T(e.domain),x("unlinking")}}),"verified"!==e.state?(0,a.tZ)(p.zx,{text:"Check status",css:h.l0.width("50%"),onClick:function(){T(e.domain),x("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===b?E=(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[_,(0,a.tZ)(p.zx,{text:"Create domain link",onClick:function(){return x("linking")},iconLeft:(0,a.tZ)(w.Z,{})})]}):"linking"===b?E=(0,a.tZ)(D,{repl:G,existingDomain:C,deploymentId:t,onLink:l,onGoBack:function(){x("listing"),T(null)},onLinkStarted:y,onStateChanged:y}):"unlinking"===b&&null!==C&&(E=(0,a.tZ)(P,{replId:G.id,domain:C,onUnlink:function(){y(),x("listing"),o()},onGoBack:function(){x("listing"),T(null)}}))}else v&&"ReplRedirect"===v.repl.__typename?E=(0,a.BX)("div",{children:["This repl has moved to"," ",(0,a.tZ)("a",{href:v.repl.replUrl,children:v.repl.replUrl})]}):v&&"SubscriptionExpiredError"===v.repl.__typename&&(E=(0,a.tZ)("div",{children:"Subscription expired"}));return(0,a.BX)(d.G,{css:[h.l0.colWithGap(24)],children:[i?(0,a.tZ)(f.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}):null,E]})}!function(e){e.Verified="verified",e.Verifying="verifying",e.Failed="failed"}(r||(r={}))},43454:function(e,n,t){t.d(n,{E:function(){return p}});var r=t(74985),i=t(625),o=t(45510),a=t(61284),l=t(2041),c=t(39541),u=t(85368),s=t(45285),d=t(63837),f=t(50959);function p(){var e=(0,s.Z)().replspaceApi,n=(0,f.useState)(null),t=n[0],p=n[1];return(0,f.useEffect)((function(){return e.onConfirmSendToken((function(e){e&&(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),p((function(){return e}))}))}),[e]),(0,r.tZ)(l.u,{isOpen:"function"===typeof t,onRequestClose:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),p(null)},children:(0,r.BX)(u.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(a.xv,{multiline:!0,children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(a.xv,{multiline:!0,children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(u.G,{css:[c.l0.justify.end,c.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),p(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),p(null)},iconLeft:(0,r.tZ)(d.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},78828:function(e,n,t){t.d(n,{LU:function(){return s},Ot:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplDescriptionRepl on Repl {\n    id\n    description\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplDescriptionUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplDescriptionRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},45941:function(e,n,t){t.d(n,{Jr:function(){return s},ie:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTemplateLabelRepl on Repl {\n    id\n    templateLabel\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTemplateLabelUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTemplateLabelRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},27923:function(e,n,t){t.d(n,{C4:function(){return g},Zx:function(){return f},uB:function(){return h}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216),l=t(9125);function c(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTitleRepl on Repl {\n    id\n    title\n    isRenamed\n    owner {\n      ... on Team {\n        id\n        __typename\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplInfoEditReplTitleAvailableReplTitle(\n    $input: AvailableReplTitleInput!\n  ) {\n    availableReplTitle(input: $input) {\n      ... on AvailableReplTitleResult {\n        isAvailable\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f);function h(e){var n=(0,r.Z)({},d,e);return a.D(p,n)}var v=(0,o.Ps)(s());function g(e){var n=(0,r.Z)({},d,e);return l.t(v,n)}},38785:function(e,n,t){t.d(n,{X:function(){return H},$:function(){return W}});var r=t(2272),i=t(9970),o=t(74985),a=t(50959),l=t(85368),c=t(82568),u=t(39541),s=t(57389),d=t(72006),f=t(4405),p=u.tX.categorical,h=.0075,v=t(51523),g=t(82893),m=t.n(g),y=t(12259),Z=t(66539),b=t(61284),w=t(31992),x=t(75863),k=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1)]}),C=function(e){var n=e.title,t=e.usage,r=e.iconUrl;return(0,o.BX)(l.G,{css:k.self,children:["string"===typeof r?(0,o.tZ)(x.ZP,{size:16,iconUrl:r,alt:n}):null,(0,o.tZ)(b.xv,{css:k.title,children:n}),(0,o.tZ)(b.xv,{color:"dimmer",children:(0,w.fZ)(t)})]})},S=(0,c.X)({self:[u.l0.height("100%")],empty:[u.l0.height("100%")]}),T=l.K.a,E=function(e){var n=e.percentage,t=e.color,r=e.linkedRepl,i=e.usage,l=e.count,c=r?(0,v.aq)(r):y.$I,u=(0,a.useState)(!1),p=u[0],h=u[1];return(0,o.tZ)(Z.u,{tooltip:r?(0,o.tZ)(C,{title:r.title,usage:i,iconUrl:r.iconUrl}):(0,o.tZ)(C,{title:"+".concat(l," more"),usage:i}),placement:"top",delay:"none",isOpen:p,maxWidth:400,children:function(e,r){return(0,o.tZ)(m(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(T,{onMouseOver:function(){return h(!0)},onMouseLeave:function(){return h(!1)},ref:r,css:S.self,style:(0,s.Z)({minWidth:"calc(".concat(.75,"%)"),width:"calc(".concat(n,"% - 1px)"),backgroundColor:t},"&:lastOfType",{width:"".concat(n,"%")})})}))}})},R=t(27691),I=t(87076),D=t(36443),G=t(94045),P=t(77712),_=t(34338),B=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.flex.grow(1),u.l0.width(8),u.l0.height(8),u.l0.minWidth(8),u.l0.maxHeight(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1),u.l0.color.foregroundDefault,(0,s.Z)({},(0,_.EM)("mobileMax"),[u.l0.flex.shrink(1),u.l0.truncate])],line:[u.l0.flex.growAndShrink(1),u.l0.height(8),u.l0.width("100%"),(0,s.Z)({},(0,_.EM)("mobileMax"),[u.l0.flex.shrink(4)])]}),A=l.K.a,U=l.K.li,L=function(e){var n=e.color,t=e.title,r=e.usage,i=e.linkedRepl,a=e.username,c=i?(0,v.aq)(i):(0,P.Ru)(a);return(0,o.tZ)(U,{children:(0,o.tZ)(m(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(A,{children:(0,o.BX)(l.G,{css:B.self,children:[(0,o.tZ)("div",{css:B.dot,style:{backgroundColor:n}}),i?(0,o.tZ)(x.ZP,{size:16,iconUrl:i.iconUrl,alt:t}):null,(0,o.tZ)(b.xv,{css:B.title,children:t}),(0,o.tZ)(l.G,{css:B.line,children:(0,o.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,o.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:u.TV.outlineDefault})})}),(0,o.tZ)(b.xv,{color:"dimmer",children:(0,w.fZ)(r)})]})})}))})},N=(0,c.X)({self:[u.l0.colWithGap(4)]}),X=l.K.ul,F=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,a=e.username;if("workspace_info_modal"===i.type){var c=n.findIndex((function(e){return e.repl.id===i.replId}));return-1===c?(0,o.tZ)(l.G,{css:N.self,children:(0,o.tZ)(b.xv,{children:"No storage usage"})}):(0,o.BX)(X,{css:N.self,children:[n.map((function(e,n){return(0,o.tZ)(L,{color:n===c?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(L,{color:u.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,username:a}):null]})}return(0,o.BX)(X,{css:N.self,children:[0===n.length?(0,o.tZ)(b.xv,{children:"No resource usage"}):null,n.map((function(e,n){return(0,o.tZ)(L,{color:p[n%p.length],title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(L,{color:p[n.length%p.length],title:"+".concat(t.length," more"),usage:r,username:a}):null]})},O=t(33280),M=(0,c.X)({bar:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher],selfPlaceholder:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher,R.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot)],barWrapper:[u.l0.flex.grow(1)],barAndTriggerWrapper:[u.l0.rowWithGap(8),u.l0.align.center],self:[u.l0.colWithGap(8)]}),W=function(e){var n=e.summary,t=e.context,c=e.username,s=(0,a.useState)(!1),d=s[0],f=s[1],v=n.perRepl,g=n.total,m=n.limit,y=Math.max(g,m),Z=(0,i.Z)(v).filter((function(e){return e.percentage>0})).sort((function(e,n){return n.usage-e.usage})),b=(0,r.Z)(function(e,n){if("workspace_info_modal"!==n.type)return[e.slice(0,8),e.slice(8)];var t=e.findIndex((function(e){return e.repl.id===n.replId}));if(t<8)return[e.slice(0,8),e.slice(8)];var r=e[t];return[e.slice(0,8).concat(r),e.slice(8,t).concat(e.slice(t+1))]}(Z,t),2),w=b[0],x=b[1],k=new Map(w.map((function(e){return[e.repl.id,e]}))),C=x.reduce((function(e,n){return e+n.usage}),0),S=function(e,n,t){var r=new Array,i=0,o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=Math.max(s.percentage,h),f=d-s.percentage;0!==f&&(i+=f),r.push({percentage:d,adjusted:0!==f,grouped:!1,replIds:new Set([s.repl.id])})}}catch(C){a=!0,l=C}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var p=0===n?0:Math.max(n,h);if(p>0){var v=p-n;v>0&&(i+=v),r.push({percentage:p,adjusted:v>0,grouped:!0,replIds:t})}if(i>0){var g=r.filter((function(e){return!e.adjusted})),m=g.length;if(m>0){var y=i/m,Z=!0,b=!1,w=void 0;try{for(var x,k=g[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0)x.value.percentage-=y}catch(C){b=!0,w=C}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}return r}(w,0===y?0:C/y,new Set(x.map((function(e){return e.repl.id})))),T="workspace_info_modal"===t.type,R="cycles_page"===t.type?u.TV.backgroundHighest:u.TV.backgroundHigher,P=(0,o.tZ)(I.h,{alt:d?"Hide Repls":"Show Repls",children:d?(0,o.tZ)(G.Z,{onClick:function(){return f(!d)}}):(0,o.tZ)(D.Z,{onClick:function(){return f(!d)}})}),_=S.length>0;return(0,o.BX)(l.G,{css:M.self,children:[(0,o.BX)(l.G,{css:M.barAndTriggerWrapper,children:[(0,o.tZ)(l.G,{css:M.barWrapper,children:(0,o.tZ)(l.G,{css:M.bar,style:{backgroundColor:R},children:S.map((function(e,n){var r,i=k.get(V(e));return(0,o.tZ)(E,{percentage:100*e.percentage,color:T?z(e,t.replId):p[n%p.length],linkedRepl:null===i||void 0===i?void 0:i.repl,count:e.replIds.size,usage:null!==(r=null===i||void 0===i?void 0:i.usage)&&void 0!==r?r:C},n)}))})}),_?P:null]}),_&&d?(0,o.BX)(o.HY,{children:[(0,o.tZ)(F,{topRepls:w,groupedRepls:x,groupedTotal:C,context:t,username:c}),T?(0,o.tZ)(O.R,{}):null]}):null]})},H=function(){return(0,o.tZ)(l.G,{children:(0,o.tZ)(l.G,{css:M.selfPlaceholder})})},z=function(e,n){return e.replIds.has(n)?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmest},V=function(e){return e.replIds.keys().next().value}},31366:function(e,n,t){t.d(n,{_:function(){return a}});var r=t(72006),i=t(4405),o=t(70232),a=function(e){switch(e.__typename){case"AccountStorageUtilization":return l(e);case"MonthlyEgressSummary":return c(e);default:(0,o.Z)(e)}},l=function(e){var n=e.total,t=e.perRepl,r=e.quota;return{total:Number(n),limit:Number(r),perRepl:t.map(u)}},c=function(e){var n=e.usage,t=e.limit,r=e.perRepl;return{total:Number(n),limit:Number(t),perRepl:r.map(u)}},u=function(e){return(0,i.Z)((0,r.Z)({},e),{usage:Number(e.usage)})}},31992:function(e,n,t){t.d(n,{$s:function(){return a},fZ:function(){return i},p6:function(){return o}});var r=1048576,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.forceGib,i=void 0!==t&&t,l=n.precision,c=void 0===l?4:l;return e>r||i?"".concat(a(e).toFixed(c)," GiB"):"".concat(o(e).toFixed(c)," MiB")},o=function(e){return e/r},a=function(e){return e/1073741824}},59066:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2272),i=t(74985),o=t(45510),a=t(50959),l=t(19281);function c(e){var n=e.context,t=(0,r.Z)(a.useState(!1),2),c=t[0],u=t[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return u(!0)}}),(0,i.tZ)(l.Z,{context:n,isOpen:c,onRequestClose:function(){return u(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},27942:function(e,n,t){t.d(n,{Fh:function(){return v},IN:function(){return w},s7:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(27081),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var h={},v=(0,o.Ps)(u()),g=(0,o.Ps)(s()),m=(0,o.Ps)(d(),g),y=(0,o.Ps)(f(),v,m);function Z(e){var n=(0,r.Z)({},h,e);return l.a(y,n)}var b=(0,o.Ps)(p(),v,m,a.E_);function w(e){var n=(0,r.Z)({},h,e);return c.D(b,n)}},652:function(e,n,t){t.d(n,{$:function(){return l},i:function(){return a}});var r=t(51631),i=t(70232),o=t(14351);function a(e,n){if(void 0!==n)switch(n){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(n)}}function l(e){var n=o.r4[e],t=n.vCpu,r=n.ram,i=n.dedicated;return"".concat(i?"Dedicated ":"").concat(t," vCPU / ").concat(r," GiB RAM")}},71813:function(e,n,t){t.d(n,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var n={};return e.split("\n").forEach((function(e){if(""!==e){var t=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(t){var r=t[2].trim().split(" "),i=t[1];n[i]={command:r[0],options:r.slice(1)}}}})),n}},44807:function(e,n,t){t.d(n,{N:function(){return i},Z:function(){return o}});var r=t(50959);function i(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}function o(){return(0,r.useMemo)((function(){return i()}),[])}},57370:function(e,n,t){t.d(n,{d:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query CurrentUserId {\n    currentUser {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(){var e,n=function(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}().data;return(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.id)||null}},94488:function(e,n,t){t.d(n,{f6:function(){return c},oj:function(){return l},xZ:function(){return s}});var r=t(2272),i=t(50959),o=t(45285);function a(e){var n=(0,r.Z)(i.useState(!1),2),t=n[0],a=n[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var n=!1;return l.getConfig().then((function(t){n||t.error||t.config.language===e&&a(!0)})),function(){n=!0}}),[e,l]),t}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var u=/^draw.[tj]s$/;function s(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(u))}},59331:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(90171),i=t.n(r),o=t(45285),a=t(50959),l=t(4561),c=t(56997),u=t(34937),s="You have unsaved changes";function d(){var e=(0,u.Z)(),n=(0,o.Z)().fs,t=(0,r.useRouter)(),d=(0,a.useRef)(!1),f=(0,a.useCallback)((function(){if(!d.current&&(n.getStatus()!==l.kO.Clean&&!window.confirm(s)))throw i().events.emit("routeChangeError"),new Error("Abort route change. Please ignore this error.")}),[n]);return(0,a.useEffect)((function(){var r=function(t){if(!e&&!d.current&&n.getStatus()!==l.kO.Clean)return t.preventDefault(),t.returnValue=s,s};return window.addEventListener("beforeunload",r),c.gn||t.events.on("routeChangeStart",f),function(){window.removeEventListener("beforeunload",r),c.gn||t.events.off("routeChangeStart",f)}}),[t.events,n,f,e]),function(e){return d.current=e}}},82475:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(2272),i=t(50959),o=t(72006),a=t(43119),l=t(71440),c=t(50216);function u(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=t(12290),p=t(68825),h=t(45285);function v(){var e=(0,r.Z)(function(e){var n=(0,o.Z)({},s,e);return c.D(d,n)}(),1)[0],n=(0,h.Z)().fs,t=(0,p.Z)(),a=null===t||void 0===t?void 0:t.currentUserPermissions.containerWrite,l=null===t||void 0===t?void 0:t.id;(0,i.useEffect)((function(){if(a&&l){var t=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=n.onStatusChange((function(){t()}));return function(){t.isScheduled()&&t.flush(),r()}}}),[n,l,a,e])}},60471:function(e,n,t){t.d(n,{T:function(){return o}});var r=t(45285),i=t(73872);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},2187:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(77511);function o(){var e=(0,r.useRef)(0),n=(0,r.useState)(!1),t=n[0],o=n[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var n=function(){var n=l.height<.8*e.current;o(n)};return e.current=l.height,l.addEventListener("resize",n),function(){l.removeEventListener("resize",n)}}}),[l,a]),t}},91867:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(49146),i=t(50959);function o(e,n){(0,i.useEffect)((function(){var t,i,o;if(e&&n){var a="Repl"===(null===(t=e.origin)||void 0===t?void 0:t.__typename)?e.origin.id:null;return(0,r.Fy)({id:e.id,slug:e.slug,originId:a,roles:n.roles&&n.roles.map((function(e){return e.name})),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i||null===(o=i.release)||void 0===o?void 0:o.id}),function(){(0,r.dv)()}}}),[e,n])}},56440:function(e,n,t){t.d(n,{C:function(){return i},w:function(){return r}});var r=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]},i=function(e,n,t){return"#"+e.toString(16)+n.toString(16)+t.toString(16)}},4853:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(57135),i=t(96583),o=t(87978);function a(e,n){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)((function(e,n){var t,r,a;return(0,i.__generator)(this,(function(i){return t=(0,o.yC)(e),r=(0,o.UO)(e),(a=document.createElement("a")).setAttribute("href","data:".concat(t,";base64,").concat(n.toString("base64"))),a.setAttribute("download",r),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),[2]}))}))).apply(this,arguments)}},4629:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(57135),i=t(96583),o=t(22405),a=t(87978),l=t(12583);function c(e,n){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e,n){var t,r,c,u,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,a.Il)(e),[4,n.readDir(0===t.length?l.Ql:t)];case 1:if((r=i.sent()).error)throw r.error;return c=new Set(r.children.map((function(e){return e.filename}))),u=(0,o.Z)((0,a.UO)(e),c),s=t?"".concat(t,"/").concat(u):u,[4,n.copyFile(e,s)];case 2:if((d=i.sent()).error)throw d.error;return[2,s]}}))}))).apply(this,arguments)}},70353:function(e,n,t){t.d(n,{o:function(){return r},p:function(){return i}});var r=function(e){var n=new Date(e),t=n.getHours(),r=n.getMinutes(),o="AM";return t>=12&&(o="PM"),0===(t%=12)&&(t="12"),r<10&&(r="0"+r),i(e)+" ".concat(t,":").concat(r," ").concat(o)},i=function(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate(),i=n.getFullYear();return"".concat(t,"/").concat(r,"/").concat(i)}},9608:function(e,n,t){t.d(n,{S:function(){return a},U:function(){return l}});var r=t(87978),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"};function a(e){var n=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(i,n)?i[n]:Object.prototype.hasOwnProperty.call(o,n)?o[n]:n}function l(e){var n=(0,r.r6)(e);return i[n]?i[n]:"unknown"}},4385:function(e,n,t){function r(e){if(!e)return!1;try{var n=new URL(e);return Boolean(n)}catch(t){return!1}}t.d(n,{Z:function(){return r}})},64999:function(e,n,t){t.d(n,{Z:function(){return A}});var r=t(2272),i=t(74985),o=(t(50959),t(85368)),a=t(39541),l=t(63128),c=t(39137),u=t(61284),s=t(44333),d=t(82568),f=t(47161),p=t(13233),h=t(72006),v=t(43119),g=t(71440),m=t(24635),y=t(50216);function Z(){var e=(0,v.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,v.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,v.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var x={},k=(0,g.Ps)(Z());var C=(0,g.Ps)(b());var S=(0,g.Ps)(w());var T=t(14654),E=t(56029),R=t(15544),I=t(32104),D=t(76735),G=t(60566),P=t(625),_=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),B=function(){return(0,i.BX)(o.G,{css:_.titleGroup,children:[(0,i.tZ)(o.G,{css:_.globeIconContainer,children:(0,i.tZ)(T.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(u.xv,{css:_.title,id:"link-switch-label",children:"Private join link"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Anyone with this link can edit files"})]})]})};function A(e){var n,t,d,v,g,Z,b,w,T=e.replId,A=(0,p.Z)(),U=A.showConfirm,L=A.showError,N=function(e){var n=(0,h.Z)({},x,e);return m.a(k,n)}({variables:{replId:T}}),X=N.data,F=N.loading,O=N.error,M=N.refetch,W=(0,r.Z)(function(e){var n=(0,h.Z)({},x,e);return y.D(C,n)}({variables:{replId:T},onError:function(e){return L(e.message)},onCompleted:function(){return U("Join link created")}}),2),H=W[0],z=W[1],V=(0,r.Z)(function(e){var n=(0,h.Z)({},x,e);return y.D(S,n)}({variables:{replId:T},optimisticResponse:{deleteMultiplayerInviteLink:{id:T,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return L(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted"):L(e.deleteMultiplayerInviteLink.message)}}),2),j=V[0],q=V[1],Y="Repl"===(null===X||void 0===X||null===(n=X.repl)||void 0===n?void 0:n.__typename)?X.repl:null,K=z.loading||q.loading,$="Repl"===(null===X||void 0===X||null===(t=X.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===Y||void 0===Y||null===(d=Y.owner)||void 0===d?void 0:d.__typename),Q="Repl"===(null===X||void 0===X||null===(v=X.repl)||void 0===v?void 0:v.__typename)&&"Team"===(null===Y||void 0===Y||null===(g=Y.owner)||void 0===g?void 0:g.__typename)&&(null===(Z=null===Y||void 0===Y?void 0:Y.owner.capabilities)||void 0===Z?void 0:Z.isBusinessPlan)&&(null===(b=null===Y||void 0===Y?void 0:Y.owner.capabilities)||void 0===b?void 0:b.hasValidSubscription),J="Repl"===(null===X||void 0===X||null===(w=X.repl)||void 0===w?void 0:w.__typename)&&(null===Y||void 0===Y?void 0:Y.inviteUrl)?window.location.origin+(null===Y||void 0===Y?void 0:Y.inviteUrl):null;return F||$&&!Q?null:O?(0,i.BX)(o.G,{css:_.container,children:[(0,i.BX)(o.G,{css:_.header,children:[(0,i.tZ)(B,{}),(0,i.tZ)(s.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(D.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return M({replId:T})}})]}):(0,i.BX)(o.G,{css:_.container,children:[(0,i.BX)(o.G,{css:_.header,children:[(0,i.tZ)(B,{}),F?(0,i.BX)(o.G,{css:_.loading,children:[(0,i.tZ)(I.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(u.xv,{color:"dimmer",children:"Loading..."})]}):(0,i.tZ)(s.r,{isSelected:!!J,isDisabled:K,onChange:function(e){K||(e?H():j())},"aria-labelledby":"link-switch-label"})]}),!F&&J?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.T,{css:_.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:K?"Loading...":J,css:_.input}),(0,i.tZ)(E.m,{textToCopy:J,onClick:function(){J?((0,G.Z)(J),(0,P.j)(P.U3.JOIN_LINK_COPIED,{replId:null===Y||void 0===Y?void 0:Y.id,isTeamRepl:$,source:"replEnvironment"}),U("Link copied")):L("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(R.Z,{}),css:_.copyToClipboard,colorway:"primary",disabled:K})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(u.xv,{color:"dimmer",variant:"small",children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),K)return;H()}},onClick:function(e){e.preventDefault(),K||H()},children:"Generate a new link"})]})})]}):null]})}},96453:function(e,n,t){t.d(n,{Jh:function(){return k},RJ:function(){return E},U:function(){return w},dE:function(){return m},mH:function(){return Z},z8:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},g=(0,o.Ps)(c()),m=(0,o.Ps)(u()),y=(0,o.Ps)(s(),g);function Z(e){var n=(0,r.Z)({},v,e);return a.a(y,n)}var b=(0,o.Ps)(d(),g);function w(e){var n=(0,r.Z)({},v,e);return l.D(b,n)}var x=(0,o.Ps)(f(),g);function k(e){var n=(0,r.Z)({},v,e);return l.D(x,n)}var C=(0,o.Ps)(p(),g,m);function S(e){var n=(0,r.Z)({},v,e);return l.D(C,n)}var T=(0,o.Ps)(h(),g);function E(e){var n=(0,r.Z)({},v,e);return l.D(T,n)}},6785:function(e,n,t){t.d(n,{_U:function(){return D},ln:function(){return G}});var r=t(2272),i=t(9970),o=t(74985),a=t(5889),l=t(38467),c=t(13233),u=t(77511),s=t(625),d=t(30872),f=t(84563),p=t(63128),h=t(61284),v=t(85368),g=t(39541),m=t(26992),y=t(32104),Z=t(90171),b=t(50959),w=t(4821),x=t(96453),k=t(8441),C=t(10507),S=t(14709),T=t.n(S),E=t(66539),R=t(93658);function I(e,n){return n.some((function(n){return n.id===e}))}var D={root:[g.l0.color.foregroundDefault,g.l0.flex.column,g.l0.colWithGap(12),g.l0.align.stretch,g.l0.flex.growAndShrink(1)],header:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center,g.l0.px(16)],header_mobile:[g.l0.px(0)],titleContainer:[g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center],limitsContainer:[g.l0.align.center,g.l0.rowWithGap(8)],loading:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.grow(1),g.l0.justify.center],measureBar:[g.l0.height(8),g.l0.width(60)],searchContainer:[g.l0.px(16),g.l0.position.relative,g.l0.maxHeight(32)],userList:[g.l0.flex.column,g.l0.colWithGap(16),g.l0.scrollbar.thin,g.l0.position.relative,g.l0.overflowY("auto"),g.l0.flex.growAndShrink(1),g.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[g.l0.backgroundColor.backgroundHighest,g.l0.borderRadius(4)],scrollbarColor:"".concat(g.TV.backgroundDefault," ").concat(g.TV.backgroundHighest)}],userGroup:{root:[g.l0.colWithGap(8)],titleContainer:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.px(16)],title:[g.l0.fontWeight.medium]},emptyContainer:[g.l0.position.relative,g.l0.flex.row,g.l0.rowWithGap(12),g.l0.pt(8),g.l0.center,g.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(g.TV.outlineDimmest)}],emptyImg:[g.l0.width("100%"),g.l0.height(180),g.l0.position.relative,g.l0.maxWidth(160),{alignSelf:"end",userSelect:"none",pointerEvents:"none"},{"> div":{position:"unset !important"},".image":{objectFit:"contain",width:"100% !important",position:"relative !important",height:"unset !important"}}]},G=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.BX)(v.G,{css:D.userGroup.titleContainer,children:[(0,o.tZ)(m.Z,{color:r,size:6}),(0,o.tZ)(h.xv,{variant:"small",css:D.userGroup.title,children:n}),(0,o.tZ)(h.xv,{variant:"small",color:"dimmest",css:D.userGroup.title,children:t}),i?(0,o.tZ)(E.u,{tooltip:i,children:(0,o.tZ)(R.Z,{})}):null]})};n.ZP=function(e){var n=e.replId,t=e.handleUpgradeTriggered,m=(0,Z.useRouter)(),S=(0,u.Vg)(m),E=(0,c.Z)(),R=E.showConfirm,P=E.showError,_=(0,C.aG)(),B=(0,x.mH)({variables:{replId:n},pollInterval:8e3}),A=B.data,U=B.loading,L=(0,r.Z)((0,x.U)({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),R("Added @".concat(r)))}}),2),N=L[0],X=L[1],F=(0,r.Z)((0,x.z8)({update:function(e,t){var r,o=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void R("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:o,fragment:x.dE});return(0,i.Z)(n).concat([t])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),R("Invited @".concat(c))}}else P(o.message)}}),2),O=F[0],M=F[1];(0,b.useEffect)((function(){var e=X.error||M.error;e&&(e.message.includes("reached the limit")?S?P("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):t&&t(!0):P(e.message))}),[X.error,M.error,P,S,t]);var W="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)?A.repl:null,H=null===A||void 0===A?void 0:A.currentUser,z=null===W||void 0===W?void 0:W.multiplayers.reduce((function(e,n){return(0,i.Z)(e).concat([n.username])}),[]),V=(null===W||void 0===W?void 0:W.currentUserPermissions.editMultiplayers)||!1,j=Boolean(W&&!W.multiplayers.length&&!W.multiplayerInvites.length),q=null===W||void 0===W?void 0:W.multiplayers.filter((function(e){return e.id!==(null===H||void 0===H?void 0:H.id)})),Y=null===q||void 0===q?void 0:q.filter((function(e){return e&&I(e.id,_)})),K=null===q||void 0===q?void 0:q.filter((function(e){return e&&!I(e.id,_)})),$=q?q.length:null;return(0,o.BX)(p.T,{background:"default",css:D.root,children:[(0,o.BX)(v.G,{css:[D.header,S&&D.header_mobile],children:[(0,o.tZ)(v.G,{css:D.titleContainer,children:(0,o.tZ)(h.xv,{variant:"subheadDefault",children:"Multiplayers"})}),(0,o.BX)(v.G,{css:D.limitsContainer,children:[U?(0,o.BX)(v.G,{css:D.loading,children:[(0,o.tZ)(y.Z,{color:g.TV.foregroundDimmer}),(0,o.tZ)(h.xv,{color:"dimmer",children:"Loading..."})]}):null,null===$||(null===H||void 0===H?void 0:H.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(h.xv,{variant:"small",color:"dimmest","aria-hidden":!0,children:[$," / ",w.z]}),(0,o.tZ)(f.J,{css:D.measureBar,total:w.z,current:$,tooltip:"".concat(w.z-$," free editors remaining")})]}),U||(null===H||void 0===H?void 0:H.isSubscribed)||S?null:(0,o.tZ)(l.Z,{small:!0,context:"workspace_multiplayer_header",onClickCallback:function(){t&&t(!0)},onCancel:function(){t&&t(!1)}})]})]}),V&&z&&W?(0,o.tZ)(v.G,{css:D.searchContainer,children:(0,o.tZ)(d.Z,{existingUsernames:z,onSubmit:function(e){U&&!(null===H||void 0===H?void 0:H.isSubscribed)||(!T()(e)||M.loading?X.loading||N({variables:{username:e,replId:n,type:"rw"}}):O({variables:{replId:n,email:e,type:"rw"}}))}})}):null,j?(0,o.BX)(v.G,{css:D.emptyContainer,children:[(0,o.tZ)(v.G,{children:(0,o.tZ)(h.xv,{variant:"subheadDefault",color:"dimmer",children:"No one else is here"})}),(0,o.tZ)(v.G,{css:D.emptyImg,children:(0,o.tZ)(a.Z,{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",layout:"fill",className:"image"})})]}):(0,o.BX)(p.T,{css:D.userList,children:[(null===Y||void 0===Y?void 0:Y.length)?(0,o.BX)(v.G,{css:D.userGroup.root,children:[(0,o.tZ)(G,{title:"Online",count:Y.length||0,color:g.TV.greenStrongest}),Y.map((function(e){return e?(0,o.tZ)(k.Z,{isPendingInvitation:!1,replId:n,canEditMultiplayers:V,user:e},e.id):null}))]}):null,(null===K||void 0===K?void 0:K.length)?(0,o.BX)(v.G,{css:D.userGroup.root,children:[(0,o.tZ)(G,{title:"Offline",count:K.length||0,color:g.TV.outlineStrongest}),null===K||void 0===K?void 0:K.map((function(e){return e?(0,o.tZ)(k.Z,{canEditMultiplayers:V,isPendingInvitation:!1,user:e,replId:n},e.id):null}))]}):null,(null===W||void 0===W?void 0:W.multiplayerInvites.length)?(0,o.BX)(v.G,{css:D.userGroup.root,children:[(0,o.tZ)(G,{title:"Pending Invitations",count:(null===W||void 0===W?void 0:W.multiplayerInvites.length)||0,color:g.TV.outlineStrongest}),W.multiplayerInvites.map((function(e){return(0,o.tZ)(k.Z,{canEditMultiplayers:V,replId:n,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},8441:function(e,n,t){var r=t(2272),i=t(74985),o=t(9247),a=t(87076),l=t(61284),c=t(17755),u=t(85368),s=t(82568),d=t(39541),f=t(27399),p=t(80336),h=t(55923),v=t(82893),g=t.n(v),m=t(96453),y=t(13233),Z=(0,s.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});n.Z=function(e){var n,t=e.isPendingInvitation,s=e.canEditMultiplayers,v=e.replId,b=(0,y.Z)(),w=b.showError,x=b.showConfirm,k=(0,r.Z)((0,m.Jh)({onError:function(e){return w(e.message)},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t&&x("".concat(t," removed"))}}),2),C=k[0],S=k[1],T=(0,r.Z)((0,m.RJ)({onError:function(e){return w(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;x("Invite canceled for ".concat(n))}}else w(e.deleteMultiplayerInvite.message)}}),2),E=T[0],R=T[1],I=!t,D=I?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),G=I?e.user.username:e.email;return(0,i.BX)(u.G,{css:Z.root,children:[I?(0,i.tZ)(h.Z,{username:e.user.username,children:(0,i.tZ)(g(),{href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(u.G,{tag:"a",css:Z.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:null!==(n=e.user.image)&&void 0!==n?n:null})})})}):(0,i.BX)(u.G,{css:[Z.userContainer_pending],children:[D,(0,i.tZ)(l.xv,{color:I?"default":"dimmest",children:G})]}),(0,i.BX)(u.G,{css:Z.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",children:e.isPendingInvitation?"Invited":"Can edit"}),s?(0,i.tZ)(a.h,{alt:I?"Remove member":"Cancel invitation",onClick:function(){s&&(S.loading||R.loading||(I?C({variables:{replId:v,username:e.user.username}}):E({variables:{replId:v,email:e.email}})))},children:(0,i.tZ)(p.Z,{size:12})}):null]})]})}},42469:function(e,n,t){t.d(n,{sk:function(){return f},zq:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},30872:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(72006),i=t(4405),o=t(2272),a=t(74985),l=t(9247),c=t(84358),u=t(13233),s=t(45510),d=t(39137),f=t(63128),p=t(61284),h=t(85368),v=t(82568),g=t(39541),m=t(63837),y=t(32104),Z=t(21371),b=t(50959),w=t(56169),x=t(14709),k=t.n(x),C=t(42469),S=(0,v.X)({form:[g.l0.align.start,g.l0.display.flex,g.l0.rowWithGap(8),g.l0.width("100%")],searchContainer:[g.l0.position.relative,g.l0.flex.growAndShrink(1)],dropdownMenu:[g.l0.borderRadius(8),g.l0.overflow("hidden"),g.l0.mt(2),g.l0.zIndex(2),g.l0.border({color:g.TV.outlineDimmer,width:1,style:"solid"}),g.l0.maxHeight(280),g.l0.overflowY("auto"),g.l0.scrollbar.thin,{scrollbarColor:g.TV.backgroundHigher+" "+g.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:g.TV.backgroundHighest}}],result:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center,g.l0.cursor.pointer],result_active:[g.l0.backgroundColor.accentPrimaryDimmer],userContainer:[g.l0.rowWithGap(8),g.l0.align.center],loadingContainer:[g.l0.align.center,g.l0.m(8),g.l0.rowWithGap(8),g.l0.align.center],emptyText:[g.l0.m(8)]});function T(e){var n=e.onSubmit,t=e.existingUsernames,v=e.isDisabled,x=e.onChange,T=e.placeholder,E=(0,o.Z)(b.useState(""),2),R=E[0],I=E[1],D=(0,w.H)(),G=(0,c.Z)(R.trim().replace(/^@/,""),250),P=(0,C.sk)({skip:!G||k()(R),variables:{query:G,limit:6}}),_=P.data,B=P.loading,A=P.error,U=(0,u.Z)().showError;b.useEffect((function(){A&&U(A.message)}),[A,U]);var L=null===_||void 0===_?void 0:_.usernameSearch,N=function(e){I(e.currentTarget.value),null===x||void 0===x||x(e.currentTarget.value)},X=function(e){"Enter"===e.key&&R.match(/.+@.+/)&&(n(R),I(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(R),I("")},css:S.form,children:[(0,a.tZ)(Z.ZP,{onChange:function(e){e&&I(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,u=e.isOpen,s=e.highlightedIndex,v=e.getRootProps;return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({css:S.searchContainer},v({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r.Z)({id:D("username-search")},n({ref:null,value:R,onChange:N,placeholder:null!==T&&void 0!==T?T:"Add people by username or email",autoComplete:"off",onKeyDown:X}))),u?(0,a.BX)(h.G,{children:[L&&L.length?(0,a.tZ)(f.T,(0,i.Z)((0,r.Z)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:L.map((function(e,n){return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:n})),{css:[S.result,n===s&&S.result_active],children:[(0,a.BX)(h.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(p.xv,{children:e.username})]}),t.includes(e.username)?(0,a.tZ)(h.G,{children:(0,a.tZ)(m.Z,{color:g.TV.accentPositiveStronger})}):null]}),n)}))})):null,B?(0,a.tZ)(f.T,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(p.xv,{color:"dimmer",children:"Loading\u2026"})]})}):null,L&&0===L.length?(0,a.tZ)(f.T,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.xv,{css:S.emptyText,color:"dimmer",children:['No results found for "',R,'"']})}):null]}):null]}))}}),(0,a.tZ)(h.G,{children:(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:v||!R,text:"Invite"})})]})}},73204:function(e,n,t){t.d(n,{s:function(){return Pe}});var r=t(74985),i=t(18200),o=t(625),a=t(13339),l=t(57135),c=t(72006),u=t(4405),s=t(2272),d=t(96583),f=t(14366),p=t(82108),h=t(38861),v=t(4706),g=t(33066),m=t(39541),y=t(61284),Z=t(85368),b=t(39902);function w(e){var n=e.amount,t=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,g.$E)(n),c=(0,g.H2)(n);return(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(2),m.l0.align.center],children:[(0,r.tZ)(b.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,children:[c,t?" (".concat(l,")"):""]})]})}var x=t(31430),k=t(51631),C={boost:k.kL.Boost,hosting_tier:k.kL.HostingTier},S={boost_2cpu_2ram:k.s2.Boost_2cpu_2ram,boost_4cpu_4ram:k.s2.Boost_4cpu_4ram,boost_8cpu_8ram:k.s2.Boost_8cpu_8ram,boost_16cpu_16ram:k.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:k.s2.HostingTierE2Micro,hosting_tier_e2_small:k.s2.HostingTierE2Small,hosting_tier_e2_medium:k.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:k.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:k.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:k.s2.HostingTierE2Standard_4},T=t(24154),E=t(34393),R=t(45510),I=t(33280),D=t(87076),G=t(82568),P=t(1050),_=t(32104),B=t(8622),A=t(4648),U=t(52444),L=t(50959),N=t(14351),X=t(91861),F=t(43119),O=t(71440),M=t(33281),W=t(27081),H=t(9125);function z(){var e=(0,F.Z)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return z=function(){return e},e}var V={},j=(0,O.Ps)(z(),M.s1,W.sh,W.E_);function q(e){var n=e.cycles,t=e.description;return(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",children:t}),(0,r.tZ)(I.R,{}),(0,r.tZ)(w,{amount:n,includeUsd:!1,color:"dimmest"})]})}var Y=(0,G.X)({iconBackground:[m.l0.width(40),m.l0.height(40),m.l0.borderRadius(8),m.l0.justify.center,m.l0.align.center,m.l0.backgroundColor.blueDimmer],loadingContainer:[m.l0.justify.center,m.l0.align.center,m.l0.minHeight(80)]});function K(e){var n=e.powerUpCategory,t=e.cyclesCost,o=e.description,a=i.S0[n];return(0,r.tZ)(Z.G,{css:[m.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[m.l0.flex.row,m.l0.justify.spaceBetween],children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.G,{css:Y.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(Z.G,{css:[m.l0.px(8),m.l0.py(2),m.l0.colWithGap(4),m.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:o})]})]}),(0,r.BX)(Z.G,{css:[m.l0.px(8),m.l0.py(2),m.l0.colWithGap(4),m.l0.justify.spaceBetween,m.l0.align.end],children:[(0,r.tZ)(w,{amount:t,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["per / ",a.orderDuration]})]})]})})}function $(e){var n=e.product,t=e.goToCheckoutSuccess,o=e.goToNewPaymentMethodForm,a=(0,f.useStripe)(),g=(0,p.Z)({forceFetch:!0}),b=g.cycles,w=g.loading,k=(0,E.Q)(),G=k.paymentMethod,F=k.loading,O=i.S0[n.powerUpCategory],M=i.$[n.powerUpSku].provisionDescription,W=(0,L.useState)(null),z=W[0],$=W[1],Q=(0,L.useState)(!1),J=Q[0],ee=Q[1],ne=(0,L.useState)(!1),te=ne[0],re=ne[1],ie=(0,T.M)().createCheckoutSession,oe=(0,s.Z)(function(e){var n=(0,c.Z)({},V,e);return H.t(j,n)}({variables:{replId:n.replId}}),1)[0],ae=(0,X.B)().startPolling,le=(0,h.kr)({defaultAutoRefillEnabledValue:!0}),ce=le.autoRefillEnabled,ue=le.autoRefillMonthlyBudget,se=le.autoRefillHasError,de=le.autoRefillHasChanged,fe=le.cardAutoRefillPreferencesProps,pe=function(e){var n=e.productCost,t=e.cyclesBalance;if(n<=t)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:t,excessPurchaseExplanation:"no-purchase"};var r,i=n-t,o="no-excess";return i>=N.gp?(r=i,o="no-excess"):(r=N.gp,o="minimum"),{cyclesToBePurchased:r,cyclesBalanceAfterUpgrade:t+r-n,excessPurchaseExplanation:o}}({productCost:n.cyclesCostNow,cyclesBalance:null!==b&&void 0!==b?b:0}),he="This will purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,N.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(O.name,".");"minimum"===pe.excessPurchaseExplanation&&(he="This will purchase the minimum purchase amount of ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,N.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(O.name,"."));var ve=(0,L.useState)("Processing..."),ge=ve[0],me=ve[1],ye=(0,U.i)(),Ze=ye.isPurchaseAllowed,be=ye.reasonPurchaseNotAllowed;if(!Ze&&be)return(0,r.tZ)(A.Z,{reason:be});var we=function(){ee(!1)},xe=function(){var e=(0,l.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:if(ee(!0),null==G)throw new Error("paymentMethod is null");if(null==a)throw new Error("stripe is null");return me("Checking out..."),[4,ie({input:{cyclesQuantity:pe.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:n.replId,sku:S[n.powerUpSku],type:C[n.powerUpCategory]}},cyclesAutoRefillConfiguration:de?{enabled:ce,monthlyBudget:ue}:null},onError:function(e){$(e),we()},onSucceed:function(){var e=(0,l.Z)((function(e){var r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return me("Processing payment..."),[4,a.confirmCardPayment(e.clientSecret)];case 1:return(r=o.sent().error)?($(null!==(i=r.message)&&void 0!==i?i:"An error occurred. Please try again."),we(),[2]):(me("Provisioning Power Up..."),function(e){var r=e.checkoutSessionId;ae({checkoutSessionId:r,onSucceeded:function(){re(!0),oe(),t(n)},onFailed:function(){$("Payment failed. Please try again."),we(),oe()},onError:function(e){$(e),we(),oe()}})}({checkoutSessionId:e.checkoutSessionId}),[2])}}))}));return function(n){return e.apply(this,arguments)}}()})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=F||w||null==b,Ce=null!=G&&!ke&&!J;return(0,r.BX)(Z.G,{css:[m.l0.colWithGap(16)],children:[(0,r.tZ)(K,{powerUpCategory:n.powerUpCategory,cyclesCost:N.z4[n.powerUpSku],description:M}),(0,r.tZ)(I.R,{}),ke?(0,r.tZ)(Z.G,{css:Y.loadingContainer,children:(0,r.tZ)(_.Z,{})}):(0,r.tZ)(Z.G,{css:[m.l0.colWithGap(12),m.l0.align.start],children:null==G?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",multiline:!0,children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(R.zx,{iconLeft:(0,r.tZ)(B.Z,{}),text:"Add Payment Method",big:!0,onClick:o,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(Z.G,{css:[m.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[m.l0.colWithGap(4)],children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(D.h,{alt:"Update Payment Method",onClick:o,children:(0,r.tZ)(P.Z,{})}),(0,r.tZ)(v.R,{last4:G.last4})]}),(0,r.tZ)(Z.G,{css:[m.l0.pl(24),m.l0.pr(16),m.l0.colWithGap(8)],children:(0,r.tZ)(h.OK,(0,u.Z)((0,c.Z)({},fe),{loading:fe.loading||J,showSaveButton:!1}))})]})})})}),null!==G?(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.R,{}),(0,r.tZ)(y.xv,{multiline:!0,variant:"small",css:[m.l0.color.foregroundDimmer],children:he}),(0,r.tZ)(x.q,{isMakingPayment:!0,showSuccessState:te,showProcessingState:J,disabled:!Ce||se,initialStateTextOverride:"Purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(O.name),processingStateTextOverride:ge,big:!0,onClick:xe}),null!=z?(0,r.tZ)(y.xv,{css:[m.l0.color.accentNegativeDefault],multiline:!0,children:z}):null,(0,r.BX)(Z.G,{css:[m.l0.colWithGap(4)],children:[(0,r.tZ)(q,{description:"Cycles balance after purchase",cycles:pe.cyclesToBePurchased}),(0,r.tZ)(q,{description:"1st ".concat(O.orderDuration," of ").concat(O.name),cycles:-1*n.cyclesCostNow}),(0,r.tZ)(q,{description:"Cycles balance after upgrade",cycles:pe.cyclesBalanceAfterUpgrade})]})]}):null]})}var Q=t(24635);function J(){var e=(0,F.Z)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},ne=(0,O.Ps)(J());var te=t(25198),re=t(96864),ie=t(76735);function oe(e){var n=e.autoRefillEnabled;return e.loadingAutoRefill?"...":n?"on":"off"}var ae=(0,G.X)({powerUpIconBackground:[m.l0.width(32),m.l0.height(32),m.l0.borderRadius(8),m.l0.justify.center,m.l0.align.center,m.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[m.l0.width(32),m.l0.height(32),m.l0.borderRadius(8),m.l0.justify.center,m.l0.align.center,m.l0.backgroundColor.greyDimmer]});function le(e){var n,t,o,a=e.product,l=e.goToCardPreferences,u=e.goToPowerUpDetails,s=(0,p.Z)({forceFetch:!0}).cycles,d=function(e){var n=(0,c.Z)({},ee,e);return Q.a(ne,n)}({variables:{replId:a.replId}}),f=d.data,h=d.loading,v="CyclesAutoRefillConfiguration"===(null===f||void 0===f||null===(n=f.currentUser)||void 0===n||null===(t=n.cyclesAutoRefillConfiguration)||void 0===t?void 0:t.__typename)?f.currentUser.cyclesAutoRefillConfiguration:null,g="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)&&"Team"===(null===(o=f.repl.owner)||void 0===o?void 0:o.__typename),b=Boolean(null===v||void 0===v?void 0:v.enabled),x=i.S0[a.powerUpCategory],k=i.$[a.powerUpSku];return(0,r.BX)(Z.G,{css:[m.l0.colWithGap(16)],children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.powerUpIconBackground,children:(0,r.tZ)(x.iconComponent,{size:20})}),(0,r.BX)(Z.G,{css:[m.l0.flex.column],children:[(0,r.BX)(y.xv,{children:[x.name," activated"]}),(0,r.BX)(Z.G,{css:m.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:k.provisionDescription}),(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:N.z4[a.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["/ ",x.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return u(a.powerUpCategory)},onClick:function(){return u(a.powerUpCategory)},css:[m.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),g||h?null:(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.autoRefillIconBackground,children:(0,r.tZ)(re.Z,{size:20})}),(0,r.BX)(Z.G,{css:[m.l0.flex.column],children:[(0,r.BX)(y.xv,{children:["Auto-Refill is"," ",oe({autoRefillEnabled:b,loadingAutoRefill:h})]}),(0,r.tZ)(Z.G,{css:m.l0.rowWithGap(4),children:null==s?(0,r.tZ)(_.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:s,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return l(a.powerUpCategory)},onClick:function(){return l(a.powerUpCategory)},css:[m.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),h||b||g?null:(0,r.tZ)(te.E,{colorway:"warning",icon:(0,r.tZ)(ie.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var ce=t(13961),ue=t(3652),se=t(63837),de=t(70232),fe=t(31740),pe=t(31854),he=t(63128),ve=t(43312),ge=t(652),me={tier:(0,ve.iv)([m.l0.borderRadius(12),m.l0.colWithGap(12),m.l0.p(12)]),tierHeader:(0,ve.iv)([m.l0.rowWithGap(8),m.l0.flex.grow(1),m.l0.justify.spaceBetween,m.l0.align.baseline]),tierHeaderTitle:(0,ve.iv)(m.l0.rowWithGap(8)),tierHeaderCost:(0,ve.iv)([m.l0.rowWithGap(4),m.l0.align.baseline]),tierFeatures:(0,ve.iv)(m.l0.colWithGap(8)),tierFeature:(0,ve.iv)(m.l0.rowWithGap(4),m.l0.align.center),tierPicker:(0,ve.iv)([m.l0.border({color:m.TV.outlineDefault})])},ye=function(e){var n=e.selectedOption,t=e.onChange,i=e.disabled,o=N.r4[n.sku].egress,a=["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"];return(0,r.BX)(he.T,{elevated:!0,css:me.tier,children:[(0,r.BX)(Z.G,{css:me.tierHeader,children:[(0,r.tZ)(Z.G,{css:me.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",children:"Reserved VM"})}),(0,r.tZ)(Z.G,{css:m.l0.rowWithGap(4),children:(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(2),m.l0.align.center],children:[(0,r.tZ)(b.Z,{}),(0,r.BX)(Z.G,{css:[me.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",children:n.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",children:"per day"})]})]})})]}),(0,r.tZ)(pe.P,{css:me.tierPicker,initialSelectedItem:{title:(0,ge.$)(n.sku),sku:n.sku},items:Object.keys(N.r4).map((function(e){return{title:(0,ge.$)(e),sku:e}})),onChange:function(e){var n=e.sku;return t(n)},disabled:i}),(0,r.tZ)(Z.G,{css:me.tierFeatures,children:a.map((function(e,n){return(0,r.BX)(Z.G,{css:me.tierFeature,children:[(0,r.tZ)(se.Z,{}),(0,r.tZ)(y.xv,{children:e})]},n)}))})]})},Ze=t(48330),be=t(66539),we=t(93658),xe=t(30504),ke=t(88254),Ce=t(63064),Se=t(13233),Te=t(35004),Ee=t(27942),Re=function(e){var n=e.context,t=e.selectedOption,i=e.currentOption,a=e.onBuyMoreCycles,c=e.onPowerUpUpdated,u=e.onPowerUpRequested,f=(0,Ze.Z)(),p=(0,Ce.Z)(),v=(0,Se.Z)().showError,g=(0,s.Z)(L.useState(!1),2),y=g[0],Z=g[1],b=(0,h.kr)({}).autoRefillEnabled,w=(0,s.Z)((0,Ee.IN)({onCompleted:function(){var e=(0,l.Z)((function(e){var n;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return"UserError"===(n=e.setHostingTier).__typename?(v(n.message),[2]):(Z(!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 1:return r.sent(),c({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}),p.current,[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){u(!1),ke.Tb(e),v(e.message)}}),2),x=w[0],C=w[1].loading;if(y)return(0,r.tZ)(R.zx,{text:"Tier Purchased",colorway:"positive",disabled:!0,loading:!0,css:{color:"".concat(m.TV.accentPositiveStronger," !important")}});var S,T=(null===i||void 0===i?void 0:i.sku)===t.sku,E=!0;switch(t.cost.explanation){case k.Ch.IncludedInExistingOrder:case k.Ch.ActivateExistingOrder:case k.Ch.SpendCycles:case k.Ch.NeedsCycles:case k.Ch.IncludedInSubscription:E=!1}return C?(E=!0,S="Processing"):T?(E=!0,S="Current tier"):S="Purchase and deploy",(0,r.tZ)(R.zx,{text:S,disabled:E,loading:C,colorway:C||!E?"primary":void 0,iconRight:C?void 0:(0,r.tZ)(Te.Z,{}),onClick:function(){var e;(u(!0),C)||(t.cost.explanation!==k.Ch.NeedsCycles?(x({variables:{input:{replId:f,sku:t.sku}}}),null!==(e=t.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:n,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:t.sku,source:n}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:n,powerUpCategory:"boost",autoRefill:b}))):a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}))},css:C&&{color:"".concat(m.TV.accentPrimaryStronger," !important")}})},Ie=function(e){var n=e.context,t=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,Ze.Z)(),a=(0,s.Z)(L.useState("ready"),2),l=a[0],c=a[1],u=(0,s.Z)(L.useState(null),2),d=u[0],f=u[1],p=(0,s.Z)(L.useState(null),2),h=p[0],v=p[1],b=(0,s.Z)(L.useState(null),2),w=b[0],x=b[1],C=(0,Ee.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:o},onCompleted:function(e){var n,t,r,i,o;if("Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"ReplPowerUpTypes"===(null===(n=e.repl)||void 0===n||null===(t=n.powerUps)||void 0===t?void 0:t.__typename)&&"PowerUpCostsType"===(null===(r=e.repl)||void 0===r||null===(i=r.powerUpCosts)||void 0===i?void 0:i.__typename)){var a=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,l=a||k.DZ.HostingTierE2Small,c=(0,ge.i)(e.repl.powerUpCosts,a),u=(0,ge.i)(e.repl.powerUpCosts,l);c&&a&&v({sku:a,cost:c}),u&&f({sku:l,cost:u}),x(e.repl.powerUpCosts)}}}).loading;if(C||!d||!w)return(0,r.tZ)(Z.G,{css:[m.l0.flex.row,m.l0.justify.center],children:(0,r.tZ)(_.Z,{})});var S=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)S="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var T=(0,g.$E)(d.cost.cyclesCostRecurring),E=(0,g.$E)(d.cost.cyclesCostRecurring*xe.Dj);S="".concat(T,"/day (Approximately ").concat(E,"/month).")}var R=null;switch(d.cost.explanation){case k.Ch.IncludedInExistingOrder:break;case k.Ch.NeedsCycles:R="You'll be able to purchase Cycles while activating.";break;case k.Ch.SpendCycles:R="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(Z.G,{css:m.l0.colWithGap(16),children:[(0,r.tZ)(ye,{selectedOption:d,onChange:function(e){var n=(0,ge.i)(w,e);n&&f({sku:e,cost:n})},disabled:"requesting"===l}),(0,r.tZ)(Z.G,{css:[m.l0.colWithGap(12)],children:(0,r.BX)(Z.G,{css:[m.l0.colWithGap(8)],children:[(0,r.BX)(Z.G,{css:[m.l0.minHeight(50),m.l0.colWithGap(16),m.l0.justify.end,m.l0.mb(16)],children:[null!=S?(0,r.tZ)(y.xv,{css:[m.l0.textAlign.center],children:S}):null,null!=R?(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.justify.center,m.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{children:R}),(0,r.tZ)(be.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(we.Z,{})})]}):null]}),(0,r.tZ)(Re,{context:n,selectedOption:d,currentOption:h,onBuyMoreCycles:t,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})};function De(e){var n=e.powerUpCategory,t=e.goToCheckout,i=e.goToCheckoutSuccess;switch(n){case"boost":return(0,r.tZ)(fe.Z,{isCheckoutFlow:!0,powerUp:n,onPowerUpUpdated:i,onBuyMoreCycles:t,context:"repl_resources"});case"hosting_tier":return(0,r.tZ)(Ie,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:t});default:throw new Error("Unknown power up category: ".concat(n))}}function Ge(e){var n=e.title,t=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack,l=void 0===a||a;return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.p(12),m.l0.align.center],children:[l&&o?(0,r.tZ)(D.h,{alt:"Back",onClick:function(){return i()},children:(0,r.tZ)(ue.Z,{})}):null,"string"===typeof n?(0,r.tZ)(y.xv,{variant:"subheadDefault",children:n}):n]}),(0,r.tZ)(I.R,{}),(0,r.tZ)(Z.G,{css:[m.l0.colWithGap(8),m.l0.p(12)],children:t})]})}function Pe(e){var n=e.currentStep,t=e.goBack,l=e.canGoBack,c=e.goTo,u=e.analyticsContext;switch(n.step){case"power_up_details":var s=n.powerUpCategory,d=i.S0[s];return(0,r.tZ)(Ge,{goBack:t,canGoBack:l,title:d.name,children:(0,r.tZ)(De,{powerUpCategory:s,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:u,powerUpCategory:s})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})}})});case"checkout":return(0,r.tZ)(Ge,{goBack:t,canGoBack:l,title:"Checkout",children:(0,r.tZ)($,{product:n.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:u})});case"checkout_success":return(0,r.tZ)(Ge,{goBack:t,canGoBack:l,allowBack:!1,title:(0,r.BX)(Z.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(se.Z,{color:m.TV.accentPositiveStronger}),(0,r.tZ)(y.xv,{variant:"subheadDefault",css:[m.l0.color.accentPositiveStronger],children:"Success"})]}),children:(0,r.tZ)(le,{product:n.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var f=n.powerUpCategory;return(0,r.tZ)(Ge,{goBack:t,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:f})}})});case"new_payment_method_form":var p=n.powerUpCategory;return(0,r.tZ)(Ge,{goBack:t,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(ce.q,{onSuccess:function(){return l&&t()},powerUpCategory:p,context:u})});case"not_shown":throw new Error("This step should never be rendered");default:(0,de.Z)(n)}}},13339:function(e,n,t){t.d(n,{t:function(){return Z}});var r=t(72006),i=t(74985),o=t(38861),a=t(4706),l=t(34393),c=t(45510),u=t(87076),s=t(25198),d=t(85368),f=t(82568),p=t(39541),h=t(8622),v=t(1050),g=t(32104),m=t(76735),y=(0,f.X)({self:[p.l0.colWithGap(16)],paymentMethodContainer:[p.l0.colWithGap(16)],addPaymentMethodContainer:[p.l0.colWithGap(6)],loadingContainer:[p.l0.justify.center,p.l0.align.center,p.l0.minHeight(80)]});function Z(e){var n=e.goToNewPaymentMethodForm,t=e.onPreferencesUpdated,f=(0,l.Q)(),Z=f.paymentMethod,b=f.loading,w=f.error,x=(0,o.kr)({defaultAutoRefillEnabledValue:!1,onAutoRefillPreferencesUpdated:function(){t&&t()}}).cardAutoRefillPreferencesProps;return b||null!=w?(0,i.tZ)(d.G,{css:y.loadingContainer,children:(0,i.tZ)(g.Z,{})}):(0,i.BX)(d.G,{css:y.self,children:[null!=Z?(0,i.BX)(d.G,{css:y.paymentMethodContainer,children:[(0,i.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,i.tZ)(u.h,{alt:"Update Payment Method",onClick:n,children:(0,i.tZ)(v.Z,{})}),(0,i.tZ)(a.R,{last4:Z.last4})]}),(0,i.tZ)(o.OK,(0,r.Z)({},x))]}):null," ",null==Z?(0,i.BX)(d.G,{css:y.addPaymentMethodContainer,children:[(0,i.tZ)(s.E,{colorway:"warning",icon:(0,i.tZ)(m.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your Power Ups from being disabled when you run out of Cycles."}),(0,i.tZ)(c.zx,{text:"Add Payment Method",iconLeft:(0,i.tZ)(h.Z,{}),onClick:n})]}):null]})}},66195:function(e,n,t){t.d(n,{P:function(){return o}});var r=t(9970),i=t(50959);function o(e){var n=(0,i.useState)(e),t=n[0],o=n[1],a=(0,i.useState)([]),l=a[0],c=a[1],u=(0,i.useCallback)((function(e){c((0,r.Z)(l).concat([t])),o(e)}),[l,c,t,o]),s=(0,i.useCallback)((function(){var e=l.pop();c(l),e&&o(e)}),[l,c,o]);return{currentStep:t,goTo:u,goBack:s,canGoBack:l.length>0}}},90024:function(e,n,t){t.d(n,{FW:function(){return p},NH:function(){return g}});var r=t(72006),i=t(43119),o=t(71440),a=t(3481),l=t(84757),c=t(24635);function u(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(u(),a.C,l.B),h=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(d(),h);function g(e){var n=(0,r.Z)({},f,e);return c.a(v,n)}},70196:function(e,n,t){t.d(n,{e9:function(){return p},wd:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(84757),l=t(24635);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(u());function p(e){var n=(0,r.Z)({},s,e);return l.a(f,n)}},84757:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,t(71440).Ps)(i())},80866:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(57135),i=t(96583),o=t(74985),a=(t(50959),t(39137)),l=t(85368),c=t(61284),u=t(39541),s=t(45510),d=t(25198),f=t(56169),p=t(51631),h=t(12318),v=t(76735),g=t(35207),m=t(625),y=t(22642),Z=t(33594),b=(0,t(82568).X)({content:[u.l0.p(8),u.l0.colWithGap(16)],section:[u.l0.colWithGap(8)]});function w(e){var n=e.header;return(0,o.tZ)(Z.Q,{headerContent:n,children:(0,o.BX)(l.G,{css:b.content,children:[(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Bold Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Italic Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Links"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Images"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Header Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"# Header"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Code Blocks"}),(0,o.BX)(c.xv,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Inline Code"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Horizontal Rules"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"***"})]})]})})}var x=l.K.form;function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function S(e){var n,t,Z=e.repl,b=e.source,S=e.onDone,T=(0,f.H)(),E=T("titleIdInput"),R=T("descriptionIdInput"),I=(0,h.Y)("",k),D=(0,h.Y)("",C),G=(0,g.O)();return(0,o.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),I.validate()||D.validate()?[2]:[4,G.publish({input:{replId:Z.id,title:I.value,body:D.value}})];case 1:return n.sent().error||((0,m.j)(m.U3.UPDATE_SHARED,{source:b,replType:Z.publishedAs===p.O2.Template?"template_repl":"regular_repl"}),S()),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(c.xv,{children:["Explain what has changed about this"," ",Z.publishedAs===p.O2.Template?"Template":"Repl","."]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:E,children:"Title"}),(0,o.tZ)(a.II,{id:E,onChange:function(e){I.setValue(e.target.value)},disabled:G.loading,placeholder:"Give your post a title"})]}),I.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(n=I.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:R,children:"Description"}),(0,o.tZ)(a.B,{id:R,onChange:function(e){D.setValue(e.target.value)},css:[u.l0.width("100%"),{minHeight:u.TV.space128,maxHeight:u.TV.space256,resize:"vertical",lineHeight:u.TV.lineHeightDefault}],disabled:G.loading,placeholder:"Write something about this post"})]}),D.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(t=D.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),G.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),colorway:"negative",text:G.error}):null,(0,o.tZ)(s.zx,{text:G.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(G.loading||I.error||D.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},35207:function(e,n,t){t.d(n,{O:function(){return v}});var r=t(57135),i=t(2272),o=t(96583),a=t(72006),l=t(43119),c=t(71440),u=t(90024),s=t(50216);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,c.Ps)(d(),u.FW);function h(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var n=(0,a.Z)({},f,e);return s.D(p,n)}(),2),n=e[0],t=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,t.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{publish:l,data:t.data,loading:t.loading,error:h(t)}}},38453:function(e,n,t){t.d(n,{Z:function(){return p},_:function(){return g}});var r=t(2272),i=t(74985),o=t(48306),a=t.n(o),l=t(50959),c=t(19065),u=t(35301),s=t(66482),d=t(27522),f=t(39541);function p(e){var n=(0,r.Z)(l.useState(!1),2),t=n[0],o=n[1],a=[],s=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,h=!1,v=void 0;try{for(var m,y=e.variables[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var Z=m.value;Z.parentVariableReference===f?a.push(Z):s.push(Z)}}catch(b){h=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(u.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(n){return(0,i.tZ)(g,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})),s.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",t?"Less":"More"]}),t&&s.map((function(n){return(0,i.tZ)(g,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}))]})]})]})}function h(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.tZ)(s.Z,{})}):null}function v(e){var n=e.expanded,t=e.depth,r=e.variable;return 0===t&&!("parentVariableReference"in r)?(0,i.tZ)(h,{expanded:n,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(h,{expanded:n,variable:r})})}function g(e){var n=e.depth,t=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),s=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),p=f[0],h=f[1];return l.useEffect((function(){s&&o.fetchVariables(t.variablesReference).then((function(e){return h(e)}),(function(){return d(!1)}))}),[s,o,t.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){t.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" variable",children:[(0,i.tZ)(v,{expanded:s,variable:t,depth:n}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label",children:[t.name,t.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]]),children:t.value})})]}),s?(0,i.tZ)(u.gC,{align:"stretch",constrainWidth:!0,children:p.map((function(e){return(0,i.tZ)(g,{depth:n+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[n],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(n," * var(--space-16));padding-left:-moz-calc(").concat(n," * var(--space-16));padding-left:calc(").concat(n," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},49770:function(e,n,t){t.d(n,{KB:function(){return zt},gC:function(){return Sn},T0:function(){return pn},Xo:function(){return Gi},CC:function(){return wi},ex:function(){return Di},uD:function(){return Bi},_F:function(){return _i},DR:function(){return Ci},FQ:function(){return go},N8:function(){return zi},lY:function(){return Do},ii:function(){return po},lz:function(){return ui},Z0:function(){return Li},kr:function(){return Ro},m$:function(){return Ii},x:function(){return ai},Gt:function(){return gi},nC:function(){return Oo},Ar:function(){return si},nG:function(){return vi},k:function(){return Uo},Ek:function(){return ro},rU:function(){return hi},oL:function(){return Ao},TO:function(){return Xi},BN:function(){return bo},Eh:function(){return so},LR:function(){return no},cT:function(){return Fi},o3:function(){return eo},cr:function(){return Pi},Jy:function(){return io},rX:function(){return Ai},Yg:function(){return ki},Un:function(){return Eo},xs:function(){return ii},x7:function(){return li},Lo:function(){return Qi},je:function(){return Si},hx:function(){return ao},e$:function(){return Ti},JW:function(){return co},km:function(){return fo},CA:function(){return qi},Vu:function(){return fi},Ge:function(){return Yi},ec:function(){return di},s7:function(){return Wi},qg:function(){return ri},qV:function(){return lo},R5:function(){return yo},q6:function(){return ji},FZ:function(){return Zo},N2:function(){return pi},L0:function(){return Bo},V5:function(){return _o},ZW:function(){return Zi},ts:function(){return yi},HW:function(){return bi},zs:function(){return uo},Kt:function(){return Mi},A:function(){return Oi},lI:function(){return wo},Fg:function(){return to},Fh:function(){return vo},cu:function(){return mo},n7:function(){return Ei},ze:function(){return $i},TN:function(){return mi},Av:function(){return Ri},VD:function(){return Ni},ne:function(){return ci},eM:function(){return Ji},Id:function(){return Po},y8:function(){return oo},$x:function(){return To},yR:function(){return So},Ap:function(){return Fo},$P:function(){return Xo},Bd:function(){return xo},Hb:function(){return ho},OO:function(){return Ki},H7:function(){return xi},gQ:function(){return Co},MG:function(){return Go},Z9:function(){return oi},HM:function(){return Ui},MI:function(){return Gt}});var r=t(2272),i=t(18171),o=t(86763),a=t.n(o),l=t(42445),c=t(74985),u=t(50959),s=t(33523),d=t(2749),f=t(13525),p=t(92674),h=t.n(p),v=t(92508);function g(e){if("number"!==typeof e)throw new Error("Expected number")}function m(e){if("string"!==typeof e)throw new Error("Expected string")}function y(e){if(m(e.type),g(e.percent),"paneGroup"!==e.type){if("split"===e.type)return function(e){if("boolean"!==typeof e)throw new Error("Expected boolean")}(e.stacked),function(e){if(!Array.isArray(e.children))throw new Error("Expected children")}(e),void e.children.forEach(y);throw new Error("Invalid pane type: "+e.type)}if(m(e.id),!Array.isArray(e.panes))throw new Error("Expected panes array");e.panes.map(m)}function Z(e,n){if(!Array.isArray(e.floating))throw new Error("Expected floating");e.floating.forEach((function(e){if(m(e.id),"floatingPaneGroup"!==e.type)throw new Error("Expected floatingPaneGroup type");if(!Array.isArray(e.panes))throw new Error("Expected panes array");!function(e){[e.x,e.y,e.width,e.height].forEach(g)}(e.rect),e.panes.forEach((function(e){if(m(e),!n.includes(e))throw new Error("Unrecognized id")}))})),e.tiling&&y(e.tiling)}function b(e){if("object"!==typeof e)throw new Error("Expected object");if(!v.v[e.type])throw new Error("Expected valid pane, got: ".concat(e.type))}function w(e){!function(e){if("object"!==typeof e)throw new Error("Expected object");Object.values(e).map(b)}(e.data),Z(e.layout,Object.keys(e.data)),void 0!==e.sidebarPercent&&function(e){if("number"!==typeof e)throw new Error("Expected number");if(e<0)throw new Error("Expected positive number");if(e>100)throw new Error("Expected number less than 100")}(e.sidebarPercent)}var x=t(92153),k=t(55749),C=t(9970),S=t(19692);function T(e,n){var t=(0,k.Z)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw new Error("Expected paneGroup");return a}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value;if("paneGroup"===c.type)break;if("number"!==typeof g)throw new Error("Expected number");s++,c=c.children[g]}}catch(m){f=!0,p=m}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return u===s?c:null}function E(e,n){var t=e.floating.find((function(e){return e.panes.includes(n)}));if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,C.Z)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function R(e,n,t){if("paneGroup"===e.type)return{paneGroup:e,path:t};var r=0,i=e.children.length-1;return"topRight"!==n||e.stacked?("bottomRight"===n||"bottomLeft"===n&&e.stacked)&&(r=i):r=i,R(e.children[r],n,(0,C.Z)(t).concat([r]))}function I(e,n){var t=e.tiling;return t?R(t,n,["tiling"]):null}function D(e,n){var t=e.tiling,r=e.floating,i=(0,C.Z)(r);for(t&&i.push(t);i.length;){var o,a=i.shift();if(!a)throw new Error("Expected item");if("split"===a.type)(o=i).push.apply(o,(0,C.Z)(a.children));else if(a.id===n)return a}return null}function G(e,n){var t=function(){var e=o.shift();if(!e)throw new Error("Expected item");var t=(0,r.Z)(e,2),i=t[0],a=t[1];return"split"!==i.type?"continue":i.children.some((function(e){return"paneGroup"===e.type&&e.id===n}))?{v:{node:i,path:a}}:void i.children.forEach((function(e,n){o.push([e,(0,C.Z)(a).concat([n])])}))},i=e.tiling;if(null===i)return null;for(var o=[[i,["tiling"]]];o.length;){var a=t();if("object"===(0,S.Z)(a))return a.v}return null}function P(e,n){var t=E(e,n);if("paneGroup"===(null===t||void 0===t?void 0:t.paneGroup.type)){var r=G(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function _(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}function B(e){return"floatingPaneGroup"!==e.type}function A(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function U(e,n){var t=E(e,n);if(!t)throw new Error("Expected pane");if(t.floating)if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!==typeof r)throw new Error("Expected floatingIndex");L(e,["floating",r])}else A(t.paneGroup,t.index);else{var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw new Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw new Error("Expected paneIndex");a||1!==i.panes.length?i.panes.length>1?A(i,l):L(e,o):e.tiling=null}}function L(e,n){var t=(0,k.Z)(n),i=t[0],o=t.slice(1);if("tiling"!==i||0!==o.length)if("floating"!==i||0!==o.length){var a=T(e,n);if(!a)throw new Error("Expected node");if("floatingPaneGroup"!==a.type){var l=_(n),c=T(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected split");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce((function(e,n){return e+n.percent}),0);s.forEach((function(e){e.percent=e.percent*d}))}else{var f=(0,r.Z)(s,1)[0],p=l.length>1?T(e,_(l)):null;if(!p)return f.percent=100,void(e.tiling=f);if("split"!==p.type)throw new Error("Expected split");var h=p.children.indexOf(c);if(-1===h)throw new Error("Expected parentIndex");f.percent=c.percent,p.children[h]=f}}else{var v=e.floating.indexOf(a);if(-1===v)throw new Error("Expected paneGroupIndex");e.floating.splice(v,1)}}else e.floating=[];else e.tiling=null}var N=t(30504);function X(e){var n=e.isStacked,t=e.isHTML,r=e.isExtension,i=e.codeEditorPath,o=void 0===i?"":i,a={codeEditor:{paneId:h()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:h()(),pane:{type:t?"webview":"runnerOutput"}},shell:{paneId:h()(),pane:{type:"shell"}},ghostwriter:{paneId:h()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:h()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:h()(),pane:{type:"docs",data:{url:N.TT.EXTENSIONS}}}},l={};Object.values(a).forEach((function(e){var n=e.paneId,t=e.pane;l[n]=t}));var c=function(e){var n=e.codeEditorId,t=e.outputId,r=e.shellId,i=e.extensionDevtoolsId,o=e.extensionDocsId,a=e.isStacked,l=e.isExtension,c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:60,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:40,type:"paneGroup",panes:[t,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[t,r],activeIndex:0}]};return l&&(c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:60,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}),{floating:[],tiling:c}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:n,isExtension:r});return{layout:c,data:l}}function F(e){var n,t=e.initialLayoutState,i=e.codeEditorPath,o=e.isHTML,a=e.isStacked,l=e.isExtension,c=t?function(e){try{w(e)}catch(n){return null}return e}(t):null,u=null!==(n=null===c||void 0===c?void 0:c.sidebarPercent)&&void 0!==n?n:15;if(c){var s=(0,x.ZP)(c,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=Object.entries(e.data)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,r.Z)(o.value,2),c=l[0],u=l[1];("commands"===u.type||"codeEditor"===u.type&&!u.data.path)&&(delete e.data[c],U(e.layout,c))}}catch(s){t=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}}));return{data:s.data,layout:s.layout,type:"saved",sidebarPercent:u}}var d=X({isStacked:a,isHTML:o,isExtension:l,codeEditorPath:i});return{data:d.data,layout:d.layout,type:"default",sidebarPercent:u}}var O=t(81202),M=t.n(O),W=t(72006);var H={top:0,bottom:0,left:0,right:0};function z(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?H:o,l=[],c=[],u=[],s=[],d=null;function f(n,t,o,a){var l=t.children.indexOf(n),p=t.children.length,h=t.stacked?o.height:o.width;var v=function(){var e=o.width,a=o.height,l=n.percent/100;return t.stacked?a=(h-(r*(p-1)+i*p))*l+i:e=(h-r*(p-1))*l,{width:e,height:a}}(),g=v.width,m=v.height,y=function(){var e=o.x,n=o.y;if(0===l)return{x:e,y:n};if(!d)throw new Error("Expected previousRect");return t.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),Z={x:y.x,y:y.y,height:m,width:g};if(d=Z,"paneGroup"===n.type){var b,w={x:Z.x,y:Z.y+i,width:Z.width,height:Z.height-i},x={x:w.x,y:w.y-i,width:w.width,height:i};s.push({id:n.id,rect:x,panes:n.panes,activeIndex:n.activeIndex,path:a}),(b=c).push.apply(b,(0,C.Z)(n.panes.map((function(e,t){return{paneId:e,rect:w,active:t===n.activeIndex}}))))}else n.children.forEach((function(e,t){return f(e,n,Z,(0,C.Z)(a).concat([t]))}));if(0!==l){var k={x:Z.x-(t.stacked?0:r),y:Z.y-(t.stacked?r:0),width:t.stacked?Z.width:r,height:t.stacked?r:Z.height},S=_(a),E=(0,C.Z)(S).concat([l-1]),R=T(e,E);if(!R||!B(R))throw new Error("Expected leftNode");var I=void 0;0===R.percent?I="left":0===n.percent&&(I="right"),u.push({parentPath:S,leftPath:E,rightPath:a,stacked:t.stacked,rect:k,snapped:I})}}var p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},h=e.tiling;if("paneGroup"===(null===h||void 0===h?void 0:h.type)){var v,g={x:p.x,y:p.y+i,width:p.width,height:p.height-i},m={x:g.x,y:g.y-i,width:g.width,height:i};s.push({id:h.id,rect:m,panes:h.panes,activeIndex:h.activeIndex,path:["tiling"]}),(v=c).push.apply(v,(0,C.Z)(h.panes.map((function(e,n){return{paneId:e,rect:g,active:n===h.activeIndex}}))))}else h&&h.children.forEach((function(e,n){return f(e,h,p,["tiling",n])}));var y=a.left+49,Z={x:p.x-y,y:p.y,width:p.width+y,height:p.height};return e.floating.forEach((function(e,n){var t,r=function(e,n){var t=n.inside,r=(0,W.Z)({},e);return r.x<t.x?(r.x=t.x,r.width=Math.min(r.width,t.width)):r.x+r.width>=t.x+t.width?(r.x=Math.max(t.x,t.x+t.width-r.width),r.width=Math.min(r.width,t.width)):r.width=Math.min(r.width,t.width),r.y<t.y?(r.y=t.y,r.height=Math.min(r.height,t.height)):r.y+r.height>=t.y+t.height?(r.y=Math.max(t.y,t.y+t.height-r.height),r.height=Math.min(r.height,t.height)):r.height=Math.min(r.height,t.height),r}(e.rect,{inside:Z}),o={height:i,width:r.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:r.width,height:Math.max(r.height-i,0)};s.push({id:e.id,rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),(t=l).push.apply(t,(0,C.Z)(e.panes.map((function(n,t){return{paneId:n,rect:a,active:t===e.activeIndex}}))))})),{tiles:c,gutters:u,headers:s,floating:l}}var V=t(23457),j=(0,l.cn)([]),q=(0,l.cn)([]),Y=(0,l.cn)([]),K={x:0,y:0,width:0,height:0},$={type:"commands",data:{autoFocus:!1}};var Q,J=(0,V.xu)((function(e){return(0,l.cn)(function(e){return{paneId:e,type:"tile",rectAtom:(0,l.cn)((0,W.Z)({},K)),data:(0,l.cn)((0,W.Z)({},$)),isHidden:!1,isCommitted:!1}}(e))})),ee=(0,l.cn)((function(e){return e(j).map((function(n){return e(J(n))}))})),ne=(0,l.cn)((function(e){return e(Y).map((function(n){return e(re(n))}))})),te=(0,V.xu)((function(e){return(0,l.cn)(function(e){return{handleId:e,rect:K,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),re=(0,V.xu)((function(e){return(0,l.cn)({id:e,rectAtom:(0,l.cn)((0,W.Z)({},K)),panes:[],path:["tiling"],activeIndex:0})})),ie=(0,l.cn)((function(){return 36})),oe=(0,l.cn)({x:0,y:0,width:0,height:0}),ae=(0,l.cn)({width:0}),le=(0,l.cn)(null),ce=(0,l.cn)(null,(function(e,n,t){t!==e(le)&&n(le,t)})),ue=(0,l.cn)(null,(function(e,n,t){var r=J(t);e(r).isCommitted||n(r,(function(e){return(0,x.ZP)(e,(function(e){e.isCommitted=!0}))}))})),se=(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=e(J(n)),r=e(t.data);return(0,v.Ur)(r)&&r.data.path||null})),de=((0,l.cn)(null),(0,l.cn)(!0)),fe=(0,l.cn)({tiling:null,floating:[]}),pe=(0,l.cn)((function(e){return e(ee).filter((function(n){return(0,v.Ur)(e(n.data))}))})),he=(0,l.cn)((function(e){var n;return null!==(Q=null===(n=e(pe).find((function(e){return!e.isCommitted})))||void 0===n?void 0:n.paneId)&&void 0!==Q?Q:null})),ve=(0,l.cn)((function(e){return e(pe).map((function(n){return{paneId:n.paneId,filePath:e(n.data).data.path}})).filter((function(e){return e.filePath&&e.filePath.length>0}))})),ge=(0,l.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(ee)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),me=(0,l.cn)((function(e){var n=e(oe);return Boolean(n.width&&n.height)})),ye=(0,l.cn)(null),Ze=(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=e(J(n)).rectAtom,r=e(t),i=e(ie);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}})),be=(0,l.cn)(null,(function(e,n,t){var r=e(pe).find((function(n){return t===(0,v.DQ)(e(n.data))}));r&&(n(ce,r.paneId),n(ue,r.paneId))})),we=(0,l.cn)(null,(function(e,n,t){n(e(J(t.paneId)).data,t.pane),t.makeActive&&n(ce,t.paneId),t.commit&&n(ue,t.paneId)})),xe=(0,l.cn)(null);function ke(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function Ce(e,n){var t=function(e){var n=e.rect,t=e.point,r=n.height>n.width?n.width/n.height:1,i=n.width>n.height?n.height/n.width:1,o=(t.x-n.x)*i,a=(n.x+n.width-t.x)*i,l=(t.y-n.y)*r,c=(n.y+n.height-t.y)*r,u=Math.min(o,a,l,c);return u===o?"left":u===a?"right":u===l?"top":"bottom"}({point:e,rect:n}),r={x:n.x,y:n.y,width:n.width,height:n.height},i="below";return"top"===t?(r.height=n.height/2,i="above"):"bottom"===t?(r.height=n.height/2,r.y=n.y+n.height/2,i="below"):"left"===t?(r.width=n.width/2,r.x=n.x,i="leftOf"):"right"===t&&(r.width=n.width/2,r.x=n.x+n.width/2,i="rightOf"),{placement:i,rect:r}}function Se(e){return"handle:"+e.leftPath.join(":")}function Te(e){return(0,i.Z)((function(){return(0,V.kv)(e,(function(e){return{width:e.width,height:e.height}}),(function(e,n){return Boolean(e.height===n.height&&e.width===n.width)}))}),[e])}function Ee(e){return(0,i.Z)((function(){return(0,V.kv)(e,(function(e){return{x:e.x,y:e.y}}),(function(e,n){return Boolean(e.x===n.x&&e.y===n.y)}))}),[e])}var Re=t(44841),Ie=(0,l.cn)((function(e){var n=e(ie),t=e(ae),r=e(oe);return{headerHeight:n,inset:{top:0,bottom:8,left:8+t.width,right:8},gap:8,size:{width:r.width,height:r.height}}})),De=(0,l.cn)(null,(function(e,n,t){n(oe,t),n(Pe,e(fe))}));function Ge(e,n){return M()(e,n)}var Pe=(0,l.cn)(null,(function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=J(r),u=e(c);Ge(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,x.ZP)(u,(function(e){e.paneId=r,e.type=o,e.isHidden=a}));Ge(u,s)||n(c,s)},i=e(j),o=e(q),a=e(Y),l=new Set(i),c=new Set(o),u=new Set(a),s=z(t,e(Ie)),d=s.tiles,f=s.floating,p=s.gutters,h=s.headers,v=p.map(Se);Ge(o,v)||n(q,v);var g=(0,C.Z)(d).concat((0,C.Z)(f)).map((function(e){return e.paneId}));Ge(i,g)||n(j,(0,Re.Z)(g,{existing:i,getKey:function(e){return e}}));var m=[];h.forEach((function(t){u.delete(t.id);var r=re(t.id),i=e(r);m.push(t.id),Ge(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,x.ZP)(i,(function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path}));Ge(i,o)||n(r,o)})),Ge(a,m)||n(Y,m),d.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"tile"})})),f.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"floating"})})),p.forEach((function(t){var r={handleId:Se(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=te(r.handleId);Ge(e(i),r)||n(i,r)})),l.forEach(J.remove),c.forEach(te.remove),u.forEach(re.remove);var y=e(le);y&&l.has(y)&&n(le,null),n(fe,t)})),_e=t(57135),Be=t(96583),Ae=t(85234),Ue=t.n(Ae),Le=t(43119),Ne=t(71440),Xe=t(50216);function Fe(){var e=(0,Le.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}var Oe={},Me=(0,Ne.Ps)(Fe());var We=t(12379);function He(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=T(e,t);if(!a||!B(a))throw new Error("Expected leftNode");var l=T(e,_(t));if("split"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),f=c-1;d>0;){var p=l.children[f];if(p.percent>d){p.percent-=d;break}if(d-=p.percent,p.percent=0,0===f)break;f--}var h=l.children.reduce((function(e,n){return n===s?e:e+n.percent}),0);s.percent=100-h}else{var v=a.percent+s.percent,g=l.children.slice(c).reduce((function(e,n){return e+n.percent}),0);if(r>v-o){if(a.percent=Math.min(g,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var m=r-v,y=u+1;m>0;){var Z=l.children[y];if(Z.percent>m){Z.percent-=m;break}if(m-=Z.percent,Z.percent=0,y===l.children.length-1)break;y++}}else{var b=a.percent-r;s.percent=s.percent+b,a.percent=r}}}function ze(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=T(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=_(t);o.length;){var a=T(e,o);if(!a)break;o=_(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=T(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,f=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-f)}var Ve=(0,l.cn)(null),je=(0,l.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(fe),i=t.stacked?window.innerHeight:window.innerWidth,o=T(r,t.leftPath);if(!o||!B(o)){var a=new Error("Expected left node");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=_(t.leftPath),c=o.percent,u=30/i*100,s=null;try{s=ze({splitPath:l,layout:r,tilingOptions:e(Ie)})}catch(w){throw n(ye,{error:w,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),w}if(null===s)throw new Error("Expected resizeDistance");n(Ve,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(Ve);if(!d){var f=new Error("Expected tilingResize");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),f}var p=d.stacked,h=d.leftPath,v=d.startPercent,g=d.resizeDistance,m=d.initialLayout,y=d.snapPercent,Z=v+(p?t.moveDelta.y:t.moveDelta.x)/g*100,b=(0,x.ZP)(m,(function(e){He(e,{leftPath:h,percent:Z,snapPercent:y})}));n(Pe,b)}else n(Ve,null)}));function qe(e){return(0,i.Z)((function(){return te(e)}),[e])}function Ye(e){var n=qe(e);return(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return e.rect}))}),[n])}function Ke(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(Ve);return!!t&&e===Se({leftPath:t.leftPath})}))}),[e])}function $e(e){var n=qe(e);return(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return e.stacked}))}),[n])}var Qe=(0,l.cn)(null,(function(e,n){0!==e(ae).width&&(n(ae,{width:0}),n(Pe,e(fe)))})),Je=(0,l.cn)(null,(function(e,n){var t=e(ae).width>0?0:fn;n(ae,{width:t}),n(Pe,e(fe))})),en=(0,l.cn)(null),nn=(0,l.cn)(null,(function(e,n){var t=e(ae);n(en,{sidebarWidthStart:t.width})})),tn=(0,l.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(en);if(i){var o=e(oe),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,un)))<pn&&!(r>0)){if(pn-a<sn)return;a=0}n(ae,{width:a}),n(Pe,e(fe))}})),rn=(0,l.cn)(null,(function(e,n){if(e(en)){var t=e(ae);t.width<pn&&(n(ae,{width:0===t.width?0:pn}),n(Pe,e(fe))),n(en,null)}})),on=(0,l.cn)((function(e){return Boolean(e(en))})),an=(0,l.cn)((function(e){return e(on)?{width:1,height:e(ln).height}:{width:2,height:24}})),ln=(0,l.cn)((function(e){var n=e(oe).height;return{x:e(ae).width,y:0,height:n-8,width:8}})),cn=(0,l.cn)((function(e){return e(ln).height})),un=600,sn=80,dn=(0,l.cn)((function(e){return e(ae).width})),fn=220,pn=180,hn=(0,l.cn)((function(e){return e(dn)>0}));var vn=(0,l.cn)((function(e){var n=e(oe);return function(e,n){var t=n.min,r=n.max;return Math.min(Math.max(t,e),r)}(e(dn)/n.width*100,{min:0,max:100})})),gn=(0,l.cn)((function(e){var n=e(fe),t={};e(ee).forEach((function(n){t[n.paneId]=e(n.data)}));var r=e(vn);return{layout:n,data:t,sidebarPercent:r}})),mn=(0,l.cn)(null),yn=(0,l.cn)(null),Zn=(0,l.cn)(null);function bn(e,n){return wn.apply(this,arguments)}function wn(){return wn=(0,_e.Z)((function(e,n){var t,r;return(0,Be.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===We.l||void 0===We.l?void 0:We.l.mutate({mutation:Me,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))})),wn.apply(this,arguments)}var xn=(0,l.cn)(null,function(){var e=(0,_e.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,Be.__generator)(this,(function(u){switch(u.label){case 0:return(r=e(yn))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(me)?(i=e(gn),o=t.replId,a=e(mn),!t.force&&M()(a,i)?[2]:(l=Ue()(),n(Zn,l),[4,bn(o,i)])):[2];case 1:return c=u.sent(),e(Zn)!==l?[2]:(n(Zn,null),c.retry?(n(yn,{timestamp:Date.now(),retry:!0}),[2]):c.success?(n(mn,i),[2]):(n(yn,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),kn=(0,l.cn)(null,(function(e,n,t){var i=t.data,o=t.layout,a=t.sidebarPercent,l=t.type;Object.entries(i).forEach((function(t){var i=(0,r.Z)(t,2),o=i[0],a=i[1],l=J(o);n(l,(0,x.ZP)(e(l),(function(e){e.isCommitted=!0}))),n(e(l).data,a)}));var c=window.innerWidth,u=Math.floor(a)>0?Math.min(c*(a/100),un):0;n(ae,{width:u>0?Math.max(fn,u):Math.max(0,u)}),n(Pe,o),n(xe,l),n(mn,e(gn))})),Cn=(0,u.createContext)(null);function Sn(e){var n=e.children,t=e.initialLayoutState,r=void 0===t?null:t,i=e.isHTML,o=void 0!==i&&i,a=e.isStacked,s=void 0!==a&&a,d=e.isExtension,f=void 0!==d&&d,p=(0,u.useState)((function(){return function(e){var n=e.initialLayoutState,t=e.isHTML,r=e.isStacked,i=e.isExtension,o=(0,l.MT)();return o.set(kn,F({initialLayoutState:n,isHTML:t,isStacked:r,isExtension:i})),o}({initialLayoutState:r,isHTML:o,isStacked:s,isExtension:f})})),h=p[0];return(0,c.tZ)(Cn.Provider,{value:h,children:n})}function Tn(){var e=(0,u.useContext)(Cn);if(!e)throw new Error("Expected store in context");return e}function En(e){return(0,s.Dv)(e,{store:Tn()})}function Rn(e){return(0,f.b)(e,Tn())}var In=function(e){return(0,s.b9)(e,{store:Tn()})};function Dn(e){return(0,d.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:Tn()})}var Gn=(0,l.cn)(!1),Pn=(0,l.cn)((function(e){return e(Gn)?e(le):null})),_n=(0,l.cn)(null,(function(e,n,t){n(ce,t),n(Gn,!0)})),Bn=(0,l.cn)(null,(function(e,n,t){n(Gn,!0);var r=D(e(fe),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(ce,o)})),An=(0,l.cn)(null,(function(e,n){n(Gn,!1)})),Un=(0,l.cn)(null,(function(e,n,t){e(Pn)===t?n(An):n(_n,t)})),Ln=(0,l.cn)(null,(function(e,n,t){var r=D(e(fe),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(Un,o)})),Nn=(0,l.cn)((function(e){var n=e(oe);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),Xn=(0,l.cn)((function(e){var n=e(ie),t=e(Nn);return{x:t.x,y:t.y,width:t.width,height:n}})),Fn=(0,l.cn)((function(e){var n=e(ie),t=e(Nn);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}})),On=t(4561);function Mn(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});else{var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=E(e,n.relativeTo);if(!i)throw new Error("Expected pane");r=i.paneGroupPath}if(null===r)throw new Error("Expected relativeTo");if("tiling"!==r[0])throw new Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(e.tiling||1!==r.length){if(!e.tiling)throw new Error("Expected tiling");var s=T(e,r);if(!s||!B(s))throw new Error("Expected tiled node");if(1!==r.length||"replace"!==o){if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];return e.tiling={type:"split",percent:100,stacked:c,children:d},void Wn({id:n.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:t})}if(1===r.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(c))return void Wn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var f={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},p=u?[s,f]:[f,s];return s.percent=100-f.percent,void(e.tiling={type:"split",stacked:c,children:p,percent:100})}if(0===r.length)throw new Error("Expected relativeTo length");var h=T(e,_(r));if("split"!==(null===h||void 0===h?void 0:h.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(h.stacked)!==Boolean(c))if(Boolean(h.stacked)===Boolean(c));else{var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},g=u?[s,v]:[v,s],m=s.percent;s.percent=100-v.percent;var y=h.children.indexOf(s);h.children[y]={type:"split",stacked:c,children:g,percent:m}}else{var Z=h.children.indexOf(s);Wn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?Z+1:Z,children:h.children})}else{var b=h.children.indexOf(s);h.children.splice(b,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t})}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}}function Wn(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0===t){var l=r.reduce((function(e,n){return e+n.percent}),0)/r.length,c=100/(100+l);r.forEach((function(e){e.percent=e.percent*c}));var u={id:n,panes:i,type:"paneGroup",percent:l*c,activeIndex:a};r.splice(o,0,u)}else{var s=(100-t)/100;r.forEach((function(e){e.percent=e.percent*s}));var d={id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a};r.splice(o,0,d)}}function Hn(e,n){var t=D(e,n.paneGroupId);if(!t)throw new Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate,a=void 0===o||o;if(void 0!==r&&r>e.panes.length)throw new Error("Invalid index");var l=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[l,0].concat((0,C.Z)(i))),a&&(e.activeIndex=l)}(t,n)}var zn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=D(r,t.paneGroupId);if(!i){var o=new Error("Expected pane group");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,x.ZP)(r,(function(e){try{i.panes.forEach((function(n){U(e,n)}))}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}}));e(Gn)&&n(Gn,!1),n(Pe,a)})),Vn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t.paneId);if(!i){var o=new Error("Expected relativeToPane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=Ue()(),l=e(J(a));n(l.data,{type:"commands",data:{autoFocus:Boolean(t.autoFocus)}});var c=(0,x.ZP)(r,(function(e){try{Mn(e,{id:Ue()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}}));n(Pe,c),n(ce,a)})),jn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=Ue()(),o=e(J(i));n(o.data,t.pane);var a=(0,x.ZP)(r,(function(e){try{Mn(e,{id:Ue()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),r}}));return n(Pe,a),i})),qn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=(0,x.ZP)(r,(function(e){He(e,{leftPath:t.leftPath,percent:t.percent})}));n(Pe,i)})),Yn=(0,l.cn)(null,(function(e,n,t){var r=D(e(fe),t);if(!r)return null;n(ce,r.panes[r.activeIndex])}));var Kn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t);if(!i)throw new Error("Expected pane");var o=!i.paneGroup.panes.some((function(e){return e!==t})),a=t===e(le),l=P(r,t),c=(0,x.ZP)(r,(function(e){try{U(e,t)}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),r}}));if(n(Pe,c),o&&e(Gn)&&n(Gn,!1),a&&(o||n(Yn,i.paneGroup.id),o&&l)){do{"split"===l.type&&(l=l.children[0])}while("paneGroup"!==l.type);n(Yn,l.id)}})),$n=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t),o=null===i||void 0===i?void 0:i.paneGroup.panes.filter((function(e){return e!==t}));if(null===o||void 0===o?void 0:o.length){var a=(0,x.ZP)(r,(function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){U(e,a.value)}}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),u}}));n(Pe,a)}})),Qn=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length){var r=new Error("Expect at least one pane");throw n(ye,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(fe),o=t.panes.map((function(){return Ue()()})),a=(0,x.ZP)(i,(function(e){try{Mn(e,{id:Ue()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}}));n(Pe,a),t.panes.forEach((function(t,r){var i=o[r],a=e(J(i));n(a.data,t);var l=(0,v.b)(t.type)?e(ee).find((function(n){return e(n.data).type===t.type&&n.paneId!==i})):null;l&&n(Kn,l.paneId)})),t.makeActive&&n(ce,o[0])})),Jn={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},et=(0,l.cn)(null,(function(e,n,t){var r=t.pane,i=t.edge;n(jn,{pane:r,relativeTo:["tiling"],placement:Jn[i]})})),nt=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=Ue()(),o=(0,x.ZP)(r,(function(e){try{Mn(e,{id:Ue()(),panes:[i],isFloating:!0,rect:t.rect})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),r}}));n(Pe,o);var a=e(J(i));return n(a.data,t.pane),t.makeActive?(n(ce,i),i):i}));function tt(e,n,t){var i=(0,r.Z)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),o=i[0],a=i[1],l=Math.max(o[0],a[0]);return Math.min(o[1],a[1])-l}function rt(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}function it(e){var n=e.relativeTo,t=e.rects,i=e.direction,o=t.get(n);if(!o)throw new Error("Expected relativeTo rect to be included in rects");var a=null,l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,r.Z)(s.value,2),p=f[0],h=f[1];if(p!==n){var v=rt({from:o,other:h,direction:i});if(!(("leftOf"===i||"above"===i)&&v<=0||("rightOf"===i||"below"===i)&&v<0)){var g=tt(o,h,"leftOf"===i||"rightOf"===i?"y":"x");if(!(g<=0))(!a||a.distance>v||a.distance===v&&a.overlap<g)&&(a={key:p,rect:h,distance:v,overlap:g})}}}}catch(m){c=!0,u=m}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return(null===a||void 0===a?void 0:a.key)||null}var ot=t(53472),at=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length)return[];var r=e(fe),i=t.panes.map((function(){return Ue()()})),o=(0,x.ZP)(r,(function(e){try{Hn(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),r}}));return n(Pe,o),t.panes.forEach((function(r,o){var a=i[o],l=e(J(a));n(l.data,r);var c=(0,v.b)(r.type)?e(ee).find((function(n){return e(n.data).type===r.type&&n.paneId!==a})):null;c&&n(Kn,c.paneId),t.commit&&n(ue,a)})),t.activate&&n(ce,i[0]),i})),lt=(0,l.cn)(null,(function(e,n,t){var i=t.pane,o=t.activate,a=t.placement,l=e(fe);if(!l.tiling){var c=n(jn,{pane:i,relativeTo:["tiling"],placement:"replace"});return o&&n(ce,c),c}if("after"===a.type){var u=E(l,a.paneId);if(u){var s=(0,r.Z)(n(at,{panes:[i],paneGroupId:u.paneGroup.id,index:u.index+1,activate:o}),1)[0];return o&&n(ce,s),s}}if("secondary"===a.type&&a.relativeTo){var d=P(l,a.relativeTo);if(d){if("paneGroup"===d.type){var f=(0,r.Z)(n(at,{panes:[i],paneGroupId:d.id,activate:o}),1)[0];return o&&n(ce,f),f}var p=n(jn,{pane:i,relativeTo:a.relativeTo,placement:"rightOf"});return o&&n(ce,p),p}var h=E(l,a.relativeTo);if("floatingPaneGroup"===(null===h||void 0===h?void 0:h.paneGroup.type)){var v=e(J(a.relativeTo)),g=e(v.rectAtom);return n(nt,{rect:{x:g.x+g.width,y:g.y,width:g.width,height:g.height},pane:i,makeActive:o})}}var m=n(jn,{pane:i,relativeTo:["tiling"],placement:"rightOf"});return o&&n(ce,m),m})),ct=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t);if(!i){var o=new Error("Expected selectedPane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}var a=re(i.paneGroup.id);n(a,(function(e){return(0,x.ZP)(e,(function(e){e.activeIndex=i.index}))}));var l=!0,c=!1,u=void 0;try{for(var s,d=i.paneGroup.panes[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=J(f);n(p,(function(e){return(0,x.ZP)(e,(function(e){e.isHidden=e.paneId!==t}))}))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(fe,(0,x.ZP)(r,(function(e){try{!function(e,n){var t=E(e,n);if(!(null===t||void 0===t?void 0:t.paneGroup))throw new Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw new Error("Expected index");r.activeIndex=i}(e,t)}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}}))),n(ce,t)})),ut=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t}));if(r){if("webview"===t||"vnc"===t)return;return n(ct,r.paneId),void n(ue,r.paneId)}var i=e(fe),o=I(i,"topRight");if(o&&i.tiling)if("paneGroup"!==i.tiling.type)if("split"!==i.tiling.type||2!==i.tiling.children.length||"paneGroup"!==i.tiling.children[1].type)n(at,{panes:[{type:t}],paneGroupId:o.paneGroup.id,commit:!0});else{var a=i.tiling.stacked,l=n(jn,{pane:{type:t},relativeTo:o.path,placement:a?"rightOf":"above"});n(ue,l)}else{var c=n(jn,{pane:{type:t},relativeTo:["tiling"],placement:"rightOf"});n(ue,c)}else{var u=n(jn,{pane:{type:t},relativeTo:["tiling"],placement:"replace"});n(ue,u)}})),st=(0,l.cn)(null,(function(e,n){var t=e(ee).find((function(n){return"threadInbox"===e(n.data).type}));if(t)n(ct,t.paneId);else{var r=e(fe),i=I(r,"bottomRight");i&&r.tiling?"paneGroup"!==r.tiling.type?n(at,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id}):n(jn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"}):n(jn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"})}})),dt=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t.type}));if(r){var i=e(fe),o=(0,x.ZP)(i,(function(e){try{U(e,r.paneId)}catch(t){throw n(ye,{error:t,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),t}}));n(Pe,o)}})),ft=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=(0,x.ZP)(r,(function(e){var r=E(e,t.paneId);if(!r){var i=new Error("Expected pane");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=D(e,t.toPaneGroupId);if(!o){var a=new Error("Expected toPaneGroup");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{U(e,t.paneId),Hn(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(ue,t.paneId)}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),u}}));n(Pe,i)})),pt=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r){var i=e(fe),o=E(i,r);if(o){var a=o.paneGroup,l=new Map(e(ee).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),c=it({relativeTo:r,rects:l,direction:t}),u=c?E(i,c):null;if(u)n(ft,{paneId:r,toPaneGroupId:u.paneGroup.id});else{var s=a.panes.find((function(e){return e!==r}));if(s){var d=(0,x.ZP)(i,(function(e){U(e,r),Mn(e,{id:Ue()(),relativeTo:s,panes:[r],placement:t})}));n(Pe,d)}}}}})),ht=(0,l.cn)((function(e){return e(ee).some((function(n){return"markdown"===e(n.data).type}))})),vt=(0,l.cn)(!1),gt=(0,l.cn)(null,(function(e,n,t){var r=e(pe).map((function(n){return{paneId:n.paneId,path:(0,v.DQ)(e(n.data))}})).filter((function(e){return t===e.path})),i=[],o=e(fe),a=(0,x.ZP)(o,(function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=E(e,u);if(!s){var d=new Error("Expected pane");throw n(ye,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}!s.floating&&1===s.paneGroup.panes.length?i.push(u):U(e,u)}}catch(f){o=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}})),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;n(we,{paneId:f,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(Pe,a)})),mt=(0,l.cn)(null,(function(e,n,t){var r=t.node.path;if(t.eventType!==On.kS.Delete){var i=e(pe).filter((function(n){return(0,v.DQ)(e(n.data))===r})),o={type:(0,v.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(we,{paneId:d,pane:o})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else n(gt,r)}));function yt(e){var n=re(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n);return e(J(t.panes[t.activeIndex])).paneId}))}),[n])}var Zt=(0,l.cn)(null,(function(e,n,t){var r=e(le),i=e(fe);if(r){var o=E(i,r);if(o)return void n(at,{panes:t,paneGroupId:null===o||void 0===o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=I(i,"topLeft");if(a)n(at,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});else{var l=i.floating.length?i.floating[0]:null;l?n(at,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t}):n(Qn,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}})),bt=(0,l.cn)(null,(function(e,n){n(Zt,[{type:"commands",data:{autoFocus:!0}}])})),wt=(0,l.cn)(null,(function(e,n){var t=e(le);return!!t&&(n(Kn,t),!0)}));var xt=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=E(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(fe),{paneId:r,dir:t});i&&n(ct,i)}}));var kt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.pane;n(we,{paneId:r,pane:i});var o=(0,v.b)(i.type)?e(ee).find((function(n){return e(n.data).type===i.type&&n.paneId!==r})):null;if(o){var a=E(e(fe),o.paneId);(null===a||void 0===a?void 0:a.floating)||1!==(null===a||void 0===a?void 0:a.paneGroup.panes.length)?n(Kn,o.paneId):n(we,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}})}})),Ct=(0,l.cn)(null,(function(e,n,t){var r=e(e(J(t.b)).data);n(we,{paneId:t.a,pane:r});var i=E(e(fe),t.b);(null===i||void 0===i?void 0:i.floating)||1!==(null===i||void 0===i?void 0:i.paneGroup.panes.length)?n(Kn,t.b):n(kt,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}})})),St=t(57389),Tt=t(39541),Et=t(42174),Rt=t(82568),It=t(68973),Dt=t(26357),Gt={overlay:Dt.Is+20,gutterActive:Dt.Is+19,maximizedTooltip:Dt.Is+18,maximizedPane:Dt.Is+17,maximizedHeader:Dt.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1},Pt=(0,l.cn)(null),_t=(0,It.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),Bt=_t.cssVars,At=_t.styleTokens,Ut=(0,V.kv)(Pt,(function(e){return(0,St.Z)({},Bt.border,"detachPreview"===(null===e||void 0===e?void 0:e.type)&&e.progress<.98?"1px dashed ".concat(Tt.TV.foregroundDefault):"1px solid ".concat(Tt.TV.accentPrimaryDefault))}),M()),Lt=(0,V.kv)(Pt,(function(e){return null===e||void 0===e?void 0:e.rect}),M()),Nt=(0,V.kv)(Lt,(function(e){var n;return e?(n={},(0,St.Z)(n,Bt.width,e.width+"px"),(0,St.Z)(n,Bt.height,e.height+"px"),n):null}),M()),Xt=(0,V.kv)(Lt,(function(e){var n;return e?(n={},(0,St.Z)(n,Bt.x,e.x+"px"),(0,St.Z)(n,Bt.y,e.y+"px"),n):null}),M()),Ft=(0,V.kv)(Pt,(function(e){return e?"detachPreview"===e.type?(n={},(0,St.Z)(n,Bt.zIndex,Gt.detachPreview.toString()),(0,St.Z)(n,Bt.borderRadius,"100%"),(0,St.Z)(n,Bt.backgroundColor,"transparent"),n):(t={},(0,St.Z)(t,Bt.zIndex,Gt.dropPreview.toString()),(0,St.Z)(t,Bt.borderRadius,"8px"),(0,St.Z)(t,Bt.backgroundColor,Tt.TV.accentPrimaryDimmer),t):null;var n,t}),M()),Ot=(0,V.kv)(Pt,(function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,St.Z)(t,Bt.opacity,(.5*e.progress).toString()),(0,St.Z)(t,Bt.visiblity,"visible"),t):(r={},(0,St.Z)(r,Bt.opacity,"0.2"),(0,St.Z)(r,Bt.visiblity,"visible"),r):(n={},(0,St.Z)(n,Bt.opacity,"0"),(0,St.Z)(n,Bt.visiblity,"hidden"),n)}),M()),Mt=(0,V.kv)(Pt,(function(e){return(0,St.Z)({},Bt.innerOpacity,"detachPreview"===(null===e||void 0===e?void 0:e.type)?"0.5":"0")}),M()),Wt=(0,V.kv)(Pt,(function(e){return(0,St.Z)({},Bt.innerScale,"detachPreview"===(null===e||void 0===e?void 0:e.type)?e.progress.toString():"1")}),M()),Ht=(0,Rt.X)({root:[{position:"absolute",pointerEvents:"none",opacity:At.opacity,width:At.width,height:At.height,transform:"translate(".concat(At.x,", ").concat(At.y,")"),backgroundColor:At.backgroundColor,borderRadius:At.borderRadius,border:At.border,zIndex:At.zIndex,visibility:At.visiblity}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(Tt.TV.backgroundHighest,")"),opacity:At.innerOpacity,transform:"scale(".concat(At.innerScale,")")}]}),zt=(0,u.memo)((function(){var e=En(de),n=(0,u.useRef)(null);(0,Et.j)(n,Rn(Xt)),(0,Et.j)(n,Rn(Nt)),(0,Et.j)(n,Rn(Ut)),(0,Et.j)(n,Rn(Ft)),(0,Et.j)(n,Rn(Ot));var t=(0,u.useRef)(null);return(0,Et.j)(t,Rn(Mt)),(0,Et.j)(t,Rn(Wt)),(0,c.tZ)("div",{ref:n,css:Ht.root,style:{transition:e?"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 60ms":void 0},children:(0,c.tZ)("div",{ref:t,css:Ht.inner})})})),Vt=(0,l.cn)(null,(function(e,n){var t=e(qt);n(Pt,{type:"dropPreview",rect:t})})),jt=(0,l.cn)(null,(function(e,n,t){n(Pt,null),n(vt,!1),n(Qn,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})})),qt=(0,l.cn)((function(e){var n=e(oe),t=n.width,r=n.height,i=e(ae);return{x:Math.round(i.width+8),y:0,width:t-i.width-16,height:r-8}}));var Yt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.activate,o=e(fe);"tile"===e(J(r)).type?n(Pe,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map((function(e,n){return r.slice(0,n+1)})),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=T(e,s);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==s.length){var f=s[s.length-1];if("number"!==typeof f)throw new Error("Expected number");var p=T(e,_(s));if("split"!==(null===p||void 0===p?void 0:p.type))throw new Error("Expected split");var h=p.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=f===p.children.length-1;He(e,{leftPath:v?(0,C.Z)(s.slice(0,-1)).concat([f-1]):s,percent:v?p.children[f-1].percent-h:h})}}}}catch(g){a=!0,l=g}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(t){throw n(ye,{error:t,origin:"Layout: revealPaneAtom/revealTiledPane"}),t}}))):n(Pe,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}(e,{paneId:r,minWidth:200,minHeight:140})}catch(t){throw n(ye,{error:t,origin:"Layout: revealPaneAtom/revealFloatingPane"}),t}}))),i&&n(ce,r)})),Kt=(0,l.cn)(null,(function(e,n,t){var r=I(e(fe),"topRight"),i=e(ee).find((function(n){return e(n.data).type===t.pane.type}));if((0,v.b)(t.pane.type)&&i)return n(ct,i.paneId),void n(we,{paneId:i.paneId,pane:t.pane,makeActive:!0});if(r){var o=r.paneGroup.panes.find((function(n){var t=e(J(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommitted&&!(0,v.RX)(r.type))}));o?n(we,{paneId:o,pane:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(et,{pane:t.pane,edge:"left"}),n(at,{panes:[t.pane],paneGroupId:r.paneGroup.id,activate:!0}))}else n(Qn,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0})}));var $t={height:0,width:0};var Qt={width:120,height:120},Jt=(0,l.cn)(null),er=(0,l.cn)(null,(function(e,n,t){var r=e(fe);if("end"===t.type)return n(Jt,null),void n(Pe,r);if("update"!==t.type){var i=e(ee).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}n(ce,t.paneId),n(Jt,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(Jt);if(!a){var l=new Error("Expected floatingResizeState");throw n(ye,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(ie),u=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?$t:i,a=(0,W.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(t)){var u=e.height-r.y;a.height=Math.max(u,l),a.y=u<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(t)){var s=e.height+r.y;a.height=Math.max(s,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(t)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(t)){var f=e.width-r.x;a.width=Math.max(f,c),a.x=f<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:t.moveDelta,edge:a.edge,minSize:Qt}),s=a.paneId,d=(0,x.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(s)}));if(!t){var r=new Error("Expected floating");throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=u.x,i.y=u.y-c,i.width=u.width,i.height=u.height+c}));n(Pe,d)}})),nr=(0,l.cn)(null,(function(e,n,t){if(!e(Gn)){var r=e(oe),i=t.pageX,o=t.pageY,a=t.over,l=e(J(a)),c=Ce({x:i-r.x,y:o-r.y},e(l.rectAtom)),u=c.rect,s=c.placement,d=e(ie);"above"!==s&&"below"!==s?(n(vt,!0),n(Pt,{type:"dropPreview",rect:{x:u.x,y:u.y-d,width:u.width,height:u.height+d}})):n(Pt,{type:"dropPreview",rect:{x:u.x,y:u.y-d+("below"===s?d/2:0),width:u.width,height:u.height+d/2}})}})),tr=(0,l.cn)(null,(function(e,n,t){if(!e(Gn)){var r=e(oe),i=t.pageX,o=t.pageY,a=t.over,l=e(J(a)),c=Ce({x:i-r.x,y:o-r.y},e(l.rectAtom)).placement;n(Pt,null),n(vt,!1);var u=e(fe);if("newPaneGroup"!==t.type){var s=a;if(s===t.paneId){var d=E(u,t.paneId);if(!d){var f=new Error("Expected pane");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),f}if(d.floating)throw new Error("Expected paneGroup");var p=d.paneGroup.panes.find((function(e){return e!==t.paneId}));if(!p)return;s=p}var h=(0,x.ZP)(u,(function(e){try{U(e,t.paneId),Mn(e,{id:Ue()(),panes:[t.paneId],relativeTo:s,placement:c}),n(ue,t.paneId)}catch(f){throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),f}}));n(Pe,h)}else n(Qn,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId})}})),rr=(0,l.cn)(null,(function(e,n,t){n(kn,F({initialLayoutState:null,isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,codeEditorPath:t.entrypoint})),n(xn,{replId:t.replId,force:!0})})),ir=t(91046),or=(0,l.cn)(null,(function(e,n,t){var r=t.path,i=t.col,o=t.line,a=t.opener,l=e(fe),c=(null===a||void 0===a?void 0:a.paneType)||(0,v.Dp)({path:r}),u=function(){if("codeEditor"===c)return{type:"codeEditor",data:{path:r,col:i,line:o}};if("extension"===c){var e=a.extensionFileHandler;return{type:"extension",data:{path:r,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,url:(0,ir.Vh)(e.extension.baseUrl,e.handler)}}}return{type:c,data:{path:r}}}();if(t.newPane){var s;n(et,{pane:u,edge:null!==(s=t.newPaneEdge)&&void 0!==s?s:"left"})}else{var d=I(l,"topLeft");if(d){var f=e(pe).find((function(n){return r===(0,v.DQ)(e(n.data))}));if(f&&!t.newTab)return n(ct,f.paneId),void n(we,{paneId:f.paneId,pane:u});var p=d.paneGroup;if(t.newTab)n(at,{panes:[u],paneGroupId:p.id,activate:!0,commit:!0,index:p.activeIndex+1});else{var h=e(pe).find((function(e){return!e.isCommitted}));if(h)return n(we,{paneId:h.paneId,pane:u}),void n(ct,h.paneId);var g=e(pe).find((function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,v.DQ)(t)}));if(g)return n(we,{paneId:g.paneId,pane:u}),void n(ct,g.paneId);var m=p.panes.find((function(n){var t=e(J(n));return"commands"===e(t.data).type}));if(m)return n(we,{paneId:m,pane:u}),void n(ct,m);n(at,{panes:[u],paneGroupId:p.id,activate:!0})}}else n(jn,{pane:u,relativeTo:["tiling"],placement:"replace"})}})),ar=(0,l.cn)(null,(function(e,n,t){var r=t.paths.map((function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,v.Dp)({path:r}),data:{path:r,line:i,col:o}}})).filter(Boolean);n(Qn,{panes:r,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));var lr=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t.type}));if(r)n(we,{paneId:r.paneId,pane:t});else{var i=function(e,n){var t=Math.min(600,e.width),r=Math.min(318.75+n,e.height);return{width:t,height:r,x:e.width-t,y:e.height-r}}(e(oe),e(ie));n(nt,{pane:t,rect:i})}})),cr=(0,l.cn)(null,(function(e,n,t){e(ee).filter((function(n){return e(n.data).type===t})).forEach((function(e){return n(Kn,e.paneId)}))})),ur=(0,l.cn)(null),sr=(0,l.cn)((function(e){var n=e(ur);return n&&e(ee).find((function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===n||void 0===n?void 0:n.embedUrl)}))||null})),dr=(0,l.cn)((function(e){var n=e(sr);return n&&!n.isHidden?n:null})),fr=(0,l.cn)(null,(function(e,n,t){n(ur,t);var r="videoPlayer";t?n(lr,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}}):n(cr,r)})),pr=(0,l.cn)(null,(function(e,n){var t=e(sr);if(null===t||void 0===t?void 0:t.isHidden)n(ct,t.paneId);else{var r=e(ur);r&&n(fr,r)}})),hr=(0,l.cn)((function(e){return e(ee).find((function(n){return"tutorial"===e(n.data).type}))||null})),vr=(0,l.cn)(null,(function(e,n){var t=e(hr);(null===t||void 0===t?void 0:t.isHidden)?n(ct,t.paneId):(n(Qn,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),n(Qe))}));function gr(e,n){var t=n.path,r=n.forwards,i=n.vertical,o=T(e,t);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=_(t),l=T(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return gr(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),u=0===c;if(!(c===l.children.length-1&&r||u&&!r)){var s=c+(r?1:-1),d=l.children[s],f=l.children[c];return d?{other:f,node:d,parent:l,path:(0,C.Z)(a).concat([s])}:null}if(1===a.length){var p=u&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,C.Z)(a).concat([p]),node:l.children[p]}}return gr(e,{path:a,forwards:r,vertical:i})}function mr(e,n,t){var r=G(e,n.id);if(!r)return null;var i="up"===t||"down"===t,o="down"===t||"right"===t;return gr(e,{path:r.path,forwards:o,vertical:i})}function yr(e,n){var t=n.paneGroupId,r=n.direction,i=D(e,t),o=G(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,C.Z)(o.path).concat([a]),c="up"===r||"down"===r,u="down"===r||"right"===r,s=0===a,d=a===o.node.children.length-1,f=o.node.stacked===c,p=o.path.length>2;if(f&&!((d&&u||s&&!u)&&p))!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===t&&i)return e.pop(),void e.unshift(n);if("back"===t&&o)return e.shift(),void e.push(n);var a="forward"===t?1:-1;e[r]=e[r+a],e[r+a]=n}}(o.node.children,i,u?"forward":"back");else{var h=mr(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var g=T(e,v);if(!g||"floatingPaneGroup"===g.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var m,y,Z,b=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(h.other.children,g);if("paneGroup"===h.node.type){var w=(m=b,y={start:0,end:100},Z=!h.parent.stacked,m.start-y.start<y.end-m.end?Z?"above":"rightOf":Z?"below":"leftOf");return L(e,(0,C.Z)(o.path).concat([a])),void Mn(e,{placement:w,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var x=function(e,n){var t,r,i=e.children,o=e.stacked,a="above",l=0,c=0,u=0,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value,m={start:u,end:u+g.percent},y=(t=n,r=m,Math.max(0,Math.min(t.end,r.end)-Math.max(t.start,r.start)));y>s&&(s=y,l=c,a=n.start-m.start<m.end-n.end?o?"above":"rightOf":o?"below":"leftOf"),u+=g.percent,c++}}catch(Z){f=!0,p=Z}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return{placement:a,index:l}}(h.node,b),k=x.index,S=x.placement;L(e,(0,C.Z)(o.path).concat([a])),Mn(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,C.Z)(h.path).concat([k])})}}}var Zr=(0,l.cn)(null),br=(0,l.cn)((function(e){var n=e(Zr);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=E(e(fe),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(n){var t=e(J(n));return[t.paneId,e(t.data)]}))}})),wr=(0,l.cn)((function(e){var n=e(br);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}})),xr=(0,l.cn)((function(e){var n=e(Zr);if(!n)return null;if("sidebar"===n.target)return null;if(e(Pn)===n.paneId)return e(Fn);var t=e(J(n.paneId)),r=e(t.rectAtom),i=e(ie);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}})),kr=(0,l.cn)(null,(function(e,n,t){var r=e(le),i=null!==t&&void 0!==t?t:r;if(i)return n(Zr,{target:"pane",paneId:i}),void(i!==r&&n(ce,i));var o=I(e(fe),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;a&&n(Zr,{target:"pane",paneId:a})})),Cr=(0,l.cn)(null,(function(e,n){var t=e(Zr);t&&(n(Zr,null),"sidebar"!==t.target&&n(Yt,{paneId:t.paneId,activate:!0}))})),Sr=(0,l.cn)(null,(function(e,n){if(e(br))n(Cr);else{var t=e(le);if(t)n(kr,t);else{var r=I(e(fe),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&n(kr,i)}}})),Tr=(0,l.cn)((function(e){return null!==e(Zr)})),Er=(0,l.cn)(null,(function(e,n){n(Zr,null)})),Rr=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r&&!e(Pn)){var i=it({relativeTo:r,rects:new Map(e(ee).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),direction:t});if(i)n(le,i),e(Zr)&&n(Zr,{target:"pane",paneId:i})}})),Ir=(0,l.cn)(null,(function(e,n,t){var r=e(br);null!==r&&"sidebar"!==r.target&&n(Pe,(0,x.ZP)(e(fe),(function(e){yr(e,{paneGroupId:r.paneGroupId,direction:t.direction})})))}));function Dr(e,n){var t=n.paneGroupPath,r=n.rect,i=T(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");L(e,t),Mn(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var Gr=50,Pr=(0,l.cn)(null),_r=(0,l.cn)((function(e){var n=e(Pr);if(!n)return null;var t=D(e(fe),n.paneGroupId);return t&&t.panes[t.activeIndex]||null})),Br=(0,l.cn)(null,(function(e,n,t){if(!e(Gn)){var r=e(oe),i=D(e(fe),t.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw n(ye,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(J(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(ie),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x);n(Pr,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1})}})),Ar=(0,l.cn)(null,(function(e,n,t){if(!e(Gn)){var r=e(Pr);if(r){var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(fe),c=D(e(fe),o);if(!c){var u=new Error("Expected paneGroup");throw n(ye,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=E(l,s);if(!d){var f=new Error("Expected pane");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var p=J(s),h=re(d.paneGroup.id),v=e(ie),g=Math.max(Math.abs(i.x),Math.abs(i.y)),m=g>=Gr,y=g>0;if(m&&!d.floating){var Z=e(p).rectAtom,b=e(Z),w=(0,x.ZP)(l,(function(e){try{Dr(e,{paneGroupPath:d.paneGroupPath,rect:{x:b.x+i.x,y:b.y-v+i.y,width:b.width,height:b.height+v}})}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}}));return n(Pe,w),void n(Ur,t.mouse)}var k=e(h),C=e(p),S=a.x+i.x,T=a.y+i.y;if(n(k.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T}))})),n(C.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T+v}))})),"floating"!==r.startType){if(!m&&!d.floating){var R=r.startPoint,I=1-.30000000000000004*(G=g/Gr,1-Math.sqrt(1-Math.pow(G,2)));return n(Pt,{type:"detachPreview",rect:{x:R.x-Gr,y:R.y-Gr,width:100,height:100},progress:g/Gr}),void n(Pr,(0,x.ZP)(r,(function(e){e.scale=I,e.movedAtAll=e.movedAtAll||y})))}var G;if(!d.floating)throw new Error("Expected floating pane");n(Ur,t.mouse)}}else n(Pt,null)}})),Ur=(0,l.cn)(null,(function(e,n,t){var i=e(ie),o=e(oe),a=function(e){var n=e.views,t=e.mouse,i=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-i.x,1),i.width-1),y:Math.min(Math.max(t.y-i.y,1),i.height-1)},c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=(0,r.Z)(d.value,2),h=p[0],v=p[1],g={x:v.x,y:v.y-o,width:v.width,height:o};if(ke(l,{x:g.x-4,y:g.y-4,width:g.width+8,height:o+4}))return{dropPreview:g,drop:{type:"insert",paneId:h}};var m={x:v.x,y:v.y-o,width:v.width,height:v.height+o};if(ke(l,{x:m.x-4,y:m.y-4,width:m.width+8,height:m.height+8})){var y=Ce(l,m);return{dropPreview:y.rect,drop:{type:"split",relativeTo:h,placement:y.placement}}}}}catch(b){u=!0,s=b}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}var Z=Ce(l,{x:a,y:0,width:i.width-a,height:i.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:e(ee).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),container:o,mouse:t,headerHeight:i,sidebarWidth:e(dn)}),l=a.drop,c=a.dropPreview;n(Pt,{type:"dropPreview",rect:c}),n(Pr,(function(e){return(0,x.ZP)(e,(function(e){e&&(e.drop=l,e.movedAtAll=!0)}))}))})),Lr=(0,l.cn)(null,(function(e,n,t){var r=t.delta;if(!e(Gn)){n(Pt,null);var i=e(Pr);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(fe),u=D(e(fe),o);if(!u){var s=new Error("Expected paneGroup");throw n(ye,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],f=E(c,d);if(!f){var p=new Error("Expected pane");throw n(ye,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}var h=(0,x.ZP)(c,(function(e){if(f.floating&&"floating"===i.startType){var t=T(e,f.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var o=l.x+r.x,c=l.y+r.y;return t.rect.x=o,void(t.rect.y=c)}if(a)if("split"!==a.type){var u=E(e,a.paneId);f.paneGroup.panes.forEach((function(t){!function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:T(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");U(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:t,paneGroupPath:(null===u||void 0===u?void 0:u.paneGroupPath)||["tiling"],activate:!1}),n(ue,t)}))}else{if(null===e.tiling){var h=Ue()();try{Mn(e,{id:Ue()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw n(ye,{error:s,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=E(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;L(e,o.paneGroupPath),Mn(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:d,to:a.relativeTo,placement:a.placement})}catch(p){throw n(ye,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}}}));n(Pr,null),n(Pe,h),"insert"===(null===a||void 0===a?void 0:a.type)&&n(ct,d)}}}));var Nr=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=e(J(t)),o=i.rectAtom,a=i.type,l=e(o),c=E(r,t);if(!c){var u=new Error("Expected pane");throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"!==a){var s=e(ee).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(ie),f={x:l.x+l.width/2,y:l.y+l.height/2},p=s.find((function(n){var t=e(n.rectAtom);return ke(f,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";p&&(h=Ce(f,e(p.rectAtom)).placement),n(Pe,(0,x.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=T(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");L(e,t),null!==i?Mn(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===p||void 0===p?void 0:p.paneId)||["tiling"],placement:h})})))}else n(Pe,(0,x.ZP)(r,(function(e){Dr(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))})),Xr=t(48330),Fr=t(27562),Or=t(28229);function Mr(e){var n=(0,i.Z)((function(){return(0,l.cn)((function(n){return!!n(Gn)&&n(le)===e}))}),[e]);return(0,i.Z)((function(){return(0,l.cn)((function(t){if(t(n))return t(Fn);var r=t(J(e));return t(r.rectAtom)}))}),[e,n])}function Wr(e){var n=Ee(Mr(e)),t=function(e){var n,t=Hr(e);return(0,i.Z)((function(){return(0,V.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n);return{x:r.x,y:r.y,scale:e(t)}}))}),[n,t])}function Hr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(Pr);return t&&e===n(_r)?t:null}))}),[e])}function zr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(le)===e}))}),[e])}function Vr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(n(J(e)).data)}))}),[e])}function jr(e){return(0,i.Z)((function(){return(0,V.kv)(J(e),(function(e){return"floating"===e.type}))}),[e])}function qr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(Pr);return t&&e===t.paneGroupId?t:null}))}),[e])}function Yr(e){var n=qr(e),t=$r(e),r=Qr(e),o=function(e){var n=Kr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(le);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)}))}),[n])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return e(t)?Gt.maximizedHeader:e(n)?Gt.draggingHeader:e(r)?e(o)?Gt.floatingHeaderActive:Gt.floatingHeader:Gt.tiledHeader}))}),[n,t,r,o])}function Kr(e){return(0,i.Z)((function(){return(0,V.kv)(fe,(function(n){return D(n,e)}))}),[e])}function $r(e){var n=Kr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){if(!e(Gn))return!1;var t=e(n);if(!t)return!1;var r=e(le);return!!r&&t.panes.includes(r)}))}),[n])}function Qr(e){var n=re(e);return(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return"floating"===e.path[0]}))}),[n])}var Jr=(0,l.cn)((function(e){return Boolean(e(Pr)||e(Jt)||e(Ve)||e(vt)||e(on))})),ei=t(54659),ni=t(94716),ti=(0,l.cn)((function(e){if(e(Tr))return null;var n=e(le);if(!n)return null;var t=e(J(n)),r=e(t.data),i=t.paneId+r.type;return(0,v.Ur)(r)&&(i+=r.data.path),i}));function ri(e){var n=Rn(ti),t=Dn(le),r=(0,ni.Z)(e);(0,u.useEffect)((function(){var e=function(e){e&&(null!==i&&clearTimeout(i),i=setTimeout((function(){var e=t();e&&r.current(e)})))},i=null;e(n.current);var o=n.subscribe(e);return function(){null!==i&&clearTimeout(i),o()}}),[n,r,t])}function ii(){return En(ye)}function oi(){return In(De)}function ai(){return En(qt)}function li(){return En(xe)}function ci(){var e=In(xn);return(0,i.Z)((function(){return a()(e,1e3)}),[e])}function ui(){return In(be)}function si(){return Dn(he)}function di(e){return En((0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(J(e));return n(t.data)}))}),[e]))}function fi(){return En(ve)}function pi(){return En(j)}function hi(){return En(Y)}function vi(){return En(q)}function gi(){return En(Ze)}function mi(){return{start:In(nn),update:In(tn),end:In(rn)}}function yi(){return En(wr)}function Zi(){return En(xr)}function bi(){return In(Cr)}function wi(){return In(kr)}function xi(){return In(Sr)}function ki(){return En(Tr)}function Ci(){return In(Er)}function Si(){return In(Rr)}function Ti(){return In(Ir)}function Ei(){return In(rr)}function Ri(){return In(je)}function Ii(e){var n=e.isOver,t=In(Pt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:In(Vt),drop:In(jt)}}function Di(){return En(se)}function Gi(){var e=In(ce),n=In(ue);return(0,i.Z)((function(){return function(t,r){(null===r||void 0===r?void 0:r.commit)&&n(t),e(t)}}),[n,e])}function Pi(e){var n=e.paneId;return En((0,i.Z)((function(){return(0,l.cn)((function(e){return e(le)===n}))}),[n]))}function _i(){return En(le)}function Bi(){return En((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=E(e(fe),n);return t?t.paneGroup.id:null}))}),[]))}function Ai(){return En(Gn)}function Ui(){return In(we)}function Li(){return In(ue)}function Ni(){return In(Yt)}function Xi(){return In(lt)}function Fi(){return In(Kt)}function Oi(){return In(Kn)}function Mi(){return In($n)}function Wi(e){var n=e.isOver,t=In(Pt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:In(nr),drop:In(tr)}}var Hi=(0,l.cn)(null,(function(e,n){n(vt,!1)}));function zi(){return In(Hi)}function Vi(e){var n=e.paneGroupId,t=(0,i.Z)((function(){return(0,l.cn)((function(e){var t;return n===(null===(t=e(Pr))||void 0===t?void 0:t.paneGroupId)}))}),[n]);return En(t)}function ji(e){var n=e.paneGroupId,t=In(Br),r=In(Ar),o=In(Lr),a=(0,i.Z)((function(){return{start:function(e){var r=e.mouse;t({paneGroupId:n,mouse:r})},update:function(e){r(e)},end:function(e){o(e)}}}),[n,t,r,o]);return{isDragging:Vi({paneGroupId:n}),dnd:a}}function qi(){return In(or)}function Yi(){return In(ar)}function Ki(){return In(Nr)}function $i(){return In(er)}function Qi(){return{maximizePane:In(_n),maximizePaneGroup:In(Bn),restoreMaximizedPaneGroup:In(An),toggleMaximizePane:In(Un),toggleMaximizedPaneGroup:In(Ln)}}function Ji(){return In(ct)}function eo(){return In(ut)}function no(){return In(st)}function to(){return In(dt)}function ro(){return En(ht)}function io(){return En(vt)}function oo(){return In(vt)}function ao(){return In(mt)}function lo(e){var n=function(e){var n=re(e);return{activeIndexAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){return e(n).activeIndex}))}),[n]),pathAtom:(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return e.path}),M())}),[n]),panesAtom:(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return e.panes}),M())}),[n]),activeFileAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(J(t.panes[t.activeIndex])),i=e(r.data);return(0,v.Ur)(i)?(0,v.DQ)(i):null}))}),[n])}}(e),t=n.activeIndexAtom,r=n.pathAtom,o=n.panesAtom;return{activeIndex:Rn(t),path:Rn(r),panes:Rn(o),activeTabPaneId:Rn(yt(e))}}function co(){return In(ft)}function uo(){return In(pt)}function so(){return In(at)}function fo(){return In(bt)}function po(){return In(wt)}function ho(){return In(xt)}function vo(){return In(function(){var e=(0,ot.gv)();return(0,i.Z)((function(){return(0,l.cn)(null,(function(n,t){var r=e();if(r){t(Zt,[r]);var i=n(le);i&&t(ue,i)}}))}),[e])}())}function go(){return In(kt)}function mo(){return In(Ct)}function yo(e){return En(function(e){var n=e.paneGroupId;return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=D(e(fe),n);return t?t.panes.length:null}))}),[n])}({paneGroupId:e.paneGroupId}))}function Zo(){return En((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(ne),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map((function(n){return[n,e(e(J(n)).data)]})),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}}))}),[]))}function bo(){return In(et)}function wo(){return In(zn)}function xo(){return In(Vn)}function ko(){return In(qn)}function Co(){return In(fr)}function So(){var e=En(ur),n=En(dr),t=In(pr);return n||!e?null:t}function To(){return In(vr)}function Eo(){return e="tutorial",En((0,i.Z)((function(){return(0,l.cn)((function(n){return n(ee).find((function(t){return!t.isHidden&&n(t.data).type===e}))}))}),[e]));var e}function Ro(){return En(me)}function Io(){return Dn(fe)}function Do(){var e=(0,Xr.Z)(),n=(0,Fr.T)(),t=(0,Or.Z)().preferences.isLayoutStacked,i=(0,ei.cR)(),o=(0,r.Z)(function(e){var n=(0,W.Z)({},Oe,e);return Xe.D(Me,n)}(),1)[0];return(0,u.useCallback)((function(){var r=F({initialLayoutState:null,isStacked:t,isHTML:n,isExtension:i}),a=r.layout,l=r.data;o({variables:{input:{replId:e,state:{layout:a,data:l}}}})}),[e,o,n,t,i])}function Go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,u.useRef)(e),t=ko(),r=Io();return(0,u.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=T(r,i.leftPath);if(!o||!B(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}function Po(){return In(de)}function _o(){return En(ge)}function Bo(e){var n=Te(Mr(e)),t=Wr(e),r=function(e){var n,t=Hr(e);return(0,i.Z)((function(){return(0,V.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),o=function(e){var n=Mr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(oe);return{x:Math.round(r.x+t.x),y:Math.round(r.y+t.y)}}))}),[n])}(e),a=function(e){return(0,i.Z)((function(){return(0,V.kv)(J(e),(function(e){return e.isHidden}))}),[e])}(e),c=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(J(e)),r=e===n(le);return n(Pn)===e?Gt.maximizedPane:e===n(_r)?Gt.draggingPane:"floating"===t.type?r?Gt.floatingPaneActive:Gt.floatingPane:r?Gt.tiledPaneActive:Gt.tiledPane}))}),[e])}(e),u=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return!!n(Pr)&&n(_r)!==e&&"floating"!==n(J(e)).type}))}),[e])}(e),s=function(e){var n=Vr(e);return(0,i.Z)((function(){return(0,V.kv)(n,(function(e){return e.type}))}),[n])}(e),d=jr(e),f=zr(e),p=function(e){return(0,i.Z)((function(){return(0,V.kv)(J(e),(function(e){return e.isCommitted}))}),[e])}(e),h=Vr(e),v=function(e){var n=jr(e),t=zr(e),r=Hr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return!e(Gn)&&Boolean(e(n)||e(t)||e(r))}))}),[n,t,r])}(e),g=function(e){var n=Hr(e);return(0,i.Z)((function(){return(0,V.kv)(n,Boolean)}),[n])}(e),m=function(e){var n,t=Hr(e);return(0,i.Z)((function(){return(0,V.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.movedAtAll)&&void 0!==n&&n}))}),[t])}(e);return{size:Rn(n),transform:Rn(t),paneType:Rn(s),transformOriginXAtom:Rn(r),viewportInset:Rn(o),zIndex:Rn(c),disableInteractions:Rn(Jr),animate:Rn(u),data:Rn(h),isFloating:Rn(d),isActive:Rn(f),isCommitted:Rn(p),isHidden:Rn(a),isBeingDragged:Rn(g),hasMovedWhileDragging:Rn(m),headerHeight:Rn(ie),hasBorder:Rn(v)}}function Ao(e){var n=function(e){var n=$r(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){if(t(n))return t(Xn);var r=t(re(e));return t(r.rectAtom)}))}),[n,e])}(e),t=Te(n),r=Ee(n),o=function(e){var n,t=qr(e);return(0,i.Z)((function(){return(0,V.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e),a=function(e){var n,t=qr(e);return(0,i.Z)((function(){return(0,V.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),c=Yr(e),u=function(e){var n=Qr(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){var r=t(Pr);return!!r&&r.paneGroupId!==e&&!t(n)}))}),[e,n])}(e),s=$r(e),d=Qr(e);return{size:Rn(t),position:Rn(r),scale:Rn(o),transformOriginX:Rn(a),zIndex:Rn(c),animate:Rn(u),isMaximized:Rn(s),isFloating:Rn(d)}}function Uo(e){var n=qe(e),t=Ye(e),r=Te(t),o=Ee(t),a=Ke(e),c=function(e){var n=qe(e);return(0,i.Z)((function(){return(0,V.kv)(n,(function(e){var n=e.snapped;return Boolean(n)}))}),[n])}(e),u=$e(e),s=function(e){var n=Te(Ye(e)),t=$e(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return e(t)?i:o}))}),[n,t])}(e),d=function(e){var n=qe(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=t.snapped,i=t.stacked;return"right"===r?i?180:90:"left"===r?i?0:270:0}))}),[n])}(e),f=function(e){var n=$e(e),t=Ke(e),r=Te(Ye(e));return(0,i.Z)((function(){return(0,l.cn)((function(e){var i=e(r),o=i.width,a=i.height,l=e(t);return e(n)?{width:l?o:24,height:l?1:2}:{height:l?a:24,width:l?1:2}}))}),[r,n,t])}(e),p=function(e){var n=Te(Ye(e)),t=$e(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return(e(t)?i:o)<24}))}),[n,t])}(e);return{handle:Rn(n),size:Rn(r),position:Rn(o),isActive:Rn(a),isSnapped:Rn(c),isStacked:Rn(u),length:Rn(s),rotation:Rn(d),gripSize:Rn(f),gripIsHidden:Rn(p)}}var Lo=(0,l.cn)(!1),No=(0,l.cn)(0);function Xo(){var e=Te(ln),n=Ee(ln);return{size:Rn(e),position:Rn(n),isActive:Rn(on),length:Rn(cn),gripSize:Rn(an),isStacked:Rn(Lo),gripIsHidden:Rn(Lo),rotation:Rn(No)}}function Fo(){return{width:Rn(dn),isOpen:Rn(hn),toggle:In(Je)}}function Oo(){return Dn(ge)}},5925:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(50959),i=t(69994),o=t(85234),a=t.n(o),l=t(45853),c=t(90171),u=t(88161),s=t(38353),d=t(14806),f=t(74376),p=t(12171),h=t(23398),v=t(9608),g=t(625),m=t(88254),y=t(89047);function Z(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function b(e,n){return null==n?Z(e):{filePath:e,text:null!==(t=n.state.doc.toString())&&void 0!==t?t:"",selections:n.state.selection.ranges.map((function(e){var n=e.from;return{location:n,length:e.to-n}})),hasFocus:n.hasFocus};var t}function w(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a()(),i=b(e,n),o={messageType:u.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:t.hasGhostwriterSuggestion,revisionId:t.revisionId};(0,p.bG)(o,r)}function x(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&(n===t.textEditorState.filePath&&i===t.revisionId)}function k(e){var n=e.map((function(e){return d.jT.range(e.location,e.location+e.length)}));return d.jT.create(n)}function C(e,n,t,r,i,o){var a=i.payload;if((0,u.Se)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=k(i.selections);return t.dispatch({selection:o,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.m7)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=b(e,t),a=k(i.selections);return t.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.ac)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=k(i.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.fz)(a))return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(t.dispatch(t.state.replaceSelection(i.text)),!0)}(e,n,t,r,a);if((0,u.T$)(a))!function(e,n,t,r,i){!!x(e,n,r,i.filePath,i.revisionId)&&(0,y.l)({filePath:e,view:t,clipboardText:i.text})}(e,n,t,r,a);else{if(!(0,u.aB)(a))throw new Error("Invalid payload.");switch(a.action){case u.b9.REQUEST_BLUR:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;t.contentDOM.blur()}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_UNDO:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;return(0,f.Yw)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_REDO:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;return(0,f.KX)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_INDENT_SELECTION:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.at(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_DEDENT_SELECTION:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.xi(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_TOGGLE_COMMENT:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.O8(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,n,t,r,i,o){return!!x(e,n,r,i.filePath,i.revisionId)&&!!(0,s.$o)(t)&&((0,g.j)(g.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,v.S)(e),engine:o}),m.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,h._B)(t),!0)}(e,n,t,r,a,o);case u.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(t);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var S=t(77511),T=t(31858),E=t(93731),R=t(70232);function I(e){var n=e.view,t=e.filePath,o=(0,c.useRouter)(),s=(0,S.Vg)(o),d=(0,r.useRef)({revisionId:a()(),textEditorState:Z(t),hasGhostwriterSuggestion:!1}),f=(0,r.useRef)(t),h=(0,T.Z)().engine,v=(0,l.Z)({view:n});(0,r.useEffect)((function(){if(n&&s){var e=b(t,n);d.current={revisionId:a()(),textEditorState:e,hasGhostwriterSuggestion:d.current.hasGhostwriterSuggestion},w(t,n,d.current);return n.dispatch({effects:v.reconfigure(i.tk.updateListener.of((function(r){!function(r){var i,o=(0,E.Z)(n.state),l=(null===(i=d.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==o;r.docChanged?(d.current={revisionId:a()(),textEditorState:e,hasGhostwriterSuggestion:o},w(t,n,d.current)):(r.selectionSet||r.focusChanged||l)&&(d.current={revisionId:d.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:o},w(t,n,d.current))}(r)})))}),function(){n.dispatch({effects:v.reconfigure([])})}}}),[n,t,v,s]),(0,r.useEffect)((function(){if(n&&s){var e=function(e){w(t,n,d.current,e.messageId)},r=function(r){C(t,f.current,n,d.current,r,h)?e(r):(0,p.pl)(r.messageId)},i=function(i){try{var o=i.data;if(!(0,u.CF)(o))return;if(o.protocolVersion!==u.Wj)return;var a=o.payload;o.messageDirection===u.s1.TO_NATIVE&&(0,u.H7)(a)&&(f.current=a.activePaneFilePath),(0,p.fp)(i,(function(i){var a=i.type;switch(a){case u.cF.TEXT_EDITOR_STATE_REQUEST:e(o);break;case u.cF.REQUEST_SET_SELECTION:case u.cF.REQUEST_REPLACE_SELECTION:case u.cF.REQUEST_SET_TEXT:case u.cF.REQUEST_INSERT_TEXT:case u.cF.REQUEST_PASTE_TEXT:r(o);break;case u.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){C(t,f.current,n,d.current,r,h)?e(r):(0,p.pl)(r.messageId)}(o);break;default:(0,R.Z)(a)}}))}catch(l){throw new Error("Invalid message: ".concat(l))}};return window.addEventListener("message",i),w(t,n,d.current),function(){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a()(),t={messageType:u.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,p.bG)(t,n)}(t),window.removeEventListener("message",i)}}}),[n,t,s,h])}},65897:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(2272),i=t(74985),o=(t(50959),t(85368)),a=t(39541),l=t(61284),c=t(45510),u=t(51631),s=t(72006),d=t(43119),f=t(71440),p=t(27849),h=t(50216);function v(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var g={},m=(0,f.Ps)(v(),p.jN);var y=t(13233),Z=t(625),b=t(62405),w=o.K.form;function x(e){var n=e.repl,t=e.source,d=e.onDone,f=(0,y.Z)(),p=f.showConfirm,v=f.showError,x=(0,r.Z)(function(e){var n=(0,s.Z)({},g,e);return h.D(m,n)}({variables:{input:{replId:n.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,Z.j)(Z.U3.REPL_UNPUBLISHED,{source:t,numRuns:i,numLikes:o,numComments:a,replType:n.publishedAs===u.O2.Template?"template_repl":"regular_repl"}),p("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?v(e.unpublishReplFromCommunity.message):v("An unexpected error occurred.");d()},onError:function(){v("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:n.id}),fields:{comments:function(e,n){return n.DELETE},tags:function(e,n){return n.DELETE}}})}}),2),k=x[0],C=x[1].loading;return(0,i.BX)(o.G,{css:[a.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),k()},css:[a.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[a.l0.rowWithGap(8),a.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{disabled:C,colorway:"negative",text:C?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(b.Z,{})})})]})]})]})}},17309:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(43312),c=t(50959),u=t(56169),s=t(85368),d=t(39137),f=t(39541),p=t(61284),h=t(32104),v=t(63837),g=t(57467),m=t(76735);var y={success:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentPositiveStrongest}}),error:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentNegativeStrongest}}),warning:(0,l.iv)({":not([disabled])":{borderColor:f.TV.yellowStrongest}}),default:void 0,loading:void 0},Z={success:(0,l.iv)([{color:f.TV.accentPositiveStrongest}]),error:(0,l.iv)([{color:f.TV.accentNegativeStrongest}]),warning:(0,l.iv)([{color:f.TV.yellowStrongest}]),default:void 0,loading:void 0},b={success:(0,a.tZ)(v.Z,{}),error:(0,a.tZ)(g.Z,{}),warning:(0,a.tZ)(m.Z,{}),default:void 0,loading:(0,a.tZ)(h.Z,{})},w=function(e){var n=b[e.state];return(0,a.BX)(s.G,{css:[Z[e.state],f.l0.rowWithGap(4)],children:[c.isValidElement(n)?c.cloneElement(n,{size:12}):null,(0,a.tZ)(p.xv,{variant:"small",children:e.message})]})},x=(0,l.iv)("display:grid;grid-gap:",f.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),k=function(e){var n,t=e.id,l=e.label,c=e.status,s=e.description,h=e["aria-describedby"],v=e.error,g=e.isValid,m=e.touched,b=e.value,k=e.warning,C=e.successText,S=(0,o.Z)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),T=(0,u.H)(),E=t||T("input"),R=c&&T("status"),I=s?T("description"):void 0,D=[R,I,h].filter(Boolean).join(" "),G=!(n={description:s,error:v,isValid:g,touched:m,value:b,warning:k,successText:C}).touched&&n.description?{state:"default",message:n.description}:n.error?{message:n.error.message,state:"error"}:n.warning?{message:n.warning.message,state:"warning"}:n.isValid?{message:n.successText||"",state:"success"}:n.touched?{message:"",state:"loading"}:void 0;return(0,a.BX)("div",{css:x,children:[(0,a.tZ)("label",{htmlFor:E,className:"label",children:(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",children:l})}),c?(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",css:[f.l0.textAlign.right],className:"status",children:c}):null,(0,a.tZ)(d.II,(0,i.Z)((0,r.Z)({id:E,className:"input",value:b,css:[y[(null===G||void 0===G?void 0:G.state)||"default"]]},S),{"aria-describedby":D,"aria-invalid":"error"===(null===G||void 0===G?void 0:G.state)})),(0,a.tZ)("div",{id:I,className:"validation",css:[Z[(null===G||void 0===G?void 0:G.state)||"default"]],"aria-live":"default"!==(null===G||void 0===G?void 0:G.state)?"polite":void 0,children:G?(0,a.tZ)(w,(0,r.Z)({},G)):null})]})}},9829:function(e,n,t){var r=t(72006),i=t(4405),o=t(74985),a=t(43312),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");n.Z=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,p=void 0!==f&&f,h={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:u}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:s}]},h),{x:8,y:168}))]})}},84563:function(e,n,t){t.d(n,{J:function(){return Z}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(50959),c=t(43312),u=t(92355),s=t(82568),d=t(17807),f=t(27691),p=t(39541),h=t(66539),v=t(85368),g=(0,c.F4)("0%{transform:translate(1px,1px) rotate(0deg);}10%{transform:translate(-1px,-1px) rotate(-1deg);}20%{transform:translate(-1px,0px) rotate(1deg);}30%{transform:translate(1px,1px) rotate(0deg);}40%{transform:translate(1px,-1px) rotate(1deg);}50%{transform:translate(-1px,1px) rotate(-1deg);}60%{transform:translate(-1px,1px) rotate(0deg);}70%{transform:translate(1px,1px) rotate(-1deg);}80%{transform:translate(-1px,-1px) rotate(1deg);}90%{transform:translate(1px,1px) rotate(0deg);}100%{transform:translate(1px,-1px) rotate(-1deg);}"),m=(0,c.F4)("from{opacity:0}to{opacity:1}"),y=(0,s.X)({self:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height(p.TV.space12),p.l0.borderRadius(16),p.l0.position.relative,d.gU.filledAndOutlined],progressWrapper:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.width("100%"),p.l0.borderRadius(16),p.l0.overflow("clip"),p.l0.position.relative],progress:[p.l0.position.relative,p.l0.width("100%"),p.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[p.l0.width("100%"),p.l0.height("500%"),p.l0.position.absolute,p.l0.left("50%"),p.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(m," 120ms forwards ease-out alternate")},shakeAnim:{animation:"".concat(g," 0.2s ease infinite")}});function Z(e){var n=e.total,t=e.tooltip,c=e.className,s=e.disabled,d=void 0!==s&&s,f=e.shake,p=void 0!==f&&f,g=e.smoke,m=void 0!==g&&g,Z=e.loading,w=void 0!==Z&&Z,x=(0,o.Z)(e,["total","tooltip","className","disabled","shake","smoke","loading"]),k=!(0,u.T)(),C=null;if(t)C=t;else if("current"in x)C="".concat(x.current||"0","/").concat(n);else if("data"in x){var S;C=null===(S=x.data)||void 0===S?void 0:S.map((function(e){var t=e.current;return"".concat(t||"0","/").concat(n)})).join(" | ")}return(0,a.tZ)(h.u,{placement:"top",tooltip:C,maxWidth:280,isDisabled:w,children:function(e,t){var o;if(w)o=null;else if("current"in x&&x.current)o=(0,a.tZ)(b,{total:n,disabled:d,current:x.current,color:x.color});else if("data"in x){var u;o=null===(u=x.data)||void 0===u?void 0:u.map((function(e,t){var o;return(0,l.createElement)(b,(0,i.Z)((0,r.Z)({},e),{key:"measure-bar-".concat(t),total:n,disabled:d,isLast:t+1===(null===(o=x.data)||void 0===o?void 0:o.length)}))}))}return(0,l.createElement)(v.G,(0,i.Z)((0,r.Z)({},e),{css:[y.self,y.fadeInAnim,w&&y.loading,k&&p&&y.shakeAnim],className:c,innerRef:t,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(v.G,{css:y.progressWrapper,children:o},"measureBarProgress"),k?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:m?void 0:0},css:y.smoke},"measureBarSmoke"):null]}))}})}function b(e){var n=e.current,t=e.total,i=e.color,o=void 0===i?p.TV.accentPrimaryDefault:i,l=e.disabled,c=void 0!==l&&l,u=e.isLast,s=void 0!==u&&u,d=(0,r.Z)({backgroundColor:c?p.TV.outlineDefault:o,width:w(n,t)+"%"},s?{borderTopRightRadius:p.TV.borderRadiusRound,borderBottomRightRadius:p.TV.borderRadiusRound}:{});return(0,a.tZ)(v.G,{css:y.progress,style:d,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}},62740:function(e,n,t){t.d(n,{T:function(){return s}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=(t(50959),t(85368)),c=t(96351),u=l.K.button;function s(e){var n=e.iconLeft,t=e.iconRight,l=e.text,s=e.innerRef,d=e.colorway,f=(0,o.Z)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(u,(0,i.Z)((0,r.Z)({ref:s},f),{css:[(0,c.E)({colorway:d,clickable:!0,iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.tZ)("span",{children:l}),t]}))}},47161:function(e,n,t){t.d(n,{u:function(){return m}});var r=t(74985),i=t(50959),o=t(82893),a=t.n(o),l=t(16022),c=t(17807),u=t(61284),s=t(39541),d=t(85368),f=t(63128),p=t(80336),h=t(87076),v=d.K.a,g=d.K.button,m=i.forwardRef((function(e,n){var t=e.className,o=e.colorway,m=e.closable,y=e.icon,Z=e.text,b=e.closeAction,w=(0,r.BX)(r.HY,{children:[y&&i.cloneElement(y,{size:16}),(0,r.tZ)(u.xv,{css:s.l0.flex.growAndShrink(1),variant:"small",multiline:!0,children:Z})]}),x=o?l.Br[o].default:s.TV.accentPrimaryDefault,k=[s.l0.rowWithGap(4),s.l0.align.center,s.l0.p(4),s.l0.pl(8),s.l0.borderRadius(8),s.l0.flex.growAndShrink(1),o?(0,l.Ss)(o):c.gU.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+x}}];return(0,r.BX)(d.G,{css:k,children:["href"in e?(0,r.tZ)(a(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.tZ)(v,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w})}):(0,r.tZ)(g,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w}),m?(0,r.tZ)(f.T,{elevated:!0,css:[s.l0.flex.grow(0),{background:"transparent"}],children:(0,r.tZ)(h.h,{alt:"Close",tooltipHidden:!0,colorway:o,onClick:b,children:(0,r.tZ)(p.Z,{})})}):null]})}));m.displayName="StatusBannerButton"},44333:function(e,n,t){t.d(n,{r:function(){return k}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(50959),c=t(18693),u=t(17074),s=t(64346),d=t(61284),f=t(85368),p=t(39541),h=t(17807),v=t(18988),g=t(53674),m=t(16022),y=t(82568),Z=f.K.label,b=(0,y.X)({label:[p.l0.rowWithGap(8),p.l0.align.center],background:{transition:"fill 100ms ease-out"},button:{transition:"x 100ms ease-out"},outline:{transition:"stroke 100ms ease-out"}}),w=function(e,n,t,r){return n?t||r?e.dimmer:e.default:h.vb.interactiveBorder},x=function(e,n,t,r,i){return!r||n||t?"transparent":i?e.strongest:h.vb.interactiveBorderHover},k=function(e){var n=e.colorway,t=void 0===n?"primary":n,f=e.dataCy,h=(0,o.Z)(e,["colorway","dataCy"]),y=m.Br[t],k=l.useRef(null),C=(0,s.l)(h),S=(0,c.h)(h,C,k).inputProps,T=(0,v.Fx)(h),E=T.focusProps,R=T.isFocusVisible,I=(0,g.XI)(h),D=I.hoverProps,G=I.isHovered,P=C.isSelected,_=h.isDisabled||!1,B=h.isReadOnly||!1,A=l.Children.count(h.children)>0;void 0!==h["aria-label"]||h["aria-labelledby"];var U=(0,a.BX)("svg",(0,i.Z)((0,r.Z)({"aria-hidden":"true"},D),{width:"40",height:"24",viewBox:"-1 -1 39 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",overflow:R?"visible":"hidden",style:{cursor:_||B?"auto":"pointer"},children:[(0,a.tZ)("rect",{x:"0.5",y:"0.5",width:"35",height:"21",rx:"10.5",fill:w(y,P,_,B),css:b.background}),(0,a.tZ)("rect",{x:P?"17":"3",y:"3",width:"16",height:"16",rx:"8",fill:p.TV.white,opacity:_?.7:1,css:b.button}),(0,a.tZ)("rect",{x:"0.5",y:"0.5",width:"35",height:"21",rx:"10.5",stroke:x(y,_,B,G,P),css:b.outline}),(0,a.tZ)("rect",{x:"-1",y:"-1",width:"38",height:"24",rx:"12",stroke:R?y.stronger:"transparent",strokeWidth:"2"})]}));return A?(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:k,"data-cy":f}))}),U,(0,a.tZ)(d.xv,{children:h.children})]}):(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:k,"data-cy":f}))}),U]})}},89479:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(45285);function o(){var e=(0,i.Z)().container,n=(0,r.useState)(e.getConnectionState()),t=n[0],o=n[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),t}},77502:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(57135),i=t(2272),o=t(96583),a=t(50959),l=t(69921),c=t(94716);function u(e){var n=(0,l.Z)({container:e,service:"exec"}).channel,t=(0,a.useRef)(!1),u=(0,a.useRef)([]),s=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,p,h,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(t.current)return[2];if(!u.current.length)return[2];if("open"!==(null===n||void 0===n?void 0:n.status))return[2];if(!(e=u.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",p=n.onCommand((function(e){e.output&&(f+=e.output)})),t.current=!0,[4,n.request({exec:{args:l,env:c}})];case 1:return h=o.sent(),t.current=!1,p(),v=h.channelClosed?"Channel closed":h.error,d(v?{error:v,output:f||null}:{output:f,error:null}),s.current(),[2]}}))}))),d=null===n||void 0===n?void 0:n.status;return(0,a.useEffect)((function(){"open"===d&&s.current()}),[d,s]),(0,a.useCallback)((function(e){var n=e.args,t=e.env;return new Promise((function(e){u.current.push([{args:n,env:t},e]),s.current()}))}),[s])}},68825:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(45285),a=t(87861);function l(){var e,n,t=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(n=null===(e=t.getContext())||void 0===e?void 0:e.repl)&&void 0!==n?n:null),2),c=l[0],u=l[1];return i.useEffect((function(){return t.onConnectionStateChanged((function(e){var n,r;e===a.em.CONNECTED&&u(null!==(r=null===(n=t.getContext())||void 0===n?void 0:n.repl)&&void 0!==r?r:null)}))}),[u,t]),c}},60369:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2272),i=t(50959);function o(e,n){var t=(0,r.Z)(i.useState(null),2),o=t[0],a=t[1];return i.useEffect((function(){var t=!1;return e.readFile(n).then((function(e){t||a(e)})),function(){t=!0}}),[e,n]),o}},38567:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(9970),i=t(94716),o=t(18171),a=t(73377),l=t(45285),c=t(50959),u=t(3341),s=t.n(u);function d(e){var n,t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,c.useState)(null),p=f[0],h=f[1],v=(0,i.Z)(p),g=null===(t=null!==(n=d.keepStaleResult)&&void 0!==n?n:d.refresh)||void 0===t||t,m=(0,c.useCallback)((function(e){s()(e,v.current)||h(e)}),[v]),y=(0,o.Z)((function(){return e}),(0,r.Z)(u)),Z=(0,l.Z)().git,b=(0,c.useRef)(null),w=(0,c.useCallback)((function(){b.current?b.current():g||m(null);var e=!1;y(Z).then((function(n){e||(m(n),b.current=null)})).catch((function(){if(!e){var n={error:a.aq.UNKNOWN};m(n),b.current=null}})),b.current=function(){e=!0,b.current=null,g||m(null)}}),[m,y,Z,g]);return(0,c.useEffect)((function(){return w()}),[w]),(0,c.useEffect)((function(){var e;if(null===(e=d.refresh)||void 0===e||e)return Z.onRefresh(w)}),[Z,w,d.refresh]),p}},4653:function(e,n,t){function r(e){var n,t=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===t||void 0===t?void 0:t.completionProvider),isCompletionItemResolveSupported:Boolean(null===t||void 0===t||null===(n=t.completionProvider)||void 0===n?void 0:n.resolveProvider),isDocumentSymbolSupported:Boolean(null===t||void 0===t?void 0:t.documentSymbolProvider),isFindReferencesSupported:Boolean(null===t||void 0===t?void 0:t.referencesProvider),isFindDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===t||void 0===t?void 0:t.implementationProvider),isTextDocumentSyncSupported:Boolean(null===t||void 0===t?void 0:t.textDocumentSync),isHoverSupported:Boolean(null===t||void 0===t?void 0:t.hoverProvider),isRenameSupported:Boolean(null===t||void 0===t?void 0:t.renameProvider),isCodeActionsSupported:Boolean(null===t||void 0===t?void 0:t.codeActionProvider),isSignatureHelpSupported:Boolean(null===t||void 0===t?void 0:t.signatureHelpProvider)}}t.d(n,{Z:function(){return r}})},64491:function(e,n,t){t.d(n,{Z:function(){return w},X:function(){return b}});var r=t(2272),i=t(50959),o=t(45285),a=t(72006),l=t(4405),c=t(16783),u=t.n(c),s=t(49146),d=t(68339),f=t(67745);function p(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet;function v(e){var n=e.client,t=e.replId,r=e.language;if(!h.has(n)){h.add(n);var i=new Map,o=function(e){var i,o=n.getServerState(),a=null!==(i=n.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===f.a.INITIALIZED?"".concat(null===a||void 0===a?void 0:a.name,"@").concat(null===a||void 0===a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},c=u()((function(e,n){var t=p(n);t>1e4&&s.kg.time("LSP unresponsive request",t,o(n))})),v=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([n.onRequest((function(e){var n=e.id,t=e.data;Math.random()<.01&&i.set(n,{id:n,method:t.method,startTime:performance.now()})})),n.onResponse((function(e){var n=e.id,t=e.error,r=i.get(n);null!=r&&(i.delete(n),s.kg.time("LSP request",p(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==t?"ok":"error"})))})),n.onCancelRequest((function(e){var n=i.get(e);null!=n&&(i.delete(e),s.kg.time("LSP request",p(n),(0,l.Z)((0,a.Z)({},o(n)),{result:"cancelled"})))})),function(){return clearInterval(v)},function(){return h.delete(n)}])}}var g=t(60396),m=t(27562),y=t(48330),Z=t(68825);function b(){var e=(0,Z.Z)(),n=(0,r.Z)(i.useState(null),2),t=n[0],o=n[1];return i.useEffect((function(){(null===e||void 0===e?void 0:e.language)&&o(e.language.startsWith("nix")||e.language.startsWith("html"))}),[e]),t}function w(e){var n=(0,y.Z)(),t=(0,m.Z)(),a=(0,o.Z)(),l=a.lsp,c=a.lspnix,u=(0,r.Z)(i.useState(null),2),s=u[0],d=u[1],f=b();return i.useEffect((function(){if(null!==f&&e){var n,t;if(f)n=c.onClient(e,d);else(null===(t=l.getClient())||void 0===t?void 0:t.isSupportedFile(e))?d(l.getClient()):d(null),n=l.onClient((function(n){(null===n||void 0===n?void 0:n.isSupportedFile(e))?d(n):d(null)}));return function(){n(),d(null)}}}),[l,c,e,f]),i.useEffect((function(){if(s)return v({client:s,replId:n,language:(0,g.D)(e,t)})}),[s,n,e,t]),s}},96796:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o=t(4653);function a(e){var n=(0,r.Z)(i.useState(null),2),t=n[0],a=n[1];return i.useEffect((function(){if(e)return a((0,o.Z)(e)),e.onServerCapabilitiesChange((function(){a((0,o.Z)(e))}));a(null)}),[e]),t}},24746:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2272),i=t(50959);function o(e){var n=e.presence,t=(0,r.Z)(i.useState(n.getActiveUsers()),2),o=t[0],a=t[1];return i.useEffect((function(){return a(n.getActiveUsers()),n.onActiveUsersChange((function(e){return a(e)}))}),[n]),o}},84630:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o=t(45285);function a(){var e=(0,o.Z)().presence,n=(0,r.Z)(i.useState(e.getFollowedUser()),2),t=n[0],a=n[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),t}},69861:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(84630);function i(){var e=(0,r.Z)();return e?e.color:null}},21848:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(50959),i=t(69994),o=t(45853),a=t(86763),l=t.n(a),c=t(49514),u=t(18171);function s(e){var n=e.view,t=e.filePath,a=(0,o.Z)({view:n}),s=(0,c.K)((0,u.Z)((function(){return{path:t}}),[t]));(0,r.useEffect)((function(){if(n){var e=i.tk.domEventHandlers({scroll:l()((function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.visibleRanges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;e=Math.min(e,c.from),t=Math.max(e,c.to)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}s("user:scroll",{visibleLines:{from:n.state.doc.lineAt(e).number,to:n.state.doc.lineAt(t).number}})}),250)}),t=l()((function(e,n,t){s("user:selection",{inputMethod:t,from:e,to:n})}),250),r=i.tk.updateListener.of((function(e){var n=e.transactions,r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.isUserEvent("input.paste")&&s("user:paste",{}),c.isUserEvent("input.drop")&&s("user:new-drop",{}),c.isUserEvent("move.drop")&&s("user:move-drop",{}),c.isUserEvent("delete.cut")&&s("user:cut",{}),c.isUserEvent("input.complete")&&s("user:complete",{}),c.isUserEvent("select")&&t(c.newSelection.main.from,c.newSelection.main.to,c.isUserEvent("select.pointer")?"pointer":"keyboard"),c.isUserEvent("undo")&&s("user:undo",{}),c.isUserEvent("redo")&&s("user:redo",{})}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}));return n.dispatch({effects:a.reconfigure([e,r])}),function(){n.dispatch({effects:a.reconfigure([])})}}}),[n,a,s])}},16750:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(74985),i=t(76735),o=t(25198),a=t(85368).K.a,l=function(){return(0,r.tZ)(a,{href:"https://docs.replit.com/programming-ide/workspace-features/expandable-storage",target:"_blank",children:(0,r.tZ)(o.E,{colorway:"orange",icon:(0,r.tZ)(i.Z,{}),text:"You're over the storage limit for your plan. Don't worry, you have a grace period to upgrade your quota or clear space before the limits affect you. Click to learn more."})})}},65629:function(e,n,t){t.d(n,{M:function(){return x},l:function(){return w}});var r=t(57389),i=t(72006),o=t(4405),a=t(74985),l=t(48330),c=t(82568),u=t(39541),s=t(61284),d=t(85368),f=t(38785),p=t(31366),h=t(31992),v=t(27691),g=t(50959),m=t(52230),y=t(16750),Z=t(88541),b=(0,c.X)({storageBarWrapper:[u.l0.colWithGap(8)],summaryWrapper:[u.l0.colWithGap(8),u.l0.align.start],totalSummaryDot:[u.l0.backgroundColor.backgroundHigher,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[u.l0.backgroundColor.accentPrimaryDefault,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],summaryRow:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),u.l0.height(14)],summaryRowWrap:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[u.l0.color.accentPrimaryStronger],replSummaryUsage:[u.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],totalUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(140)],availablePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],availableText:[u.l0.color.foregroundDimmest,(0,r.Z)({},u.BC.max(390),u.l0.pl(16))]}),w=function(e){var n,t=e.data,r=e.forceHideGracePeriod,c=void 0!==r&&r,u=(0,l.Z)(),v=(0,g.useState)(!1),w=v[0],k=v[1],C=(0,Z.P5)({controlName:"flag-dirigible-windmill",type:"boolean",logFlagToAnalytics:!1});if((0,g.useEffect)((function(){var e,n;t&&"AccountStorageUtilization"===(null===(e=t.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(n=t.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===u})))||void 0===n?void 0:n.__typename)&&k(!0)}),[t,u]),t&&"CurrentUser"===(null===(n=t.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===t.currentUser.storageInfo.storageQuota.__typename&&"StorageGracePeriodQuota"===t.currentUser.storageInfo.storageGracePeriodQuota.__typename&&"AccountStorageUtilization"===t.currentUser.storageInfo.accountStorageUtilization.__typename&&w){var S=t.currentUser.username,T=t.currentUser.storageInfo.accountStorageUtilization,E=t.currentUser.storageInfo.storageQuota.quota,R=t.currentUser.storageInfo.storageGracePeriodQuota.quota,I=T.total,D=T.perRepl,G=Number("0"===E?I:E),P=t.currentUser.userSubscriptionType,_=Math.max(Number(E)-Number(I),0),B="(".concat((0,h.fZ)(_,{precision:2})," available)"),A="0"!==R&&0===_&&C&&!c,U=D.find((function(e){return e.repl.id===u})),L="0"!==E?(0,a.tZ)(s.xv,{css:b.availableText,children:B}):null;return(0,a.BX)(d.G,{css:b.storageBarWrapper,children:[(0,a.tZ)(f.$,{context:{type:"workspace_info_modal",replId:u},summary:(0,p._)((0,o.Z)((0,i.Z)({},T),{quota:E})),username:S}),(0,a.BX)(d.G,{css:b.summaryWrapper,children:[(0,a.BX)(d.G,{css:b.summaryRow,children:[(0,a.tZ)("div",{css:b.replSummaryDot}),(0,a.tZ)(s.xv,{css:b.replSummaryText,children:"This Repl:"}),U?(0,a.tZ)(s.xv,{css:b.replSummaryUsage,children:(0,h.fZ)(Number(U.usage),{precision:2})}):(0,a.tZ)(d.G,{css:b.replUsagePlaceholder})]}),(0,a.BX)(d.G,{css:b.summaryRowWrap,children:[(0,a.tZ)("div",{css:b.totalSummaryDot}),(0,a.BX)(s.xv,{children:[(0,m.s)(P)," storage:"]}),(0,a.tZ)(s.xv,{children:(0,h.fZ)(Number(G),{precision:2})}),L]}),A?(0,a.tZ)(y.M,{}):null]})]})}return(0,a.tZ)(x,{})},x=function(){return(0,a.BX)(d.G,{css:b.storageBarWrapper,children:[(0,a.tZ)(f.X,{}),(0,a.BX)(d.G,{css:b.summaryWrapper,children:[(0,a.BX)(d.G,{css:b.summaryRow,children:[(0,a.tZ)("div",{css:b.replSummaryDot}),(0,a.tZ)(s.xv,{css:b.replSummaryText,children:"This Repl:"}),(0,a.tZ)(d.G,{css:b.replUsagePlaceholder})]}),(0,a.BX)(d.G,{css:b.summaryRow,children:[(0,a.tZ)("div",{css:b.totalSummaryDot}),(0,a.tZ)(d.G,{css:b.totalUsagePlaceholder}),(0,a.tZ)(d.G,{css:b.availablePlaceholder})]})]})]})}},5884:function(e,n,t){t.d(n,{Pf:function(){return v},mE:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationCurrentUser {\n    currentUser {\n      __typename\n      id\n      username\n      userSubscriptionType\n      storageInfo {\n        __typename\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n        storageGracePeriodQuota {\n          ... on StorageGracePeriodQuota {\n            __typename\n            quota\n          }\n        }\n        storageQuotaStatus2 {\n          ... on StorageQuotaStatus {\n            __typename\n            status\n          }\n          ... on ServiceUnavailable {\n            __typename\n            message\n          }\n        }\n        accountStorageUtilization {\n          ...AccountStorageUtilization\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ManageAccountStorageSetUserStorageQuota {\n    setUserStorageQuota {\n      ... on SetUserStorageQuotaSuccess {\n        __typename\n        quota\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(l()),h=(0,o.Ps)(c(),p);function v(e){var n=(0,r.Z)({},f,e);return a.a(h,n)}var g=(0,o.Ps)(u());function m(e){var n=(0,r.Z)({},f,e);return a.a(g,n)}s();d()},52230:function(e,n,t){t.d(n,{s:function(){return i}});var r=t(51631),i=function(e){switch(e){case r.HP.HackerPro:return"Pro plan";case r.HP.Hacker:return"Hacker plan";default:return"Free plan"}}},11307:function(e,n,t){t.d(n,{a:function(){return c}});var r=t(74985),i=t(43312),o=function(e){return(0,i.iv)({"body *":{cursor:"".concat(e," !important")}})},a=(0,i.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),l={"n-resize":o("n-resize"),"ne-resize":o("ne-resize"),"nesw-resize":o("nesw-resize"),"s-resize":o("s-resize"),"se-resize":o("se-resize"),"sw-resize":o("sw-resize"),"e-resize":o("e-resize"),"ew-resize":o("ew-resize"),"row-resize":o("row-resize"),"col-resize":o("col-resize"),grabbing:o("grabbing")};function c(e){var n=e.cursor;return(0,r.tZ)(i.xB,{styles:[a,l[n]]})}},72019:function(e,n,t){t.d(n,{g:function(){return o}});var r=t(74985),i=t(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},89565:function(e,n,t){t.d(n,{r:function(){return E},e:function(){return R.e}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(57488),u=t(50959),s=t(40865),d=t(86065),f=t(2041);function p(){var e=(0,s.X)();if(!e)return null;var n=e.activeStep,t=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(n.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return n.id===e.id})),onCurrentStepChange:t,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var h=t(30826),v=t.n(h),g=t(10422),m=t(43312),y=t(48468),Z=t(39541);function b(e){var n=e.targetElement,t=(0,u.useState)(null),r=t[0],o=t[1],a=(0,y.Z)((function(){n&&o({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,u.useEffect)((function(){n&&a(n)}),[n,a]),(0,u.useEffect)((function(){if(n){var e=v()((function(){o({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[n]),!r||!n)return null;var c=(0,m.iv)({backgroundColor:Z.TV.backgroundOverlay,zIndex:Z.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,g.createPortal)((0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{id:"wat",css:[w((0,i.Z)({side:"left-top"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"top-right"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"right-bottom"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"bottom-left"},r)),c]})]}),document.body)}function w(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,m.iv)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,m.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,m.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,m.iv)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}var x=t(66539),k=t(34335),C=t(16022);function S(e){var n=e.targetElement,t=e.activeStep,r=e.goto,a=e.currentStepIndex,c=e.totalSteps,s=e.done,f=e.disableAnimation,p=e.placement,h=void 0===p?"right":p,v=e.cypressCloseData,m=void 0===v?"tour-tooltip-close-button":v,b=e.innerRef,w=(0,u.useState)(null),S=w[0],T=w[1],E=(0,u.useState)(null),R=E[0],I=E[1],D=(0,k.D)(n,S,{placement:h,modifiers:[{name:"arrow",options:{element:R,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),G=(0,y.Z)((function(){var e;null===(e=D.update)||void 0===e||e.call(D)}),{type:"throttle",wait:100});return(0,u.useEffect)((function(){G(n)}),[n,G]),(0,u.useImperativeHandle)(b,(function(){return{updateTooltip:function(){var e;null===(e=D.update)||void 0===e||e.call(D)}}})),(0,g.createPortal)((0,l.BX)("div",(0,o.Z)((0,i.Z)({ref:T,style:D.styles.popper,css:{transition:f?"all":"all 0.5s ease-out",zIndex:Z.n0+2,width:320}},D.attributes.popper),{children:[(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){s()},currentStepIndex:a,onCurrentStepChange:r,totalSteps:c,cypressCloseData:m}),(0,l.tZ)("span",{style:D.styles.arrow,css:[x.wk,{"&::after":{backgroundColor:C.Br.primary.dimmest,border:"1px solid "+C.Br.primary.dimmer}}],ref:I})]})),document.body)}var T=t(49500);function E(e){var n,t=e.children,d=e.tour,f=e.isDoneInitialOverride,h=e.onStep,v=e.onDone,g=function(){P(!0),null===v||void 0===v||v(x.id)},m=function(e){B.current=x,null===h||void 0===h||h(e.id),k(e)},y=function(e){var n;if("number"===typeof e)n=e;else{var t=e;n=d.steps.findIndex((function(e){return t===e.id}))}if(!(n<0||n>=d.steps.length)){for(var r=d.steps[n],i=n<_;!E[r.id]&&r.autoSkipIfNoTarget;){if((n=i?n-1:n+1)<0||n>=d.steps.length)return;r=d.steps[n]}m(r)}},Z=function(){y(0),P(!1)},w=(0,u.useState)(d.steps[0]),x=w[0],k=w[1],C=(0,u.useState)({}),E=C[0],R=C[1],I=function(e,n){var t,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],s=(0,u.useState)(n),d=s[0],f=s[1],p=Boolean(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.toursSeen[0].seen);return"boolean"===typeof d&&(p=d),{isLoading:o,isDone:p,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),D=I.isDone,G=I.isLoading,P=I.setIsDone,_=d.steps.findIndex((function(e){return x.id===e.id}));if(-1===_)throw new Error("Current tour step is not in tour steps");var B=(0,u.useRef)(),A=(0,u.useCallback)((function(e,n){var t=d.steps.findIndex((function(n){return e===n.id}));if(-1===t)throw new Error("Invalid step id");if(d.steps[t].isModal)throw new Error("Trying to set a target element for a modal step");R((function(t){return t[e]===n?t:(0,o.Z)((0,i.Z)({},t),(0,r.Z)({},e,n))}))}),[d]),U=E[x.id],L=!D&&!G;window.startTour=function(){T.log("starting tour:",d.id,"from",d.steps[0].id),Z()};var N=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(E[e.id])})),X=N.findIndex((function(e){return x.id===e.id}));return(0,l.BX)(s.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:x,next:function(){var e=d.steps[_+1];if(e&&e.autoSkipIfNoTarget)for(var n=_+1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n++,e=d.steps[n];e?m(e):g()},prev:function(){var e=d.steps[_-1];if(e&&e.autoSkipIfNoTarget)for(var n=_-1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n--,e=d.steps[n];e&&m(e)},goto:y,isDone:D,isLoading:G,done:g,restart:Z}),children:[L&&x.isModal?(0,l.tZ)(p,{}):null,L&&U?(0,l.BX)(l.HY,{children:[(0,l.tZ)(b,{targetElement:U}),(0,l.tZ)(S,{targetElement:U,activeStep:x,currentStepIndex:X,done:g,goto:function(e){y(e+_-X)},totalSteps:N.length,disableAnimation:Boolean(0===_||(null===(n=B.current)||void 0===n?void 0:n.isModal))})]}):null,t]})}var R=t(5858)},86419:function(e,n,t){var r;t.d(n,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},86528:function(e,n,t){t.d(n,{M:function(){return u},k:function(){return l}});var r=t(81962),i=t(14806),o=t(69994),a=t(55143),l=o.lg.define((function(e){var n=e.state.facet(c),t=[];return{update:function(e){n=e.state.facet(c);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};(0,r.Z)(n,KeyboardEvent)&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),(0,r.Z)(n,InputEvent)&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),(0,r.Z)(n,CompositionEvent)&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}}),{provide:function(e){var n=function(n,t){var r;return null===(r=t.plugin(e))||void 0===r?void 0:r.pushEvent(n)};return i.Wl.highest(o.tk.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),c=i.r$.define({combine:function(e){return!!e.length&&e[0]}}),u=new a.j((function(e){return c.of(e)}))},52491:function(e,n,t){t.d(n,{Y:function(){return x},Z:function(){return T}});var r=t(74985),i=t(50959),o=t(68935),a=t(14806),l=t(69994),c=t(45853),u=t(45634),s=t(73872),d=t(35981),f=t(39541),p=t(85368),h=t(24743),v=t(68339),g=t(84524),m=(0,d.u)(null),y=(0,d.u)(null),Z=(0,d.u)({from:0,to:0}),b=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var n=e.view,t=(0,c.Z)({view:n}),r=(0,g.k)();(0,i.useEffect)((function(){if(r&&n){m.current=n.state;var e=a.Py.define(),i=(0,v.uf)([y.subscribe((function(t){n.dispatch({effects:e.of(t)})})),Z.subscribe((function(e){n.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return n.dispatch({effects:t.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(m.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(n,t){return n=n.map(t.changes),(0,u.j)(t,e,(function(e){n=null==e.value?l.p.none:l.p.set([b.range(e.value.from,e.value.to)])})),n},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){m.current=null,i(),n.dispatch({effects:t.reconfigure([])})}}}),[n,r,t])}var k=(0,i.memo)((function(e){var n=e.node,t=e.index,i=e.active,o=e.terminal,a=n.type.name,l={from:n.from,to:n.to};return(0,r.BX)(p.G,{css:[{marginLeft:4*t+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,Z.current=l},children:[(0,r.tZ)(h.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(h.Z,{size:"xsmall",truncate:!0,children:["(",n.from," \u2013 ",n.to,")"]})]})}));function C(e,n){for(var t=[];n(e);)t.push(e.node);return t}var S=(0,i.memo)((function(e){var n=e.state,t=(0,o.qz)(n),a=n.selection.main.head,l=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.parent()})).reverse()}),[t,a]),c=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.prevSibling()}))}),[t,a]),u=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.nextSibling()}))}),[t,a]);return(0,r.BX)(p.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map((function(e,n){return(0,r.tZ)(k,{node:e,index:n},n)})),c.map((function(e,n){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},n)})),(0,r.tZ)(k,{node:t.resolveInner(n.selection.main.head),index:l.length,terminal:!0,active:!0}),u.map((function(e,n){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},n)}))]})}));function T(){var e=(0,s.Z)(m);return e?(0,r.tZ)(S,{state:e}):null}},49520:function(e,n,t){t.d(n,{YX:function(){return b},ho:function(){return w}});var r=t(66091),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(39541),s=t(61284),d=t(85368),f=t(33358),p=t(32104),h=t(28069),v=t(63837),g=t(99453),m=t(73872),y=t(35981),Z=t(91476),b=new(function(){function e(){var n=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this;if(!this.enabled)return{id:-1};var t=this.counter++,r={id:t,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,n.maxEntries)})),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update((function(t){var r=t.findIndex((function(n){return n.id===e.id}));if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i}))},n.complete=function(e,n){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:n,responseTime:Date.now()})}))},n.abort=function(e){this.logs.update((function(n){return n.filter((function(n){return n.id!==e.id||null!=n.responseTime}))}))},e}()),w=function(){var e,n=(0,m.Z)(b.logs);return(0,l.BX)(d.G,{css:[u.l0.flex.column],children:[(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:u.l0.flex.grow(1),children:"Requests"}),(0,l.tZ)(f.Z,{onClick:b.clear})]}),(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[n.map((function(n){return(0,l.tZ)(x,{log:n},null!==(e=n.id)&&void 0!==e?e:n.requestTime.valueOf())})),!n.length&&(0,l.tZ)(d.G,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=(0,c.memo)((function(e){var n=e.log,t=n.requestTime,r=n.responseTime,i=n.request,o=n.response,c=(0,a.Z)((0,g.Z)(!0),2),f=c[0],p=c[1],h=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(d.G,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{children:k(n)}),(0,l.tZ)(s.xv,{children:(0,l.tZ)("code",{children:h})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:u.l0.fontSize(13),children:[r.valueOf()-t.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(Z.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[u.l0.overflow("scroll"),u.l0.borderRadius(4),u.l0.p(4),{border:"1px solid ".concat(u.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(Z.g,{name:"response",src:o}))]})]})}));function k(e){var n=e.response;return n?"CompleteCodeResult"===n.__typename?(0,l.tZ)(v.Z,{}):(0,l.tZ)(h.Z,{}):(0,l.tZ)(p.Z,{})}},44171:function(e,n,t){t.d(n,{Sj:function(){return c},Th:function(){return a},UB:function(){return u},a0:function(){return s},ot:function(){return l}});var r=t(72006),i=t(4405),o=t(62946);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!0}),c=(0,o.cn)((function(e){return function(e,n){if(!n.regexp&&!n.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var t=function(e){var t=e.dir,r=e.channel,i=e.cmd;return(!n.direction||t===n.direction)&&!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service)||n.regexp.test(JSON.stringify(i)))};return n.highlightOnly?e.map((function(e){return t(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(t)}(e(a),e(l))})),u=(0,o.cn)(null,(function(e,n){n(a,[])})),s=(0,o.cn)(!1)},97553:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(2272),i=t(9970),o=t(45285),a=t(62946),l=t(90171),c=t(50959),u=t(44171);function s(){var e=(0,l.useRouter)(),n=(0,o.Z)().container,t=(0,r.Z)((0,a.KO)(u.a0),2),s=t[0],d=t[1],f=(0,a.b9)(u.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(s)return n.client().onDebugLog((function(e){if("log"===e.type){var t;if(e.log.channel)if(t={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}f((function(n){return(0,i.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,channel:t,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[s,f,n])}},91476:function(e,n,t){t.d(n,{L:function(){return P},g:function(){return B}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(56169),s=t(13716),d=t(64491),f=t(87076),p=t(39137),h=t(39541),v=t(61284),g=t(85368),m=t(33358),y=t(34938),Z=t(35458),b=t(32104),w=t(84815),x=t(50575),k=t(89435),C=t(61097),S=t(93658),T=t(79667),E=t(80336),R=t(63837),I=t(99453),D=t(68339),G=t(2954);var P=function(){var e,n=function(){var e=(0,c.useState)(null),n=e[0],t=e[1],r=(0,s.R3)();return(0,c.useEffect)((function(){r!==n&&null!=r&&t(r)}),[r,n]),n}(),t=(0,d.Z)(n||""),r=(0,u.H)(),b=(0,a.Z)((0,I.Z)(!0),2),x=b[0],k=b[1],C=(0,c.useState)(""),S=C[0],E=C[1],R=(0,c.useState)((function(){return[]})),G=R[0],P=R[1],B=(0,a.Z)((0,I.Z)(!0),2),U=B[0],L=B[1],N=(0,a.Z)((0,I.Z)(!0),2),X=N[0],F=N[1],O=(0,c.useCallback)((function(e){P((function(n){return n.unshift(e),n.slice(0,500)}))}),[]),M=(0,c.useCallback)((function(e,n){P((function(t){for(var r=0;r<t.length;r++)if(t[r].id===e){t[r]=n(t[r]);break}return t.slice(0,500)}))}),[]),W=(0,c.useCallback)((function(){P([])}),[]),H=null===t||void 0===t?void 0:t.isOpen(n||""),z=(0,c.useCallback)((function(){O({canceled:!1,notification:{method:"probe",params:{filePath:n,state:null===t||void 0===t?void 0:t.getServerState(),capabilities:null===t||void 0===t?void 0:t.getServerCapabilities(),diagnostics:H?null===t||void 0===t?void 0:t.getDiagnostics(n||""):[],isOpen:H,isSupportedFile:null===t||void 0===t?void 0:t.isSupportedFile(n||"")}},requestTime:new Date,type:"probe"})}),[O,t,n,H]),V=(0,c.useMemo)((function(){var e=S.split(",").map((function(e){return e.trim()})).filter(Boolean);if(!e.length)return G;var n=G;return U||(n=n.filter((function(e){return null==e.notification}))),X||(n=n.filter((function(e){return null==e.request}))),S&&(n=n.filter((function(n){return e.some((function(e){var t;return null===(t=n.request||n.notification)||void 0===t?void 0:t.method.toLowerCase().includes(e.toLowerCase())}))}))),n}),[G,U,X,S]);return(0,c.useEffect)((function(){return(0,D.uf)([null===t||void 0===t?void 0:t.onRequest((function(e){x&&O({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===t||void 0===t?void 0:t.onResponse((function(e){x&&M(e.id,(function(n){return(0,i.Z)((0,o.Z)((0,i.Z)({},n),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===t||void 0===t?void 0:t.onCancelRequest((function(e){x&&M(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===t||void 0===t?void 0:t.onDiagnostics((function(e){var n=e.path,t=e.diagnostics;x&&O({canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:t},requestTime:new Date,type:"diagnostics"})})),null===t||void 0===t?void 0:t.onServerStateChange((function(e){x&&O({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===t||void 0===t?void 0:t.onServerCapabilitiesChange((function(e){x&&O({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===t||void 0===t?void 0:t.onSendNotification((function(e){x&&O({canceled:!1,notification:e,requestTime:new Date})}))])}),[t,O,M,x]),(0,l.BX)(g.G,{css:[h.l0.flex.column],children:[(0,l.BX)(g.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.m(4),h.l0.position.sticky,h.l0.top(0),h.l0.backgroundColor.backgroundDefault,h.l0.zIndex(1)],children:[(0,l.tZ)(v.xv,{children:t?(0,l.BX)(l.HY,{children:[(0,l.tZ)(A,{})," logs for ",(0,l.tZ)("code",{children:n})]}):"No LSP client available"}),(0,l.tZ)(f.h,{alt:"Probe LSP",onClick:z,children:(0,l.tZ)(w.Z,{})}),(0,l.tZ)(g.G,{css:h.l0.flex.grow(1)}),(0,l.tZ)(Z.Z,{id:"toggleIsLogging",isOn:x,onChange:k})," "]}),(0,l.BX)(g.G,{css:[h.l0.rowWithGap(8),h.l0.m(4),h.l0.mb(8)],children:[(0,l.BX)(g.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(T.Z,{}),(0,l.tZ)(v.xv,{children:"Show"})]}),(0,l.BX)(g.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:r("showNotifications"),checked:U,onChange:L}),(0,l.tZ)("label",{htmlFor:r("showNotifications"),children:" Notifications"})]}),(0,l.BX)(g.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:r("showRequests"),checked:X,onChange:F}),(0,l.tZ)("label",{htmlFor:r("showRequests"),children:" Requests"})]}),(0,l.tZ)(g.G,{css:h.l0.flex.growAndShrink(1)}),(0,l.tZ)(g.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(m.Z,{onClick:W})})]}),(0,l.tZ)(g.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(p.II,{id:r("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return E(e.target.value)},value:S})}),(0,l.BX)(g.G,{css:[h.l0.flex.grow(1),h.l0.flex.column,h.l0.overflow("auto")],children:[V.map((function(n,t){return(0,l.tZ)(_,{log:n},null!==(e=n.id)&&void 0!==e?e:n.requestTime.valueOf()+""+t)})),!V.length&&(0,l.tZ)(g.G,{css:h.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},_=c.memo((function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,c=t.response,u=t.notification,s=t.id,d=(0,a.Z)((0,I.Z)(!0),2),f=d[0],p=d[1];return(0,l.BX)(g.G,{css:[h.l0.my(4),h.l0.mx(4)],children:[(0,l.BX)(g.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[h.l0.flex.row,h.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(g.G,{css:[h.l0.flex.grow(1),h.l0.rowWithGap(2)],children:[(0,l.tZ)(v.xv,{className:"lspLog-emoji",children:U(t)}),(0,l.BX)(v.xv,{className:"lspLog-requestMethod",children:[(0,l.tZ)("code",{children:null===(n=o||u)||void 0===n?void 0:n.method}),null!=s&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,l.tZ)(g.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(v.xv,{css:h.l0.fontSize(13),children:[i.valueOf()-r.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(B,{name:"request.params",src:o.params}),void 0!==u&&(0,l.tZ)(B,{name:"notification.params",src:u.params}),void 0!==c&&(0,l.tZ)(B,{name:"response",src:c})]})]})})),B=(0,c.memo)((function(e){var n=e.name,t=e.src;return(0,l.tZ)(g.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(G.Z,{json:(0,r.Z)({},n,t)})})})),A=function(){return(0,l.tZ)(v.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(h.TV.redDimmer," 2px 2px")},children:"LSP"})};function U(e){var n=e.type,t=e.canceled,r=e.response,i=e.notification;return"state"===n?(0,l.tZ)(C.Z,{}):"diagnostics"===n?(0,l.tZ)(x.Z,{}):"capabilities"===n?(0,l.tZ)(k.Z,{}):"probe"===n?(0,l.tZ)(w.Z,{}):t?(0,l.tZ)(E.Z,{}):i?(0,l.tZ)(S.Z,{}):void 0!==r?(0,l.tZ)(R.Z,{}):(0,l.tZ)(b.Z,{})}},99453:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r.useState)(e),t=n[0],i=n[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[t,o]}},54629:function(e,n,t){t.d(n,{AA:function(){return C},CH:function(){return y},Gg:function(){return g},Ne:function(){return T},pV:function(){return x},vk:function(){return b}});var r=t(72006),i=t(43119),o=t(71440),a=t(70751),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},g=(0,o.Ps)(u()),m=(0,o.Ps)(s(),g,a.aA,a.Rb);function y(e){var n=(0,r.Z)({},v,e);return l.a(m,n)}var Z=(0,o.Ps)(d());function b(e){var n=(0,r.Z)({},v,e);return c.D(Z,n)}var w=(0,o.Ps)(f(),g);function x(e){var n=(0,r.Z)({},v,e);return c.D(w,n)}var k=(0,o.Ps)(p(),g);function C(e){var n=(0,r.Z)({},v,e);return c.D(k,n)}var S=(0,o.Ps)(h(),g);function T(e){var n=(0,r.Z)({},v,e);return c.D(S,n)}},63086:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(e){var n=e.view,t=e.isLoading,i=e.autoFocus;r.useEffect((function(){i&&n&&(t||n.focus())}),[n,t,i])}},56568:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(50959),i=t(69994),o=t(14806),a=t(45853),l=t(87978),c=t(30826),u=t.n(c),s=t(625),d=new Set,f=u()((function(){var e=!0,n=!1,t=void 0;try{for(var r,i=d[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,s.j)(s.U3.WS_TYPED,{fileExt:o})}}catch(a){n=!0,t=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}d.clear()}),6e4);function p(e){var n=e.view,t=e.onType,c=e.filePath,u=(0,a.Z)({view:n});r.useEffect((function(){if(n&&t&&c){var e=(0,l.r6)(c)||(0,l.UO)(c);return n.dispatch({effects:u.reconfigure(i.tk.updateListener.of((function(n){n.docChanged&&(n.transactions.some((function(e){return e.annotation(o.YW.remote)}))||function(e){d.has(e)||(d.add(e),f())}(e))})))}),function(){n.dispatch({effects:u.reconfigure([])})}}}),[n,t,c,u])}},52118:function(e,n,t){t.d(n,{r:function(){return d}});var r=t(57135),i=t(96583),o=t(87978),a=RegExp("_(?<num>\\d+)$");function l(e,n){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(e,n){var t,r,l,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,o.Il)(n),[4,e.readDir(t||".")];case 1:return(r=i.sent()).error?[2,n]:(c=(l=function(e){if(r.children.find((function(n){return"FILE"===n.type&&n.filename===e}))){var n,t=(0,o.eb)(e),i=(0,o.r6)(e),c=t.match(a);if(null===c||void 0===c||null===(n=c.groups)||void 0===n?void 0:n.num){var u=Number(c.groups.num);return l("".concat(t.replace(a,""),"_").concat(u+1,".").concat(i))}return l("".concat(t,"_2.").concat(i))}return e})((0,o.UO)(n)),[2,t?t+"/"+c:c])}}))}))).apply(this,arguments)}var u=t(22011),s=t(91669),d=function(){var e=(0,r.Z)((function(e,n,t){var r,a,c,d,f,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=encodeURI(e.name),a=(0,o.Il)(t),[4,l(n,a?a+"/"+r:r)];case 1:return c=i.sent(),[4,(0,s.pV)(e)];case 2:return d=i.sent(),[4,n.writeFile(c,u.Z.from(d))];case 3:return i.sent(),f=(0,o.eb)(e.name),p=(0,o.UO)(c),[2,"![".concat(f,"](").concat(p,")")]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()},20864:function(e,n,t){t.d(n,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=t(43312),i=t(39541),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},10444:function(e,n,t){t.d(n,{Rz:function(){return y},xy:function(){return b}});var r=t(57135),i=t(9970),o=t(96583),a=t(74985),l=t(99726),c=t(49944),u=t(82568),s=t(39541),d=t(85368),f=t(83005),p=t(87978),h=(0,u.X)({root:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.px(8),{userSelect:"none"}],header:[{fontSize:s.TV.fontSizeSmall,opacity:.6},s.l0.color.foregroundDimmest,s.l0.truncate],result:[s.l0.colWithGap(0)],fileName:[s.l0.truncate,s.l0.flex.row]});function v(e){var n=e.height,t=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:h.root,style:{height:n},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:h.result,children:[i?(0,a.tZ)(d.G,{css:h.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,a.tZ)(d.G,{css:h.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!t})})]})]})}var g={match:l.kN,forward:!1,tiebreakers:[function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function m(e){for(var n=(0,i.Z)(e.values()).sort((function(e,n){return e-n})),t=[],r=n[0],o=n[0],a=1;a<n.length;a++)n[a]===o+1?o++:(t.push({from:r,to:o+1}),r=n[a],o=n[a]);return t.push({from:r,to:o+1}),t}function y(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,new l.Zn(n,g).find(e)];case 1:return[2,t.sent().map((function(e){return{path:e.item,score:e.score,ranges:m(e.positions)}}))]}}))}))).apply(this,arguments)}function b(e){var n=e.path,t=e.ranges,r=function(e){var n=e.ranges,t=e.path,r=(0,p.UO)(t),i=(0,p.Il)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,l=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(v.from<o){l.push({from:v.from,to:Math.min(v.to,o)});var g=v.to-a;if(g<=0)continue;c.push({from:0,to:g})}else v.from<a||c.push({from:v.from-a,to:v.to-a})}}catch(m){s=!0,d=m}finally{try{u||null==h.return||h.return()}finally{if(s)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:n,ranges:null!==t&&void 0!==t?t:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(v,{match:r,height:i})}}},81420:function(e,n,t){t.d(n,{i:function(){return b},w:function(){return m}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=(t(50959),t(33064)),c=t(76735),u=t(94452),s=t(83005),d=t(85368),f=t(61284),p=t(39541),h=t(22011),v=t(10444),g=t(24592);function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=e.search,t=e.paths,r=e.run,n?[4,(0,v.Rz)(n,t)]:[2,t.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(s.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,v.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var n=e.path,t=e.score,i=e.ranges;return{data:{type:"action",label:n,icon:(0,a.tZ)(s.Z,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,v.xy)({path:n,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function Z(){return(0,a.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",children:"Something went wrong searching your Repl's files. Please try again."})]})}function b(e){return(0,u.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.zf)({defaultScore:3}),commands:function(){var n=(0,r.Z)((function(n){var t,l,u,d,f,p,v,y,b,w,x,k,C,S,T,E;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return t=e.fs,l=e.shouldHideFile,n.search||n.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return u=R.sent(),d=[],n.search||n.active?[4,t.listFiles()]:[3,3];case 2:if((f=R.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Z,{})}}}}]];if(!f.files)throw new Error("Expected files");p=!0,v=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(p=(w=b.next()).done);p=!0)x=w.value,l(x)||u.includes(x)||d.push(x)}catch(I){v=!0,y=I}finally{try{p||null==b.return||b.return()}finally{if(v)throw y}}R.label=3;case 3:return k=[],[4,Promise.all([m({search:n.search,paths:u,run:function(n){e.openFile({path:n})}}),m({search:n.search,paths:d,run:function(n){e.openFile({path:n})}})])];case 4:return C=i.Z.apply(void 0,[R.sent(),2]),S=C[0],T=C[1],S.length&&k.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(g.Z,{})},commands:function(){return S}}),T.length&&k.push({data:{type:"group",key:"files"},commands:function(){return T}}),0===T.length&&0===S.length&&n.active&&(E=n.search,k.push({data:{label:E,description:"Create a new file",icon:(0,a.tZ)(s.Z,{path:E}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.writeFile(E,h.Z.from(""))];case 1:return n.sent().error?[2,{type:"error",message:'Could not create "'+E+'"'}]:(e.openFile({path:E}),[2])}}))}))},match:function(){return{score:1}}})),[2,k]}}))}));return function(e){return n.apply(this,arguments)}}()})}},94452:function(e,n,t){t.d(n,{fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=t(16918);function i(e,n){var t=n.commands;return{data:e,match:n.match,commands:t}}function o(e){var n=e.defaultScore,t=void 0===n?1:n;return function(e){var n=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!n&&o)return{score:t};if(!n)return{score:t};var a=r.Z.match(n,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1})},1088:function(e,n,t){t.d(n,{F:function(){return S},q:function(){return C}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=(t(50959),t(16918)),c=t(94452),u=t(2255),s=t(12260),d=t(76735),f=t(39541),p=t(85368),h=t(61284),v=t(82568),g=t(83005),m=t(250),y=t(68702),Z=(0,v.X)({root:[f.l0.colWithGap(4),f.l0.align.start,f.l0.flex.growAndShrink(1),f.l0.p(8)],header:[f.l0.rowWithGap(4)],singleLine:[{whiteSpace:"nowrap",fontFamily:f.TV.fontFamilyCode},f.l0.truncate,f.l0.color.foregroundDimmest]});function b(e){var n=e.path,t=e.line;return(0,a.BX)(p.G,{css:Z.root,children:[(0,a.BX)(p.G,{css:Z.header,children:[(0,a.tZ)(g.Z,{path:n,size:12}),(0,a.BX)(h.xv,{variant:"small",color:"dimmest",children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.tZ)(p.G,{css:Z.singleLine,children:(0,a.tZ)(u.xK,{source:t.content,matches:t.matches})})]})}function w(){return(0,a.BX)(p.G,{css:[f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function x(){return(0,a.BX)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function k(){return(0,a.tZ)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:(0,a.tZ)(h.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var C=(0,m.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function S(e){var n,t=(0,y.e)({container:e.container});return(0,c.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(s.Z,{}),keyboardShortcut:e.keyboardShortcut?C:void 0},{match:(0,c.zf)({defaultScore:2}),commands:function(){var c=(0,r.Z)((function(r){var c,u,s,f,h,v,m,y,Z,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(c=Math.random(),n=c,[4,t({query:r.search})]):[2,[]];case 1:if(u=o.sent(),s=u.results,f=u.error,h=u.isPartialResult,c!==n)return[2,[]];if(null!==f)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]]:[2,[]];v=[],m=!0,y=!1,Z=void 0;try{for(C=function(){var n=(0,i.Z)(T.value,2),t=n[0];n[1].forEach((function(n){var i=n.matches[0].column;v.push({match:function(){var e=l.Z.match(r.search,n.content);return{score:(null===e||void 0===e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(b,{path:t,line:n})}}},data:{type:"action",label:t,icon:(0,a.tZ)(g.Z,{path:t}),key:[t,n.lineNumber,i].join(":"),run:function(){e.openFile({path:t,line:n.lineNumber,col:i})}}})}))},S=Object.entries(s)[Symbol.iterator]();!(m=(T=S.next()).done);m=!0)C()}catch(E){y=!0,Z=E}finally{try{m||null==S.return||S.return()}finally{if(y)throw Z}}if(0===v.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];if(r.active){if(0===v.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];h&&v.push({data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(x,{})}}}})}return[2,v]}}))}));return function(e){return c.apply(this,arguments)}}()})}},67570:function(e,n,t){t.d(n,{Z:function(){return ke}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(74985),u=t(50959),s=t(91926),d=t(32343),f=t(48306),p=t.n(f),h=function(e){var n=(0,d.Z)({},e);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(p(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"one"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"two"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"three"),children:"."}))]})},v=t(39137),g=t(61284),m=t(45510),y=t(43119),Z=t(71440),b=t(24635),w=t(50216);function x(){var e=(0,y.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return x=function(){return e},e}function k(){var e=(0,y.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return k=function(){return e},e}var C={},S=(0,Z.Ps)(x());var T=(0,Z.Ps)(k());var E=t(45285),R=t(2041),I=t(35301),D=t(39541),G=t(17807),P=t(85368),_=t(12318),B=t(76735),A=t(10702),U=t(48330),L=t(75920),N=t(63064),X=t(94716),F=t(29838),O=t(12260),M=t(16918),W=t(21371);function H(e){var n,t=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,s=(0,a.Z)(u.useState(""),2),d=s[0],f=s[1],p=(n={options:t,filter:d},u.useMemo((function(){return n.filter?M.Z.filter(n.filter.toLowerCase(),n.options).map((function(e){return e.original})):n.options}),[n.options,n.filter])),h=(0,W.Kb)({items:p,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,n){var t,r,a=n.type,u=n.changes;(a===W.Kb.stateChangeTypes.ItemClick||a===W.Kb.stateChangeTypes.InputKeyDownEnter&&u.selectedItem)&&(null===(t=l.current)||void 0===t||t.blur());return a!==W.Kb.stateChangeTypes.InputBlur||u.selectedItem?a===W.Kb.stateChangeTypes.InputBlur&&u.selectedItem?(c(null!==(r=u.selectedItem)&&void 0!==r?r:""),u):u:(0,o.Z)((0,i.Z)({},u),{isOpen:!0})}});return{filteredOptions:p,combobox:h,setFilter:f,filter:d}}var z=t(66482),V=t(43312),j=t(97858),q=t(12341),Y=(0,V.iv)([D.l0.py(8),D.l0.pl(8),D.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:D.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:D.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),K=(0,V.iv)([D.l0.reset.button,G.gU.listItem,D.l0.borderRadius(8),D.l0.center,{width:24,height:24}]),$=P.K.button;function Q(e){var n=e.id,t=e.onSelect,r=e.onInit,l=e.options,s=e.initialSelectedOption,d=e.placeholderText,f=e.autoFocus,p=e.disabled,h=u.useRef(null),m=(0,a.Z)(u.useState(null!==s&&void 0!==s?s:""),2),y=m[0],Z=m[1],b=H({options:l,initialSelectedOption:s,inputRef:h,setInputValue:Z}),w=b.filteredOptions,x=b.filter,k=b.combobox,C=b.setFilter,S=(0,X.Z)(t),T=(0,X.Z)(r);return u.useEffect((function(){s&&(T.current(s),Z(s),C(""))}),[s]),(0,F.Z)((function(){var e;k.selectedItem&&(null===(e=h.current)||void 0===e||e.blur(),S.current(k.selectedItem),Z(k.selectedItem),C(""))}),[k.selectedItem,S]),u.useEffect((function(){s&&(k.selectItem(s),Z(s),C(""))}),[s]),(0,c.BX)(P.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},k.getComboboxProps()),{children:(0,c.BX)(P.G,{css:[D.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(P.G,{css:[D.l0.flex.growAndShrink(1)],children:(0,c.tZ)(v.II,(0,o.Z)((0,i.Z)({},k.getInputProps({id:n,spellCheck:!1,autoFocus:f,onChange:function(e){C(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:h,onFocus:function(e){k.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==s&&void 0!==s?s:d,css:[Y],disabled:p,dataCy:"import-config-entrypoint-input"}))}),p?null:(0,c.tZ)(P.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},D.l0.center],children:(0,c.tZ)($,(0,o.Z)((0,i.Z)({},k.getToggleButtonProps()),{css:K,type:"button",children:k.inputValue&&!k.isOpen?(0,c.tZ)(z.Z,{}):(0,c.tZ)(O.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},k.getMenuProps()),{css:{position:"relative"},children:[k.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[D.l0.pt(4),D.l0.pb(8)],children:w.map((function(e,n){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},k.getItemProps({item:e,index:n})),{children:(0,c.tZ)(q.Z,(0,o.Z)((0,i.Z)({},J(e)),{filter:x,selected:k.selectedItem===e,highlighted:k.highlightedIndex===n}))}),e.toLowerCase())}))})}):null,x&&!w.length&&k.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(P.G,{css:[D.l0.p(16),D.l0.colWithGap(4)],children:(0,c.BX)(g.xv,{color:"dimmer",children:['No results for "',x,'"']})})}):null]}))]})}function J(e){return{title:e,key:e.toLowerCase()}}var ee,ne=t(63128),te=t(87978);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(ee||(ee={}));var re=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ie=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function oe(e){var n=e.initRunCommand,t=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?ee.Make:i.has("package.json")?ee.Npm:i.has("Cargo.toml")?ee.Cargo:t?ee.Unknown:i.has("config/application.rb")?ee.Rails:function(e,n){return e.some((function(e){return(0,te.r6)(e)===n}))}(r,"csproj")?ee.DotNet:i.has("manage.py")?ee.Django:re.test(n)?ee.RegularRun:ee.Unknown}function ae(e,n){var t=n.initRunCommand,r=n.allFiles;switch(e){case ee.Npm:return"npm run start";case ee.RegularRun:var i=function(e){var n;return null!==(n=e.filter((function(e){return!ie.test(e)})).find((function(e){return re.test(e)})))&&void 0!==n?n:null}(r);return null==i?null:t.replace(re,i);case ee.Django:return"python3 manage.py runserver 0.0.0.0:3000";case ee.Rails:return"bundle exec rails server --binding=0.0.0.0";case ee.DotNet:return"dotnet run";case ee.Cargo:return"cargo run";case ee.Make:case ee.Unknown:default:return null}}function le(e){switch(e){case ee.Make:return"make";case ee.Cargo:case ee.DotNet:case ee.Npm:return"";default:return null}}function ce(e,n,t){if(0===t.length)return{projType:ee.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:n,allFiles:t},i=oe(r);return{projType:i,runCommand:ae(i,r),compileCommand:le(i)}}var ue=t(625),se=t(15679),de=t(59331),fe=t(75665);var pe=t(81203),he=t(4561),ve=t(26289),ge=t(4024),me=t(71813),ye=t(32104);function Ze(e){var n=e.children;return(0,c.BX)(ne.T,{background:"default",css:[D.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(P.G,{children:(0,c.tZ)(g.xv,{variant:"subheadDefault",css:[D.l0.color.foregroundDimmest,D.l0.pl(16),D.l0.pt(16)],children:".replit"})}),(0,c.tZ)(P.G,{css:[D.l0.p(16),D.l0.justify.center,D.l0.align.center,{flex:"1 1 auto"}],children:n})]})}function be(e){var n,t=Boolean(e.hasInterpreter),d=e.initialRun,f=null!==(n=e.initialCompile)&&void 0!==n?n:"",p=e.isFrameworkRecommended,h=!!e.projType&&e.projType===ee.Rails,y=e.isApplyingConfig,Z=(0,a.Z)(u.useState("Unknown"===s.Z.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=Z[0],w=(Z[1],(0,_.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(u.useState(e.initialCompile),2),k=x[0],C=x[1];u.useEffect((function(){w.setValue(d)}),[d]),u.useEffect((function(){C(null!==f&&void 0!==f?f:"")}),[f]);var S=(0,_.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),T=(0,a.Z)(u.useState(Boolean(t&&!p)),2),U=T[0],X=T[1];u.useEffect((function(){X(Boolean(t&&!p))}),[t,p]);var F=P.K.a,O=(0,a.Z)(u.useState([]),2),M=O[0],W=O[1],H=(0,N.Z)(),z=function(){var e=(0,E.Z)(),n=e.fs,t=e.dotReplit,i=(0,pe.P)(t),o=(0,N.Z)(),c=(0,a.Z)(u.useState(null),2),s=c[0],d=c[1];return u.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i?[4,n.listFiles()]:[2];case 1:return e=l.sent(),o.current?e.error||!e.files?(d([]),[2]):[4,n.readFile(A.l)]:[2];case 2:return t=l.sent(),r=e.files,a=ve.uP.concat(ve.nh),d(r.filter((function(e){return(t.error===he.Df.NotFound||!i.some((function(n){return function(e){var n=e.split("/");if(1===n.length)return n;for(var t=[],r=0;r<n.length;r++)t.push(n.slice(0,r+1).join("/"));return t}(e).some((function(e){return null!=e.match(n)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[i,n,o]),s}();return u.useEffect((function(){z&&H.current&&W(z)}),[H,z]),(0,c.BX)("form",{onSubmit:function(n){n.preventDefault(),e.setIsApplyingConfig(!0),w.value||U?e.onSubmit({run:w.value,compile:null!==k&&void 0!==k?k:"",entry:S.value,deleteInterp:!U,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:k!==f,projType:e.projType}):w.validate()},css:[D.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(P.G,{css:[D.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(P.G,{css:[D.l0.colWithGap(8)],children:(0,c.BX)(g.xv,{variant:"small",multiline:!0,css:[D.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(F,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,t?(0,c.tZ)(P.G,{css:[D.l0.pb(16)],children:(0,c.BX)(L.hE,{disabled:y,name:"interpreterView",value:U.toString(),row:!0,onChange:function(){return X((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(L.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(L.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(P.G,{css:[D.l0.height(e.initialCompile?210:170),D.l0.colWithGap(8)],children:[U?null:(0,c.BX)(P.G,{css:[D.l0.maxWidth(400),D.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(P.G,{css:[D.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(g.xv,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(v.II,{disabled:y,id:"compile-sel",type:"text",value:k,placeholder:"Enter a command to compile the program",onChange:function(e){C(e.currentTarget.value)},css:{"&:disabled":{color:D.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[D.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(v.II,{disabled:y,id:"run-sel",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:D.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,c.BX)(g.xv,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(P.G,{css:[D.l0.color.accentNegativeDefault,D.l0.rowWithGap(4),D.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(P.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),U?(0,c.BX)(P.G,{css:[{maxWidth:400},D.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(g.xv,{variant:"small",css:[D.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==M.length?(0,c.tZ)(Q,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:S.setValue,onInit:S.setValue,options:M},M.length&&Boolean(z)&&{initialSelectedOption:M[0]}),{disabled:y})):(0,c.tZ)(v.II,{disabled:y,id:"entry-sel",type:"text",value:S.value,placeholder:"Choose entry point file",onChange:function(e){S.setValue(e.currentTarget.value)},css:[G.gU.filled,{cursor:"text"}]}),S.error?(0,c.BX)(P.G,{css:[{color:"var(--accent-negative-default)"},D.l0.rowWithGap(4),D.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(P.G,{children:S.error.message})]}):null]}):null,(0,c.tZ)(F,{css:[D.l0.color.accentPrimaryStronger,{fontWeight:D.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(P.G,{css:[D.l0.flex.row,D.l0.pt(16)],children:(0,c.tZ)(m.zx,{colorway:"primary",outlined:!0,type:"submit",text:y?"Saving...":"Done",disabled:y||!U&&(Boolean(w.error)||!w.value),css:[G.gU.filledAndOutlined,{fontWeight:D.TV.fontWeightMedium,color:D.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(P.G,{css:[D.l0.borderRadius(16),D.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(I.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ye.Z,{size:32}),(0,c.BX)(g.xv,{children:["Upgrading to ",s.Z.get(b).displayName]})]})})})]})}function we(){return(0,c.BX)(P.G,{children:[(0,c.tZ)(P.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[D.l0.pt(8),{fontSize:D.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function xe(){return(0,c.tZ)(P.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(h,{style:{color:"var(--foreground-default)"}})]})})}var ke=function(e){var n,t=(0,U.Z)(),o=(0,E.Z)(),s=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var n=(0,i.Z)({},C,e);return w.D(T,n)}(),1)[0],p=(0,N.Z)(),h=function(e){var n=(0,i.Z)({},C,e);return b.a(S,n)}({variables:{replId:t}}),v="Repl"===(null===(n=h.data)||void 0===n?void 0:n.repl.__typename)?h.data.repl:null,g=e.useReadFile(s,A.l),m=(0,a.Z)(u.useState(!1),2),y=m[0],Z=m[1],x=(0,a.Z)(u.useState(!1),2),k=x[0],R=x[1],I=g&&!g.error?g.content.toString("utf8"):"",D=(0,a.Z)(u.useState(""),2),G=D[0],P=D[1],_=(0,a.Z)(u.useState(""),2),B=_[0],L=_[1],X=(0,a.Z)(u.useState(!1),2),F=X[0],O=X[1],M=(0,a.Z)(u.useState(ee.Unknown),2),W=M[0],H=M[1],z=(0,a.Z)(u.useState(!1),2),V=z[0],j=z[1];u.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,n,t,r,i,o,a,c,u,f,h,v,g,m,b,w;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),n=e.config,e.error?[2]:(r=(0,ge.Cq)(null!==(t=n.run)&&void 0!==t?t:void 0),o=(0,ge.Cq)(null!==(i=n.compile)&&void 0!==i?i:void 0),a=Boolean(n.compile),c=Boolean(n.interpreter),[4,s.listFiles()]);case 2:return u=l.sent(),p.current?(null!=u.error||null==u.files||0===u.files.length||(f=u.files,h=ce(r,a,f),v=h.projType,g=h.runCommand,m=h.compileCommand,b=y?null!==r&&void 0!==r?r:g:null!==g&&void 0!==g?g:r,w=null!==m&&void 0!==m?m:o,Z(f.includes(me.E)),P(b),L(w),O(v!==ee.Unknown&&v!==ee.RegularRun),H(v),j(c)),[2]):[2]}}))})),e.apply(this,arguments)}I&&function(){e.apply(this,arguments)}()}),[I,p]),u.useEffect((function(){(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ImportEnded,replId:t})}),[t]);var q=(0,de.Z)();u.useEffect((function(){q(!1)}),[]);var Y=function(){var e=(0,r.Z)((function(e){var n,r,i,o,a,c,u,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,u=e.compileChanged,p=e.projType,(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:u,projType:p,replId:t}),h=function(e,n,t,r){var i=[];return r?(i.push((0,fe.xz)("interpreter")),i.push((0,fe.xz)("entrypoint")),i.push((0,fe.KQ)(e)),i.push((0,fe.X6)(e)),t?(i.push((0,fe.D3)(t)),i.push((0,fe.pi)(t))):(i.push((0,fe.xz)("compile")),i.push((0,fe.xz)("deployment/build")))):(i.push((0,fe.xz)("run")),i.push((0,fe.If)(n))),i}(n,i,r,o),v=f({variables:{input:{id:t}}}),[4,d.updateDotReplit(h)];case 1:return l.sent(),s.flush().then((function(){s.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return v&&g?(null===g||void 0===g?void 0:g.error)?(0,c.tZ)(Ze,{children:(0,c.tZ)(we,{})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(be,{initialLanguage:"",initialRun:G,initialCompile:B,hasInterpreter:V,fs:s,hasProcfile:y,isApplyingConfig:k,setIsApplyingConfig:R,onSubmit:Y,isFrameworkRecommended:F,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(xe,{})})}},23562:function(e,n,t){var r=t(74985),i=t(50959),o=t(85368),a=t(66656),l=t(39541),c=t(9829),u=t(61284),s=function(e){var n=e.reason;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(u.xv,{variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[n,"..."]})]})};function d(e){var n=e.reason;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(s,{reason:null!==n&&void 0!==n?n:"Importing"})})})}n.Z=(0,i.memo)(d)},11192:function(e,n,t){t.d(n,{o:function(){return g},x:function(){return f}});var r=t(57135),i=t(2272),o=t(96583),a=t(59091),l=t(51631),c=t(34489),u=t(4024),s=t(88688),d=t(4561);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.readFile(".env")];case 1:if((n=r.sent()).error===d.Df.NotFound)return[2,[]];if(n.error)throw n.error;return t=c.Z.parse(n.content.toString()),[2,Object.entries(t).map((function(e){var n=(0,i.Z)(e,2);return{name:n[0],value:n[1]}}))]}}))}))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=i.sent(),t=n.config,(r=n.error)===s.Yt.NotFound)return[2];if(r)throw new Error("Failed to get .replit config with Error: "+r);return[2,t]}}))}))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)((function(e){var n,t,r,i,c,s,d,f,p,v,g,m,y;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=null,t=null,r=null,i=null,c=null,[4,h(e)];case 1:if(!(s=o.sent()))return[2,{buildCommand:n,runCommand:t,ignorePorts:r,target:i,publicDir:c}];if(!s.deployment)return[3,2];switch(d=s.deployment,f=d.build,p=d.run,v=d.ignorePorts,g=d.target,m=d.publicDir,f&&(n=(0,u.Cq)(f)),p&&(t=(0,u.Cq)(p)),null!==v&&void 0!==v&&(r=v),g){case a.api.DeploymentConfig.Target.GCE:i=r?l.Vp.Worker:l.Vp.Server;break;case a.api.DeploymentConfig.Target.CLOUDRUN:i=l.Vp.CloudRun;break;case a.api.DeploymentConfig.Target.STATIC:i=l.Vp.Static}return m&&(c=m),[3,4];case 2:return[4,e.getRunConfig()];case 3:y=o.sent(),s.compile&&(n=(0,u.Cq)(s.compile)),y.run?t=(0,u.Cq)(y.run.run):s.run&&(t=(0,u.Cq)(y.run)),o.label=4;case 4:return[2,{buildCommand:n,runCommand:t,ignorePorts:r,target:i,publicDir:c}]}}))}))).apply(this,arguments)}},29316:function(e,n,t){var r,i;function o(e){return"string"===typeof e&&Object.values(r).includes(e)}function a(e){return null!==e&&"object"===typeof e&&"view"in e}function l(e,n){return e.view===n?null===e||void 0===e?void 0:e.data:void 0}t.d(n,{D1:function(){return o},Em:function(){return a},ap:function(){return i},kO:function(){return r},yF:function(){return l}}),function(e){e.Intro="intro",e.TierSelection="tier_selection",e.Deployment="deployment",e.DeploymentOptions="deployment_options",e.DeploymentInProgress="deployment_in_progress",e.Domains="domains",e.History="history",e.Analytics="analytics",e.Logs="logs",e.Settings="settings"}(r||(r={})),function(e){e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.CheckoutSuccess="checkout_success",e.ChangeView="change_view",e.GoBack="go_back"}(i||(i={}))},87331:function(e,n,t){t.d(n,{a:function(){return c}});var r=t(57135),i=t(96583),o=t(22011),a=t(30586),l="iVBORw0KGgoAAAANSUhEUgAAATcAAABeCAYAAABGrlMUAAAACXBIWXMAAAWJAAAFiQFtaJ36AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABiXSURBVHgB7Z1bcxNXtseXuGM4FTGVPOakzWuqDnISLoEHBHlJKtTBwxSvg8kHiO18gCCfDwBmPgCIvKZOEFNJpSpViZs8hEAYbOZ9cFN5SkgFpwowd83/397tacu9+yJ1y5K8flVtyeqL1N27/3vttfZeW0RRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEWJoCSKouRKtVqVx48fO1Hrtm3btuC67oIohbNJFEXJDSNsw81m807U+kePHk3hpSZK4XRd3A4cOOC8fPmygptfLpVKDpYyPn6F6/DZXfPqcdm5c+ec1nLKeuTkyZPieV4Fz8do1PoNGzbM//jjj5ekDWq1muC5Kj948KAStX5QnruuixvNctRsCxCvN7A4WPbgBvoXGa8Sfl1cXJT9+/d7eDuH7Rq4oVdxQz1RlAHn3r17fBnBs3Amaj2ehxm8tCVuEC5alyMbN278LurQEL2j3Ez6nELEbe/evb5l1vo5bhRrAw8C5Uro4tGaw0sVFt3xiJqK62jhjeKYFDsK3bQKnaIoceQqbhCpKoSHNU3Vto2xxvh2DosHQXOfP39+++bNm3X8X4fPooxaZdQcx4k4BE31uhG6Ot5PqcgpitJKLuJmRO0clkqG3bhtBRaYb6nt27dvAULlwuHauHHjRh0f1VOI5RjWj6nIKYrSygbpADYnISwzpv2fRdhWYQILo7TKcMx5iB1Fzbt+/foRfHaa72N2p8jNYL8JURRFkQ7EDUIyjiblrMQ0QTuAPrYaBQsidwoWWf3Jkycj+Px83D5YzlFsjQ9PUZR1TGZxo08MAnIRb6eNtVUkjrHkZhFlLcOKm0AzdhKiFxemZlN25p133qmKoijrlkziRosIAQE2QcekuzD6OsMo7LVr16bx/ojEN1MdhLlnTNNWUZR1SGpxo7Dl4VvrAAdWG5uc1Z9++mkOFt2RBAuOfryaCpzSj3Ckw44dOy6jDA9blo9EiSVVtDQkbI6sLWX8jsuw4I7ADzfHV3w2E9c8NgIniMBOiaL0CRxFABbMorRBouXWQ8IWUIYFd5m/ixYcmp+JoqUWnKKsPxLFjZaS9I6wBVBwGdQQ44NrJO1gBG5UFEVZF8Q2SxGlPCcZfWz0g0FIOPrg9suXL+kbW4CltcK0fvHiBaOgDt4G40odyU6V3UTQ3Lz09OnT01u2bKkmRW+x/iIsvjnt7Ksog49V3ODPGsNLqk6xRtAuYWlcv37dlYwEY0txnFOSod8crTE4Xq8wgwGOcd6MZoijbCzREVEUZaCJFDfjZ0vjo/KwTA8NDV3qJEWKsaTqsjTkiimRahCuUyl2ZdeUMf6Gx48fT8N6G0/R964Ci68Gi68mPY4ZZ1t+/vy5s2nTJq8IizP4DljT5SDZAb+rX5MqBokiw+fD1gMij56mz1pfRGbixcNfjxMXY6lNwUqblhgoVHww0Swth7OEsLBBwBbiCl1akcNx5yBUI2afWkpR5neP5C0WtHZNc3sFPM+ka0UoNA8fPjyF60UrdkUzG/9P5SHI7EqD63rYuANiXQJhFwPEonHz5k1XcsaIEX9TNWo9Ks5pmygFeclwzUZxzQ7LktXviIUuno81WWXa+8hzazQaZVTYka0nnK9rsutEfT+fnTGJx4l5tupBbsU46OtmUE96lFWWGzvKJgiKiwt7ulUYzIO5opAxcweimf76IEdbAD5nQso5WF4L+E6mMbpNEXj27Jk3Nze3YI4/ZgTLGq3lQ8rRCCyotN62bt2aRtzKJiBxRHIE525rVntYrOLGa/fo0aNxLByBEVgbkhfB8XFMjsF10h7biGuVC+7XuMmt5+adpIDCZslb1sQ9rUtLd4jgAf76668n6MoIrlkSUeeD/evY/1Kv+WGZcw3W8y5bZY1r5m9m2X3Ycj3TMpaijDSZUFaWsvv0JKvEDTf6nG3jqFqHEUhciHGIVBX7SgIulga2v5K2MHG7SqUyAtGq4d/xqG1QUBkFdSmKKLCupPPbVQNRlDWEY3QhPLVSQUPZcj6+I2uYiSWw1FDW+OD6Fk2HlUAwhnmMrRXtCzlYrBA3k2Koatl2Ejd/2fowTbBzKR+aoLZ3pQ0oWniZwO9biKrJ8Nnh0L9XJGVQAqLIY7myBhhritbjaJ5WWgAtcFQ2PH6liOPLksgdhiiwwmsrI2wWmHb7q6++GsE5fSH5d03yRQ6CfQqvRzWaPhisMLVQWMct200GPiM+NMy8wQcnhbB5HCbFtEXtClsYHIMWyKralU1TigXfQ7BcSU91LQbY87dyjK4tP36n0FrDsbsxVI7Nn4tFd5BmM/Tnn39mZcq02I4UB31ltzR11mCwbLmZCOmqh800RX1h40OD/2t4m2itYbtLcAZP5B2hosDht0qrBQexoPV25YcffpgziS9TNcOCJq10EZN8oBDhwbU5w3uU0VrzjLM9uFeOpBeRkrF63kAlVsh4R1i4f6aIpjmn0Hl45n+WAydDs3wXlrMoQ69oMzV/HsxICRbVdxl3aw4dkaMZ9/mPuEUJGzgf+NiyPDR5RfZsUOBQ+Pa0WD7DwRtTuFMV5pYmbeGk6RhtEgKwKc+I1Tycx39ICsdtcI+StuPxYXkzN54Lp7V1piPTtOX14XWuJhz2NNPHFyBwvK8XbCuNmLm4RlcQeW9EnUsogsjrPpqimxEF+wzO5480Ue5egueKKCtThMUGy3Dd2MPgbNQqLJM4/9uSAK535mACw4svs+eAbEobhMXtVItwedu3b6/xTdqHxhxnqht9yDgqAUGGcFcGJ7R6TlJaHqXic9Itk6JjtGu62LiSEQZ2UtwjuglOpz2+CfNzOY/fzpmYLpguJDbomL+bo8VTgiB9EXOP2MdyKql1wMijLFlyHh7+BoSOQQTeh/G478ZyFm6LubUOOmUhNODetW1jxL7E3gxRvHjx4nY/nbMNX9xMk3RFoaWvjIUm1BRNJIuwtXQdKZvlNo4xm2ZmKwYZ8LtPm24ixAn9jj8KcqJ3BM7L5pvyRaddv6S5f+cSNjvPyqpdNwGEbhb3bMQIg+08fIsHgnA1r4fDImzzTPnTzvUKhA7nMoFz4aiWOD9eCW6LL7Dtbu0A3H/4AQUodbXl8zrFxQyLSmuW19MIG0WNDmj4UeZNNG9M/tPsGTczW80z229SuvCWKQJfkR7GWG1O6+f0TUJ0RjoJuLCzs8R3XqU12LH/k8Lw6quvUtxOxOTSoyBcCAI8BTBrIpqudADP5f33359/8uTJWxLvc90FH+kFUfoOX9xQWKqhz7wgIhmyipJgE3YyaSOTyZeFM02/K3Y1SJwPIRQ9jd1urYmy2oylO9aJ6JguOXGjSXJ1E3z55ZccNXAZ5/NJzGbD7JAs+TOPcpZbVw024dACuM9jSrzAjWra+v4j6AqyJ/iAlgQLj83SiIJNqqQHtM28cE6SwLEGbyZk5E3Ak+JxZPV5n89DdGKauv7wmCL8n6b3/MWobjkBWPdxztYbm6JHi2ge4nc2YcGdEHtZoDX6qSh9RWC5Bf42Dw9L3V8R89C0UE/TRDDDnRzJznLuNhvMSNLy/xvS23DKwo4tG3a6Fvs15b1MtKbbxQgcxc21bLIrR+utWeRoCFpw5XL5fkLq7qpab/3FhharyG3DakuMjJnjVaV9/NxttpUQP1dCtW54kH4KEkPeecNgjeRA3ODowAKXYqHo/J9tJa03yQdmRCl0FIQRa7YCbN9D6+24KH0DLTcn+CcQqoxWm5e0kRlQ3hEc9C3247f2t3EkPZ50EfrA8hCdSqVSjvG1ed3ojhMIgtitt3IO1k4zTQWaE02Upbjv6rgcK91jA2r/wMpxTYS0KhmtthSTIFelc6o2H44RCy5y8ODBSpa+a4gU+8KIc+hGwV1u9ncKMw/HrHale8RZb3lYO4VbbQFGrD0pVqyVLrEhlNCvzlfLSIUo3MACYWJA20YUG8mJBw8exB3Lb14+e/Ys0/ft3LnTF7cM590Jbl5NxZYI9wpwP7oiBsR0CJ2LCerskc5wpbs0UeF/ZllXYq49UfqC8MD5q/yTdjhSIIZsHknMcKKQZVgoJrdU7EMfgWtSlDvShflYc25e2URjoZu9y40zPkgCGUUn15Vd6K9IF6FYo4Js2NbjPDsVa6VL+CMUmDQS0TsvaqRCDL4YDg0NOSgM1o04OQwsCSmawO+GwpdlrKj/4HTDaguuseQE75NlFMacdJknT57whZZzNWJ1meWqXYs1zRjHPKFYHzp0iElT5yxDzVTcOmAbiu6DNpLEPpqRtH1uA5qbOMgciy9UHFicctjScj5/WmZRqbWXf9SjR97WrVslD4ImZBSBv5CZZiUl+N1BDc0xhp4USHCN88AEE2wWcXX//v1tDTRuF5MV1gruCQXBk+wsrEVutc2bN9N6o6hGiZsjStuYfgJuhl1kcUZK7Qy238DJQJhP3nyQ1mpbrk3NNH3WfmUm0aQrHULLJ6kDZ4q88WEyB1A6JGvNY4XWsvQRuC+7pA0CV0O3oSUaSv+0ihQBNKUHYLR0IbCI0voTKDQtHzGSad2+tZNtO6DZOR23ngWulG7GLB+I8hR/c0gQ/5ACwffclZzolh9zrYkTmCJBS6PZ4agXpQfYQOslsIjSNunCNaqZnMNhvizb9viOunRmuczHdQcwIlWT9Fw2E8osC2KEYOdKL88SpCiDSOuMLo6kICxuQVeSpCYhh7Zg2/uSEe7DMYVx23AqtSxWG7b9pFUQ8dmsFIdaAYrSZZbFjQ97qY3EjaEuGONxTVNaiLDymF5mXtIf+z6W2CwQzP6KbVKnpAlGCLQKYp7NxgjyFjcvYX2zhxYJvWbFkbWj9xICKplYzsQb16xMCWdzGkMovW6yga7COPCPQkjOhIQlqhDxYeD8qB/FCRvFdHFxcULSR1IuclgS98NvPRuKDHv91GzEvVqIiUBfwXlNSA+xY8eOdsW9zHtlEkx2jadPnzLp5v/Y1uvsWP3BJumQsNOXU/2hIDLyai3MpmCchshNwYo6bjoNO2Y1rbt/MnqbJDbBzN54m5SBNmB2+/btfnP04cOHY/iecN82V/oIRqBtk+Dger7xwQcfeLYKps8om0rXky7Cfpm2yauL9s0q+dGWuG3cuHE56y07z4ZysdN6O3Ps2LFJJjWMw4jcebNkIhA2kyI6DTMQthNmNMJwa2IATjAifYYZEVCN+LzCiYtlQPx8Jkt0XboEK4VGo1E283OsYq0iuEp2EqeItzAcvGETKbyCTaJff/31z3H+t05oETYnYXOq7vT169f9JIfvvvsuJ8VYNanvtm3bujrEJyesPfcTxuD2ExzLebibViibwJs3b7aNWGEXkdw6YyvF0q64OcEb00nXC6/kLEkUoLwFLouwMRiBB+MEhG0y2Be+Pk5l1vrg1/tx8o/Q6IpVwLI+MyDNUnLcWKJd4dmzZxRUayYTlCFXlL5gWdxMM9FNud+e8MMTUZuVKUB5CRy/i1YXjncEheuWxAubb60NDQ3tvnbtmi8ARhRrEjGtXjczaORJQiaOajcFgdfXtuRAGZZolvHCbcPfyxE3eGsTN+/mzZtqufUJK3xuHEmAB6aaYr9q2K/DTLgR/cwcI3BHUWjm24l4UdS438zMzC6IGnPYT1jGvjbN5LyXsJwPR7OMKJ6xTEc336/zM9Ji3r9/P4U5cu5N+j5Pnjw5+fnnn0uR4N6WEiLt89IZzAk3gXO9AitcCobzpNZixle7onREOzPO01p52cZg+xXixpEEKEQUASdpR+PXcfmeKWLggL0YsRkF7hYetEk8BHwQm0kiF6rtSxC18uLiIh/e8YjIYBDFcLFcgaV2Kdy8NKlrSs+fP2dTNLJrRBczvBYCm6a4vuOWdROe532GCmK2qCaqETZbxUEobLulc2i5TeD7povqFhK4PHDd/mrZJDalupKOdmec/68j2SuWVT63tA88atPx4KFJGBzPDBYXOfejrZnKz2Bl+B1yaQWwqwa2/w7Lv7Dvp1gYnW2aEQ4zWKY5dyYioH9isADL+bCwmeMMQ9jYhLX1+ZrtVobXomiZt3UV8B39P61eKYCQ/9MmbBSDmuQDTalP+X1FCDXLnjmXb2M2c7V/W3+xqiuIsd7YxKwm7LuiaUpRTGjSjnE9rLgpNqcgTMtWHAXt7t27r3A9jrPLNAsaZrKOBY6C2LFjh5fk+D927Jjcu3ePO4+bjsJWvxPWnZABIOG6D+PafrF3796jH374YTMvYQgJW5wYMC3WZ5Ifu/h9KANv4/vv52XB8VwQ3d8VFUUPwey8n4jSV0T2c0shVIR92iZqS/hWBETLk/gmLTtGsvl6JiRy/NwzhTVzYsLAEmQTFIV0FMc/a74nbrfpQamFzXWfFruFWoUF9x0suBN5iAIrkN9++y0pYp2n1RZmGNb8tzj2X9r144Zh2cF5/AlCTZG2dZ+h+6OuiQ/6j0hxS/HA+HA8KQoYtwtbbxclmWWRQ2F1EaH6DN/noqnLaFWTgvfaa6/Jm2++KYG1EQQX+DmsM+bcovPXt/rwSktzPOXYWM5a3te+tlZwLabg82SEb9iySRXX6R+4Pu/hgfYkhe+zFV7/b775pvTLL79UIJaxVo4szYqWp9UWZoQWHM6n43OB+yPpXIinvrb+xDpCgf3D9u3bdxg3dkTs+CMSUMgmWcBMk5YO2bSRDQfLGERtDK9MmjkHobqKYMVtFLwFiBjHovrCySYwCnQZTnJ/zgYUSuaeO24bJmOhWdSs5WsJfZ5mzO4tNustm9HauoPKpM6H9eDBg96WLVuarCxsEVWKAKLJDB75wR34MMdTTPvIyiPPJpwnq8VnxbkEIscVNqFrDVSlPBeWl9Pqa+tPYodfsROsaX7YLAI/KofC/3cUnhkWLKY2SnjIbDhcwmM+UXil9T3WSwd8MqgF9fXXX4fue+/h7bcJ156+zzGO30XF1MA+/zx06NAcHnYxLgL/WrPCMNFq+kGZvv2vKSzjeVqHOVYevriYrC/DtnOhyLE7EsrG9zgXjyuYKjw4F76nhc+hXDgeLdzDKc6FAawpVPLar61PiVUKCgGE6kRSHjZYXheCSJZJbdRzzldTUKdlQKH15TjOLM7zvWa6vHn0T9Zxr27BX/k7/r9jItSszO7gvv+Oe/o7tmGz7eOUwna0gMqDZfAvCec0xnOhNcdzYZQ8fC5Pnz79netwrhcobmmF7caNGwPlvlhvJJpBdKTSgpP4nFzsz/YFamzfYmDztJf6kJmCWpMBhwKHqPIs7tfbkqHzrHnYHVmKkHNxStly+90pSNh8jGgzYWniOZnfzeBAVdo7F5bzSRW2/idVG48BhhSZdCuoKc+yY6fZp2YErt1EhbmwXoQtwMya7ltRpitNkdefx2bGlbeLbO4b0eZUe2x2dzriwQbPZR5W4lvsNylK35PagUVrLEXtSf/HBfg9SnTgUuBME3UtBK653oQtwAR3vKGhITbXPpKle5bnPQg6VE8GGVekYMw5MVixO+dKs2lS2U/h2G9pl4/BIZN3njfezGcQK3D0edAHx57f165dm8Y+u6W4GncVprB+tB6FLUwQwTaCQJHj6I5w+u8sBPvNUAiYmGAtLBxjmbJVsDtkmbZ1PoGo8Vxwnaa6INLt/taijjPQZE5WSYugUqm8tXXrVobROa4xqh9GhVFWROLYcXQWhcbDZ7sPHDhQg9n/cRuR1CzQ53RiLaKiOLdLUZMvr3WCQ9M9oo57UTeD3Kv4rRyvuccyq3oYj9lnmdAT+3zfC5aNOR9mGx7D+wlEfauylMkj9nxMcgX+/tscl1tEJJQtlkajcX/Lli1RPrsmyqbbzePEMM+WTdSxOZexFES7M863Q+oOYlFArBiKZ7YOa1cRXkBj8vudLTm/qBkaFaQX7+g3hL6H+dv+xqawKKkxnaP9PoQSSvfOP92oIMx8FrTEovqcsSvI7iy/wwwNY7ePMqL4Zbwu4HUB1t7CoPVvVOLpWFhgxZVRcCaMyNmO5xmRWzGmlOIIoftffD7awe/xe8SzM6d2tuw/8hY3RQnIxWoiKS2yFSLHDyh0KOC0HNiU9ZsWeK1EhO9bj8f9G9jubyY7htKHqLgpRZGbuAVQ5GTJp/NxyP/R+j2+yKEZeRWLPwyIhTyctSIQPByHWX2ZNskJ1nGUAqzFaW1m9D8qbkpR5C5uYSh0xho73mKNhb+XqY0aiFj9He/9fnRFJSRUeg8VN6UoOp63NI7W6fv27t1bMRYYX//bWGRcTi0uLp7C/9/DKqtLl+epVBRl8ChU3Fox3Qi4NERRFKVAOkqxoSiK0quouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpB0dYSCorRiphHkmOKoTM2abVZRFEVRFEVRFEVRlH7k30ucc3EstpUHAAAAAElFTkSuQmCC";function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e){var n,t,r,c,u,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.fs,t=e.language,r=void 0===t?"python3":t,[4,n.createDir(".lesson")];case 1:return(c=i.sent()).error?[2,c]:[4,n.writeFile(".lesson/assets/logo.png",o.Z.from(l,"base64"))];case 2:return(u=i.sent()).error?[2,u]:[4,n.writeFile(".lesson/lessonplan.md",o.Z.from((0,a.G)({language:r})))];case 3:return(s=i.sent()).error?[2,s]:[4,n.writeFile(".lesson/instructions.md",o.Z.from((0,a.K)({language:r})))];case 4:return(d=i.sent()).error?[2,d]:[2,{error:null}]}}))}))).apply(this,arguments)}},30586:function(e,n,t){function r(e){var n="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(n,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(n,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(n,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}function i(e){var n=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(r(n),"\n  ")}function o(e){var n=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(r(n),"\n  ")}t.d(n,{G:function(){return i},K:function(){return o}})},9493:function(e,n,t){t.d(n,{Z:function(){return v},e:function(){return g}});var r=t(74985),i=t(63128),o=t(61284),a=t(85368),l=t(82568),c=t(39541),u=t(87978),s=t(13233),d=t(87076),f=t(77806),p=(0,l.X)({surface:[c.l0.borderRadius(8),c.l0.p(8),c.l0.flex.row,c.l0.rowWithGap(8),c.l0.align.center]});function h(e){var n=e.value,t=(0,s.Z)();return(0,r.tZ)(d.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(n).then((function(){t.showConfirm("Copied")}))},children:(0,r.tZ)(f.Z,{})})}function v(e){var n=g(e.filePath,e.keyName);if(!n)return null;var t=n.import,l=n.access;return(0,r.BX)(a.G,{css:c.l0.colWithGap(8),children:[t?(0,r.BX)(i.T,{elevated:e.elevated,css:p.surface,children:[(0,r.tZ)(h,{value:t}),(0,r.tZ)(o.xv,{variant:"small",css:[c.l0.font.code,c.l0.flex.grow(1)],children:t})]}):null,(0,r.BX)(i.T,{elevated:e.elevated,css:p.surface,children:[(0,r.tZ)(h,{value:l}),(0,r.tZ)(o.xv,{variant:"small",css:[c.l0.font.code,c.l0.flex.grow(1)],children:l})]})]})}function g(e,n){if(!e)return null;switch((0,u.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},39187:function(e,n,t){t.d(n,{tr:function(){return L}});var r=t(57389),i=t(81962),o=t(74985),a=t(50959),l=t(4561),c=t(39541),u=t(85368),s=t(43312),d=t(48712),f=t(83005),p=t(87978),h=t(57913),v=t(30771),g=t(45285),m=t(28681),y=t(82568),Z=t(28229),b=t(66656),w=t(68973),x=t(99964),k=t(63128),C=t(17807),S=t(88541);function T(e){var n=e.node;return n.type===l.Tv.Directory?(0,o.tZ)(d.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:n.path})}var E=(0,w.$)(["menuY","menuX"]),R=E.cssVars,I=E.styleTokens,D=(0,y.X)({root:[c.l0.maxHeight(400),c.l0.position.absolute,c.l0.borderRadius(8),c.l0.shadow(3),{border:"1px solid",borderColor:c.TV.outlineDefault,top:I.menuY,left:I.menuX,"& > div":[c.l0.maxHeight(400)]}]}),G=(0,s.iv)([C.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),P={button:(0,s.iv)([c.l0.reset.button,c.l0.p(2),c.l0.rowWithGap(4),c.l0.align.center,G]),text:(0,s.iv)({fontSize:c.TV.fontSizeSmall})},_={opacity:1};function B(e){var n,t=function(){var e,n=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();n&&f({x:n.x+"px",y:n.y+n.height+4+"px"})},l=e.node,c=e.openFile,s=(0,a.useState)(!1),d=s[0],f=s[1],h=(0,a.useRef)(null),v=(0,x.Z)((function(e){var n;d&&((0,i.Z)(e.target,HTMLElement)&&(null===(n=h.current)||void 0===n?void 0:n.contains(e.target))||f(!1))}),[d]),g=(0,a.useId)(),m=(0,a.useId)(),y=(0,p.Il)(l.path)||".",Z=(0,p.UO)(l.path);return(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{innerRef:h,tag:"button",id:g,style:d?_:void 0,"aria-haspopup":"true","aria-expanded":Boolean(d),"aria-controls":m,css:P.button,onClick:function(){d?f(!1):t()},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":t()}},children:[(0,a.cloneElement)((0,o.tZ)(T,{node:l}),{size:12}),(0,o.tZ)(u.G,{css:P.text,children:Z})]}),d?(0,o.tZ)(b.h,{children:(0,o.tZ)(k.T,{id:m,css:D.root,innerRef:v,style:(n={},(0,r.Z)(n,R.menuX,d.x),(0,r.Z)(n,R.menuY,d.y),n),onKeyDown:function(e){var n;"Escape"===e.key&&(f(!1),null===(n=h.current)||void 0===n||n.focus())},children:(0,o.tZ)(A,{openFile:c,parentPath:y,currentPath:l.path})})}):null]})}function A(e){var n=(0,g.Z)().fs,t=(0,Z.Z)().preferences,r=(0,m.T)(!0),i=(0,a.useCallback)((function(e){return!r(e.filename)}),[r]),l=(0,S.P5)({controlName:"flag-filetree-menu-ultra",logFlagToAnalytics:!1}),c=(0,v.pR)({fs:n,filter:i,focusedPath:e.currentPath,fontSize:t.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(n){var t=n.path;e.openFile(t)},readOnly:!l,alwaysShowCreateRow:!0});return(0,o.tZ)(v.s8,{store:c.store})}var U=(0,s.iv)([c.l0.flex.row,c.l0.align.center,c.l0.height("100%"),c.l0.px(2)]),L=(0,a.memo)((function(e){var n=e.path,t=e.onFileClick,r=e.children,i=function(e){var n=e.split("/"),t=n.length;return n.map((function(e,r){return{type:r===t-1?l.Tv.File:l.Tv.Directory,path:n.slice(0,r+1).join("/")}}))}(n);return(0,o.BX)(u.G,{css:U,children:[i.map((function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(B,{node:e,openFile:t}),e.type===l.Tv.Directory?(0,o.tZ)(h.Z,{size:12}):null]},function(e){return CSS.escape(e.path)}(e))})),r||null]})}))},79752:function(e,n,t){t.d(n,{$E:function(){return _},H4:function(){return N},HK:function(){return B},Mp:function(){return F},Qc:function(){return D},VY:function(){return P},h4:function(){return R}});var r=t(57135),i=t(96583),o=t(74985),a=t(39541),l=t(85368),c=t(43312),u=t(39187),s=t(50959),d=t(92508),f=t(90171),p=t.n(f),h=t(18171),v=t(94452),g=t(77806),m=t(60566),y=t(49747),Z=t(15544),b=t(63740),w=t(13716),x=t(45285),k=t(4629),C=t(49085),S=t(4853),T=t(54873),E=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function R(e){return"/replEnvironmentDesktop"===p().pathname?(0,o.tZ)(l.G,{css:E,children:e.children}):null}var I=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function D(e){return(0,o.tZ)(l.G,{css:I,children:e.children})}var G=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative]);function P(e){return(0,o.tZ)(l.G,{css:[G,e.children&&a.l0.center],children:e.children})}function _(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function B(e){var n=e.path,t=e.performPaneOperation,r=(0,s.useCallback)((function(e){t({operation:"replace",pane:_(e)})}),[t]);return(0,o.tZ)(R,{children:(0,o.tZ)(D,{children:(0,o.tZ)(u.tr,{path:n,onFileClick:r})})})}function A(e){return{match:v.pl,data:{label:"Copy file path",icon:(0,o.tZ)(C.Z,{}),type:"action",run:function(){(0,m.Z)(e)}}}}function U(e){return{match:v.pl,data:{label:"Copy link",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){var n=(0,y.dr)({path:e});(0,m.Z)(n)}}}}function L(e,n,t){return{match:v.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(g.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,k.Z)(e,n)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return t(r),[2]}}))}))()}}}}function N(e,n){return{match:v.pl,data:{label:"Download",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:return(t=r.sent()).error?[2,{type:"error",message:"Error downloading file"}]:[4,(0,S.Z)(e,t.content)];case 2:return r.sent(),[2]}}))}))()}}}}function X(e,n){return{match:v.pl,data:{label:"Delete",icon:(0,o.tZ)(T.Z,{}),type:"action",run:function(){n(e)}}}}function F(e){var n=e.path,t=e.performPaneOperation,r=(0,x.Z)(),i=(0,w._o)();return(0,h.Z)((function(){return n?[A(n),U(n),L(n,r.fs,(function(e){t({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})})),N(n,r.fs),X(n,i)]:null}),[n,r.fs,t,i])}},6449:function(e,n,t){t.d(n,{T:function(){return f},c:function(){return h}});var r=t(74985),i=t(50959),o=t(45285),a=t(4561),l=t(82568),c=t(39541),u=t(25198),s=t(85368),d=t(76735);function f(e){var n=(0,o.Z)().fs,t=(0,i.useState)(null),r=t[0],a=t[1];return(0,i.useEffect)((function(){if(e){var t=n.watchTextFile(e,{onError:function(e){a(e)}});return function(){t(),a(null)}}}),[n,e]),r}var p=(0,l.X)({root:[c.l0.coverContainer,c.l0.center,c.l0.p(16)]});function h(e){var n=function(e,n){switch(e.code){case a.Df.NotFound:return'"'.concat(n,"\" doesn't exist");case a.Df.IsDirectory:return'"'.concat(n,'" is a directory');case a.Df.DiskQuotaExceeded:return"This Repl ran out of disk space";case a.Df.InvalidPath:return'"'.concat(n,'" is not allowed');default:return'An error occurred reading "'.concat(n,'"')}}(e.error,e.path);return(0,r.tZ)(s.G,{css:p.root,children:(0,r.tZ)(s.G,{children:(0,r.tZ)(u.E,{icon:(0,r.tZ)(d.Z,{}),colorway:"orange",text:n})})})}},6069:function(e,n,t){t.d(n,{Z:function(){return Tr}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=t(50959),c=t(4561),u=t(12583),s=t(45285),d=t(19065),f=t(72006),p=t(4405),h=t(9970),v=t(48306),g=t.n(v),m=t(97754),y=t.n(m),Z=t(57389),b=t(18171),w=t(62946),x=t(53397),k=Symbol("filetree"),C=t(87978),S=(0,w.cn)({flags:{flagFiletreeMultiselect:!1},preferences:{multiselectModifierKey:"altKey"},readOnly:!1,openFile:function(e){},shouldHideFile:function(){return!1},sortNode:function(e,n){return(0,C.x$)(e,n)},onError:function(){},onAction:function(){}}),T=function(e){var n=(0,b.Z)((function(){return(0,x.kv)(S,(function(n){return Boolean(n.flags[e])}))}),[e]);return(0,w.Dv)(n,k)},E=(0,w.cn)((function(e){return e(S).preferences})),R=(0,w.cn)((function(e){return e(S).readOnly})),I=function(){return(0,w.Dv)(R,k)},D=(0,w.cn)((function(e){return e(S).watchDir})),G=(0,w.cn)((function(e){return e(S).openFile})),P=(0,w.cn)((function(e){return e(S).openShell})),_=(0,w.cn)((function(e){return e(S).shouldHideFile})),B=(0,w.cn)((function(e){return e(S).deleteDir})),A=(0,w.cn)((function(e){return e(S).deleteFile})),U=(0,w.cn)((function(e){return e(S).moveFile})),L=(0,w.cn)((function(e){return e(S).moveDir})),N=(0,w.cn)((function(e){return e(S).readFile})),X=(0,w.cn)((function(e){return e(S).onError})),F=(0,w.cn)((function(e){return e(S).onAction})),O=(0,w.cn)((function(e){return e(S).onFileDragEnd})),M=(0,w.cn)((function(e){return e(S).onFileDoubleClick})),W=(0,w.cn)((function(e){return e(S).sortNode})),H=t(52624),z=(0,w.cn)([]),V=(0,w.cn)((function(e){var n=e(z),t=n.slice(0,5).map((function(e){return e.path})).join(", ");return n.length>5?"".concat(t," and ").concat(n.length-5," more ").concat((0,H.H)(n.slice(5))):t})),j=(0,w.cn)((function(e){var n=e(z),t=(0,H.H)(n);return 1===n.length?t:"".concat(n.length," ").concat(t)})),q=(0,w.cn)([]),Y=(0,w.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=e(A),i=e(B),a=e(X),o.label=1;case 1:return o.trys.push([1,3,4,5]),n(q,t),[4,Promise.all(t.map((function(e){return i&&r?e.type===c.Tv.Directory?i(e.path).then((function(e){var n=e.error;if(n)throw n})):r(e.path).then((function(e){var n=e.error;if(n)throw n})):Promise.resolve()})))];case 2:return o.sent(),[3,5];case 3:return l=o.sent(),a("Something went wrong trying to delete files: ".concat(l)),[3,5];case 4:return n(q,[]),[7];case 5:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),K=t(83344),$=(0,w.cn)([]),Q=(0,w.cn)([]),J=(0,w.cn)([]),ee=(0,w.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=e(U),i=e(L),a=e(X),o.label=1;case 1:return o.trys.push([1,3,4,5]),n($,t),[4,Promise.all(t.map((function(e){var n=e.src,t=e.dst;return r&&i?n.type===c.Tv.Directory?i(n.path,t.path).then((function(e){var n=e.error;if(n)throw n})):r(n.path,t.path).then((function(e){var n=e.error;if(n)throw n})):Promise.resolve()})))];case 2:return o.sent(),[3,5];case 3:return l=o.sent(),a("Something went wrong trying to move files: ".concat(l)),[3,5];case 4:return n($,[]),[7];case 5:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),ne=(0,w.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,u,s,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=t.moveOps,i=t.dstConflicts,a=e(A),l=e(B),u=e(X),o.label=1;case 1:if(o.trys.push([1,3,,4]),s=i.some((function(e){return r.some((function(n){var t=n.src;return(0,K.yr)(e.path,t.path)}))})),s)throw new Error("Cannot overwrite ancestor folder with the same name");return[4,Promise.all(i.map((function(e){return l&&a?e.type===c.Tv.Directory?l(e.path).then((function(e){var n=e.error;if(n)throw n})):a(e.path).then((function(e){var n=e.error;if(n)throw n})):Promise.resolve()})))];case 2:return o.sent(),n(ee,r),[3,4];case 3:return d=o.sent(),u("Something went wrong trying to overwrite files: ".concat(d)),[3,4];case 4:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),te=(0,w.cn)((function(e){var n=e(q),t=e($).map((function(e){return e.src}));return(0,h.Z)(n).concat((0,h.Z)(t))})),re=(0,w.cn)((function(e){return e($).map((function(e){return e.dst}))})),ie=(0,w.cn)((function(e){var n=e(_),t=e(te);return function(e){var r=e.path;return!n(r)&&!t.find((function(e){return e.path===r}))}})),oe=t(92153),ae=(0,w.cn)({}),le=(0,w.cn)({}),ce=(0,w.cn)(null,(function(e,n,t){var r=e(ae),i=(0,oe.ZP)(r,(function(e){delete e[t]}));n(ae,i)})),ue=(0,w.cn)(null,(function(e,n){var t=e(ae),r=Object.values(t),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){(0,l.value)()}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}n(ae,{})})),se=(0,w.cn)(null,(function(e,n,t){var r=t.path,i=e(D),o=e(ae);if(!o[r]&&i){var a=i(r,{onChange:function(t){var i=e(le);n(le,(0,p.Z)((0,f.Z)({},i),(0,Z.Z)({},r,(0,p.Z)((0,f.Z)({},i[r]),{children:t}))))},onMoveOrDelete:function(){n(ce,r);var t=e(le),i=(0,oe.ZP)(t,(function(e){delete e[r]}));n(le,i)},onError:function(t){var i=e(le),o=(0,oe.ZP)(i,(function(e){e[r]=(0,p.Z)((0,f.Z)({},e[r]),{error:t})}));n(le,o)}}),l=(0,oe.ZP)(o,(function(e){e[r]=a}));n(ae,l)}})),de=function(){var e=(0,w.b9)(se,k);return(0,b.Z)((function(){return function(n){return e({path:n})}}),[e])},fe=function(){var e=de(),n=(0,w.b9)(ue,k);l.useEffect((function(){return e(u.Ql),function(){n()}}),[n,e])},pe=function(e){var n=(0,b.Z)((function(){return(0,x.kv)(le,(function(n){return n[e]}))}),[e]),t=(0,w.Dv)(ie,k),r=(0,w.Dv)(W,k),i=(0,b.Z)((function(){return(0,w.cn)((function(i){var o,a=i(n);if(a){var l=i(re).filter((function(n){var t,r=(0,C.Il)(n.path)||u.Ql,i=(0,C.UO)(n.path),o=r===e,l=null===(t=a.children)||void 0===t?void 0:t.some((function(e){return e.filename===i}));return o&&!l})).map((function(e){return{filename:(0,C.UO)(e.path),type:e.type,path:e.path,isOptimistic:!0}}));return(0,p.Z)((0,f.Z)({},a),{children:(0,h.Z)(l).concat((0,h.Z)((null===(o=a.children)||void 0===o?void 0:o.map((function(n){var t=n.filename;return{filename:t,type:n.type,path:e===u.Ql?t:"".concat(e,"/").concat(t)}})))||[])).filter(t).sort(r)})}}))}),[n,e,t,r]);return(0,w.Dv)(i,k)},he=(0,w.cn)(null,(function(e,n,t){var r,i=t.path,o=t.expanded,a=e(le);(null===(r=a[i])||void 0===r?void 0:r.expanded)!==o&&(o&&n(se,{path:i}),n(le,(0,p.Z)((0,f.Z)({},a),(0,Z.Z)({},i,(0,p.Z)((0,f.Z)({},a[i]),{expanded:o})))))})),ve=(0,w.cn)(null,(function(e,n,t){var r,i=null===(r=e(le)[t])||void 0===r?void 0:r.expanded;n(he,{path:t,expanded:!i})})),ge=(0,w.cn)(null,(function(e,n,t){if(null!=t){var r=t.split("/").slice(0,-1);r.map((function(e,n){return r.slice(0,n+1).join("/")})).forEach((function(e){n(he,{path:e,expanded:!0})}))}})),me=function(e){var n=(0,w.b9)(he,k);return{expand:l.useCallback((function(){n({path:e,expanded:!0})}),[e,n]),collapse:l.useCallback((function(){n({path:e,expanded:!1})}),[e,n])}};var ye=t(26289),Ze=t(39133),be=t(48712),we=t(13354),xe=t(83005),ke=t(34495),Ce=t(76756),Se=t(17807),Te=t(39541),Ee=t(28737),Re=t(82568),Ie=t(88541),De="--selected-border-color",Ge={selectedBorderColor:"var(".concat(De,")")},Pe=(0,Re.X)({nodeContainer:[Te.l0.height(Te.TV.space32),Te.l0.cursor.pointer,Te.l0.display.flex,Te.l0.align.center,Te.l0.color.foregroundDimmer,Te.l0.borderRadius(8),Te.l0.fontSize(Te.TV.fontSizeDefault),{transition:"initial"}],nodeContainer2:[Te.l0.height(Te.TV.space24),Te.l0.cursor.pointer,Te.l0.display.flex,Te.l0.align.center,Te.l0.color.foregroundDimmer,Te.l0.fontSize(Te.TV.fontSizeDefault)],interactiveCorrection:[Te.l0.borderRadius(4),{transition:"none"}],selected:[Te.l0.color.foregroundDefault,{backgroundColor:Ge.selectedBorderColor,border:"1px solid ".concat(Ge.selectedBorderColor)}],active:{border:"1px solid "+Ge.selectedBorderColor},nodeAndPrevNodeSelected:{borderTopRightRadius:0},nodeAndPrevSiblingSelected:{borderTopLeftRadius:0},nodeAndNextNodeSelected:{borderBottomRightRadius:0},nodeAndNextSiblingSelected:{borderBottomLeftRadius:0}});function _e(e){var n=e.active,t=e.selected,r=void 0!==t&&t,o=e.isPrevNodeSelected,c=void 0!==o&&o,u=e.isNextNodeSelected,s=void 0!==u&&u,d=e.isPrevNodeSameLevel,f=e.isNextNodeSameLevel,p=e.children,h=e.onClick,v=e.onDoubleClick,m=e.onAuxClick,b=e.interactive,w=void 0===b||b,x=e.className,k=e.actions,C=e.onAction,S=l.useRef(null),T=(0,i.Z)(l.useState(!1),2),E=T[0],R=T[1],I=l.useRef(null),D=(0,Ce.N)();l.useLayoutEffect((function(){n&&S.current&&(D.getMonitor().isDragging()||(0,ke.Z)(S.current,{behavior:"smooth",scrollMode:"if-needed"}))}),[n,D]);var G=(0,Ee.F)().isDarkColorScheme?Te.TV.backgroundHigher:Te.TV.greyDimmest,P=r&&c,_=P&&d,B=r&&s,A=B&&f,U=(0,Ie.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1}),L=w?Se.gU.nofill:Te.l0.cursor.default;return(0,a.BX)("div",{ref:S,onClick:h,onDoubleClick:v,onAuxClick:m,style:(0,Z.Z)({},De,G),css:[U?Pe.nodeContainer2:Pe.nodeContainer,r?Pe.selected:L,U&&Pe.interactiveCorrection,n&&Pe.active,P&&Pe.nodeAndPrevNodeSelected,_&&Pe.nodeAndPrevSiblingSelected,B&&Pe.nodeAndNextNodeSelected,A&&Pe.nodeAndNextSiblingSelected],onContextMenu:function(e){I.current&&(e.preventDefault(),I.current.open())},className:g().dynamic([["4c1359979efd5c22",[n||r||E?"flex":"none",n||r||E?1:0]]])+" "+(y()(x,"node",{active:n,interactive:w})||""),children:[p,k&&k.length&&C?(0,a.tZ)("div",{className:g().dynamic([["4c1359979efd5c22",[n||r||E?"flex":"none",n||r||E?1:0]]])+" actions",children:(0,a.tZ)(Ze.ZP,{ref:I,onOpenChange:R,actions:k,onAction:C,isActive:n||r})}):null,(0,a.tZ)(g(),{id:"4c1359979efd5c22",dynamic:[n||r||E?"flex":"none",n||r||E?1:0],children:".actions.__jsx-style-dynamic-selector{display:".concat(n||r||E?"flex":"none",";opacity:").concat(n||r||E?1:0,";-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto;-webkit-transition:opacity;-moz-transition:opacity;-o-transition:opacity;transition:opacity;height:100%}.is-touch-device .actions.__jsx-style-dynamic-selector,.node.__jsx-style-dynamic-selector:hover .actions.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;opacity:1}")})]})}var Be=(0,Re.X)({container:[Te.l0.display.flex,Te.l0.align.center,Te.l0.justify.spaceBetween],icon:[Te.l0.display.flex,Te.l0.center,{flex:"0 0 auto",width:24,height:24}],icon2:[Te.l0.display.flex,Te.l0.center,{flex:"0 0 auto",width:16,height:16}],gutter:[Te.l0.display.flex,Te.l0.align.center,Te.l0.justify.end,{flex:"0 0 auto",width:3}]});function Ae(e){var n=e.expanded,t=e.type,r=e.path,i=e.gutter,o=void 0===i||i,l=null;l=t===c.Tv.Directory&&n?(0,a.tZ)(we.Z,{size:16}):t===c.Tv.Directory?(0,a.tZ)(be.Z,{size:16}):(0,a.tZ)(xe.Z,{path:r,size:16});var u=(0,Ie.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,a.BX)("div",{css:Be.container,children:[o?(0,a.tZ)("div",{css:Be.gutter}):null,(0,a.tZ)("div",{css:u?Be.icon2:Be.icon,children:l})]})}var Ue=(0,Re.X)({wrapper:[Te.l0.fontSize(Te.TV.fontSizeDefault),Te.l0.pl(8),Te.l0.pr(4),{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],wrapper2:[Te.l0.fontSize(Te.TV.fontSizeSmall),Te.l0.pl(6),Te.l0.pr(4),{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],span:{userSelect:"none"}});function Le(e){var n=e.children,t=e.title,r=(0,Ie.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,a.tZ)("div",{title:null!==t&&void 0!==t?t:"string"===typeof n?n:void 0,css:r?Ue.wrapper2:Ue.wrapper,children:(0,a.tZ)("span",{css:Ue.span,children:n})})}var Ne=t(60566),Xe=t(2041),Fe=t(13233),Oe=t(60141),Me=t(10507);function We(e){var n=e.path,t=(0,Me.tv)(n);return 0===t.length?null:(0,a.tZ)(Oe.Z,{activeUsers:t})}var He=t(85368),ze=t(61284),Ve=t(48330),je=t(43746),qe=l.createContext({fs:{},pendingUploads:[],uploadFiles:function(){},duplicateFile:function(){throw new Error("duplicateFile not implemented")}});function Ye(){return l.useContext(qe)}var Ke=t(49747),$e=t(87331),Qe=t(10628);function Je(e){var n=e.path,t=e.dirInfo,r=e.filterNode,i=e.sortNode,o=e.isRootPath,a=o(n)?[]:[{path:n,type:c.Tv.Directory}],l=t[n];if(!l)return a;var s=l.children,d=l.error;return!l.expanded&&!o(n)||d||null===s||void 0===s||s.map((function(e){var t=e.filename;return{filename:t,type:e.type,path:n===u.Ql?t:"".concat(n,"/").concat(t)}})).filter(r).sort(i).forEach((function(e){var n=e.type,l=e.path;n===c.Tv.Directory?(0,Qe.f)(a,Je({path:l,dirInfo:t,filterNode:r,sortNode:i,isRootPath:o})):a.push({type:n,path:l})})),a}var en=(0,w.cn)((function(e){return Je({path:u.Ql,dirInfo:e(le),filterNode:e(ie),sortNode:e(W),isRootPath:function(e){return e===u.oh||e===u.Ql}})})),nn=(0,w.cn)(null),tn=function(){return(0,w.b9)(nn,k)},rn=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(nn);return e===t}))}),[e]);return(0,w.Dv)(n,k)},on=(0,w.cn)(null,(function(e,n,t){n(nn,t),n(fn,t),n(ge,t)})),an=function(){return(0,w.b9)(on,k)},ln=(0,w.cn)({}),cn=(0,w.cn)({}),un=(0,w.cn)((function(e){var n=e(ln),t=e(cn);return(0,f.Z)({},n,t)})),sn=(0,w.cn)((function(e){var n=e(le),t=e(un);return Object.keys(t).map((function(e){return{path:e,type:Object.prototype.hasOwnProperty.call(n,e)?c.Tv.Directory:c.Tv.File}}))})),dn=(0,w.cn)((function(e){var n=e(sn);return(0,C.RQ)(n)})),fn=(0,w.cn)(null,(function(e,n,t){n(ln,t?(0,Z.Z)({},t,!0):{}),n(cn,{})})),pn=(0,w.cn)(null,(function(e,n,t){var r=e(ln),i=e(cn),o=(0,oe.ZP)(r,(function(e){e[t]||i[t]?delete e[t]:e[t]=!0}));n(ln,o);var a=(0,oe.ZP)(i,(function(e){e[t]&&delete e[t]}));n(cn,a)})),hn=(0,w.cn)(null,(function(e,n,t){var r=e(en);if(r){var i=r.findIndex((function(e){return e.path===t})),o=e(nn),a=r.findIndex((function(e){return e.path===o})),l=r.slice(Math.min(i,a),Math.max(i,a)+1),c=e(ln),u=(0,oe.ZP)(c,(function(e){l.forEach((function(n){e[n.path]&&delete e[n.path]}))}));n(ln,u);var s=l.reduce((function(e,n){return e[n.path]=!0,e}),{});n(cn,s)}})),vn=function(e){var n=(0,b.Z)((function(){return(0,x.kv)(un,(function(n){return n[e]}))}),[e]);return(0,w.Dv)(n,k)},gn=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(un),r=n(en),i=r.findIndex((function(n){return n.path===e}));if(i<0)return!1;var o=r[i-1];return o&&Object.hasOwnProperty.call(t,o.path)}))}),[e]);return(0,w.Dv)(n,k)},mn=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(un),r=n(en),i=r.findIndex((function(n){return n.path===e}));if(i<0)return!1;var o=r[i+1];return o&&Object.hasOwnProperty.call(t,o.path)}))}),[e]);return(0,w.Dv)(n,k)},yn=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(en),r=t.findIndex((function(n){return n.path===e}));if(r<0)return!1;var i=t[r],o=t[r-1];return!!o&&(0,C.U$)(o.path)<=(0,C.U$)(i.path)}))}),[e]);return(0,w.Dv)(n,k)},Zn=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(en),r=t.findIndex((function(n){return n.path===e}));if(r<0)return!1;var i=t[r],o=t[r+1];return!!o&&(0,C.U$)(o.path)<=(0,C.U$)(i.path)}))}),[e]);return(0,w.Dv)(n,k)},bn=function(){return(0,w.b9)(fn,k)},wn=function(){return(0,w.b9)(pn,k)},xn=function(){return(0,w.b9)(hn,k)},kn=t(27522);function Cn(e){var n=e.onCreateClick;return(0,a.BX)(_e,{interactive:!1,children:[(0,a.BX)("div",{className:"jsx-d8ed3bbadff3cff2",children:["Add  ",(0,a.tZ)(kn.Z,{size:"small",border:!1,onClick:function(){return n(c.Tv.File)},children:"lesson contents"})]}),(0,a.tZ)(g(),{id:"d8ed3bbadff3cff2",children:"div.jsx-d8ed3bbadff3cff2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:12px;overflow:hidden;white-space:nowrap}"})]})}var Sn=t(73872),Tn=t(43312),En=(0,Tn.iv)({flexShrink:0,margin:"4px",transform:"rotate(-90deg)",transformOrigin:"50% 50%"});function Rn(e){var n=(0,Sn.Z)(e.progress),t=e.size/2,r=t/2,i=2*r*Math.PI,o=i-n*i;return(0,a.BX)("svg",{css:En,height:2*t,width:2*t,children:[(0,a.tZ)("circle",{fill:"var(--background-higher)",r:t,cx:t,cy:t}),(0,a.tZ)("circle",{stroke:"var(--foreground-dimmest)",fill:"transparent",strokeWidth:t,strokeDasharray:i+" "+i,style:{strokeDashoffset:o},r:r,cx:t,cy:t})]})}var In=t(42256),Dn=function(e){var n=(0,w.Dv)(M,k);return(0,b.Z)((function(){return function(){n&&n(e)}}),[n,e])},Gn=function(e){var n=tn(),t=bn(),r=wn(),i=xn(),o=(0,w.b9)(ve,k),a=T("flagFiletreeMultiselect");return(0,x.lV)(l.useCallback((function(l,c,u){var s=(0,In.j)(u),d=u.shiftKey,f=u.altKey;if(!a)return o(e),n(e),void t(e);var p=l(E),h="altKey"===(null===p||void 0===p?void 0:p.multiselectModifierKey)?f:s;return h||d?h?(r(e),void n(e)):void(d&&i(e)):(o(e),n(e),void t(e))}),[a,o,e,n,t,r,i]),k)},Pn=t(4853),_n=function(e,n){return(0,x.lV)(l.useCallback((function(t,r){var i=t(un),o=t(dn),a=t(F);Object.prototype.hasOwnProperty.call(i,e)?(r(z,o),a({action:"deleted",fileType:n,multiSelect:!0})):(r(z,[{path:e,type:n}]),a({action:"deleted",fileType:n}))}),[e,n]),k)},Bn=t(77511),An=t(90171),Un=t(23271),Ln=t(75205),Nn=t(98314),Xn=t(6191),Fn=t(57417),On=(0,w.cn)(null),Mn=function(){return(0,w.Dv)(On,k)},Wn=function(){return(0,w.b9)(On,k)},Hn=function(e,n){var t=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(un);return Object.prototype.hasOwnProperty.call(t,e)}))}),[e]),r=(0,b.Z)((function(){return(0,w.cn)((function(r){return r(t)?r(sn):[{path:e,type:n}]}))}),[t,e,n]);return(0,w.Dv)(r,k)},zn=function(e){var n=c.Tv.File,t=I(),r=Mn(),o=(0,w.Dv)(O,k),a=Hn(e,n),u=(0,i.Z)((0,Un.c)({type:n,item:{type:n,previewNode:{path:e,type:n},nodes:a},canDrag:function(){return!t&&null===r},collect:function(e){return{isDragging:e.isDragging()}},end:function(e){o&&o()}}),3),s=u[0].isDragging,d=u[1],f=u[2];return l.useEffect((function(){f((0,Nn.r)(),{captureDraggingState:!0})}),[f]),[{isDragging:s},d,f]},Vn=(0,w.cn)([]);function jn(e){var n=(0,w.b9)(Vn,k);l.useEffect((function(){n(e)}),[e,n])}var qn=t(12404),Yn=t(49760),Kn=t(38567),$n=(0,w.cn)(null);var Qn=t(98966),Jn=t(95245);function et(e){var n=e.path,t=e.readOnly,u=e.progress,s=e.siblings,d=e.isOptimistic,f=e.onMouseEnter,p=e.onMouseLeave,h=rn(n),v=Ye().duplicateFile,m=Wn(),Z=(0,i.Z)((0,w.KO)(Vn,k),1)[0],C=(0,Ie.P5)({controlName:"flag-open-with",type:"boolean",default:!1,logFlagToAnalytics:!1}),S=(0,Ve.Z)(),R=n.split("/"),I=R[R.length-1],D=(0,Jn.d)({tablet:!1}),P=(0,i.Z)(zn(n),2),_=P[0].isDragging,B=P[1],A=(0,An.useRouter)(),U=l.useMemo((function(){var e=[Ze.st.Rename];if(D||e.push(Ze.st.OpenTab,Ze.st.OpenPane),C){var t=!0,r=!1,i=void 0;try{for(var o,a=Z[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;"extension"===l.paneType&&l.supports(n)&&e.push((0,Ze.yQ)(l))}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}return e.push(Ze.st.CopyFilePath,Ze.st.CopyLink,Ze.st.Duplicate),(0,Bn.Vg)(A)||e.push(Ze.st.Download),e.push(Ze.st.Delete),e}),[A,C,Z,n,D]),L=vn(n),O=gn(n),M=mn(n),W=yn(n),H=Zn(n),z=function(e){var n=tn(),t=bn(),r=wn(),i=xn(),o=T("flagFiletreeMultiselect");return(0,x.lV)(l.useCallback((function(a,l,c){var u=a(G),s=(0,In.j)(c),d=c.shiftKey,f=c.altKey;if(!o){var p={newTab:s};return n(e),t(e),void u(e,p)}var h=a(E),v="altKey"===(null===h||void 0===h?void 0:h.multiselectModifierKey),g=v?f:s,m={newTab:v?s:f};return g||d?g?(r(e),void n(e)):void(d&&i(e)):(n(e),t(e),void u(e,m))}),[o,n,e,t,r,i]),k)}(n),V=Dn(n),j=function(e){var n=tn(),t=bn();return(0,x.lV)(l.useCallback((function(r,i,o){if(1===o.button){var a=r(G);n(e),t(e),a(e,{newTab:!0}),o.preventDefault(),o.stopPropagation()}}),[e,n,t]),k)}(n),q=function(e){return(0,x.lV)(l.useCallback((function(n){var t=n(sn),r=n(un),i=Object.prototype.hasOwnProperty.call(r,e),o=n(G);i?t.filter((function(e){return e.type===c.Tv.File})).forEach((function(e){var n=e.path;o(n,{newTab:!0})})):o(e,{newTab:!0})}),[e]),k)}(n),Y=function(e){return(0,x.lV)(l.useCallback((function(n){var t=n(sn),r=n(un),i=Object.prototype.hasOwnProperty.call(r,e),o=n(G);i?t.filter((function(e){return e.type===c.Tv.File})).forEach((function(e,n){var t=e.path;o(t,0===n?{newPane:!0}:{newTab:!0})})):o(e,{newPane:!0})}),[e]),k)}(n),K=function(e){return(0,x.lV)(l.useCallback(function(){var n=(0,r.Z)((function(n){var t,a,l,u,s,d,f,p,h,v,g,m,y,Z;return(0,o.__generator)(this,(function(b){switch(b.label){case 0:if(t=n(N),a=n(X),l=function(){var n=(0,r.Z)((function(n){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t?[4,t(n)]:[2];case 1:return(r=i.sent()).error?(a(r.error),[2]):[4,(0,Pn.Z)(e,r.content)];case 2:return i.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),u=n(sn),s=n(un),d=Object.prototype.hasOwnProperty.call(s,e),f=n(F),!d)return[3,9];p=!0,h=!1,v=void 0,b.label=1;case 1:b.trys.push([1,6,7,8]),g=function(){var e,n,t,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=(0,i.Z)(y.value,2),n=e[0],t=e[1],r=t.path,n%10!==0?[3,2]:[4,new Promise((function(e){setTimeout(e,1500)}))];case 1:o.sent(),o.label=2;case 2:return l(r),[2]}}))},m=u.filter((function(e){return e.type===c.Tv.File})).entries()[Symbol.iterator](),b.label=2;case 2:return(p=(y=m.next()).done)?[3,5]:[5,(0,o.__values)(g())];case 3:b.sent(),b.label=4;case 4:return p=!0,[3,2];case 5:return[3,8];case 6:return Z=b.sent(),h=!0,v=Z,[3,8];case 7:try{p||null==m.return||m.return()}finally{if(h)throw v}return[7];case 8:return f({action:"downloaded",fileType:c.Tv.File,multiSelect:u.length>1}),[3,10];case 9:l(e),f({action:"downloaded",fileType:c.Tv.File}),b.label=10;case 10:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e]),k)}(n),$=function(e){return(0,x.lV)(l.useCallback((function(n,t,r){n(G)(e,{newPane:!0,opener:r})}),[e]),k)}(n),Q=_n(n,c.Tv.File),J=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n($n);if(!t)return null;var r=t.changes.find((function(n){return n.path===e}));return r?r.type.worktree!==Yn.h.UNMODIFIED?r.type.worktree:r.type.index!==Yn.h.UNMODIFIED?r.type.index:null:null}))}),[e]);return(0,w.Dv)(n,k)}(n);return(0,a.BX)("div",{ref:B,onMouseEnter:f,onMouseLeave:p,className:"jsx-fdb89ac6def34b5b "+(y()({"is-dragging":_,"is-optimistic":d})||""),children:[(0,a.tZ)(_e,{active:h,selected:L,isPrevNodeSelected:O,isNextNodeSelected:M,isPrevNodeSameLevel:W,isNextNodeSameLevel:H,onClick:z,onDoubleClick:V,onAuxClick:j,actions:t?void 0:U,onAction:function(e){switch(e.type){case Ze.fe.Rename:return m(n),void(0,je.Z)({replId:S,action:"renamed",fileType:c.Tv.File});case Ze.fe.OpenTab:return void q();case Ze.fe.OpenPane:return void Y();case Ze.fe.CopyFilePath:return void(0,Ne.Z)(n);case Ze.fe.CopyLink:var t=(0,Ke.dr)({path:n});return void(0,Ne.Z)(t);case Ze.fe.Download:return void K();case Ze.fe.OpenWith:var r=e.opener;return void $(r);case Ze.fe.Duplicate:return v(n,s.map((function(e){return e.filename}))),void(0,je.Z)({replId:S,action:"duplicated",fileType:c.Tv.File});case Ze.fe.Delete:return void Q()}},children:(0,a.BX)("div",{title:n,className:"jsx-fdb89ac6def34b5b node-info",children:[(0,a.tZ)(Ae,{type:c.Tv.File,path:n,active:h||L}),J?(0,a.tZ)(Le,{children:(0,a.tZ)(Qn.sH,{type:J,children:I})}):(0,a.tZ)(Le,{children:I}),t?null:(0,a.tZ)(We,{path:n}),J?(0,a.tZ)(Qn.m8,{type:J}):null,u?(0,a.tZ)(Rn,{size:16,progress:u}):null]})}),(0,a.tZ)(g(),{id:"fdb89ac6def34b5b",children:"div.jsx-fdb89ac6def34b5b{max-width:100%;width:100%}.node-info.jsx-fdb89ac6def34b5b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.is-dragging.jsx-fdb89ac6def34b5b{opacity:.7}.is-optimistic.jsx-fdb89ac6def34b5b{opacity:.5;pointer-events:none}"})]})}var nt=t(12318),tt=t(94971),rt=t(43119),it=t(71440),ot=t(24635);function at(){var e=(0,rt.Z)(["\n  query FiletreeRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return at=function(){return e},e}var lt={},ct=(0,it.Ps)(at());var ut=t(91926),st=t(21371),dt=t(48960),ft=t(2255),pt=t(13716),ht=t(27562),vt=function(e){var n=(0,b.Z)((function(){return(0,x.kv)(le,(function(n){var t,r;return(null===(t=n[e])||void 0===t||null===(r=t.children)||void 0===r?void 0:r.map((function(e){return e.filename})))||[]}))}),[e]);return(0,w.Dv)(n,k)},gt=(0,w.cn)(null),mt=(0,w.cn)(null),yt=(0,w.cn)(null,(function(e,n,t){if(n(mt,t),t){var r=e(nn);if(r){var i=e(le);if(r&&Object.prototype.hasOwnProperty.call(i,r))n(gt,r),n(he,{path:r,expanded:!0});else{var o=(0,C.Il)(r)||u.Ql;n(gt,o)}e(F)({action:"added",source:"filetree",fileType:t})}else n(gt,u.Ql)}else n(gt,null)})),Zt=function(){return(0,w.b9)(yt,k)},bt=t(66656),wt=t(25362);function xt(){var e=(0,Ve.Z)(),n=(0,ht.Z)(),t=function(e){var n=(0,f.Z)({},lt,e);return ot.a(ct,n)}({variables:{replId:e}}).data,r=null;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)&&(r=ut.Z.getMainFileName(n)),r}var kt=function(e){var n=e.onSelect,t=e.onCancel,r=e.parentPath,o=e.type,c=(e.siblings,vt(r)),u=function(){var e=[".md",".draw"],n=xt();n&&"."!==n[0]&&e.unshift((0,dt.extname)(n));var t=(0,pt.Bx)();if(t&&t.length>0){var r=(0,dt.extname)(t[0]);r&&"."!==r&&e.unshift(r)}var i=(0,h.Z)(new Set(e)),o=ut.Z.allSupportedByPopularity().map((function(e){return"."+e.ext})).sort(),a=(0,h.Z)(new Set(i.concat(o).concat([".json",".txt",".toml",".css",".nix"])));return{defaultExtensions:i,dotExtensions:[".gitignore",".replit"],allSuggestions:a}}(),s=u.defaultExtensions,d=u.dotExtensions,v=u.allSuggestions,m=(0,i.Z)(l.useState(""),2),y=m[0],Z=m[1],b=l.useRef(null);l.useEffect((function(){y&&n(y)}),[y,n]);var w=(0,i.Z)(l.useState([]),2),x=w[0],k=w[1],C=(0,i.Z)(l.useState(!1),2),S=C[0],T=C[1],E=(0,st.Kb)({items:x,defaultHighlightedIndex:0,initialHighlightedIndex:0,onInputValueChange:function(e){var n=e.inputValue;if(!n)return k([]),void E.reset();var t=n.includes(".")?n.slice(0,n.lastIndexOf(".")):n,i=n.includes(".")?(0,dt.extname)(n):null,o=(""===i?d:"."===i||null===i||s.includes(i)?s:v).map((function(e){return t+e})).filter((function(e){return!(0,wt.z)({siblingNames:c,fileName:e,parentPath:r})})).filter((function(e){return e!==n}));if(o.unshift(n),"string"===typeof i){var a=o.filter((function(e){return e.startsWith(n)&&""!==n}));return 0===a.length?(k([]),void E.reset()):void k(a)}k(o)},onSelectedItemChange:function(e){e.selectedItem&&Z(R)}}),R=E.highlightedIndex>-1&&E.inputValue&&x[E.highlightedIndex]?x[E.highlightedIndex]:"",I=(0,wt.z)({siblingNames:c,fileName:R,parentPath:r}),D=l.useRef(null),G=(0,i.Z)(l.useState({top:0,left:0,width:0}),2),P=G[0],_=G[1];return l.useLayoutEffect((function(){if(null!==D.current){var e=D.current.getBoundingClientRect();_({left:e.left,top:e.top+e.height,width:e.width})}}),[D]),(0,a.BX)("div",{children:[(0,a.tZ)("div",(0,p.Z)((0,f.Z)({className:"combobox"},E.getComboboxProps()),{ref:D,children:(0,a.tZ)(tt.ZP,(0,f.Z)({autoFocus:!0,validationResults:I?[{state:"error",message:I}]:void 0},E.getInputProps({placeholder:"",ref:b,onBlur:function(){t()},onKeyDown:function(e){var r=function(){e.nativeEvent.preventDownshiftDefault=!0};if("Home"!==e.key&&"End"!==e.key)return"Tab"===e.key?(r(),""===R?void t():void n(R)):void("Escape"!==e.key||""!==R?"ArrowDown"===e.key||"ArrowUp"===e.key?T(!0):T(!1):t());S||r()}})))})),(0,a.BX)("div",(0,p.Z)((0,f.Z)({},E.getMenuProps()),{className:"jsx-3334e859a3d5803a",children:[E.isOpen?(0,a.tZ)(bt.h,{children:(0,a.tZ)("ul",{style:{position:"absolute",left:P.left,top:P.top,width:P.width},className:"jsx-3334e859a3d5803a menu",children:x.map((function(e,n){return(0,a.BX)("div",{className:"jsx-3334e859a3d5803a liwrap",children:[(0,a.tZ)("div",{className:"jsx-3334e859a3d5803a icon",children:(0,a.tZ)(Ae,{type:o,path:e})}),(0,a.BX)("li",(0,p.Z)((0,f.Z)({style:E.highlightedIndex===n?{backgroundColor:"var(--accent-primary-dimmer)"}:{}},E.getItemProps({item:e,index:n})),{onMouseDown:function(){Z(e)},className:"jsx-3334e859a3d5803a truncate",children:[" ",(0,a.BX)("bdi",{className:"jsx-3334e859a3d5803a",children:[E.inputValue?(0,a.tZ)(ft.gr,{source:e,match:E.inputValue,matchStyle:{color:E.highlightedIndex===n?"var(--foreground-dimmer)":"var(--accent-primary-default)"},style:{color:"var(--foreground-dimmer)"}}):e," "]})]}),"".concat(e).concat(n))]},"".concat(n).concat(e).concat(n))}))})}):null,(0,a.tZ)(g(),{id:"3334e859a3d5803a",children:'.menu.jsx-3334e859a3d5803a{font-weight:var(--font-weight-regular);cursor:pointer;overflow-y:auto;top:100%;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:var(--background-default);border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);list-style:none;-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.truncate.jsx-3334e859a3d5803a{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;direction:rtl;text-align:left}@media not all and (min-resolution:.001dpcm),not all and (-webkit-min-device-pixel-ratio:0),not all and (min--moz-device-pixel-ratio:0){@media{.truncate.jsx-3334e859a3d5803a{direction:ltr}}}@mediaand(-webkit-min-device-pixel-ratio:0){@media{.truncate.jsx-3334e859a3d5803a{direction:ltr}}}@media not all and (min-resolution:.001dpcm),not all and (-webkit-min-device-pixel-ratio:0),not all and (min--moz-device-pixel-ratio:0){@supports(-webkit-appearance:none)and (stroke-color:transparent){.truncate.jsx-3334e859a3d5803a{direction:ltr}}}.combobox.jsx-3334e859a3d5803a{display:"inline-block"}.li-wrap.jsx-3334e859a3d5803a{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;position:relative}li.jsx-3334e859a3d5803a{color:var(--foreground-default);margin:var(--space-4);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-weight:var(--font-weight-regular);cursor:pointer;white-space:nowrap;padding-top:var(--space-8);padding-right:var(--space-8);padding-bottom:var(--space-8);padding-left:var(--space-48)}.icon.jsx-3334e859a3d5803a{position:absolute;padding-left:var(--space-8);margin-top:var(--space-4);color:var(--foreground-dimmer)}'})]}))]})};function Ct(e){var n=e.type,t=e.initialValue,r=e.onSubmit,i=e.onCancel,o=e.siblings,u=e.parentPath,s=e.rename,d=vt(u),f=l.useRef(null),p=(0,nt.Y)(t||"",(function(e){var n=(0,wt.z)({siblingNames:d,fileName:e,initialValue:t,parentPath:u});return n?{message:n}:null}));return l.useEffect((function(){if(t){var e=t.lastIndexOf(".");-1===e&&(e=t.length),f.current&&f.current.setSelectionRange(0,e)}}),[t]),(0,a.BX)("div",{className:"jsx-214be0f492dbcad3 input-wrap",children:[s||n===c.Tv.Directory?(0,a.BX)(a.HY,{children:[(0,a.tZ)(tt.ZP,{ref:f,validationResults:p.error?[{state:"error",message:p.error.message}]:void 0,autoFocus:!0,value:p.value,onBlur:function(){p.value&&p.value!==t?p.error?i():r(p.value):i()},onKeyUp:p.validate,onKeyDown:function(e){if("Enter"===e.key){if(p.error)return;return p.value!==t&&p.value?void r(p.value):void i()}"Escape"===e.key&&i()},onChange:function(e){p.setValue(e.target.value)}}),(0,a.tZ)("div",{className:"jsx-214be0f492dbcad3 icon",children:(0,a.tZ)(Ae,{type:n,path:p.value})})]}):(0,a.tZ)(kt,{onSelect:function(e){(0,wt.z)({siblingNames:d,fileName:e,parentPath:u})||r(e)},onCancel:i,parentPath:u,type:n,siblings:o}),(0,a.tZ)(g(),{id:"a7badbaaf49636d0",children:".input-wrap.jsx-214be0f492dbcad3 input{padding-left:-webkit-calc(var(--space-32));padding-left:-moz-calc(var(--space-32));padding-left:calc(var(--space-32))}.icon.jsx-214be0f492dbcad3{padding-left:-webkit-calc(0*var(--space-16));padding-left:-moz-calc(0*var(--space-16));padding-left:calc(0*var(--space-16))}"}),(0,a.tZ)(g(),{id:"c77e680a97c77adf",children:".input-wrap.jsx-214be0f492dbcad3{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;font-size:var(--font-size-default);position:relative}.input-wrap.jsx-214be0f492dbcad3 input{font-size:inherit;padding-top:var(--space-4);padding-bottom:var(--space-4);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);min-height:var(--space-32)}.icon.jsx-214be0f492dbcad3{color:var(--foreground-dimmer);pointer-events none;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:0;left:0;height:100%}"})]})}var St=t(63064);function Tt(e){var n=e.type,t=e.create,r=e.onCreate,o=e.onError,c=e.onCancel,s=e.parentPath,d=e.siblings,f=(0,St.Z)(),p=(0,i.Z)(l.useState(null),2),h=p[0],v=p[1];return h?(0,a.BX)("div",{className:"jsx-610c999e6cd0a051 pending-node",children:[(0,a.BX)(_e,{onClick:function(){return null},children:[(0,a.tZ)(Ae,{path:h.filename,type:h.type}),(0,a.tZ)(Le,{children:h.filename})]}),(0,a.tZ)(g(),{id:"610c999e6cd0a051",children:".pending-node.jsx-610c999e6cd0a051{pointer-events:none;opacity:.5}"})]}):(0,a.tZ)(Ct,{parentPath:s,siblings:d,type:n,onCancel:c,onSubmit:function(e){if(!h){var i={path:s===u.Ql?e:s+"/"+e,type:n};v({filename:e,type:n}),t(i).then((function(){f.current&&(v(null),r(i))})).catch((function(e){f.current&&o(e)}))}}})}var Et=t(22011),Rt=t(65225),It=t(45510);function Dt(e){var n=e.onCreateClick;return(0,a.tZ)(_e,{interactive:!1,css:[{background:"".concat(Te.TV.backgroundRoot," !important"),cursor:"auto !important",border:"none"}],children:(0,a.BX)(He.G,{css:[Te.l0.rowWithGap(4),Te.l0.align.center,Te.l0.px(4)],children:[(0,a.tZ)(ze.xv,{variant:"small",color:"dimmer",children:"Add a"}),(0,a.tZ)(It.zx,{small:!0,onClick:function(){return n(c.Tv.File)},text:"file",css:[Te.l0.height(24),Te.l0.color.foregroundDefault]}),(0,a.tZ)(ze.xv,{variant:"small",color:"dimmer",children:"or"}),(0,a.tZ)(It.zx,{small:!0,onClick:function(){return n(c.Tv.Directory)},text:"folder",css:[Te.l0.height(24),Te.l0.color.foregroundDefault]})]})})}function Gt(e){var n=e.readOnly,t=void 0!==n&&n,r=e.onCreateClick;return t?(0,a.tZ)(_e,{interactive:!1,children:(0,a.tZ)(He.G,{css:[Te.l0.rowWithGap(4),Te.l0.align.center],children:(0,a.tZ)(ze.xv,{variant:"small",color:"dimmer",children:"There is nothing here."})})}):(0,a.tZ)(Dt,{onCreateClick:r})}var Pt=t(39137),_t=t(32104),Bt=t(76735);function At(e){var n=e.type,t=e.parentPath,r=(e.siblings,e.create),i=e.onCreate,o=e.initialFileName,s=e.onRename,d=e.onError,f=e.onClose,p=(0,l.useState)(null),h=p[0],v=p[1],g=(0,l.useRef)(null),m=vt(t);(0,l.useEffect)((function(){if(o){var e=o.lastIndexOf(".");-1===e&&(e=o.length),g.current&&g.current.setSelectionRange(0,e)}}),[o]);var y=(0,nt.Y)(o||"",(function(e){var n=(0,wt.z)({siblingNames:m,fileName:e,initialValue:o,parentPath:t});return n?{message:n}:null})),Z=!!y.error||""===y.value,b=n===c.Tv.File?"File":"Folder",w=o?"Rename ".concat(b):"Add ".concat(b),x=function(){return y.error?(0,a.tZ)(He.G,{css:[Te.l0.height(24),Te.l0.width(24),Te.l0.center],children:(0,a.tZ)(Bt.Z,{color:Te.TV.accentNegativeDefault})}):Ae({type:n,path:y.value,gutter:!1})};return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),Z||(o?s(y.value):function(){if(!h){var e={path:t===u.Ql?y.value:t+"/"+y.value,type:n};v({filename:y.value,type:n}),r(e).then((function(){v(null),i(e)})).catch((function(e){d(e)}))}}())},children:(0,a.BX)(He.G,{css:[Te.l0.colWithGap(16)],children:[(0,a.tZ)(ze.xv,{variant:"subheadDefault",children:w}),(0,a.BX)(He.G,{css:[Te.l0.rowWithGap(4),Te.l0.center],children:[(0,a.tZ)(x,{}),(0,a.tZ)(Pt.II,{id:"fileName",ref:g,value:y.value,autoFocus:!0,onChange:function(e){return y.setValue(e.target.value)},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]}),y.error?(0,a.tZ)(ze.xv,{variant:"small",color:"dimmer",children:y.error.message}):null,(0,a.BX)(He.G,{css:[Te.l0.rowWithGap(8)],children:[(0,a.tZ)(It.zx,{text:"Cancel",outlined:!0,colorway:"negative",css:{flex:1},type:"button",onClick:f}),(0,a.tZ)(It.zx,{text:o?"Rename":"Add",colorway:"primary",iconLeft:h?(0,a.tZ)(_t.Z,{}):void 0,css:{flex:1},disabled:Z,type:"submit"})]})]})})}var Ut=t(85357),Lt=(0,Re.X)({limitedChildrenWarning:[Te.l0.py(4),Te.l0.textAlign.center]});function Nt(e){var n,t,i,s=e.parentPath,d=e.nodes,p=e.unfilteredNodes,v=void 0===p?[]:p,g=e.loading,m=e.error,y=e.readOnly,Z=e.disableCreate,C=null===d||void 0===d?void 0:d.slice(0,500),S=(null===C||void 0===C?void 0:C.length)!==(null===d||void 0===d?void 0:d.length),T=(0,Fe.Z)().showError,E=s===u.Ql?[]:s.split("/"),R=(0,Bn.T3)(),I=Ye(),D=I.fs,P=I.pendingUploads,_=tn(),B=bn(),A=(0,w.Dv)(mt,k),U=Zt(),L=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(mt),r=n(gt);return t&&e===r}))}),[e]);return(0,w.Dv)(n,k)}(s),N=(0,x.lV)(l.useCallback((function(e,n,t){n(mt,null);var r=t.path,i=t.type,o=e(G);n(nn,r),n(fn,r),i===c.Tv.File&&o(r,{newTab:!1})}),[]),k),X=(0,x.lV)(l.useCallback(function(){var e=(0,r.Z)((function(e,n,t){var r,i,a;return(0,o.__generator)(this,(function(e){return r=t.path,i=t.to,a=t.fileType,n(ee,[{src:{path:r,type:a},dst:{path:i,type:a}}]),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),k),F=Mn(),O=Wn(),M=l.useRef(null),W=function(){M.current=null,O(null)};if(g)return(0,a.tZ)(Rt.Z,{path:s});if(m)return(0,a.tZ)(_e,{interactive:!1,children:null!==(i=m.message)&&void 0!==i?i:m});if(!C||!d)return null;var H,z=!y&&!Z&&L,V=new Set(C.map((function(e){return e.filename}))),j=(null!==P&&void 0!==P?P:[]).filter((function(e){var n=e.targetPath,t=n.lastIndexOf("/");return(-1!==t?n.slice(0,t):u.Ql)===s&&!V.has(n)})),q=function(e){var n=e.path;return e.type===c.Tv.File?D.writeFile(n,Et.Z.from("")):D.createDir(n)};return(0,a.BX)(a.HY,{children:[C.map((function(e){var n=e.filename,t=e.type,r=e.isOptimistic,i=(0,h.Z)(E).concat([n]).join("/"),o=v.filter((function(e){return e.filename!==n}));if(F===i&&R&&(M.current={initialFileName:n,path:i,siblings:o,type:t}),F===i&&!R)return(0,a.tZ)(_e,{onClick:function(){return null},children:(0,a.tZ)(Ct,{type:t,parentPath:s,siblings:o,initialValue:n,rename:!0,onSubmit:function(e){O(null);var n=(0,h.Z)(E).concat([e]).join("/");X({fileType:t,path:i,to:n})},onCancel:function(){return O(null)}})},n);var l={siblings:o,readOnly:y||r,path:i,key:r?"(optimistic) ".concat(n):n,isOptimistic:r};return t===c.Tv.File?(0,a.tZ)(et,(0,f.Z)({},l)):(0,a.tZ)(Mt,(0,f.Z)({},l))})),j.map((function(e,n){var t=e.targetPath,r=e.progress;return(0,a.tZ)(et,{siblings:v.filter((function(e){return e.filename!==t})),path:t,progress:r,readOnly:!0},"".concat(t,"_").concat(n))})),!y&&!C.length&&s===u.oh&&(0,a.tZ)(Cn,{onCreateClick:function(){return(0,$e.a)({fs:D})}}),C.length||s===u.oh||z?null:(0,a.tZ)(Gt,{onCreateClick:function(e){_(s),B(s),U(e)},readOnly:y}),S?(0,a.BX)(He.G,{css:Lt.limitedChildrenWarning,children:[(0,a.tZ)(ze.xv,{variant:"small",color:"dimmest",multiline:!0,children:"Displayed files are limited for performance."}),(0,a.tZ)(ze.xv,{variant:"small",color:"dimmest",multiline:!0,children:"All files are still accessible from Search or the Shell."})]}):null,z&&A&&!R&&(0,a.tZ)(Ut.ZP,{group:"focus-group-filetree-create",children:(0,a.tZ)(Tt,{siblings:v||[],parentPath:s,create:q,type:A,onError:function(e){return T("Something went wrong: ".concat(e))},onCancel:function(){return U(null)},onCreate:N})}),R?(0,a.tZ)(Xe.u,{isOpen:Boolean(R&&(z&&A||M.current)),onRequestClose:function(){U(null),W()},centered:!0,children:A||M.current?(0,a.tZ)(At,{type:null!==(H=null!==A&&void 0!==A?A:null===(n=M.current)||void 0===n?void 0:n.type)&&void 0!==H?H:c.Tv.File,parentPath:s,siblings:M.current?M.current.siblings:v||[],create:q,onCreate:N,initialFileName:null===(t=M.current)||void 0===t?void 0:t.initialFileName,onRename:function(e){if(M.current){var n=(0,h.Z)(E).concat([e]).join("/");X({fileType:M.current.type,path:M.current.path,to:n}),W()}},onError:function(e){return T("Something went wrong: ".concat(e))},onClose:function(){U(null),W()}}):null}):null]})}var Xt=(0,Re.X)({gutter:{minWidth:"1em",padding:"0 10px 0 12px",cursor:"pointer"},gutter2:{padding:"0 6px",cursor:"pointer"},rule:{height:"100%",width:1,transition:"all 100ms"},rule2:{height:"calc(100% - 3px)",width:1}}),Ft=function(e){var n=e.dirPath,t=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n(nn);return!!t&&((0,K.pC)(e,t)||e===u.Ql&&1===(0,C.U$)(t))}))}),[e]);return(0,w.Dv)(n,k)}(n),r=function(e){var n=tn(),t=bn(),r=me(e).collapse;return l.useCallback((function(i){n(e),t(e),r()}),[r,e,t,n])}(n),i=(0,Ie.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,a.BX)("div",{css:i?Xt.gutter2:Xt.gutter,onClick:r,className:"jsx-ff9dd9c3c09ee873 dir-node-gutter",children:[(0,a.tZ)("div",{css:i?Xt.rule2:Xt.rule,className:"jsx-ff9dd9c3c09ee873 "+(y()("rule",{drawn:t})||"")}),(0,a.tZ)(g(),{id:"ff9dd9c3c09ee873",children:".rule.drawn.jsx-ff9dd9c3c09ee873,.root-node:hover .rule.jsx-ff9dd9c3c09ee873{background-color:var(--outline-dimmest)}.dir-node-gutter.jsx-ff9dd9c3c09ee873:hover .rule.jsx-ff9dd9c3c09ee873{background-color:var(--accent-primary-default)}"})]})},Ot=(0,Re.X)({dirNode:[Te.l0.borderRadius(8),Te.l0.width("100%")],rootNode:[Te.l0.overflowY("auto"),Te.l0.flex.grow(1),Te.l0.px(8),Te.l0.pb(16)],nodeInfo:[Te.l0.display.flex,Te.l0.align.center,Te.l0.overflow("hidden"),Te.l0.flex.grow(1)],hidden:[Te.l0.display.none,Te.l0.height(0),Te.l0.width(0)],isDropping:[Te.l0.backgroundColor.backgroundDefault,{outline:"1px dashed "+Te.TV.accentPrimaryDefault,outlineOffset:-1}],isDragging:{opacity:.1},isOptimistic:{opacity:.5,pointerEvents:"none"}});function Mt(e){var n=e.path,t=e.readOnly,s=e.siblings,d=e.progress,v=e.isOptimistic,g=rn(n),m=(0,Ve.Z)(),Z=Zt(),S=Ye(),T=S.fs,E=S.uploadFiles,R=Wn(),D=n.split("/"),G=D[D.length-1],_=n===u.Ql,B=n===u.oh,A=an(),U=l.useRef(null),L=(0,i.Z)(l.useState([]),2),N=L[0],X=L[1],F=(0,i.Z)(l.useState([]),2),O=F[0],M=F[1],W=de();l.useEffect((function(){W(n)}),[T,n,W]);var H=function(e){var n,t,r,i=e.path,o=e.initialExpanded,a=pe(i),l=null!==(n=null===a||void 0===a?void 0:a.children)&&void 0!==n?n:null,c=null!==(t=null===a||void 0===a?void 0:a.error)&&void 0!==t?t:null,u=Boolean(null!==(r=null===a||void 0===a?void 0:a.expanded)&&void 0!==r?r:o),s=me(i),d=s.expand,f=s.collapse;return u?c?{collapse:f,expand:d,children:null,expanded:u,loading:!1,error:c}:l?{collapse:f,expand:d,children:l,loading:!1,error:c,expanded:u}:{collapse:f,expand:d,children:l,loading:!0,error:c,expanded:u}:{collapse:f,expand:d,children:null,loading:!1,error:null,expanded:u}}({path:n,initialExpanded:_||B}),z=H.expand,V=H.children,j=H.loading,q=H.error,Y=H.expanded,$=(0,i.Z)(function(e){var n=c.Tv.Directory,t=I(),r=Mn(),o=Hn(e,c.Tv.Directory),a=(0,i.Z)((0,Un.c)({type:n,item:{type:n,previewNode:{path:e,type:n},nodes:o},canDrag:function(){return!t&&e!==u.Ql&&null===r},collect:function(e){return{isDragging:e.isDragging()}}}),3),s=a[0].isDragging,d=a[1],f=a[2];return l.useEffect((function(){f((0,Nn.r)(),{captureDraggingState:!0})}),[f]),[{isDragging:s},d,f]}(n),2),ne=$[0].isDragging,te=$[1],re=(0,i.Z)(function(e,n,t){var a=e===u.Ql,s=(0,x.lV)(l.useCallback(function(){var t=(0,r.Z)((function(t,r,i){var l,c,s,d,f;return(0,o.__generator)(this,(function(o){return"dirContent"in i?(i.dirContent.then((function(t){n({parentPath:a?void 0:e,files:t})})),[2]):(l=(0,C.RQ)(i.nodes),c=e,l.some((function(e){return c===e.path||!!((0,K.pC)(c,e.path)||c===u.Ql&&1===(0,C.U$)(e.path))||!!(0,K.yr)(e.path,c)}))?[2]:(s=l.map((function(e){var n=(0,C.UO)(e.path),t=c===u.Ql?n:c+"/"+n;return{src:e,dst:{type:e.type,path:t}}})),d=t(le),f=l.reduce((function(e,n){var t,r=(0,C.UO)(n.path),i=null===(t=d[c])||void 0===t?void 0:t.children,o=null===i||void 0===i?void 0:i.find((function(e){return e.filename===r}));return o&&e.push({type:o.type,path:c===u.Ql?o.filename:c+"/"+o.filename}),e}),[]),f.length>0?(r(Q,f),r(J,s),[2]):(r(ee,s),[2])))}))}));return function(e,n,r){return t.apply(this,arguments)}}(),[a,e,n]),k),d=(0,i.Z)((0,Ln.L)({accept:[c.Tv.File,c.Tv.Directory,Xn.FILE],canDrop:function(){return!0},hover:function(e,n){t.current&&a&&(0,Fn.b)(t.current,n)},drop:function(e,n){if(!n.didDrop())return s(e)},collect:function(e){return{isOver:e.canDrop()&&e.isOver({shallow:!0})}}}),2);return[{isOver:d[0].isOver},d[1]]}(n,E,U),2),ie=re[0].isOver,oe=re[1];l.useEffect((function(){if(ie&&!Y){var e=setTimeout(z,500);return function(){clearTimeout(e)}}}),[ie,z,Y]),l.useEffect((function(){if(V&&n===u.Ql){var e=V.filter((function(e){return ye.uP.includes(e.filename)}));X(e)}}),[n,V]),l.useEffect((function(){if(V&&n===u.Ql){var e=V.filter((function(e){return ye.nh.includes(e.filename)}));M(e)}}),[n,V]);var ae,ce=V?(0,h.Z)(V):null;if(ce){var ue=n!==u.Ql?"".concat(n,"/"):"";ce=ce.filter((function(e){return!ye.ZP.includes(ue+e.filename)}))}if(ce&&n===u.Ql){var se=ce.findIndex((function(e){return e.type===c.Tv.Directory&&".lesson"===e.filename}));if(se>=0)ae=(0,i.Z)(ce.splice(se,1),1)[0]}var fe,he={readOnly:t,siblings:s,progress:d,parentPath:n},ve=vn(n),ge=gn(n),be=mn(n),we=yn(n),xe=Zn(n),ke=Gn(n),Ce=_n(n,c.Tv.Directory),Se=(fe=n,(0,x.lV)(l.useCallback((function(e,n){var t=e(P);null===t||void 0===t||t({initialPwd:fe})}),[fe]),k)),Ee=bn(),Re=tn(),Ie=function(e){var n=(0,b.Z)((function(){return(0,w.cn)((function(n){var t=n($n);if(!t)return null;var r=t.changes.filter((function(n){return(0,K.yr)(e,n.path)}));return 0===r.length?null:{type:r.every((function(e){return e.type.index===Yn.h.ADDED||e.type.worktree===Yn.h.UNTRACKED}))?Yn.h.ADDED:Yn.h.MODIFIED,count:r.length}}))}),[e]);return(0,w.Dv)(n,k)}(n),De=(0,Bn.T3)();return(0,a.BX)("div",{title:n===u.Ql?void 0:n,ref:function(e){U.current=e,oe(e),te(e)},css:[Ot.dirNode,ie&&Ot.isDropping,ne&&Ot.isDragging,v&&Ot.isOptimistic,n===u.Ql&&Ot.rootNode],className:y()({"root-node":n===u.Ql}),onClick:function(e){_&&e.target===e.currentTarget&&(e.stopPropagation(),A(u.Ql))},children:[_||B?null:(0,a.tZ)(_e,{active:g||ie,selected:ve,isPrevNodeSelected:ge,isNextNodeSelected:be,isPrevNodeSameLevel:we,isNextNodeSameLevel:xe,onClick:ke,actions:t?void 0:[Ze.st.Rename,Ze.st.AddFile,Ze.st.AddFolder,Ze.st.CopyFolderPath,Ze.st.CopyLink,!!De&&Ze.st.OpenShellHere,Ze.st.Delete].filter((function(e){return Boolean(e)})),onAction:function(e){switch(e!==Ze.st.Delete&&(g||(Ee(n),Re(n)),Y||z()),e.type){case Ze.fe.Rename:return R(n),void(0,je.Z)({replId:m,action:"renamed",fileType:c.Tv.Directory});case Ze.fe.AddFile:return void Z(c.Tv.File);case Ze.fe.AddFolder:return void Z(c.Tv.Directory);case Ze.fe.CopyFolderPath:return void(0,Ne.Z)(n);case Ze.fe.CopyLink:var t=(0,Ke.dr)({path:n});return void(0,Ne.Z)(t);case Ze.fe.OpenShellHere:return void Se();case Ze.fe.Delete:return void Ce()}},children:(0,a.BX)("div",{css:Ot.nodeInfo,title:n,children:[(0,a.tZ)(Ae,{type:c.Tv.Directory,path:n,expanded:Y,active:g||ve}),Ie?(0,a.tZ)(Le,{children:(0,a.tZ)(Qn.sH,{type:Ie.type,children:G})}):(0,a.tZ)(Le,{children:G}),Y||t?null:(0,a.tZ)(We,{path:n}),Ie?(0,a.tZ)(Qn.ts,{type:Ie.type,count:Ie.count}):null]})}),(0,a.BX)("div",{className:"file-nodes-container",css:[Te.l0.flex.row],children:[_?null:(0,a.tZ)(Ft,{dirPath:n}),(0,a.tZ)("div",{className:y()({hidden:!Y}),css:[Te.l0.flex.grow(1),Te.l0.maxWidth("100%"),Te.l0.overflow("hidden")],children:(0,a.tZ)(Nt,(0,f.Z)({nodes:ce,unfilteredNodes:null!==V&&void 0!==V?V:[],loading:j,error:q},he))})]}),O.length&&!j?(0,a.tZ)(Ht,{children:(0,a.tZ)(Nt,(0,p.Z)((0,f.Z)({},he),{unfilteredNodes:null!==V&&void 0!==V?V:[],nodes:O,disableCreate:!0}))}):null,ae&&!j?(0,a.tZ)(Vt,{readOnly:Boolean(t),children:(0,a.tZ)(Nt,(0,p.Z)((0,f.Z)({},he),{nodes:[ae],disableCreate:!0}))}):null,N.length&&!j?(0,a.tZ)(zt,{children:(0,a.tZ)(Nt,(0,p.Z)((0,f.Z)({},he),{nodes:N,unfilteredNodes:null!==V&&void 0!==V?V:[],disableCreate:!0}))}):null]})}function Wt(e){var n=e.title,t=e.notice,r=e.children;return(0,a.BX)(He.G,{css:[Te.l0.flex.column],children:[(0,a.tZ)(He.G,{css:[Te.l0.p(8),Te.l0.mt(8),{borderTop:"1px dashed ".concat(Te.TV.outlineDimmest)}],children:(0,a.tZ)(ze.xv,{variant:"text",css:[Te.l0.fontWeight.medium,Te.l0.color.foregroundDimmest,{userSelect:"none"}],children:n})}),t,(0,a.tZ)(He.G,{css:[Te.l0.width("100%")],children:r})]})}function Ht(e){var n=e.children;return(0,a.tZ)(Wt,{title:"Config files",children:n})}function zt(e){var n=e.children;return(0,a.tZ)(Wt,{title:"Packager files",children:n})}function Vt(e){var n=e.children,t=e.readOnly;return(0,a.tZ)(Wt,{title:"Lesson",notice:t?null:(0,a.tZ)(He.G,{css:[Te.l0.p(16),Te.l0.pt(0),Te.l0.pb(8),Te.l0.width("100%")],children:(0,a.tZ)(He.G,{css:[Te.l0.py(8),Te.l0.px(16),Te.l0.backgroundColor.accentPrimaryDimmest,Te.l0.borderRadius(8)],children:(0,a.BX)(ze.xv,{children:["Place your lesson contents here.",(0,a.tZ)("br",{}),(0,a.tZ)("a",{href:"https://docs.replit.com/teams-edu/lesson-authoring",target:"_blank",children:"Learn more"})]})})}),children:n})}var jt=t(14260),qt=t(94266),Yt=t(44807),Kt=t(67183);function $t(e){var n=e.onDownloadZip,t=e.readOnly,r=void 0!==t&&t,i=Ye().uploadFiles,o=l.useRef(null),u=l.useRef(null),s=(0,Ve.Z)(),d=(0,pt.OM)(),f=(0,pt.t9)(),p=(0,Jn.d)({tablet:!1}),h=(0,An.useRouter)(),v=l.useMemo((function(){if("undefined"===typeof document)return[];if(r)return[f?Ze.st.HideHiddenFiles:Ze.st.ShowHiddenFiles];var e=(0,Yt.N)(),n=[Ze.st.UploadFile];return e&&!p&&n.push(Ze.st.UploadFolder),(0,Bn.Vg)(h)||n.push(Ze.st.DownloadZip),n.push(f?Ze.st.HideHiddenFiles:Ze.st.ShowHiddenFiles),n}),[f,r,h,p]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(Kt.Q,{fileUploadInputRef:o,dirUploadInputRef:u,uploadFiles:i}),(0,a.tZ)(Ze.ZP,{actions:v,onAction:function(e){switch(e.type){case Ze.st.UploadFile.type:if(!o.current)return;return o.current.click(),void(0,je.Z)({replId:s,action:"uploaded",fileType:c.Tv.File});case Ze.st.UploadFolder.type:if(!u.current)return;return u.current.click(),void(0,je.Z)({replId:s,action:"uploaded",fileType:c.Tv.Directory});case Ze.st.DownloadZip.type:return n(),void(0,je.Z)({replId:s,action:"zipDownloaded"});case Ze.st.ShowHiddenFiles.type:return void d(!0);case Ze.st.HideHiddenFiles.type:d(!1)}}})]})}var Qt=t(73162),Jt=t(39985),er=t(87076),nr=t(43118),tr=t(65532),rr=t(22405),ir=function(e){var n=e.children;return(0,a.tZ)(w.zt,{scope:k,children:n})},or=function(e){var n=e.filetreeApi,t=e.fileOpeners;return function(e){var n=(0,w.b9)(S,k);l.useEffect((function(){n(e)}),[e,n]);var t=e.activeFile,r=an();l.useEffect((function(){t&&r(t)}),[t,r])}(n),jn(t),fe(),function(){var e=(0,w.b9)($n,k),n=(0,Ie.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),t=(0,Kn.Z)(function(){var e=(0,r.Z)((function(e){var t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n?[4,e.getRepositoryState()]:[2,{status:null,error:null}];case 1:return(t=i.sent()).error?[2,t]:t.type!==qn.y5.NORMAL?[2,{status:null,error:null}]:[4,e.status()];case 2:return(r=i.sent()).error?[2,r]:[2,{status:r,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[n]),i=t&&!t.error?t.status:null;(0,l.useEffect)((function(){return e(i)}),[e,i])}(),null},ar=t(74441),lr=t(76357),cr=function(){var e=(0,x.lV)((0,l.useCallback)((function(e,n){n(z,[])}),[]),k),n=(0,x.lV)((0,l.useCallback)(function(){var e=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(r){return t=e(z),n(Y,t),n(z,[]),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),k),t=(0,w.Dv)(z,k),i=(0,w.Dv)(V,k),c=(0,w.Dv)(j,k);return(0,a.tZ)(Xe.u,{isOpen:Boolean(t.length>0),onRequestClose:e,children:t.length>0?(0,a.tZ)(lr.Z,{name:t.length>1?c:i,description:i,confirmDescription:c,hideModal:e,delete:n}):null})},ur=function(){var e=(0,i.Z)((0,w.KO)(Q,k),2),n=e[0],t=e[1],c=(0,w.b9)(J,k),u=l.useCallback((function(){t([]),c([])}),[t,c]),s=(0,x.lV)(l.useCallback(function(){var e=(0,r.Z)((function(e,t){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:if(0===(r=e(J)).length)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t(ne,{moveOps:r,dstConflicts:n})];case 2:return i.sent(),[3,4];case 3:return t(Q,[]),t(J,[]),[7];case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[n]),k);return(0,a.tZ)(Xe.u,{isOpen:n.length>0,onRequestClose:u,children:n.length>0?(0,a.tZ)(Jt.Z,{paths:n.map((function(e){return e.path})),onCancel:u,onConfirm:s}):null})},sr=t(46995),dr=t(96351),fr=t(3455),pr=t(49770),hr=t(11307),vr=He.K.div,gr={position:"fixed",pointerEvents:"none",zIndex:pr.MI.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"},mr=Math.floor(16),yr=[Te.l0.display.flex,Te.l0.flex.row,Te.l0.align.center,Te.l0.overflow("hidden"),Te.l0.flex.grow(1),Te.l0.width(160)],Zr=(0,Tn.iv)((0,h.Z)(yr).concat([{opacity:.75,zIndex:1}])),br=(0,Tn.iv)([[{transform:"rotate(1deg) translate(-4px, -4px)",opacity:.5},Te.l0.position.absolute]]),wr=(0,Tn.iv)([(0,h.Z)(yr).concat([{opacity:0}])]),xr=function(){var e=(0,fr.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getClientOffset();if(!t)return null;if("dirContent"in n)return null;var r=t.x,i=t.y,o={transform:"translate(".concat(r,"px, ").concat(i-mr,"px)")},l=n.nodes.length,c=n.previewNode,u=c.path,s=c.type,d=(0,C.UO)(u);return(0,a.tZ)(vr,{css:[o,Te.l0.position.relative,Te.l0.width(160)],children:(0,a.BX)(vr,{css:[{transform:"scale(".concat(.9,")")},Te.l0.position.absolute,Te.l0.left("-".concat("40%")),Te.l0.shadow(3),Te.l0.borderRadius(8)],children:[(0,a.tZ)(_e,{active:!0,selected:!0,children:(0,a.BX)(vr,{css:Zr,children:[(0,a.tZ)(Ae,{type:s,path:u,active:!0}),(0,a.tZ)(Le,{title:d,children:d})]})}),l>1?(0,a.tZ)(vr,{css:br,children:(0,a.tZ)(_e,{active:!0,selected:!0,children:(0,a.BX)(vr,{css:wr,children:[(0,a.tZ)(Ae,{type:s,path:u,active:!0}),(0,a.tZ)(Le,{title:d,children:d})]})})}):null,l>1?(0,a.tZ)(dr.D,{text:String(l),css:[Te.l0.backgroundColor.accentPrimaryDimmest,Te.l0.color.accentPrimaryStrongest,Te.l0.fontWeight.medium,Te.l0.position.absolute,Te.l0.left("40%"),Te.l0.top("calc(100% - 4px)")]}):null]})})},kr=function(){var e=(0,sr.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),n=e.isDragging,t=e.itemType,r=t===c.Tv.File||t===c.Tv.Directory;return n&&r?(0,a.BX)("div",{style:gr,children:[(0,a.tZ)(xr,{}),(0,a.tZ)(hr.a,{cursor:"grabbing"})]}):null},Cr=t(49146),Sr=l.forwardRef((function(e,n){return(0,a.tZ)(ir,{children:(0,a.BX)(a.HY,{children:[(0,a.tZ)(or,{filetreeApi:e.filetreeApi,fileOpeners:e.fileOpeners||[]}),(0,a.tZ)(Ir,{ref:n,readOnly:e.readOnly,showResources:e.showResources,showHeader:e.showHeader})]})})}));Sr.displayName="FiletreeWithJotaiProvider";var Tr=Sr,Er=(0,Re.X)({header:[Te.l0.flex.row,Te.l0.justify.spaceBetween,Te.l0.p(8)],headerText:{userSelect:"none"},headerActions:[Te.l0.flex.row,Te.l0.align.center],headerActionButton:Te.l0.color.foregroundDimmer,headerActionDivider:{height:6,width:0,marginLeft:4,marginRight:4,borderRight:"1px solid var(--foreground-dimmest)"},dirNodeWrapper:[Te.l0.flex.growAndShrink(1),{overflowY:"auto"}]}),Rr=l.forwardRef((function(e,n){var t=e.readOnly,f=void 0!==t&&t,p=e.showResources,h=void 0===p||p,v=e.showHeader,g=void 0===v||v,m=(0,Fe.Z)().showError,y=(0,Jn.d)(),Z=(0,Ve.Z)(),b=(0,s.Z)().fs,w=Zt(),x=(0,i.Z)(l.useState(null),2),k=x[0],S=x[1],T=(0,qt.ZP)({onDone:function(e){var n=e.parentPath,t=e.errors;if(t.length){var r=t.filter((function(e){return e.error===qt.e_.AlreadyExists}));r.length&&S({parentPath:n,errors:r});var i=t.filter((function(e){return e.error!==qt.e_.AlreadyExists}));i.length&&(Cr.kg.error("Error uploading files",{uploadSource:"filetree",parentPath:n,errors:i.map((function(e){var n=e.path,t=e.error;return"".concat(n,": ").concat(t,"}")})).join("\n")}),m("There was an error uploading: ".concat(i.map((function(e){return e.path})).join(", "))))}else Cr.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:n})},fs:b}),E=T.uploadFiles,R=T.pendingUploads,I=Wn();return l.useImperativeHandle(n,(function(){return{uploadFiles:E,addFileType:w}})),(0,a.tZ)(qe.Provider,{value:{fs:b,pendingUploads:R,uploadFiles:E,duplicateFile:function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=(0,rr.Z)((0,C.UO)(e),new Set(n)),r=(0,C.Il)(e),i=r?"".concat(r,"/").concat(t):t,[4,b.copyFile(e,i)];case 1:return(a=o.sent()).error?(m(a.error),[2]):(I(i),[2])}}))}));return function(n,t){return e.apply(this,arguments)}}()},children:(0,a.BX)(jt.Z,{children:[(0,a.tZ)(kr,{}),(0,a.BX)(He.G,{css:[Te.l0.height("100%"),y&&Te.l0.backgroundColor.backgroundDefault],children:[g?(0,a.BX)(He.G,{css:Er.header,children:[(0,a.tZ)(d.Z,{level:4,css:Er.headerText,children:"Files"}),(0,a.BX)(He.G,{css:Er.headerActions,children:[f?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(er.h,{css:Er.headerActionButton,onClick:function(){w(c.Tv.File)},"data-cy":"filetree-add-file",alt:"Add file",children:(0,a.tZ)(nr.Z,{})}),(0,a.tZ)(He.G,{css:Er.headerActionDivider}),(0,a.tZ)(er.h,{css:Er.headerActionButton,onClick:function(){w(c.Tv.Directory)},alt:"Add folder",children:(0,a.tZ)(tr.Z,{})})]}),(0,a.tZ)($t,{readOnly:f,onDownloadZip:function(){return(0,ar.R)(Z)}})]})]}):null,(0,a.tZ)(He.G,{css:Er.dirNodeWrapper,children:(0,a.tZ)(Mt,{siblings:[],readOnly:f,path:u.Ql})}),h?(0,a.tZ)(Qt.w3,{}):null,(0,a.tZ)(Xe.u,{isOpen:Boolean(k),onRequestClose:function(){return S(null)},children:k?(0,a.tZ)(Jt.Z,{paths:k.errors.map((function(e){return e.path})),onCancel:function(){return S(null)},onConfirm:function(){E({overwrite:!0,parentPath:k.parentPath,files:k.errors.map((function(e){return e.file}))}),S(null)}}):null}),(0,a.tZ)(ur,{}),(0,a.tZ)(cr,{})]})]})})}));Rr.displayName="Filetree";var Ir=l.memo(Rr)},39985:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(74985),i=(t(50959),t(87978)),o=t(61284),a=t(85368),l=t(39541),c=t(45510),u=t(92471);function s(e){var n,t=e.paths,s=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{multiline:!0,children:[(n=t,(n=n.map(i.UO)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1)))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return s()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(u.Z,{})})]})]})}},69886:function(e,n,t){var r=t(74985),i=(t(50959),t(2041)),o=t(61284),a=t(45510),l=t(85368),c=t(90171),u=t(47255),s=t(39541);n.Z=function(e){var n=e.isOpen,t=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[s.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u.Z,{size:24,css:[s.l0.color.orangeStrongest]}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[s.l0.pr(32),s.l0.colWithGap(16)],children:[(0,r.tZ)(o.xv,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[s.l0.colWithGap(16),s.l0.pl(16)],children:[(0,r.tZ)(o.xv,{children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})}},41681:function(e,n,t){t.d(n,{qe:function(){return A},kq:function(){return B},Gb:function(){return _}});var r=t(74985),i=t(48306),o=t.n(i),a=t(87978),l=t(87076),c=t(32104),u=t(39541),s=t(43330),d=t(5616),f=t(45510),p=t(57135),h=t(2272),v=t(96583),g=t(50959),m=t(45285),y=t(69921),Z=t(22011),b=t(91926),w=t(13233),x=t(8082),k=t(625),C=t(49146);function S(e){var n=e.filePath,t=e.replLanguage,r=(0,m.Z)(),i=r.fs,o=r.container,l=(0,y.Z)({container:o,service:"format",skip:!b.Z.supportsFormatting(t)}).channel,c=(0,h.Z)(g.useState(!1),2),u=c[0],s=c[1],d=(0,w.Z)().showError,f=(0,g.useCallback)((function(e){s(!1),e&&C.kg.time("formatter_ran",Date.now()-e,{extension:(0,a.r6)(n),type:"formatter_service"})}),[n]);return g.useEffect((function(){if(u&&l){var e=!1,t=null,r=i.watchTextFile(n,{onReady:function(e){!function(e,n){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var n=e.changes;t=t?t.compose(n):n},onError:function(){f()},onMoveOrDelete:function(){f()}});return function(){e=!0,r()}}function o(){return(o=(0,p.Z)((function(r,i){var o,c,u,s,p;return(0,v.__generator)(this,(function(h){switch(h.label){case 0:return o=Date.now(),e||!l?[2]:0===r.length?(f(),[2]):[4,l.request({file:{path:n,content:Z.Z.from(r).toBuffer()}})];case 1:return c=h.sent(),e?[2]:c.error||!c.file?(d("Failed to format ".concat(n),1500),f(),(0,k.j)(k.U3.AUTO_FORMAT_FAILED,{extension:(0,a.r6)(n)}),[2]):0===(u=Z.Z.from(c.file.content).toString()).length||0===(s=(0,x.F)(r,u)).length||0===(p=t?s.map(s,!0):s).length?(f(o),[2]):(i(p),f(o),[2])}}))}))).apply(this,arguments)}}),[l,n,f,i,u,d]),g.useEffect(f,[n,f]),b.Z.supportsFormatting(t)?function(){return s(!0)}:null}var T=t(9970),E=t(28229),R=t(64491),I=t(29820);var D=t(27562),G=36,P=function(){return(0,r.BX)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" file-header-format-button",children:[(0,r.tZ)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" file-header-format-icon",children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]]),children:[(0,r.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" cls-1"}),(0,r.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" cls-2"})]})}),(0,r.tZ)(o(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,r.tZ)(o(),{id:"7b5cc3030f1a201a",dynamic:[G],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(G,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function _(e){var n=e.filePath,t=e.onComplete,r=(0,D.Z)(),i=S({filePath:n,replLanguage:r}),o=function(e){var n,t=e.filePath,r=(0,E.Z)().preferences,i=(0,m.Z)().fs,o=(0,R.Z)(t),l=Boolean(null===(n=null===o||void 0===o?void 0:o.getServerCapabilities())||void 0===n?void 0:n.documentFormattingProvider),c=(0,g.useState)([]),u=c[0],s=c[1],d=(0,w.Z)(),f=d.showError,h=d.showConfirm;return l?{fn:function(){if(!u.includes(t)){s((function(e){return(0,T.Z)(e).concat([t])}));var e=null,n=function(e){(null===e||void 0===e?void 0:e.didErr)?(f("Sorry, formatting ".concat(t," failed"),1500),(0,k.j)(k.U3.AUTO_FORMAT_FAILED,{extension:(0,a.r6)(t)})):h("Formatted ".concat(t," successfully"),1500),l(),s((function(e){return e.filter((function(e){return e!==t}))})),(null===e||void 0===e?void 0:e.startTime)&&C.kg.time("formatter_ran",Date.now()-e.startTime,{extension:(0,a.r6)(t),type:"lsp_format"})},l=i.watchTextFile(t,{onReady:function(){var i=(0,p.Z)((function(i){var a,l,c,u,s,d;return(0,v.__generator)(this,(function(f){switch(f.label){case 0:if(a=i.initialContent,l=i.writeChange,!o)throw new Error("LSP client not found");return c=Date.now(),[4,o.request.format(t,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(u=f.sent())||u.cancelled?(n({didErr:!0}),[2]):u.result?(s=(0,I.Z)(u.result,a.toString()),0===(d=e?s.map(e,!0):s).length?(n({startTime:c}),[2]):(l(d),n({startTime:c}),[2])):(n({didErr:!0}),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(n){var t=n.changes;e=e?e.compose(t):t}})}},isFormatting:u.includes(t)}:null}({filePath:n});return(0,a.Mb)(n)&&(o||i)?{format:function(){!function(e){var n=e.formatWithLsp,t=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===n||void 0===n?void 0:n.fn)||t;if(!o)throw new Error("Expected format function");(0,k.j)(k.U3.AUTO_FORMAT_USED,{language:r,extension:(0,a.r6)(i)}),o()}({formatWithLsp:o,formatWithService:i,replLanguage:r,filePath:n}),t&&t()},isFormatting:Boolean(null===o||void 0===o?void 0:o.isFormatting)}:null}var B={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},A=function(e){var n=e.filePath,t=e.inline,i=e.onComplete,o=e.disableKeyboardShortcut,p=_({filePath:n,onComplete:i});if((0,s.x)(B,{enabled:Boolean(!o&&p),run:function(){null===p||void 0===p||p.format()}}),!p)return null;var h=(0,a.eb)(n);return t?(0,r.tZ)(f.zx,{text:"Format",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return p.format()}}):(0,r.tZ)(l.h,{css:[u.l0.zIndex(1),{alignSelf:"center"}],alt:p.isFormatting?"Formatting ".concat(h,", please wait"):"Format ".concat(h," code"),tooltipPlacement:"left-end",onClick:function(){return p.format()},children:(null===p||void 0===p?void 0:p.isFormatting)?(0,r.tZ)(c.Z,{}):(0,r.tZ)(P,{})})}},77306:function(e,n,t){t.d(n,{e:function(){return m},f:function(){return g}});var r=t(74985),i=t(82568),o=t(45510),a=t(39541),l=t(50959),c=t(43312),u=t(72799),s=t(60566),d=t(77806),f=t(625),p=t(66539),h=(0,c.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),v=(0,i.X)({buttonContainer:[a.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[a.l0.flex.row],button:[a.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:a.TV.space4,paddingRight:a.TV.space8,animation:"".concat(h," 3s"),fontFamily:a.TV.fontFamilyDefault,fontSize:a.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),g=function(e){var n=e.code,t=(0,l.useState)(!1),i=t[0],a=t[1];return(0,r.BX)("div",{css:v.buttonContainer,children:[i?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){a(!1)}))},"aria-hidden":!0,children:"Copied!"}):null,(0,r.tZ)(o.zx,{css:v.button,text:"Copy",small:!0,iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){(0,f.j)(f.U3.GHOSTWRITER_CHAT_CODE_COPIED),(0,s.Z)(n),a(!0)}})]})},m=function(e){var n=e.code,t=e.insertCode,i=(0,l.useState)(!1),a=i[0],c=i[1],s=!t,d=(0,r.tZ)(o.zx,{css:v.button,text:"Insert",disabled:!t,small:!0,iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){t&&(t(n),c(!0))}});return(0,r.BX)("div",{css:v.buttonContainer,children:[a?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){c(!1)}))},"aria-hidden":!0,children:"Inserted!"}):null,s?(0,r.tZ)(p.u,{placement:"bottom",tooltip:"Place cursor in a file to insert code",children:d}):d]})}},51531:function(e,n,t){t.d(n,{v:function(){return Q},z:function(){return j}});var r=t(74985),i=t(39541),o=t(17755),a=t(61284),l=t(85368),c=t(87076),u=t(32104),s=t(38556),d=t(50959),f=t(81202),p=t.n(f),h=t(34495),v=t(99450),g=t(49880),m=t(51631),y=t(73194),Z=t.n(y),b=t(69365),w=t(64918),x=t(76735),k=t(96351),C=t(70114),S=t(18171),T=t(40207),E=t(52364),R=t(38335),I=t(31854),D=t(72006),G=t(83005),P=t(68525),_=t(34979),B=t(5293),A=t(77306);var U=function(e){var n=(0,B.G6)();if(e.inline)return(0,r.tZ)(_.Z,(0,D.Z)({},e));var t=(0,_.F)(e.className),o=t&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(t),c=o?P.$R.from(o):void 0,u=null===c||void 0===c?void 0:c.name,s=String(e.children);return(0,r.tZ)(l.G,{css:[i.l0.colWithGap(12)],children:(0,r.BX)(l.G,{children:[(0,r.BX)(l.G,{css:[i.l0.flex.row,i.l0.align.center,i.l0.p(8),i.l0.backgroundColor.backgroundDefault,{borderTopLeftRadius:4,borderTopRightRadius:4}],children:[(0,r.BX)(l.G,{css:[i.l0.flex.row,i.l0.align.center,{flexGrow:1}],children:[o?(0,r.tZ)(G.Z,{size:12,path:o}):null,u?(0,r.tZ)(a.xv,{css:[i.l0.pl(4),i.l0.fontSize(12),i.l0.color.foregroundDimmer],children:u}):null]}),(0,r.tZ)(A.f,{code:s}),(0,r.tZ)(n,{code:s})]}),(0,r.tZ)(_.Z,(0,D.Z)({disableCopy:!0,blockStyles:[i.l0.p(8),{borderBottomLeftRadius:4,borderBottomRightRadius:4}]},e))]})})},L=t(625),N=t(72370),X=t(6394),F=t(66539),O=t(82568),M=t(51624),W=t(45510),H=t(15544),z=Z()((function(){return t.e(4295).then(t.bind(t,34295))}),{loadableGenerated:{webpack:function(){return[34295]}}}),V=[{title:"Default",value:"NONE",icon:(0,r.tZ)(C.Chat,{})},{title:"Generate code",value:"GENERATE",icon:(0,r.tZ)(C.Sparkle,{})},{title:"Explain code",value:"EXPLAIN",icon:(0,r.tZ)(C.BookClosed,{})},{title:"Edit code",value:"TRANSFORM",icon:(0,r.tZ)(N.Z,{})},{title:"Replit docs",value:"REPLIT_DOCS",icon:(0,r.BX)("div",{css:[i.l0.position.relative,i.l0.width(16),i.l0.height(16)],children:[(0,r.tZ)(C.BookClosed,{}),(0,r.tZ)(C.Logo,{css:[i.l0.position.absolute],style:{transform:"scale(0.5)",top:0,left:.3}})]})}],j=function(e){var n=e.author,t=e.intent,c=e.smallAvatar,u=e.id,s=e.regenerate,d="NONE"!==t;return(0,r.BX)(l.G,{css:[i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(o.n,{src:n.image,username:n.username,small:c}),t?(0,r.BX)(r.HY,{children:[d?(0,r.tZ)(a.xv,{children:"used"}):null,s&&u?(0,r.tZ)(K,{"aria-label":"Reclassify message",intent:t,id:u,regenerate:s}):d&&(0,r.tZ)(Y,{intent:t})]}):null]})},q=function(){return(0,r.BX)(l.G,{css:[i.l0.color.accentNegativeStronger,i.l0.flex.row,i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(x.Z,{}),(0,r.tZ)(a.xv,{multiline:!0,children:"Response reached maximum output length"})]})},Y=function(e){var n=e.intent,t=V.find((function(e){return e.value===n}));return(0,r.tZ)(k.D,{css:[i.l0.fontSize(14),i.l0.height(26),i.l0.p(8),i.l0.backgroundColor.backgroundDefault,{borderColor:i.TV.blurpleDefault,borderWidth:"1px",borderStyle:"solid","> span":{paddingLeft:4}}],text:(null===t||void 0===t?void 0:t.title)||"",iconLeft:null===t||void 0===t?void 0:t.icon})},K=function(e){var n=e.id,t=e.intent,o=e.regenerate,a=(0,E.gp)(),l=a?"You cannot change the action while the message is sending":"Change Ghostwriter's action for this message";if(!(0,w.J1)(t))return null;var c="NONE"===t?null:V.find((function(e){return e.value===t})),u=V.filter((function(e){return e.value!==t}));return(0,r.tZ)(F.u,{tooltip:l,placement:"top",children:(0,r.tZ)(I.P,{items:u,disabled:a,css:[i.l0.backgroundColor.backgroundDefault,i.l0.borderRadius(16),i.l0.height(26),i.l0.p(8),{borderColor:i.TV.blurpleDefault}],placeholder:"Select action",selectedItem:c,onChange:function(e){(0,w.J1)(e.value)&&((0,L.j)(L.U3.GHOSTWRITER_CHAT_INTENT_RECLASSIFIED,{from:t,to:e.value}),o(n,e.value))}})})},$=(0,O.X)({inlineCodeReferenceBlockContainer:[i.l0.px(16),i.l0.pt(8),i.l0.pb(16)],inlineCodeReferenceBlock:[{backgroundColor:i.TV.backgroundHigher},i.l0.p(8),i.l0.borderRadius(8),{borderTopLeftRadius:0}],inlineCodeReferenceFilePathContainer:[i.l0.rowWithGap(4)],inlineCodeReferenceFilePathButton:[{borderBottomWidth:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}]}),Q=(0,d.memo)((function(e){var n,t,o=e.message,f=e.autoScroll,p=e.postMessageComponent,y=e.canReclassify,Z=void 0!==y&&y,x=o.text,k=o.author,C=o.loading,I=o.error,D=o.attribution,P=o.inferenceId,_=o.stopReason,B=(0,E.Gd)(),A=(0,T.d$)(),L="Assistant"===D,N=_===w.tD.MaxTokens,F=(0,T.wK)({messageId:o.id}),O=(0,E.gp)(),V=(0,M.t)(),Y=(0,d.useRef)(null),K=(0,b.rM)();(0,d.useLayoutEffect)((function(){f&&Y.current&&requestAnimationFrame((function(){f&&Y.current&&((0,h.Z)(Y.current,{behavior:"auto",scrollMode:"always"}),K(!0))}))}),[x,f,K]);var Q=i.TV.foregroundDefault;L&&C&&(Q=i.TV.foregroundDimmer);var J,ee,ne=Boolean(o.stopReason),te=(0,S.Z)((function(){var e,n,t,r,i=null===F||void 0===F||null===(e=F.workspaceContext)||void 0===e?void 0:e.mostRecentFile,o=null!==(r=null===F||void 0===F||null===(n=F.workspaceContext)||void 0===n?void 0:n.fileContext.find((function(e){return e.filePath===i})))&&void 0!==r?r:null===F||void 0===F||null===(t=F.workspaceContext)||void 0===t?void 0:t.fileContext[0],a=null===o||void 0===o?void 0:o.code;return i&&a?(0,v.ih)({originalCode:a,filePath:i,showDiffDecorations:ne}):U}),[null===F||void 0===F||null===(n=F.workspaceContext)||void 0===n?void 0:n.fileContext,null===F||void 0===F||null===(t=F.workspaceContext)||void 0===t?void 0:t.mostRecentFile,ne]);return"transformCode"!==o.type||A?(J="Human"===o.attribution?v.K2:"GENERATE"===o.intent?U:"TRANSFORM"===o.intent?te:U,ee="explainCode"!==o.type||o.loading?(0,r.tZ)(R.J,{text:x,textColor:Q,codeComponent:J}):"Human"===o.attribution?(0,r.tZ)(l.G,{children:(0,r.tZ)(R.J,{text:"Explain code",textColor:Q,codeComponent:J})}):(0,r.BX)(l.G,{children:[o.codeReference?(0,r.BX)(l.G,{css:$.inlineCodeReferenceBlockContainer,children:[(0,r.tZ)(l.G,{css:$.inlineCodeReferenceFilePathContainer,children:(0,r.tZ)(W.zx,{small:!0,outlined:!0,css:$.inlineCodeReferenceFilePathButton,iconLeft:(0,r.tZ)(G.Z,{size:12,path:o.codeReference.filePath}),iconRight:(0,r.tZ)(H.Z,{}),text:"".concat(o.codeReference.filePath," ").concat(o.codeReference.range.lineFrom,":").concat(o.codeReference.range.lineTo),onClick:function(){o.codeReference&&V({path:o.codeReference.filePath,line:o.codeReference.range.lineTo})}})}),(0,r.tZ)(X.Z,{css:$.inlineCodeReferenceBlock,lineNumbers:!0,lineNumbersStart:o.codeReference.range.lineFrom,language:o.codeReference.language,code:o.codeReference.code,filePath:o.codeReference.filePath})]}):null,(0,r.tZ)(R.J,{text:x,textColor:Q,codeComponent:J})]}),(0,r.BX)(l.G,{css:[i.l0.px(8),i.l0.py(12),i.l0.colWithGap(8),"Assistant"===D?{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)",borderWidth:"1px 0px",borderStyle:"solid",borderColor:"rgba(121, 94, 255, 0.5)"}:null],children:[(0,r.BX)(l.G,{css:[i.l0.flex.row,i.l0.justify.spaceBetween,i.l0.align.center],children:[(0,r.tZ)(j,{author:k,intent:o.intent,id:o.id,regenerate:Z?B:null}),(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8)],children:[L&&Z&&!O?(0,r.tZ)(c.h,{alt:"Regenerate",css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){B(o.id)},children:(0,r.tZ)(s.Z,{})}):null,P?(0,r.tZ)(l.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:(0,r.tZ)(g.Z,{inferenceClass:m.Sg.Chat,inferenceId:P,language:""})}):null]})]}),(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[L&&C?(0,r.tZ)(u.Z,{}):null,(0,r.tZ)(l.G,{css:[i.l0.colWithGap(8),i.l0.flex.growAndShrink(1)],children:ee})]}),p||null,L&&"string"===typeof I?(0,r.tZ)(l.G,{children:(0,r.tZ)(a.xv,{css:[i.l0.color.accentNegativeStronger,i.l0.fontSize(16)],multiline:!0,children:I})}):null,N?(0,r.tZ)(q,{}):null,A?(0,r.tZ)(z,{message:o}):null,f?(0,r.tZ)(l.G,{css:{marginTop:-8,marginBottom:0},innerRef:Y}):null]})):null}),(function(e,n){return n.autoScroll===e.autoScroll&&n.canReclassify===e.canReclassify&&p()(n.message,e.message)}))},38335:function(e,n,t){t.d(n,{J:function(){return v}});var r=t(74985),i=t(47900),o=t(39541),a=t(61284),l=t(85368),c=t(49810),u=t(50959),s=t(71253),d=t(66164),f=[t(25462).Z,d.Z,s.Z],p=[],h=function(e){return(0,r.tZ)(l.G,{children:(0,r.tZ)(a.xv,{multiline:!0,children:e.children})})},v=(0,u.memo)((function(e){var n=e.text,t=e.textColor,a=e.codeComponent;return(0,r.tZ)(i.ZP,{remarkPlugins:f,rehypePlugins:p,components:{h1:h,h2:h,h3:h,h4:h,h5:h,h6:h,code:a},css:[c.Z,{p:{color:t,lineHeight:1.875}},o.l0.px(16),o.l0.maxWidth("100%")],lineBreaks:!0,children:n})}))},99450:function(e,n,t){t.d(n,{K2:function(){return x},ih:function(){return k}});var r=t(57135),i=t(72006),o=t(96583),a=t(74985),l=t(83293),c=t(18171),u=t(34979),s=t(625),d=t(45510),f=t(61284),p=t(85368),h=(t(70114),t(15544)),v=t(39541),g=t(45285),m=t(4421),y=t(51624),Z=(t(5293),t(37313)),b=t(7006),w=function(){(0,s.j)(s.U3.GHOSTWRITER_CHAT_CODE_COPIED)},x=function(e){return e.inline?(0,a.tZ)(u.Z,(0,i.Z)({onCodeCopied:w},e)):(0,a.tZ)(p.G,{css:[v.l0.colWithGap(12)],children:(0,a.tZ)(u.Z,(0,i.Z)({onCodeCopied:w},e))})},k=function(e){var n=e.originalCode,t=e.filePath,r=e.showDiffDecorations;return function(e){var o=String(e.children);return(0,c.Z)((function(){return e.inline?(0,a.tZ)(u.Z,(0,i.Z)({onCodeCopied:w},e)):(0,a.tZ)(S,{originalCode:n,transformedCode:o,filePath:t,showDiffDecorations:r})}),[e,o])}},C=function(e){var n=e.title;return(0,a.tZ)(p.G,{css:[v.l0.backgroundColor.backgroundDefault,v.l0.px(4),{borderTopLeftRadius:4,borderTopRightRadius:4}],children:(0,a.tZ)(f.xv,{variant:"small",children:n})})},S=function(e){var n=e.originalCode,t=e.transformedCode,i=e.filePath,c=e.showDiffDecorations,u=(0,l.J)({left:{code:n,filePath:i},right:{code:t,filePath:i},showDiffDecorations:c}),s=u.left,f=u.right,w=(0,g.Z)().fs,x=(0,y.t)();return(0,a.BX)(p.G,{css:[v.l0.width("100%")],children:[(0,a.BX)(p.G,{css:[v.l0.flex.row,v.l0.flex.wrap],children:[s.ref?(0,a.BX)(p.G,{css:[{flex:"1 1 50%",minWidth:m.j.mobileMin}],children:[(0,a.tZ)(C,{title:"original"}),(0,a.tZ)(Z.Z,{ref:s.ref,css:[v.l0.viewStyle,v.l0.backgroundColor.backgroundHigher,v.l0.overflow("auto"),v.l0.maxHeight(300)],initialDoc:s.code,lineWrapping:!1,readOnly:!0})]}):null,f.ref?(0,a.BX)(p.G,{css:[{flex:"1 1 50%",minWidth:m.j.mobileMin}],children:[(0,a.tZ)(C,{title:"transformed"}),(0,a.tZ)(Z.Z,{ref:f.ref,css:[v.l0.viewStyle,v.l0.backgroundColor.backgroundHigher,v.l0.overflow("auto"),v.l0.maxHeight(300)],initialDoc:f.code,lineWrapping:!1,readOnly:!0})]}):null]}),(0,a.tZ)(p.G,{css:[v.l0.rowWithGap(4),v.l0.pt(8)],children:(0,a.tZ)(d.zx,{small:!0,outlined:!0,iconLeft:(0,a.tZ)(h.Z,{}),text:i,onClick:function(){x({path:i})}})}),(0,a.tZ)(p.G,{css:[v.l0.rowReverseWithGap(4),v.l0.py(8)],children:(0,a.tZ)(d.zx,{text:"Replace original",colorway:"primary",stretch:!0,css:[v.l0.px(16)],onClick:(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){return e=w.watchTextFile(i,{onReady:function(n){var r=n.initialContent;(0,n.writeChange)({from:0,to:r.toString().length,insert:t},b.B),w.flush().finally((function(){e()}))}}),[2]}))}))})})]})}},95652:function(e,n,t){t.d(n,{p:function(){return h}});var r=t(16988),i=t(48330),o=t(72006),a=t(43119),l=t(71440),c=t(24635);function u(){var e=(0,a.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            meteredTrial {\n              messagesSentInPeriod\n              cap\n              hasAccessToMeteredTrial\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=t(39691),p=t(50959),h=function(){var e=(0,r.v)(),n=(0,f.$e)(),t=function(e){var n=(0,o.Z)({},s,e);return c.a(d,n)}(),a=t.data,l=t.loading,u=t.error,h=(0,i.Z)();(0,p.useEffect)((function(){n({chatModel:e,replId:h,currentUserData:a,currentUserLoading:l,currentUserError:u})}),[e,a,u,l,n,h])}},51624:function(e,n,t){t.d(n,{e:function(){return p},t:function(){return f}});var r=t(40207),i=t(18171),o=t(42445),a=t(50959),l=t(29203),c={performPaneOperation:function(){}},u=(0,o.cn)(c),s=(0,o.cn)((function(e){return e(u).performPaneOperation})),d=(0,o.cn)(null,(function(e,n,t){var r=t.path,i=t.line,o=t.col,a=e(s);a&&a({operation:"open",pane:{type:"codeEditor",data:{path:r,line:i,col:o}}})})),f=function(){return(0,l.$X)(d)};function p(e){var n=e.debugMode,t=void 0!==n&&n,o=e.performPaneOperation,s=(0,l.Uu)(),d=(0,i.Z)((function(){return{performPaneOperation:o}}),[o]);(0,a.useEffect)((function(){return s.set(r.nE,t),s.set(u,d),function(){s.set(r.nE,!1),s.set(u,c)}}),[t,d,s])}},56037:function(e,n,t){t.d(n,{b:function(){return B}});var r=t(29203),i=t(18171),o=t(57135),a=t(96583),l=t(45285),c=t(13716),u=t(64918),s=t(39691),d=t(9970),f=t(87978),p=t(68710),h=t(12583),v=t(4561),g=t(59253),m=t(5894);function y(e){var n=(0,f.r6)(e),t=m.hI.some((function(n){return e.endsWith(n)})),r=m.HH.some((function(n){return e.endsWith(n)})),i=m.Fv.some((function(n){return e.split("/").some((function(e){return e.includes(n)}))}));return!n||t||r||i}function Z(e){var n=e.length;if(0===n)return!1;var t=0,r=Math.min(n,512);if(n>=3&&239===e[0]&&187===e[1]&&191===e[2])return!1;if(n>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])return!1;if(n>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3])return!1;if(n>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(n>=2&&254===e[0]&&255===e[1])return!1;if(n>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++){if(0===e[i])return!0;if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(t++,i>=32&&100*t/r>10)return!0}}return 100*t/r>10}var b=t(9608),w=t(91926);function x(e){return k.apply(this,arguments)}function k(){return(k=(0,o.Z)((function(e){var n,t,r,i,o,l,c,u,s,m,x,k,C,S,T,E,R,I,D,G,P,_;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=e.recentFiles,t=e.fs,r=e.dotReplit,i=e.maxCharacters,o=e.replLanguage,[4,r.getConfig()];case 1:return c=a.sent().config,u=(null===c||void 0===c?void 0:c.entrypoint)||w.Z.getMainFileName(o)||null,s=((null===c||void 0===c?void 0:c.hidden)||[]).map((function(e){return(0,p.Z)(e)})).filter(Boolean),(l=m=[]).push.apply(l,(0,d.Z)(n)),u&&m.length<10?(m.push(u),x=(0,f.Il)(u),k=""===x?h.Ql:x,[4,t.readDir(k)]):[3,3];case 2:"children"in(C=a.sent())&&(S=m).push.apply(S,(0,d.Z)(C.children.filter((function(e){return e.type===v.Tv.File})).map((function(e){return k===h.Ql?e.filename:"".concat(x,"/").concat(e.filename)})))),a.label=3;case 3:return 0===(T=(0,d.Z)(new Set(m)).filter((function(e){return!y(e)&&!(0,g.lv)(e,s)&&(0,f.Mb)(e)})).slice(0,10)).length?[2,[]]:[4,Promise.all(T.map((function(e){return t.readFile(e)})))];case 4:for(var B in E=a.sent(),R=[],I=i,T)if(D=T[B],G=(0,b.S)(D),!(P=E[B]).error&&!Z(P.content.toBuffer())&&(_=P.content.toString().slice(0,I),R.push({filePath:D,language:G,code:_}),(I-=_.length)<=0))return[2,R];return[2,R]}}))}))).apply(this,arguments)}var C=t(50959),S=t(27562),T=function(){var e=(0,l.Z)(),n=e.fs,t=e.dotReplit,i=(0,r.c1)(s.aK),d=(0,c.AA)(),f=(0,S.Z)();return(0,C.useCallback)((0,o.Z)((function(){var e,r;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if(!n||!t)throw new Error("Expected fs and dotReplit services");return e=(0,u.yL)(i).fileContextCharacters,[4,x({recentFiles:r=d(),fs:n,dotReplit:t,maxCharacters:e,replLanguage:f})];case 1:return[2,{fileContext:o.sent(),mostRecentFile:r[0]||null}]}}))})),[n,t,i,d,f])},E=t(74985),R=t(31672),I=t(625),D=t(77306),G=t(7006),P=function(e){var n=e.code,t=(0,c.R3)(),r=(0,c.ex)(),i=(0,R.Z)(null!==t&&void 0!==t?t:r),o=(0,c.Qt)();return(0,E.tZ)(D.e,{code:n,insertCode:function(){var e,t;i&&((0,I.j)(I.U3.GHOSTWRITER_CHAT_CODE_INSERTED),i({code:n,insertAt:null!==(t=null===(e=o())||void 0===e?void 0:e.position.offset)&&void 0!==t?t:"end"},G.B))}})},_=t(5293);function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=T(),t=(0,r.Uu)(),o=(0,i.Z)((function(){var t;return{getGhostwriterWorkspaceFileContext:n,insertCodeButtonComponent:P,openGhostwriterPane:null!==(t=null===e||void 0===e?void 0:e.openGhostwriterPane)&&void 0!==t?t:function(){}}}),[n,null===e||void 0===e?void 0:e.openGhostwriterPane]);(0,C.useEffect)((function(){return t.set(_.Vx,o),function(){t.set(_.Vx,_.f9)}}),[o,t])}},15823:function(e,n,t){t.d(n,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=t(250),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},21303:function(e,n,t){t.d(n,{BI:function(){return f},EI:function(){return Z},Jp:function(){return p},_H:function(){return h},bA:function(){return m},ox:function(){return y}});var r,i,o,a,l=t(72006),c=t(35981),u=t(74121),s=t(62946),d=t(50959),f=(0,c.u)((function(){return null})),p=(0,c.u)((function(){return null}));function h(e){var n=p.current();(0,d.useEffect)((function(){e!==n&&p.set((function(){return e}))}),[e,n])}var v=(0,s.cn)(null),g=(0,s.cn)((function(e){return e(v)}),(function(e,n,t){if(null===t)n(v,null);else{var c=e(v),u=c?(0,l.Z)({},c,t):(0,l.Z)({},t);if(!u.filePath||!u.changes)throw new Error('"filePath", "changes" required when initializing history state');f.set((function(){return u}));var s,d,p,h,g=u.changes.length;if(0===g)return u.users={},u.version=0,u.playing=!1,u.comparing=!1,u.count=0,void n(v,u);null!==(s=(r=u).count)&&void 0!==s||(r.count=g),null!==(d=(i=u).version)&&void 0!==d||(i.version=g-1),null!==(p=(o=u).playing)&&void 0!==p||(o.playing=!1),null!==(h=(a=u).comparing)&&void 0!==h||(a.comparing=!1),(null===c||void 0===c?void 0:c.changes)&&u.changes!==c.changes&&(u.count=g,u.version=Math.min(u.version,g-1),u.playing=!1,u.comparing=!1),u.version===g-1&&(u.playing=!1),n(v,u)}}));function m(){return(0,s.KO)(g,u.d8)}var y=(0,d.createContext)({});function Z(e,n){return(0,d.useMemo)((function(){return{openHistory:function(){return n({operation:"replace",pane:{type:"history",data:{path:e}}})},closeHistory:function(){return n({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})}}}),[e,n])}},46889:function(e,n,t){t.d(n,{j:function(){return u},p:function(){return s}});var r=t(72006),i=t(625),o=t(13424),a=t(50959),l=t(9353),c=t(21303);function u(){var e=(0,o.uV)();return(0,a.useCallback)((function(n,t,i){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function s(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},79249:function(e,n,t){t.d(n,{h:function(){return T},w:function(){return C}});var r=t(72006),i=t(4405),o=t(74985),a=t(42256),l=t(39137),c=t(50959),u=t(92153),s=t(42445),d=t(33523);function f(){return(0,c.useState)((function(){return(0,s.MT)()}))[0]}var p=(0,c.createContext)(null);function h(){var e=(0,c.useContext)(p);if(!e)throw new Error("Expected store in context");return e}var v=function(e){return(0,d.b9)(e,{store:h()})};var g=t(18171),m=(0,s.cn)(-1),y=(0,s.cn)([]),Z=(0,s.cn)(void 0),b=(0,s.cn)(null,(function(e,n,t){var r=e(Z);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(m,(function(n){return Math.min(e(y).length,n+1)}));break;case"backward":n(m,(function(e){return Math.max(0,e-1)}))}var i=e(y),o=e(m);return o>=i.length?"":i[o]})),w=(0,s.cn)(null,(function(e,n,t){var r;clearTimeout(null===(r=e(Z))||void 0===r?void 0:r.id);var i=function(){if(t.length>0){var r=!1;n(y,(function(n){return(0,u.ZP)(n,(function(n){if(t!==n[e(m)])for(r=!0,n.push(t);n.length>20;)n.shift()}))})),r&&n(m,e(y).length-1)}n(Z,void 0)};n(Z,{id:setTimeout(i,2e3),cb:i})}));function x(e){var n=v(w),t=function(){var e=v(b);return{forward:(0,g.Z)((function(){return function(){return e("forward")}}),[e]),backward:(0,g.Z)((function(){return function(){return e("backward")}}),[e])}}(),o=t.forward,l=t.backward,u=(0,c.useRef)(e.value);return(0,c.useEffect)((function(){e.value!==(null===u||void 0===u?void 0:u.current)&&(e.value&&n(e.value),u.current=e.value)}),[n,e.value]),(0,i.Z)((0,r.Z)({},e),{onKeyDown:(0,g.Z)((function(){return function(n){var t;if(n.shiftKey||(0,a.j)(n)){var r;null===(r=e.onKeyDown)||void 0===r||r.call(e,n)}else{var i=n.currentTarget,c=Boolean(i.value.match(/\n/));if("ArrowUp"===n.key){if(c&&i.selectionStart&&i.selectionStart>0)return;return e.onChange(l()),n.preventDefault(),void n.stopPropagation()}if("ArrowDown"===n.key){if(c&&i.selectionEnd&&i.selectionEnd<i.value.length)return;return e.onChange(o()),n.preventDefault(),void n.stopPropagation()}null===(t=e.onKeyDown)||void 0===t||t.call(e,n)}}}),[l,o,e]),onChange:(0,g.Z)((function(){return function(n){e.onChange(n.target.value)}}),[e])})}var k=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.B,(0,r.Z)({ref:n},t))})),C=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(k,(0,r.Z)({ref:n},e))})})),S=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.II,(0,r.Z)({ref:n},e,t))})),T=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(S,(0,r.Z)({ref:n},e))})}))},59200:function(e,n,t){t.d(n,{m:function(){return h}});var r=t(74985),i=(t(50959),t(43312)),o=t(85368),a=t(39541),l=t(66539),c=t(85682),u=t(47250),s=t(9396),d=t(84721),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function h(){var e=(0,c.Z)(),n=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(u.Z,{size:16,color:a.TV.redDefault})})}):n?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[p.root,p.pulse],children:(0,r.tZ)(s.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},71321:function(e,n,t){t.d(n,{B:function(){return c}});var r=t(74985),i=t(43312),o=t(39541),a=t(85368),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.TV.redStronger:n,i=e.small?6:8;return(0,r.tZ)(a.G,{style:{backgroundColor:t,width:i,height:i},css:l})}},40948:function(e,n,t){t.d(n,{I:function(){return u}});var r=t(72006),i=t(4405),o=t(50959),a=t(68825),l=t(60471),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,a.Z)(),n=(0,l.T)();return(0,o.useMemo)((function(){var t,o=(null===n||void 0===n?void 0:n.packagers)||[],a=(null===o||void 0===o?void 0:o.map((function(e){var n;return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=c[e.language])&&void 0!==t?t:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a}),[n,e])}},80848:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9970),i=t(74985),o=t(68711),a=t.n(o),l=t(13716);function c(e){var n=e.replTitle,t=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r.Z)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),n);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:t},"title")})}},91821:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(74985),i=t(48306),o=t.n(i),a=(t(50959),t(24025)),l=t(69861),c=t(39541);function u(e){var n=e.preventHighlightBorder,t=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";-moz-box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},19358:function(e,n,t){t.d(n,{M:function(){return T}});var r=t(74985),i=t(2272),o=t(45510),a=t(87076),l=t(85368),c=t(80336),u=t(47880),s=t(39541),d=t(50959),f=t(19281);function p(e){var n=e.onDismiss,t=e.context,p=(0,i.Z)(d.useState(!1),2),h=p[0],v=p[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(u.Z,{}),text:"Try Ghostwriter",colorway:"blurple",css:[s.l0.flex.grow(1),s.l0.flex.shrink(0),{">div":[s.l0.align.center]}],onClick:function(){return v(!0)}}),(0,r.tZ)(a.h,{onClick:n,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(c.Z,{})})]}),(0,r.tZ)(f.Z,{context:t,isOpen:h,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var h=t(33280),v=t(61284),g=t(85747),m=t(54822);function y(e){var n=e.context,t=(0,g.s)(),a=t.cta,c=t.trialExpiryDate,p=(0,i.Z)(d.useState(!1),2),y=p[0],Z=p[1];if(a!==g.m.TrialOngoing&&a!==g.m.TrialExpired)return null;var b=(0,m.X)(c);return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(l.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(l.G,{css:[s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,r.tZ)(u.Z,{}),(0,r.tZ)(v.xv,{children:"Ghostwriter Trial"})]}),(0,r.tZ)(v.xv,{color:"dimmer",children:a===g.m.TrialOngoing?b:"Ended"})]}),(0,r.tZ)(o.zx,{onClick:function(){return Z(!0)},text:a===g.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(h.R,{})]}),(0,r.tZ)(f.Z,{context:n,isOpen:y,onRequestClose:function(){return Z(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var Z=t(46688),b=t(10601);function w(e){var n=e.context,t=(0,g.s)(),i=t.cta,o=t.trialExpiryDate,a=i===g.m.TrialOngoing&&(0,b.Z)(o,new Date)<=3,l=i===g.m.TrialExpired;return a?(0,r.tZ)(x,{context:n}):l?(0,r.tZ)(k,{context:n}):null}function x(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function k(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-expired-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var C=t(25150),S=t(70232);function T(){var e=(0,g.s)(),n=e.cta,t=e.loading,i=(0,C.o)("ghostwriter-repl-resources-cta"),o=i.isLoading,a=i.isDone,l=i.setAsDone;if(o||t)return null;switch(n){case g.m.None:case g.m.Activated:return null;case g.m.TrialOngoing:case g.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{context:"repl_resources"}),(0,r.tZ)(y,{context:"repl_resources"})]});case g.m.Activate:return a||o?null:(0,r.tZ)(p,{onDismiss:l,context:"repl_resources"});default:(0,S.Z)(n)}}},35536:function(e,n,t){t.d(n,{ky:function(){return f},qo:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},98054:function(e,n,t){t.d(n,{Z:function(){return Xe}});var r=t(74985),i=t(50959),o=t(85368),a=t(39541),l=t(77511),c=t(9970),u=t(61284),s=t(63128),d=t(31854),f=t(48667),p=t(32104),h=t(56169);function v(e){var n=e.id,t=e.title,l=e.children,c=(0,h.H)()(n);return(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center],children:[(0,r.tZ)(o.G,{css:a.l0.flex.growAndShrink(1),tag:"label",htmlFor:c,children:"string"===typeof t?(0,r.tZ)(u.xv,{children:t}):t}),i.cloneElement(l,{id:c})]})}var g=t(87076),m=t(59066),y=t(85747),Z=t(80572),b=t(70232),w=t(57389),x=t(31858),k=t(88541),C=t(28229),S=t(625),T=t(66539),E=t(70719),R=t(98416),I=t(72006),D=t(43119),G=t(71440),P=t(24635);function _(){var e=(0,D.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}var B={},A=(0,G.Ps)(_());var U=t(33280),L=t(44333),N=Array.from(R.vw,(function(e){return{title:e,value:e}})),X={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center]};function F(){var e,n,t=(0,k.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),i=function(e){var n=(0,I.Z)({},B,e);return P.a(A,n)}().data,l="UserPowerUpsTypes"===(null===i||void 0===i||null===(e=i.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&i.currentUser.userPowerUpsByType.ghostwriter.active,s=(0,C.Z)(),f=s.preferences,p=s.update,h=(0,x.Z)().engine,g={value:null,title:"default"},m=function(e,n){p((0,w.Z)({},e,n)),(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:n})};return l?(0,r.BX)(o.G,{css:a.l0.colWithGap(12),children:[(0,r.tZ)(v,{id:"codeSuggestionToggle",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:X.titleContainer,children:(0,r.tZ)(u.xv,{children:"Complete Code"})}),(0,r.BX)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(L.r,{"aria-label":"Code complete",isSelected:f.codeSuggestion,onChange:function(e){m("codeSuggestion",e)}})})}),t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.tZ)(u.xv,{children:"Ghostwriter Complete Code Engine (override) "}),(0,r.tZ)(T.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(E.Z,{})})]}),(0,r.BX)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",h]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(n=N.find((function(e){return e.value===f.completeCodeEngine})))&&void 0!==n?n:g,onChange:function(e){return m("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[g].concat((0,c.Z)(N))})})})]}):null]}):null}var O={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center],surface:[a.l0.p(8),a.l0.colWithGap(8),a.l0.borderRadius(8),a.l0.align.start]};function M(){var e=(0,y.s)(),n=e.cta,t=e.loading,i=(0,l.rv)();if(t)return(0,r.tZ)(v,{id:"ghostwriter",title:"Ghostwriter",children:(0,r.tZ)(p.Z,{})});switch(n){case y.m.None:return null;case y.m.Activated:case y.m.TrialOngoing:return(0,r.tZ)(F,{});case y.m.TrialExpired:case y.m.Activate:return i?null:(0,r.tZ)(v,{id:"ghostwriter",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:O.titleContainer,children:[(0,r.tZ)(u.xv,{children:"Ghostwriter"}),(0,r.tZ)(Z.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Replit's AI pair programmer can complete, generate, explain, and transform code."})]}),children:(0,r.tZ)(m.Z,{context:"workspace_settings_pane"})});default:(0,b.Z)(n)}}var W=t(16988),H=t(64918),z=t(18180),V=Array.from(H.ce,(function(e){return{title:e,value:e}}));function j(){var e,n=(0,z.d)(),t=(0,k.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),i=(0,C.Z)(),l=i.preferences,s=i.update,f=(0,W.v)(),p={value:null,title:"default"};return(0,r.tZ)(r.HY,{children:n&&t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.tZ)(u.xv,{children:"Ghostwriter Chat Engine (override) "}),(0,r.tZ)(T.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(E.Z,{})})]}),(0,r.BX)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",f]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(e=V.find((function(e){return e.value===l.chatEngine})))&&void 0!==e?e:p,onChange:function(e){return n="chatEngine",t=null===e||void 0===e?void 0:e.value,s((0,w.Z)({},n,t)),void(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t});var n,t},items:[p].concat((0,c.Z)(V))})})})]}):null})}var q=t(34147),Y=t(2439),K=t(42256),$=t(90171),Q=t(45510),J=t(39137),ee=t(82568),ne=t(63837),te=t(41120),re=t(8622);function ie(e){return e.slice().sort((function(e,n){return e-n}))}var oe=(0,ee.X)({ruler:[a.l0.py(4),a.l0.px(8),a.l0.rowWithGap(4),a.l0.align.center,a.l0.borderRadius(8)],remove:[a.l0.borderRadius(4)],title:[a.l0.pr(8),a.l0.overflow("visible"),a.l0.flex.shrink(0)],body:[a.l0.flex.row,a.l0.flex.wrapReverse,a.l0.align.start,a.l0.justify.end,a.l0.flex.growAndShrink(1),{gap:a.TV.space4}],list:[a.l0.flex.row,a.l0.flex.wrap,a.l0.flex.growAndShrink(1),a.l0.align.end,a.l0.justify.end,{gap:a.TV.space4}],add:[a.l0.rowWithGap(4),a.l0.align.center]});function ae(e){var n=e.pos,t=e.onRemove;return(0,r.BX)(s.T,{css:oe.ruler,elevated:!0,children:[(0,r.tZ)(u.xv,{children:n}),(0,r.tZ)(g.h,{css:oe.remove,alt:"Remove ruler",onClick:t,children:(0,r.tZ)(te.Z,{})})]})}function le(){var e=(0,i.useState)(!1),n=e[0],t=e[1],a=(0,i.useState)(80),l=a[0],s=a[1],d=(0,i.useRef)(null),f=(0,i.useRef)(null),p=-1===l,h=l>=0&&l<=1e3,g=(0,C.Z)(),m=g.preferences,y=g.update,Z=ie(m.rulers);return(0,r.tZ)(v,{id:"rulers",title:(0,r.tZ)(u.xv,{css:oe.title,children:"Rulers"}),children:(0,r.BX)(o.G,{css:oe.body,children:[(0,r.tZ)(o.G,{css:oe.list,children:Z.map((function(e,n){return(0,r.tZ)(ae,{pos:e,onRemove:function(){y({rulers:Z.filter((function(e,t){return t!==n}))})}},n)}))}),n?(0,r.BX)(o.G,{css:oe.add,children:[(0,r.tZ)(J.II,{ref:d,type:"number",style:{width:p?"6ch":l.toString().length+5.5+"ch"},value:l>=0?l.toString():"",onChange:function(e){if(""===e.target.value)s(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||s(n)}},onKeyDown:function(e){"Escape"===e.key?(s(80),t(!1)):"Enter"===e.key&&h&&(y({rulers:ie((0,c.Z)(Z).concat([l]))}),t(!1),s(80))},onBlur:function(e){e.relatedTarget!==f.current&&(t(!1),s(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(Q.zx,{ref:f,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(ne.Z,{}),disabled:!h,onClick:function(){h&&(y({rulers:ie((0,c.Z)(Z).concat([l]))}),t(!1),s(80))},onBlur:function(e){e.relatedTarget!==d.current&&(t(!1),s(80))}})]}):(0,r.tZ)(r.HY,{children:Z.length>=10?null:(0,r.tZ)(Q.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)(re.Z,{}),onClick:function(){return t(!0)}})})]})})}function ce(e){var n=e.onBeforePreferencesUpdate,t=e.hideLayoutControl,i=e.className,h=e.resetLayout,m=(0,C.Z)(),y=m.preferences,Z=m.update,b=(0,l.Vg)((0,$.useRouter)()),w=(0,l.T3)(),x=(0,k.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),T=(0,k.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),E=function(e){n&&n(e),Object.keys(e).forEach((function(n){var t=e[n];(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})})),Z(e)};if(!y)return null;var R=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],I=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],D=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],G=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],P=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],_=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],B=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],A=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:K.U[e]}}));return(0,r.BX)(s.T,{className:i,background:"default",css:[a.l0.p(16),a.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(v,{id:"layout",title:"Default layout",children:(0,r.BX)(o.G,{css:[a.l0.align.center,a.l0.rowWithGap(8)],children:[h?(0,r.tZ)(g.h,{alt:"Reset layout",onClick:function(){h.reset()},children:h.reseting?(0,r.tZ)(p.Z,{}):(0,r.tZ)(f.Z,{})}):null,(0,r.tZ)(d.P,{initialSelectedItem:R.find((function(e){return y.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var n="stacked"===(null===e||void 0===e?void 0:e.value);E({isLayoutStacked:n})},items:(0,c.Z)(R)})]})}),(0,r.tZ)(U.R,{})]}),(0,r.tZ)(v,{id:"fontSize",title:"Font size",children:(0,r.tZ)(d.P,{initialSelectedItem:I.find((function(e){return e.value===y.fontSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;E({fontSize:n})},items:(0,c.Z)(I)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"indentType",title:"Indent type",children:(0,r.tZ)(d.P,{initialSelectedItem:D.find((function(e){return e.value===(y.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var n="spaces"===(null===e||void 0===e?void 0:e.value);E({indentIsSpaces:n})},items:(0,c.Z)(D)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"indentSize",title:"Indent size",children:(0,r.tZ)(d.P,{initialSelectedItem:G.find((function(e){return e.value===y.indentSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;E({indentSize:n})},items:(0,c.Z)(G)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(d.P,{initialSelectedItem:_.find((function(e){return e.value===(y.wrapping?"soft":"none")})),onChange:function(e){var n="soft"===(null===e||void 0===e?void 0:e.value);E({wrapping:n})},items:(0,c.Z)(_)})}),(0,r.tZ)(U.R,{}),x&&!w?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v,{id:"minimap",title:"Minimap",children:(0,r.tZ)(d.P,{initialSelectedItem:B.find((function(e){return e.value===y.minimapDisplay})),onChange:function(e){E({minimapDisplay:e.value})},items:(0,c.Z)(B)})}),(0,r.tZ)(U.R,{})]}):null,T?(0,r.BX)(r.HY,{children:[(0,r.tZ)(le,{}),(0,r.tZ)(U.R,{})]}):null,(0,r.tZ)(v,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(d.P,{initialSelectedItem:P.find((function(e){return["vim","emacs"].includes(e.value)?e.value===y.keyboardHandler:"default"===e.value&&!y.keyboardHandler})),onChange:function(e){var n=["vim","emacs"].includes(e.value)?e.value:null;E({keyboardHandler:n})},items:(0,c.Z)(P),dataCy:"keybinds"})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"multiselectModifier",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{children:"Multiselect modifier key"}),(0,r.tZ)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,r.tZ)(d.P,{initialSelectedItem:A.find((function(e){return e.value===y.multiselectModifierKey})),onChange:function(e){E({multiselectModifierKey:e.value})},items:(0,c.Z)(A)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(M,{}),(0,r.tZ)(j,{}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"codeIntelligence",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{children:"Code intelligence"}),(0,r.tZ)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:"Code intelligence gives you autocomplete, syntax highlighting, and hints as you type."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Code Intelligence",isSelected:y.codeIntelligence,onChange:function(e){E({codeIntelligence:e})}})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{children:"Accessible Terminal Output"}),(0,r.tZ)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Accessible Terminal Output",isSelected:y.accessibleTerminal,onChange:function(e){E({accessibleTerminal:e})}})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{children:"Automatic webview"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Open a webview automatically when a port is open"})]}),children:(0,r.tZ)(L.r,{"aria-label":"Automatic Webview",isSelected:y.webviewAutoOpenOnPortOpened,onChange:function(e){E({webviewAutoOpenOnPortOpened:e})}})}),b?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"theme",title:"Theme",children:(0,r.tZ)(q.Z,{css:[a.l0.minWidth(184),a.l0.backgroundColor.backgroundHigher],context:Y.HY.WorkspacePreferencesPane})})]})]})}var ue=t(82001),se=t(17807),de=t(80731),fe=t(25198),pe=t(1050),he=t(26992),ve=t(99964),ge=t(18988),me=t(76735),ye=t(250),Ze=t(83718),be=t(16918),we=t(91291),xe=t(49944),ke=t(70804),Ce=t(18171),Se=t(43312);function Te(e){var n=function(){r.current&&clearTimeout(r.current),o.current=[]},t=function(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),n()},r=(0,i.useRef)(null),o=(0,i.useRef)([]);return{onKeyDown:function(n){var i=r.current,a=o.current;n.preventDefault(),n.stopPropagation(),i&&clearTimeout(i);var l=(0,ye.lc)(n);if(l)if((0,ye.ZG)(l))e({type:"update",recorded:a.length?[a[0],l]:[l]});else if(a.length>0&&"Enter"===l)t(a);else{a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;r.current=setTimeout((function(){return t(a)}),c)}},startRecording:function(){n(),e({type:"start"})},stopRecording:function(){n(),e({type:"stop"})}}}var Ee=(0,ee.X)({root:[a.l0.colWithGap(8)],row:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.minHeight(28)],left:[a.l0.colWithGap(2),a.l0.flex.grow(0),a.l0.flex.shrink(1)],right:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.justify.end,a.l0.position.relative,a.l0.flex.grow(1),a.l0.flex.shrink(0)],recordingRow:[a.l0.flex.column,a.l0.align.center,a.l0.justify.end,a.l0.pr(24)],recordingRowInner:[a.l0.rowWithGap(8),a.l0.align.center],recordingRowKeys:[a.l0.position.relative],recordingRowHint:[a.l0.position.absolute,a.l0.top(20),a.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[a.l0.display.flex,a.l0.align.baseline,a.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[a.l0.display.inlineFlex,a.l0.rowWithGap(12)],secondaryText:[a.l0.display.flex,a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],secondaryTextId:[a.l0.flex.grow(1),a.l0.flex.shrink(0)],secondaryTextDescription:[a.l0.flex.grow(0),a.l0.flex.shrink(1),a.l0.color.foregroundDimmest],buttons:[a.l0.pl(8),a.l0.display.flex,a.l0.flex.row]}),Re=[a.l0.reset.button,se.gU.listItem,a.l0.height(24),a.l0.width(24),a.l0.p(2)],Ie=(0,ee.X)({root:[a.l0.rowWithGap(8),a.l0.align.center],recordingRow:[a.l0.rowWithGap(4),a.l0.align.center]});function De(e){var n,t,a,l,c=e.command,s=e.filter,d=(0,ue.w0)(),f=d.enableRunner,p=d.disableRunner,h=(0,ue.r3)(),v=(0,ue.wU)(),m=(0,ue.V_)(c.id),y=(0,i.useState)(null),Z=y[0],b=y[1],w=(0,i.useState)(null),x=w[0],k=w[1],C=Te((function(e){switch(e.type){case"start":return p(),k({recorded:[]}),void b(null);case"stop":return f(),k(null),void b(null);case"update":return k({recorded:e.recorded}),void b(null);case"success":f();var n=(0,ye.SG)(e.shortcut);if(!n)return k(null),void b(null);var t=h(c.id,n);return t?(k(null),void b('This shortcut conflicts with "'.concat(t.conflict.name,'"'))):void k(null);case"error":var r;return void k((function(n){return{error:e.message,recorded:null!==(r=null===n||void 0===n?void 0:n.recorded)&&void 0!==r?r:[]}}))}})),S=C.stopRecording,T=C.startRecording,E=C.onKeyDown,R=(0,ve.Z)((function(){return S()}),[]),I=Boolean(x);_e(I);var D=null!==(l=null===x||void 0===x?void 0:x.recorded)&&void 0!==l?l:[],G=null===x||void 0===x?void 0:x.error,P=s.length>0,_=null===(n=be.Z.match(s,c.name))||void 0===n?void 0:n.ranges,B=null===(t=be.Z.match(s,c.id))||void 0===t?void 0:t.ranges,A=(null===c||void 0===c?void 0:c.description)?null===(a=be.Z.match(s,c.description))||void 0===a?void 0:a.ranges:void 0,U=(0,Ce.Z)((function(){return s.replaceAll('"',"").split("-").map((function(e){return e.toLowerCase()}))}),[s]),L=[{label:"Remove",key:"remove"}];m&&m!==c.shortcut&&L.push({label:"Reset",key:"reset"});var N,X=(0,Ce.Z)((function(){return function(e){switch(e){case"remove":v(c.id);break;case"reset":var n=h(c.id,m);n&&b("".concat(m,' conflicts with "').concat(n.conflict.name,'"'))}}}),[c.id,m,h,v]);return(0,r.BX)(o.G,{css:Ee.root,children:[(0,r.BX)(o.G,{css:Ee.row,children:[(0,r.BX)(o.G,{css:Ee.left,children:[(0,r.tZ)(xe.x,{text:c.name,highlight:_,dimmed:P}),(0,r.BX)(u.xv,{variant:"small",css:Ee.secondaryText,children:[P?(0,r.tZ)(xe.x,{css:Ee.secondaryTextId,text:c.id,highlight:B,dimmed:P}):null,c.description?(0,r.BX)(r.HY,{children:[P?(0,r.tZ)(u.xv,{color:"dimmest",children:"\u2022"}):null,(0,r.tZ)(xe.x,{css:Ee.secondaryTextDescription,text:c.description,highlight:A,dimmed:P})]}):null]})]}),(0,r.BX)(o.G,{innerRef:I?R:void 0,css:Ee.right,children:[I?(0,r.tZ)(ge.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:E,css:{opacity:0,width:1}})}):null,c.shortcut&&!I?(0,r.tZ)(Ze.bM,{small:!0,keyCombo:c.shortcut,match:U}):null,c.shortcut||I?null:(0,r.tZ)(Q.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(re.Z,{}),text:"Add shortcut",onClick:function(){return T()}}),I?(0,r.tZ)(o.G,{css:Ee.recordingRow,children:(0,r.BX)(o.G,{css:Ee.recordingRowInner,children:[(0,r.tZ)(o.G,{css:Ee.recordingRowKeys,children:D.length>0?(0,r.tZ)(o.G,{css:[Ee.keys],children:D.map((function(e,n){return(0,r.tZ)(Ze.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))}))}):(0,r.tZ)(u.xv,{color:"dimmest",css:Ee.recordingRowPlaceholder,children:"Recording..."})}),(0,r.tZ)(g.h,{alt:"Stop",onClick:function(){return S()},children:(0,r.tZ)(Ue,{})})]})}):null,c.shortcut&&!I?(0,r.BX)(o.G,{css:Ee.buttons,children:[(0,r.tZ)(g.h,{alt:"Change",onClick:function(){return T()},children:(0,r.tZ)(pe.Z,{})}),(0,r.tZ)(de.ZE,{"aria-label":"More",cssProps:Re,items:L,icon:(0,r.tZ)(ke.Z,{size:12}),placement:"bottom-end",onAction:X,children:L.map((function(e){return(0,r.tZ)(de.ck,{textValue:e.label,children:(0,r.tZ)(u.xv,{children:e.label})},e.key)}))})]}):null]})]}),G?(0,r.tZ)(fe.E,{icon:(0,r.tZ)(me.Z,{}),colorway:"warning",text:G,closable:!0,closeAction:function(){return k((function(e){return{recorded:null!==(N=null===e||void 0===e?void 0:e.recorded)&&void 0!==N?N:[]}}))}}):null,Z?(0,r.tZ)(fe.E,{icon:(0,r.tZ)(me.Z,{}),colorway:"warning",text:Z,closable:!0,closeAction:function(){return b(null)}}):null]})}var Ge=(0,ee.X)({root:[a.l0.colWithGap(8),a.l0.p(0)],surface:[a.l0.p(8),a.l0.borderRadius(8),a.l0.colWithGap(12)]});function Pe(){var e=(0,ue.w0)(),n=e.enableRunner,t=e.disableRunner,a=(0,i.useState)(""),l=a[0],d=a[1],f=(0,ue.xF)(),p=(0,Ce.Z)((function(){return(0,c.Z)(f.values())}),[f]);function h(e){var n=e.flat();return n.length>1?n.map((function(e){return h([e])})).join(" "):(0,ye.QR)(n[0]).map((function(e){return'"'.concat(e,'"')})).join("-").replaceAll(" ","space")}var v=be.Z.filter(l,p,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(h([e.shortcut]))),n}}),m=(0,i.useRef)(null),y=(0,i.useState)(!1),Z=y[0],b=y[1];_e(Z);var w=Te((function(e){switch(e.type){case"start":var r;return t(),b(!0),d(""),void(null===m||void 0===m||null===(r=m.current)||void 0===r||r.focus());case"stop":case"error":var i,o;return n(),b(!1),null===m||void 0===m||null===(i=m.current)||void 0===i||i.focus(),void(null===m||void 0===m||null===(o=m.current)||void 0===o||o.select());case"success":return void d(h([e.shortcut]));case"update":return void d(h(e.recorded))}})),x=w.stopRecording,k=w.startRecording,C=w.onKeyDown;return(0,r.BX)(o.G,{css:Ge.root,children:[(0,r.BX)(o.G,{css:Ie.root,children:[(0,r.tZ)(ge.MT,{children:(0,r.tZ)(J.II,{ref:m,placeholder:Z?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:Z?x:void 0,onChange:function(e){return d(e.target.value)},onKeyDown:Z?function(e){"Escape"===e.key?x():C(e)}:void 0,value:l})}),(0,r.tZ)(o.G,{css:Ie.recordingRow,children:Z?(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{color:"dimmest",css:[{fontStyle:"italic"}],children:"Recording..."}),(0,r.tZ)(g.h,{alt:"Stop Recording",onClick:x,children:(0,r.tZ)(Ue,{})})]}):(0,r.tZ)(g.h,{alt:"Record Keys",onClick:k,children:(0,r.tZ)(we.Z,{})})}),(0,r.tZ)(g.h,{alt:"Clear Input",disabled:0===l.length,onClick:function(){var e;d(""),null===m||void 0===m||null===(e=m.current)||void 0===e||e.focus()},children:(0,r.tZ)(te.Z,{})})]}),v.length>0?(0,r.tZ)(s.T,{css:Ge.surface,elevated:!0,children:v.map((function(e,n){return(0,r.BX)(i.Fragment,{children:[n>0?(0,r.tZ)(s.T,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(De,{command:e.original,filter:l})]},e.original.id)}))}):null]})}function _e(e){var n="You have unsaved changes";(0,i.useEffect)((function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[e])}var Be=(0,Se.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),Ae=(0,ee.X)({background:[{animationName:Be,animation:"".concat(Be," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(a.TV.redStronger)},a.l0.height(11),a.l0.width(11),a.l0.borderRadius("full"),a.l0.position.absolute],container:[a.l0.position.relative,a.l0.align.center,a.l0.justify.center],icon:[{zIndex:1}]});function Ue(){return(0,r.BX)(o.G,{css:Ae.container,children:[(0,r.tZ)(he.Z,{css:Ae.icon,color:a.TV.redStronger}),(0,r.tZ)(o.G,{css:Ae.background})]})}function Le(){var e=(0,h.H)()("keyboard_shortcuts");return(0,r.BX)(s.T,{background:"default",css:[a.l0.px(16),a.l0.pb(16),a.l0.colWithGap(12)],children:[(0,r.tZ)(o.G,{tag:"label",htmlFor:e}),(0,r.tZ)(Pe,{})]})}var Ne=t(12470);function Xe(e){var n=e.hideLayoutControl,t=e.resetLayout,i=(0,l.T3)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center,a.l0.px(16),a.l0.py(8)],children:(0,r.tZ)(u.h4,{variant:"subheadBig",level:3,children:"Settings"})}),i?(0,r.tZ)(ce,{hideLayoutControl:n,resetLayout:t}):(0,r.tZ)(o.G,{children:(0,r.BX)(Ne.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(Ne.td,{withDividers:!1,css:[{"[aria-selected=true]":[a.l0.fontWeight.medium]}],children:[(0,r.tZ)(Ne.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Editor preferences"}),(0,r.tZ)(Ne.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Keyboard shortcuts"})]}),(0,r.BX)(Ne.nP,{children:[(0,r.tZ)(Ne.x4,{children:(0,r.tZ)(ce,{resetLayout:t})}),(0,r.tZ)(Ne.x4,{children:(0,r.tZ)(Le,{})})]})]})})]})}},65443:function(e,n,t){t.d(n,{BZ:function(){return G},HX:function(){return I},WM:function(){return B},ap:function(){return O},gF:function(){return L},l9:function(){return A},pr:function(){return W},vN:function(){return z},vi:function(){return X},zu:function(){return _}});var r=t(72006),i=t(43119),o=t(71440),a=t(3839),l=t(75982),c=t(91350),u=t(70196),s=t(35536),d=t(27923),f=t(78828),p=t(45941),h=t(90024),v=t(24635),g=t(50216);function m(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}function y(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n    ...ReplInfoEditReplTitleRepl\n    ...ReplInfoEditReplDescriptionRepl\n    ...ReplInfoEditReplTemplateLabelRepl\n    ...ReplPowerUpCosts\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,o.Ps)(m()),I=(0,o.Ps)(y(),a._,l.s,c.sY,u.wd,s.qo,d.Zx,f.LU,p.Jr,R),D=(0,o.Ps)(Z(),I);function G(e){var n=(0,r.Z)({},E,e);return v.a(D,n)}var P=(0,o.Ps)(b());function _(e){var n=(0,r.Z)({},E,e);return v.a(P,n)}var B=(0,o.Ps)(w());function A(e){var n=(0,r.Z)({},E,e);return v.a(B,n)}var U=(0,o.Ps)(x(),h.FW);function L(e){var n=(0,r.Z)({},E,e);return g.D(U,n)}var N=(0,o.Ps)(k(),I);function X(e){var n=(0,r.Z)({},E,e);return g.D(N,n)}var F=(0,o.Ps)(C());function O(e){var n=(0,r.Z)({},E,e);return g.D(F,n)}var M=(0,o.Ps)(S(),I,R);function W(e){var n=(0,r.Z)({},E,e);return g.D(M,n)}var H=(0,o.Ps)(T(),I,R);function z(e){var n=(0,r.Z)({},E,e);return g.D(H,n)}},67626:function(e,n,t){t.d(n,{Z:function(){return vt}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(74985),u=t(48306),s=t.n(u),d=t(88254),f=t(50959),p=t(43117),h=t(76357),v=t(39603),g=t(82568),m=t(87076),y=t(39541),Z=t(61284),b=t(85368),w=t(1050),x=t(86763),k=t.n(x),C=t(39137),S=t(45510),T=t(27923),E=t(76735),R=t(63837),I=t(18171),D=t(32104),G=t(80336),P=t(56169),_={positive:y.TV.accentPositiveDefault,warning:y.TV.orangeDefault,dimmer:y.TV.foregroundDimmer,error:y.TV.redDefault},B=(0,g.X)({root:[y.l0.rowWithGap(4),{"& > *":{color:"inherit"}}]});function A(e){return(0,c.BX)(b.G,{style:{color:_[e.color]},css:B.root,children:[(0,f.cloneElement)(e.icon,{size:12}),(0,c.tZ)(Z.xv,{variant:"small",children:e.text})]})}var U=(0,g.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end],inputRow:[y.l0.rowWithGap(8)],messages:[y.l0.colWithGap(4)],positiveText:[y.l0.color.accentPositiveDefault,y.l0.rowWithGap(4)],warningText:[y.l0.color.orangeDefault,y.l0.rowWithGap(4)],loadingText:[y.l0.color.foregroundDimmer,y.l0.rowWithGap(4)],input:[y.l0.flex.growAndShrink(1)],hidden:[y.l0.visibility.hidden]});function L(e){var n,t=e.repl,r=e.done,i=(0,f.useState)(t.title),o=i[0],l=i[1],u=(0,f.useState)(null),s=u[0],d=u[1],p=(0,P.H)()("title"),h=(0,a.Z)((0,T.uB)({onCompleted:function(){r()},onError:function(){d("Something went wrong")}}),2),v=h[0],g=h[1],m="Team"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?t.owner.id:null,y=t.title!==o,w=function(e){var n=(0,f.useState)(null),t=n[0],r=n[1],i=(0,a.Z)((0,T.C4)({onCompleted:function(e){var n="AvailableReplTitleResult"===e.availableReplTitle.__typename?e.availableReplTitle:null;r(n?{type:"result",isAvailable:n.isAvailable}:{type:"error",message:"Something went wrong"})},onError:function(){r({type:"error",message:"Something went wrong"})}}),1)[0],o=(0,I.Z)((function(){return k()(i)}),[i]),l=null===e||void 0===e?void 0:e.title,c=null===e||void 0===e?void 0:e.teamId;return(0,f.useEffect)((function(){l&&(r({type:"loading"}),o({variables:{input:{title:l,teamId:c}}}))}),[o,l,c]),t}(y?{title:o,teamId:m}:null),x="result"===(null===w||void 0===w?void 0:w.type)&&w.isAvailable,_="result"===(null===w||void 0===w?void 0:w.type)&&!w.isAvailable,B=y&&x&&o;return(0,c.BX)(b.G,{tag:"form",onSubmit:function(e){e.preventDefault(),v({variables:{input:{title:o,id:t.id}}})},css:U.root,children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:p,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.BX)(b.G,{css:U.inputRow,children:[(0,c.tZ)(C.II,{placeholder:t.title,id:p,value:o,onChange:function(e){s&&d(null);var n=e.currentTarget.value;l(n.length>60?n.slice(0,60):n)},autoFocus:!0}),(0,c.BX)(b.G,{css:U.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Renaming",colorway:"primary"}):(0,c.tZ)(S.zx,{type:"submit",disabled:!B,text:"Rename",colorway:"primary"})]})]}),(0,c.BX)(b.G,{css:U.messages,children:["loading"===(null===w||void 0===w?void 0:w.type)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(D.Z,{}),text:"Loading...",color:"dimmer"}),(0,c.tZ)(Z.xv,{css:U.hidden,variant:"small",children:"..."})]}):null,B?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(R.Z,{}),text:"\u201c".concat(o,"\u201d is available"),color:"positive"}),(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:"Your Repl will momentarily turn off while the Workspace reloads.",color:"warning"})]}):null,_?(0,c.tZ)(A,{icon:(0,c.tZ)(G.Z,{}),text:"The Repl \u201c".concat(o,"\u201d already exists on this account."),color:"error"}):null,s?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:s,color:"warning"}):null]})]})}var N=t(78828),X=t(90355),F=(0,g.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function O(e){var n,t=e.repl,r=e.done,i=(0,P.H)()("description"),o=(0,f.useState)(null!==(n=t.description)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.description!==l,v=(0,a.Z)((0,N.Ot)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),g=v[0],m=v[1];return(0,c.BX)(b.G,{tag:"form",css:F.root,onSubmit:function(e){e.preventDefault(),g({variables:{input:{description:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(C.B,{autoFocus:!0,placeholder:"What does this Repl do?",id:i,autoSize:!0,value:l,onChange:function(e){d&&p(null);var n=e.currentTarget.value;u(n.length>X.p?n.slice(0,X.p):n)}}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null,(0,c.BX)(b.G,{css:F.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),m.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save description",colorway:"primary",type:"submit"})]})]})}var M=t(45941),W=(0,g.X)({root:[y.l0.colWithGap(8)],inputRow:[y.l0.rowWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function H(e){var n,t=e.repl,r=e.done,i=(0,P.H)()("templateLabel"),o=(0,f.useState)(null!==(n=t.templateLabel)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.templateLabel!==l&&l,v=(0,a.Z)((0,M.ie)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),g=v[0],m=v[1];return(0,c.BX)(b.G,{tag:"form",css:W.root,onSubmit:function(e){e.preventDefault(),g({variables:{input:{templateLabel:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Template label"})}),(0,c.BX)(b.G,{css:W.inputRow,children:[(0,c.tZ)(C.II,{autoFocus:!0,placeholder:"An optional custom title",id:i,value:l,onChange:function(e){d&&p(null),u(e.currentTarget.value)}}),(0,c.BX)(b.G,{css:W.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),m.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save",colorway:"primary",type:"submit"})]})]}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null]})}var z=(0,g.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.align.center],text:[y.l0.flex.growAndShrink(1)]});function V(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(L,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:z.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"}),(0,c.BX)(b.G,{css:z.row,children:[(0,c.BX)(Z.xv,{color:n.isRenamed?void 0:"dimmest",css:z.text,children:[n.isRenamed?null:"Default name: ",n.title]}),(0,c.tZ)(m.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var j=(0,g.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.start],text:[y.l0.flex.growAndShrink(1)]});function q(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(O,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"}),(0,c.BX)(b.G,{css:j.row,children:[n.description?(0,c.tZ)(Z.xv,{color:"dimmer",css:j.text,maxLines:2,children:n.description}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,children:"No description"}),(0,c.tZ)(m.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}function Y(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(H,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Template label"}),(0,c.BX)(b.G,{css:j.row,children:[n.templateLabel?(0,c.tZ)(Z.xv,{css:j.text,children:n.templateLabel}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,children:"No template label"}),(0,c.tZ)(m.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var K=t(49142),$=t(28518),Q=t(19281),J=t(23220),ee=t(34937),ne=t(58745),te=t(82108),re=t(81462),ie=t(88541),oe=t(43743),ae=t(63064),le=t(94716),ce=t(13233),ue=t(48330),se=t(65673),de=t(98707),fe=t(13979),pe=t(625),he=t(11116),ve=t(73204),ge=t(66195),me=t(56260),ye=t(25198),Ze=t(66539),be=t(34938),we=t(51631),xe=t(70196),ke=t(12318),Ce=t(72463),Se=t(43119),Te=t(71440),Ee=t(24635);function Re(){var e=(0,Se.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Re=function(){return e},e}var Ie={},De=(0,Te.Ps)(Re());function Ge(e){var n,t,r=function(e){var n=(0,i.Z)({},Ie,e);return Ee.a(De,n)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(n=c.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var Pe=t(7822),_e=t(50216);function Be(){var e=(0,Se.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Be=function(){return e},e}var Ae={},Ue=(0,Te.Ps)(Be());function Le(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function Ne(){var e=(0,a.Z)(function(e){var n=(0,i.Z)({},Ae,e);return _e.D(Ue,n)}({refetchQueries:["ReplEnvironmentHeader"]}),2),n=e[0];function t(){return(t=(0,r.Z)((function(e){var t,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return t=e.input,[4,n({variables:{input:t}})];case 1:return[2,{data:(r=i.sent()).data,error:Le(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return t.apply(this,arguments)},state:e[1]}}var Xe=t(83005),Fe=t(52735),Oe=t(87978),Me=t(56412),We=t(62946),He=t(30504),ze=(0,We.cn)({ran:!1,tested:!1}),Ve=b.K.form;function je(e){if(0===e.length)return{message:"You cannot leave this empty."}}function qe(e){var n,t,r=e.changeType;return r===we.J5.NewFile?(n=y.TV.accentPositiveStronger,t="Added"):r===we.J5.DeletedFile?(n=y.TV.accentNegativeStronger,t="Deleted"):(n=y.TV.foregroundDefault,t="Changed"),(0,c.tZ)(Z.xv,{variant:"small",css:[{color:n}],children:t})}function Ye(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,c.tZ)(b.G,{css:[y.l0.center],children:(0,c.tZ)(D.Z,{})});if(n.error)return(0,c.tZ)(ye.E,{icon:(0,c.tZ)(E.Z,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,c.tZ)(Z.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var r=n.pendingChanges,i=r.slice(0,15);return(0,c.BX)(b.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.TV.space8}],children:[i.map((function(e){return(0,c.BX)(f.Fragment,{children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,c.tZ)(Xe.Z,{size:12,path:e.fileName}),(0,c.tZ)(Z.xv,{children:e.fileName})]},e.fileName),(0,c.tZ)(qe,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(Z.xv,{children:["And ",r.length-i.length," other files..."]})]})}function Ke(e){var n=e.repl,t=Ne(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,c.BX)(b.G,{children:[(0,c.tZ)(Z.h4,{level:1,variant:"subheadBig",css:[y.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(b.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:y.TV.space8}],children:n.releases.items.map((function(e){var t,r;return(0,c.BX)(f.Fragment,{children:[(0,c.tZ)("span",{children:(0,Me.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(t=n.deployment)||void 0===t||null===(r=t.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[y.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(S.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(n){n.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function $e(e){var n=e.children;return(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.py(2)],children:n})}function Qe(e){var n,t,u,s,d,p,h=e.repl,v=(0,P.H)(),g=(0,a.Z)(f.useState(!1),2),m=g[0],w=g[1],x=(0,a.Z)(f.useState(!1),2),k=x[0],T=x[1],R=function(e){var n=Ge({replId:e.replId}),t=f.useMemo((function(){if(!n.pendingChanges)return[];var e=n.pendingChanges.slice().sort((function(e,n){return e.fileName.localeCompare(n.fileName)})).map((function(e){return{file:e,pathDepth:(0,Oe.U$)(e.fileName)}})).sort((function(e,n){return e.pathDepth-n.pathDepth})).map((function(e){return e.file}));return e}),[n.pendingChanges]);return(0,o.Z)((0,i.Z)({},n),{pendingChanges:t})}({replId:h.id}),I=(0,Pe.r)(),D=(0,ke.Y)("",je),G=0!==(null===(n=R.pendingChanges)||void 0===n?void 0:n.length),_=(null===(t=h.user)||void 0===t?void 0:t.username)===He.IU||"templates"===(null===(u=h.user)||void 0===u?void 0:u.username),B=(0,a.Z)((0,We.KO)(ze),2),A=B[0],U=B[1];f.useEffect((function(){U({ran:!1,tested:!1})}),[U]);var L=Boolean(D.error||!_&&!G||I.loading||_&&(!A.ran||!A.tested)),N=_&&(null===(s=h.releases)||void 0===s||null===(d=s.items)||void 0===d?void 0:d.length)>1,X="";return D.error?X="Please fill out the form":_||G||(X="No changes to publish in this release"),m?(0,c.tZ)(Fe.q,{repl:h,isUpdate:!0}):k?(0,c.tZ)(b.G,{css:[y.l0.p(16),y.l0.colWithGap(16)],children:(0,c.tZ)(Ke,{repl:h})}):(0,c.BX)(Ve,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),L||D.validate()?[2]:[4,I.createRelease({input:{replId:h.id,description:D.value}})];case 1:return n.sent().error||w(!0),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[y.l0.colWithGap(24),y.l0.p(16)],children:[(0,c.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(Ye,{pendingChangesState:R,isReplitTemplate:_})]}),_||G?(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:v("description"),css:[y.l0.color.foregroundDimmer,{fontSize:y.TV.fontSizeSmall,lineHeight:y.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(C.B,{id:v("description"),"aria-label":"Description",onChange:function(e){return D.setValue(e.target.value)},css:[y.l0.width("100%"),y.l0.minHeight(64),y.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),D.error?(0,c.tZ)(ye.E,{icon:(0,c.tZ)(E.Z,{}),text:null===(p=D.error)||void 0===p?void 0:p.message,colorway:"negative"}):null]}):null,_?(0,c.tZ)(Je,{repl:h}):null,(0,c.tZ)(b.G,{children:I.error?(0,c.tZ)(ye.E,{icon:(0,c.tZ)(E.Z,{}),text:I.error,colorway:"negative"}):null}),(0,c.BX)(b.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[N?(0,c.tZ)(S.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return T(!0)}}):null,(0,c.tZ)(Ze.u,{tooltip:X,placement:"bottom",isDisabled:!X,children:(0,c.tZ)(S.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(Ce.Z,{}),disabled:L})})]})]})}function Je(e){var n,t,r,l=e.repl,u=(0,a.Z)((0,We.KO)(ze),2),s=u[0],d=u[1],f=(0,P.H)(),p=(0,xe.e9)(),h=p.data,v=p.loading,g=null===h||void 0===h||null===(n=h.currentUser)||void 0===n?void 0:n.username;return(0,c.BX)(b.G,{css:[y.l0.colWithGap(12)],children:[(0,c.tZ)(Z.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(b.G,{children:[(0,c.BX)($e,{children:[(0,c.tZ)(be.X,{id:f("ran"),checked:s.ran,onChange:function(e){return d((0,o.Z)((0,i.Z)({},s),{ran:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:f("ran"),children:"Run Repl:"}),(0,c.BX)("span",{children:["to generate and cache package guesser result into ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)($e,{children:[(0,c.tZ)(be.X,{id:f("tested"),checked:s.tested,onChange:function(e){return d((0,o.Z)((0,i.Z)({},s),{tested:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:f("tested"),children:"Run tests:"}),(0,c.BX)("span",{children:['Run "Test working copy" for @',null===(t=l.user)||void 0===t?void 0:t.username,"/",l.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),v||(null===(r=l.user)||void 0===r?void 0:r.username)!==g?null:(0,c.tZ)(ye.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var en=t(80866),nn=t(65897),tn=t(75920),rn=t(2041),on=t(63128),an=t(51529),ln=t(57475),cn=t(14654),un=t(13548),sn=t(86302),dn=t(23127),fn=t(12259),pn=t(5884),hn=t(26721),vn=t(27691),gn=t(77712),mn=t(3652),yn=t(65629),Zn=(0,g.X)({self:[y.l0.flex.column],content:[y.l0.pt(16),y.l0.px(12),y.l0.pb(12),y.l0.colWithGap(16)],header:[y.l0.p(12),y.l0.rowWithGap(8),y.l0.justify.start,y.l0.align.center,y.l0.border({color:y.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[y.l0.colWithGap(8)],footer:[y.l0.rowWithGap(16),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.pt(4)],loadingWrapper:[y.l0.center],storageBarWrapper:[y.l0.colWithGap(8)],summaryWrapper:[y.l0.colWithGap(8),y.l0.align.start],totalSummaryDot:[y.l0.backgroundColor.backgroundHigher,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[y.l0.backgroundColor.accentPrimaryDefault,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],summaryRow:[y.l0.rowWithGap(8),y.l0.justify.start,y.l0.align.center,y.l0.fontSize(14),y.l0.height(14)],replSummaryText:[y.l0.color.accentPrimaryStronger],replSummaryUsage:[y.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[vn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],totalUsagePlaceholder:[vn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(140)],availablePlaceholder:[vn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],availableText:[y.l0.color.foregroundDimmest]}),bn=function(e){var n,t=e.isOpen,r=e.onRequestClose,a=(0,ee.Z)(),l=(0,f.useState)(!1),u=l[0],s=l[1],d=(0,pn.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),p=d.data,h=d.loading,v=d.refetch,g=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1});if(h&&!p)return(0,c.tZ)(rn.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:(0,c.BX)(b.G,{css:Zn.self,children:[(0,c.BX)(b.G,{css:Zn.header,children:[(0,c.tZ)(m.h,{onClick:r,alt:"Back",size:28,children:(0,c.tZ)(mn.Z,{size:16})}),(0,c.tZ)(dn.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Zn.content,children:[(0,c.tZ)(yn.M,{}),(0,c.tZ)(b.G,{css:Zn.footer,children:a?(0,c.tZ)(S.zx,{onClick:function(){J.X.openExternalUrl(fn.$I.as)},text:"Manage Repls"}):(0,c.tZ)(sn.Z,{href:fn.$I.href,as:fn.$I.as,text:"Manage Repls"})})]})]})});if(p&&"CurrentUser"===(null===(n=p.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===p.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===p.currentUser.storageInfo.accountStorageUtilization.__typename){var y=p.currentUser.username,w=p.currentUser.userSubscriptionType===we.HP.HackerPro;return(0,c.BX)(rn.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:[(0,c.BX)(b.G,{css:Zn.self,children:[(0,c.BX)(b.G,{css:Zn.header,children:[(0,c.tZ)(m.h,{onClick:r,alt:"Back",size:28,children:(0,c.tZ)(mn.Z,{size:16})}),(0,c.tZ)(dn.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Zn.content,children:[h?(0,c.tZ)(yn.M,{}):(0,c.tZ)(yn.l,{data:p}),(0,c.BX)(b.G,{css:Zn.footer,children:[(0,c.tZ)(sn.Z,(0,o.Z)((0,i.Z)({},(0,gn.Ru)(y)),{text:"Manage Repls"})),g&&!w?(0,c.tZ)(S.zx,{colorway:"primary",text:"Upgrade Storage",onClick:function(){return s(!0)}}):null]})]})]}),(0,c.tZ)(hn.Z,{isOpen:u,initialTab:"plans",context:"workspace_info_modal",uponPurchaseGoTo:"workspace",onPlanCheckoutComplete:function(){v(),s(!1)},onRequestClose:function(){s(!1)}})]})}return(0,c.tZ)(rn.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:(0,c.BX)(b.G,{css:Zn.self,children:[(0,c.BX)(b.G,{css:Zn.header,children:[(0,c.tZ)(m.h,{onClick:r,alt:"Back",size:28,children:(0,c.tZ)(mn.Z,{size:16})}),(0,c.tZ)(dn.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Zn.content,children:[(0,c.tZ)(Z.xv,{color:"dimmest",children:"We had trouble loading your storage information. Please try again later."}),(0,c.tZ)(b.G,{css:Zn.footer,children:(0,c.tZ)(sn.Z,{href:fn.$I.href,as:fn.$I.as,text:"Manage Repls"})})]})]})})},wn=t(4421),xn=t(14227),kn=t(90171),Cn=t(70232),Sn=t(65443),Tn=t(57389),En=t(90349),Rn=t(8879),In=t(254),Dn=t(35301),Gn=t(88467),Pn=t(8023),_n=t(32905);function Bn(e){var n=f.useRef(null),t=(0,a.Z)(f.useState(e.value),2),r=t[0],i=t[1],o=(0,a.Z)(f.useState(null),2),l=o[0],u=o[1],d=(0,In.Z)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){var n=e.dataUrl;i(n)},onError:function(e){u(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var p=null===r||void 0===r?void 0:r.startsWith("data:"),h=32;return(0,c.BX)(Dn.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Rn.Z,{iconUrl:r,size:h,alt:"icon"}),p?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-state",children:(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-icon",children:(0,c.tZ)(D.Z,{})})}):(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" hover-state",children:(0,c.tZ)(w.Z,{})})]}):(0,c.tZ)(Gn.Z,{}),(0,c.tZ)("input",{ref:n,accept:Pn.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null===r||void 0===r?void 0:r.length)&&(u(null),d.uploadImage(r[0],_n.N.TemplateIcon))},className:s().dynamic([["5de27f185cb9bc33",[h,h]]])})]}),l?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" error",children:l}):null,(0,c.tZ)(s(),{id:"5de27f185cb9bc33",dynamic:[h,h],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(h,"px;height:").concat(h,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var An,Un,Ln=t(51523),Nn=t(62405),Xn=t(84607),Fn=t(54873),On=t(22642),Mn=t(84815);!function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl",e.ManageStorage="ManageStorage"}(An||(An={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(Un||(Un={}));var Wn=t(97807),Hn=t(80731),zn=t(70804),Vn=(0,g.X)({destructiveMenuItem:[y.l0.color.accentNegativeStronger]});function jn(e){var n=e.repl,t=(0,ee.Z)(),r=(0,f.useMemo)((function(){return n.user?{text:n.user.username,css:[{"&, & span":y.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(En.q,{src:n.user.image,username:n.user.username})}:{text:""}}),[n]);if(!n.user)return null;var a=(0,gn.Ru)(n.user);return t?(0,c.tZ)(S.zx,(0,o.Z)((0,i.Z)({},r),{onClick:function(){J.X.openExternalUrl(a.as)}})):(0,c.tZ)(sn.Z,(0,o.Z)((0,i.Z)({},r,a),{prefetch:!1}))}function qn(e){var n=e.setActiveDialog,t=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,u=e.setIsEditing,s=e.updateReplInfo,d=(0,Wn.Z)(),f=Boolean(t.publishedAs),p=t.currentUserPermissions.publish,h=(0,ee.Z)(),v=!(null===t||void 0===t?void 0:t.publishedAs)&&!h,g=(null===t||void 0===t?void 0:t.publishedAs)===we.O2.RegularRepl,x=[];t.currentUserPermissions.fork&&x.push({value:Un.Fork,label:"Fork",icon:(0,c.tZ)(Xn.Z,{})}),t.publishedAs===we.O2.RegularRepl&&p&&!h&&x.push({value:Un.Unpublish,label:"Unpublish",icon:(0,c.tZ)(Nn.Z,{})}),r&&p&&!h&&x.push({value:Un.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(Nn.Z,{})}),f&&p&&!h&&x.push({value:Un.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(w.Z,{})}),t.currentUserPermissions.delete&&x.push({isDestructive:!0,value:Un.Delete,label:"Delete",icon:(0,c.tZ)(Fn.Z,{})});var k=(null===t||void 0===t?void 0:t.isPrivate)||!(null===t||void 0===t?void 0:t.isRenamed),C="";return(null===t||void 0===t?void 0:t.isPrivate)?C="This Repl is private. You need to make it public in order to publish it!":(null===t||void 0===t?void 0:t.isRenamed)||(C="You need to give this Repl a name before publishing it."),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8),y.l0.p(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center,y.l0.justify.spaceBetween,(0,Tn.Z)({},y.BC.max("mobileMax"),[y.l0.flex.columnReverse,y.l0.align.start,{gap:y.TV.space8}])],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.center,y.l0.flex.shrink(1)],children:[(0,c.tZ)(jn,{repl:t}),t.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(Bn,{value:t.iconUrl,onChange:a}):null]}),(0,c.BX)(b.G,{css:[y.l0.align.center,y.l0.rowWithGap(8),(0,Tn.Z)({},y.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[h?null:(0,c.tZ)(sn.Z,(0,o.Z)((0,i.Z)({prefetch:!1},(0,Ln.j3)(t)),{iconLeft:(0,c.tZ)(Mn.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&v&&!d?(0,c.tZ)(Ze.u,{tooltip:C,isDisabled:!k,children:(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(Gn.Z,{}),onClick:function(){n(An.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:k})}):null,r&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(Gn.Z,{}),onClick:function(){return n(An.UpdatePublishedTemplate)},text:"Update"}):null,g&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(On.Z,{}),onClick:function(){return n(An.UpdatePublishedRepl)},text:"Update"}):null,x.length>0&&(0,c.tZ)(Hn.ZE,{icon:(0,c.tZ)(zn.Z,{size:16}),"aria-label":r?"Template Actions":"Repl Actions",cssProps:[y.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case Un.Fork:return void n(An.ForkRepl);case Un.Unpublish:return void n(An.Unpublish);case Un.UnpublishTemplate:return void n(An.UnpublishTemplate);case Un.Delete:return void n(An.DeleteRepl);case Un.EditPublishSettings:n(An.EditPublishSettings)}},children:x.map((function(e){return(0,c.tZ)(Hn.ck,{children:(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),e.isDestructive&&Vn.destructiveMenuItem],children:[e.icon,(0,c.tZ)(b.G,{children:e.label})]})},e.value)}))}),l?(0,c.tZ)(m.h,{alt:"Close",tooltipHidden:!0,onClick:function(){s(),u(!1)},children:(0,c.tZ)(G.Z,{})}):null]})]}),t.lastPublishedAt&&p?(0,c.BX)(Z.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(t.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var Yn=t(41102),Kn=t(18200),$n=t(80572),Qn=t(44333),Jn=t(31992),et=t(96351),nt=t(70523),tt=(0,g.X)({self:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],powerupInfo:[y.l0.colWithGap(8)],powerupLabel:[y.l0.rowWithGap(8),y.l0.align.center],editButtonWrapper:[y.l0.rowWithGap(8),y.l0.align.center],pill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content")],loadingPill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content"),vn.p.backgroundPulse(y.TV.foregroundDimmer,y.TV.foregroundDimmest),vn.p.foregroundPulse(y.TV.backgroundRoot,y.TV.backgroundHigher)],editButton:[y.l0.p(16),y.l0.backgroundColor.backgroundHigher]}),rt=function(e){var n,t=e.showPowerUpModal,r=(0,nt.Z)().dataAtom.disk,i=r.currentAtom,o=r.totalAtom,a=(0,ue.Z)(),l=(0,We.Dv)(i),u=(0,We.Dv)(o),s=(0,f.useState)(!1),d=s[0],p=s[1],h=(0,pn.Pf)({pollInterval:3e3,onError:function(e){y()}}),v=h.data,g=h.loading,y=h.stopPolling;(0,f.useEffect)((function(){var e,n,t;return v&&"AccountStorageUtilization"!==(null===(e=v.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&y(),v&&"AccountStorageUtilization"===(null===(n=v.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=v.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===a})))||void 0===t?void 0:t.__typename)&&(p(!0),y()),function(){y()}}),[v,a,y]);var w=null;if(v&&"CurrentUser"===(null===(n=v.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===v.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===v.currentUser.storageInfo.accountStorageUtilization.__typename){var x=v.currentUser.storageInfo,k=x.storageQuota.quota,C=x.accountStorageUtilization.total;w="0"===k?C:k}var S=1024*l*1024,T=1024*u*1024,E="".concat((0,Jn.fZ)(S,{precision:1})),R=g||"string"!==typeof w?"".concat((0,Jn.fZ)(T,{precision:1})," Repl"):"".concat((0,Jn.fZ)(Number(w),{precision:1})," Account");return(0,c.BX)(b.G,{css:tt.self,tag:"li",children:[(0,c.BX)(b.G,{css:tt.powerupInfo,children:[(0,c.BX)(b.G,{css:tt.powerupLabel,children:[(0,c.tZ)(dn.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Storage"}),(0,c.tZ)(Yn.Z,{content:"Beta",tooltip:"Storage is currently in beta. Some things may not work as expected."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:"Manage disk space"})]}),(0,c.BX)(b.G,{css:tt.editButtonWrapper,children:[g||!d?(0,c.tZ)(et.D,{iconLeft:(0,c.tZ)(D.Z,{size:16}),text:"Loading...",css:tt.loadingPill}):(0,c.tZ)(et.D,{text:"".concat(E,"/").concat(R),css:tt.pill}),(0,c.tZ)(m.h,{size:24,css:tt.editButton,alt:"Manage storage",onClick:function(){return t()},children:(0,c.tZ)(Mn.Z,{})})]})]})},it=t(61097),ot=t(94630),at=t(97128),lt=t(26752),ct=t(35536);function ut(e){var n=e.onRequestPowerUpModal,t=(0,ue.Z)(),r=(0,ct.ky)({variables:{replId:t}}),i=r.data;return r.loading?(0,c.tZ)(D.Z,{}):"Repl"!==(null===i||void 0===i?void 0:i.repl.__typename)||"ReplPowerUpTypes"!==i.repl.powerUps.__typename?null:i.repl.powerUps.boost.sku===we.ri.Off?(0,c.tZ)(Qn.r,{"aria-label":"Enable Boost",isSelected:!1,onChange:n}):(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(at.Z,{variant:i.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,c.tZ)(m.h,{size:24,css:[y.l0.p(16),{backgroundColor:y.TV.backgroundHigher}],alt:"Change boost",onClick:n,children:(0,c.tZ)(w.Z,{})})]})}function st(e){var n=e.context,t=e.goToPowerUpDetails;return(0,c.tZ)(c.HY,{children:(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(lt.Z,{size:16})," ",(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:Kn.S0.boost.name})}),(0,c.tZ)($n.Z,{context:n,powerUp:"boost"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:Kn.S0.boost.description})]}),(0,c.tZ)(ut,{onRequestPowerUpModal:function(){(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:n}),t("boost")}})]})})}function dt(e){var n=e.isAlwaysOn,t=e.isAlwaysOnLoading,r=e.isGpu,i=e.isGpuLoading,o=e.canGpu,a=e.onAlwaysOnChange,l=e.onGpuChange,u=e.showManageStorageModal,s=e.goToPowerUpDetails,d=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),f=(0,P.H)(),p=f("always-on"),h=f("gpu");return(0,c.BX)(b.G,{css:[y.l0.colWithGap(16)],tag:"ul","aria-label":"Repl Powerups",children:[(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(ot.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:p,children:Kn.S0["always-on"].name}),(0,c.tZ)($n.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:Kn.S0["always-on"].description})]}),(0,c.tZ)(Qn.r,{"aria-labelledby":p,dataCy:"ws-always-on-toggle",isSelected:n,onChange:a,isReadOnly:t,colorway:t?"grey":"primary"})]}),(0,c.tZ)(st,{context:"workspace_info_modal",goToPowerUpDetails:s}),d?(0,c.tZ)(rt,{showPowerUpModal:u}):null,o?(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(it.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:h,children:"GPU"}),(0,c.tZ)(Yn.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,c.tZ)(Qn.r,{"aria-labelledby":h,dataCy:"ws-gpu-toggle",isSelected:r,onChange:l,isDisabled:i,colorway:i?"grey":"primary"})]}):null]})}var ft=t(71002),pt={query:re.s8},ht={query:$.BW};function vt(e){var n=e.setIsEditing,t=e.showCloseButton,r=e.onDeployClick,i=(0,ue.Z)(),o=(0,Sn.BZ)({variables:{replId:i}}),a=o.data,l=o.refetch,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return u?(0,c.tZ)(mt,{setIsEditing:n,showCloseButton:t,repl:u,refetch:l,onDeployClick:r}):(0,c.tZ)(b.G,{css:[y.l0.center,y.l0.p(16)],children:(0,c.tZ)(D.Z,{})})}var gt=(0,g.X)({titleDescription:[y.l0.colWithGap(8),y.l0.p(8)]});function mt(e){var n,t,u,g,m,w,x=e.repl,k=e.showCloseButton,T=e.setIsEditing,E=e.onDeployClick,R=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),I=(0,kn.useRouter)(),D=(0,ee.Z)(),G=(0,a.Z)(f.useState(null),2),_=G[0],B=G[1],A=(0,a.Z)(f.useState(null),2),U=A[0],L=A[1],N=(0,a.Z)(f.useState(x.hasGpu),2),F=N[0],O=N[1],M=(0,a.Z)(f.useState(x.isRenamed?x.title:""),2),W=M[0],H=M[1],z=(0,a.Z)(f.useState(x.description||""),2),j=z[0],$=z[1],re=(0,a.Z)(f.useState(x.rawTemplateLabel),2),ue=re[0],Ze=re[1],be=(0,te.Z)({forceFetch:!1}).cycles,xe=(0,Sn.zu)().data,ke=(0,ce.Z)().showError,Ce=x.publishedAs===we.O2.Template;f.useEffect((function(){$(x.description||"")}),[x.description]);var Se=(0,ae.Z)(),Te=(0,he.Z)(),Ee=f.useRef(x),Re=(0,a.Z)((0,Sn.ap)({variables:{id:x.id},onCompleted:function(){D?J.X.closeCurrentWindow():I.push("/home","/~")},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return ke((0,se.Z)(e.message))}}),1),Ie=Re[0],De=(0,a.Z)((0,Sn.vi)({onError:function(e){return ke((0,se.Z)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=Ee.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,I.push({pathname:Te,query:{replUrl:n.url}},n.url+"#"+window.location.search)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),Ee.current=x,Object.keys(r).length>0&&T(!1)}}),2),Ge=De[0],Pe=De[1].loading,_e=(0,a.Z)((0,oe.Z)(),2),Be=_e[0],Ae=_e[1].loading,Ue=(0,a.Z)((0,Sn.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&ke(e.setAlwaysOn.message)},onError:function(e){return ke((0,se.Z)(e.message))},refetchQueries:[pt,ht]}),2),Le=Ue[0],Ne=Ue[1].loading,Xe=(0,a.Z)((0,Sn.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,xn.Z)({replId:x.id}).catch((function(e){d.Tb(e),Se.current&&ke("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),Se.current&&"Repl"===e.setGpu.__typename&&O(e.setGpu.hasGpu)):ke(e.setGpu.message)},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))},refetchQueries:[pt,ht]}),2),Fe=Xe[0],Oe=Xe[1].loading,Me=(0,a.Z)((0,Sn.gF)({variables:{input:{replId:x.id}},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))}}),2),We=Me[0],He=Me[1],ze=(0,Sn.l9)({fetchPolicy:"cache-and-network",ssr:!1}),Ve=ze.data,je=ze.loading,qe=ze.error,Ye=f.useMemo((function(){return!(!W||W===x.title)||(ue!==x.rawTemplateLabel||!(""===j&&!x.description)&&j!==x.description)}),[x,W,j,ue]),Ke=(0,le.Z)(Ye),$e=f.useCallback((function(){if(Ye){var e={id:x.id,title:W.trim()||x.title,description:j,templateLabel:x.currentUserPermissions.changeTemplateLabel?ue:void 0};Ge({variables:{input:e}})}}),[Ye,Ge,x,W,j,ue]),Je=(0,le.Z)($e);f.useLayoutEffect((function(){return function(){Ke.current&&Je.current()}}),[Je,Ke]);var sn,dn=f.useContext(ne.G).isGooglePlayStoreTWA,fn=f.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===x.powerUpCosts.__typename?x.powerUpCosts.alwaysOn.explanation:null;case"private":var n,t,r;return"UserPowerUpsTypes"===(null===Ve||void 0===Ve||null===(n=Ve.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)?null===(r=null===(t=Ve.currentUser.userPowerUpsByType)||void 0===t?void 0:t.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"PowerUpCostsType"===x.powerUpCosts.__typename?null===(i=x.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,Cn.Z)(e)}}),[Ve,x]),pn=function(){Ge({variables:{input:{id:x.id,isPrivate:!x.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{isPrivate:!x.isPrivate})}},refetchQueries:[{query:Sn.WM,variables:{replId:x.id}},pt,ht]}),(0,pe.j)(pe.U3.PRIVATE_TOGGLED,{enabled:!x.isPrivate,source:"workspace_info_modal"})},vn=function(){if(!Ne){var e=!x.isAlwaysOn;Le({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setAlwaysOn:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",powerUpCosts:{__typename:"PowerUpCostsType",alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:we.Ch.ActivateExistingOrder},gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:we.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},gn=function(){if(!Oe){var e=!F;Fe({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setGpu:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",hasGpu:e,powerUpCosts:{__typename:"PowerUpCostsType",gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:we.Ch.ActivateExistingOrder},alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:we.Ch.ActivateExistingOrder}}})}})}},mn=x.isRenamed?"Name your Repl":"Default name: ".concat(x.title),yn=[we.Sy.Submit,we.Sy.PublishTemplate,we.Sy.EditTemplate].includes(x.workspaceCta),Zn=(0,P.H)(),Tn=(null===xe||void 0===xe||null===(n=xe.currentUser)||void 0===n?void 0:n.id)===(null===(t=x.user)||void 0===t?void 0:t.id),En=(0,de.jX)(null===xe||void 0===xe||null===(u=xe.currentUser)||void 0===u?void 0:u.userSubscriptionType),Rn=0===be&&Tn&&!En,In=(0,ie.P5)({controlName:"flag-gpus",logFlagToAnalytics:!1}),Dn=(0,ie.P5)({controlName:"flag-edit-repl-info-forms",logFlagToAnalytics:!1}),Gn=(0,ge.P)({step:"not_shown"}),Pn="Team"===(null===(g=x.owner)||void 0===g?void 0:g.__typename),_n=x.hostingDeploymentPermissions.canDeploy&&"function"===typeof E,Bn="/replEnvironmentDesktop"===Te&&_n,Un=(0,ft.gg)(),Ln=Un.isDeployableRepl,Nn=Un.reason,Xn="HostingDeployment"===(null===(m=x.hostingDeployment)||void 0===m?void 0:m.__typename)&&x.hostingDeployment.currentBuild;return(0,c.tZ)("div",{css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==Gn.currentStep.step?(0,c.tZ)(ve.s,(0,o.Z)((0,i.Z)({},Gn),{analyticsContext:"workspace_info_modal"})):(0,c.BX)(c.HY,{children:[(0,c.tZ)(qn,{repl:x,isTemplate:Ce,showCloseButton:k,setActiveDialog:B,setIsEditing:T,updateIconUrl:function(e){return Ge({variables:{input:{id:x.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{iconUrl:e})}}})},updateReplInfo:$e}),Dn?(0,c.BX)(b.G,{css:gt.titleDescription,children:[(0,c.tZ)(V,{repl:x}),(0,c.tZ)(q,{repl:x}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(Y,{repl:x}):null]}):(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),$e()},className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",wn.j.mobileMax]]]),children:(0,c.BX)(b.G,{css:[y.l0.align.stretch,y.l0.colWithGap(16)],children:[(0,c.BX)(on.T,{background:"default",css:[y.l0.colWithGap(16)],children:[(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Zn("name"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",wn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.tZ)(v.Z,{maxLength:60,value:W,hideLabel:!0})]}),(0,c.tZ)(C.II,{style:{cursor:x.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!x.currentUserPermissions.changeTitle,maxLength:60,placeholder:mn,value:W,onChange:function(e){return H(e.target.value)},spellCheck:!1,id:Zn("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Zn("description"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",wn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(v.Z,{maxLength:X.p,value:j,hideLabel:!0})]}),(0,c.tZ)(C.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!x.currentUserPermissions.changeDescription,maxLength:X.p,value:j,onChange:function(e){return $(e.target.value)},placeholder:"What does this Repl do?",css:[y.l0.minHeight(96),y.l0.maxHeight(256),{resize:"vertical"}],id:Zn("description")})]})})]}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(on.T,{background:"default",css:[y.l0.colWithGap(4)],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:Zn("template"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",wn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"Template label"})}),(0,c.tZ)(C.II,{value:ue,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return Ze(e.target.value)},id:Zn("template")})]})}):null]})}),yn?null:(0,c.BX)(b.G,{css:[y.l0.colWithGap(24),y.l0.p(8),y.l0.pt(0)],children:[!dn&&Rn?(0,c.tZ)(S.zx,{iconLeft:(0,c.tZ)(an.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,pe.j)(pe.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),B(An.BuyCycles)},text:"Power Up this Repl"}):null,x.currentUserPermissions.changePrivacy===we.HA.Allowed&&(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(tn.hE,{tag:"fieldset",name:Zn("privacy"),value:x.isPrivate.toString(),onChange:function(){var e,n,t,r;if(!Pe)if(x.isPrivate)pn();else if(x.currentUserPermissions.changePrivacy===we.HA.Allowed&&null!=(null===(e=x.user)||void 0===e?void 0:e.id)&&null!=(null===xe||void 0===xe||null===(n=xe.currentUser)||void 0===n?void 0:n.id)&&x.user.id!==xe.currentUser.id)pn();else{var i="UserPowerUpsTypes"===(null===Ve||void 0===Ve||null===(t=Ve.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&(null===(r=Ve.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=fn("private");if(null==o||je)ke("You're too fast for us! Please try again in a moment.");else{if(!qe)return(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!x.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void pn():(L("private"),void B(An.PowerUp));ke("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(tn.rK,{id:Zn("false"),value:"false",text:"Public",icon:(0,c.tZ)(cn.Z,{})}),(0,c.tZ)(tn.rK,{id:Zn("true"),value:"true",text:"Private",icon:(0,c.tZ)(un.Z,{})})]}),(0,c.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!0,children:(0,fe.Z)(x.isPrivate,Pn)})]}),x.currentUserPermissions.changeAlwaysOn!==we.fn.Disallowed&&(0,c.tZ)(dt,{isAlwaysOn:x.isAlwaysOn,isAlwaysOnLoading:Ne||null==fn("always-on"),isGpu:F,isGpuLoading:Boolean(Oe||null==fn("gpu")),canGpu:In,onAlwaysOnChange:function(){var e=fn("always-on");if(null==e||Ne)ke("You're too fast for us! Please try again in a moment.");else if(qe)ke("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!x.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!x.isAlwaysOn&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return L("always-on"),void B(An.PowerUp);vn()}},onGpuChange:function(){var e=fn("gpu");if(null!=e)if(qe)ke("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!F,source:"workspace_info_modal",costExplanation:e}),!F&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return L("gpu"),void B(An.PowerUp);gn()}else ke("You're too fast for us! Please try again in a moment.")},showManageStorageModal:function(){return B(An.ManageStorage)},goToPowerUpDetails:function(e){return Gn.goTo({step:"power_up_details",powerUpCategory:e})}}),Bn?(0,c.BX)(b.G,{css:y.l0.colWithGap(8),children:[(0,c.tZ)(S.zx,{text:Xn?"Redeploy your project":"Deploy your project",iconLeft:(0,c.tZ)(ln.Z,{}),colorway:Xn?void 0:"primary",onClick:function(){E(),Xn||(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})},disabled:!Ln}),Ln?null:(0,c.tZ)(ye.E,{text:Nn})]}):null]}),(0,c.tZ)(rn.u,{isOpen:_===An.DeleteRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(h.Z,{delete:Ie,entityType:"Repl",hideModal:function(){return B(null)}})}),(0,c.tZ)(Q.Z,{context:"workspace_info_modal",isOpen:_===An.PowerUp,uponPurchaseGoTo:"workspace",replTitle:x.title,onRequestClose:function(e){"InsertDeploymentsPane"===e&&_n&&(E(),(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"power_up_modal"})),B(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(U){case null:case"boost":case"hosting_tier":break;case"always-on":vn();break;case"private":pn();break;case"gpu":gn();break;default:(0,Cn.Z)(U)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),B(null),[2]}}))})),powerUp:null!==U&&void 0!==U?U:"boost",canDeploy:Bn},_),R?(0,c.tZ)(bn,{isOpen:_===An.ManageStorage,onRequestClose:function(){return B(null)}}):null,(0,c.tZ)(hn.Z,{initialTab:"default",isOpen:_===An.BuyCycles,onRequestClose:function(){return B(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:x.title}),(0,c.tZ)(rn.u,{isOpen:_===An.ForkRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(K.Z,{onFork:function(e,n,t,r){Be({originId:x.id,teamId:e,title:n,description:t,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:x.title,initialDescription:null!==(sn=x.description)&&void 0!==sn?sn:"",initialPrivacy:x.isPrivate,hideModal:function(){Ae||B(null)},teamContext:null===(w=x.user)||void 0===w?void 0:w.username})}),(0,c.tZ)(rn.u,{isOpen:_===An.Unpublish,onRequestClose:function(){return B(null)},children:(0,c.tZ)(nn.Z,{repl:x,source:"replEnvironment",onDone:function(){B(null)}})}),(0,c.tZ)(rn.u,{isOpen:_===An.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,c.tZ)(p.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){He.loading||(We(),B(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(rn.u,{isOpen:_===An.EditPublishSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(me.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(rn.u,{isOpen:_===An.Publish,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(me.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(rn.u,{isOpen:_===An.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,c.tZ)(Qe,{repl:x})}),(0,c.tZ)(rn.u,{isOpen:_===An.UpdatePublishedRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(en.Z,{repl:x,onDone:function(){return B(null)},source:"replEnvironment"})}),(0,c.tZ)(s(),{id:"7206d0025a598b40",dynamic:[x.currentUserPermissions.changeDescription?"auto":"not-allowed",wn.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(x.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(wn.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})})}},75982:function(e,n,t){t.d(n,{s:function(){return l}});var r=t(43119),i=t(71440),o=t(3839);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},21835:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(57389),i=t(74985),o=(t(50959),t(82568)),a=t(39541),l=t(61284),c=t(85368),u=t(75863),s=(0,o.X)({metadata:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.flex.growAndShrink(1)],text:[a.l0.flex.shrink(1),a.l0.colWithGap(2)],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1),a.l0.color.foregroundDimmest,{fontSize:a.TV.fontSizeSmall}],title:[a.l0.flex.shrink(1),a.l0.fontSize(14)]});function d(e){var n=e.repl,t=n.user?(0,i.tZ)(l.xv,{height:"singleLine",css:s.username,children:n.user.username}):null;return(0,i.BX)(c.G,{css:s.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r.Z)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(u.ZP,{iconUrl:n.iconUrl,size:32,alt:"Repl icon"})}),(0,i.BX)(c.G,{css:s.text,children:[(0,i.tZ)(l.xv,{css:s.title,height:"singleLine","data-cy":"header-repl-title",children:n.title}),t]})]})}},82500:function(e,n,t){t.d(n,{Z:function(){return ye}});var r=t(72006),i=t(74985),o=t(62946),a=t(4405),l=t(43312),c=t(82568),u=t(39541),s=t(61284),d=t(85368),f=t(84563),p=t(43119),h=t(27691),v=t(87076),g=t(18171),m=t(93658),y=t(76735);function Z(e){return(0,o.Dv)((0,g.Z)((function(){return e||(0,o.cn)(null)}),[e]))}function b(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return b=function(){return e},e}var w=(0,c.X)({self:[u.l0.flex.row,u.l0.flex.wrap,u.l0.justify.spaceBetween,u.l0.align.center],text:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.minHeight(u.TV.space24)],textLoading:[u.l0.height(16),u.l0.width(u.TV.space64),h.p.backgroundPulse(),u.l0.borderRadius(4)],textLoadingWrapper:[u.l0.height("fit-content"),{animation:"".concat((0,l.F4)(b())," 120ms forwards ease-out alternate")}],textWarn:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.px(4)],textPadding:[u.l0.height(16),{lineHeight:"16px"}],textHighlight:[u.l0.color.accentPrimaryStronger],selfMini:[u.l0.rowWithGap(4),u.l0.align.center]});function x(e){var n=e.title,t=e.description,r=e.limitStatusAtom,a=e.limitTextAtom,l=e.limitTextSecondaryAtom,c=e.mini,f=e.loading,p=(0,o.Dv)((0,g.Z)((function(){return(0,o.cn)((function(e){return"At limit"===e(r)||"Close to limit"===e(r)}))}),[r]));if(c)return(0,i.BX)(d.G,{css:w.selfMini,children:[(0,i.tZ)(s.xv,{variant:"small",css:u.l0.color.foregroundDimmer,children:n}),p?(0,i.tZ)(y.Z,{color:u.TV.orangeStronger}):null]});var h=null;return h=f?(0,i.tZ)(d.G,{css:w.textLoading}):(0,i.tZ)(s.xv,{variant:"small",css:w.textPadding,children:l?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:w.textHighlight,children:[" ",(0,i.tZ)(k,{text:a})]})," + ",(0,i.tZ)(k,{text:l})]}):(0,i.tZ)(k,{text:a})}),(0,i.BX)(d.G,{css:w.self,children:[(0,i.BX)(d.G,{css:w.text,children:[(0,i.tZ)(s.xv,{css:{fontWeight:u.TV.fontWeightMedium},children:n}),(0,i.tZ)(v.h,{alt:t,size:24,children:(0,i.tZ)(m.Z,{})}),p?(0,i.BX)(d.G,{css:w.textWarn,children:[(0,i.tZ)(y.Z,{color:u.TV.orangeStronger}),(0,i.tZ)(s.xv,{variant:"small",css:w.textPadding,children:(0,i.tZ)(k,{text:r})})]}):null]}),(0,i.tZ)(d.G,{css:w.textLoadingWrapper,children:h},f?"loadingResources":"finishedLoadingResources")]})}function k(e){var n=Z(e.text);return(0,i.tZ)(i.HY,{children:n})}var C=t(23455);function S(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function T(e){return"At limit"===e?C.TV.accentNegativeDefault:"Close to limit"===e?C.TV.orangeDefault:void 0}function E(e,n,t,r,i){return"empty"===e||void 0===n?"":"vCPU"===i?Math.round(100*Math.min(1,n/t))+"% of "+r+" vCPUs":Math.round(n).toLocaleString()+"/"+Math.round(t).toLocaleString()+" "+i}var R=t(33594),I={accordionTitle:(0,l.iv)([u.l0.rowWithGap(4),u.l0.align.center]),accordionText:(0,l.iv)([u.l0.color.foregroundDimmer]),accordionIcon:(0,l.iv)([u.l0.cursor.pointer]),expandedWrapper:(0,l.iv)([u.l0.colWithGap(4),u.l0.py(8),u.l0.border({direction:"bottom",color:u.TV.outlineDefault,width:1})])};function D(){return(0,i.tZ)(R.Q,{headerContent:(0,i.tZ)(s.xv,{variant:"small",css:I.accordionText,children:"About RAM"}),children:(0,i.BX)(d.G,{css:I.expandedWrapper,children:[(0,i.tZ)(B,{type:"Project",text:"is what your programs, code intelligence, and some editor features use. It holds programs that are running right now."}),(0,i.tZ)(B,{type:"Cache",text:"caches file contents, libraries, and executables. If Program Memory gets too high, it will replace Cache Memory. If there\u2019s not enough Cache Memory, processes will slow down."})]})})}var G={self:(0,l.iv)([u.l0.width(8),u.l0.height(8),u.l0.borderRadius(8),u.l0.flex.shrink(0)])};function P(e){var n=e.variant;return(0,i.tZ)("div",{css:[G.self,"primary"===n?u.l0.backgroundColor.accentPrimaryDefault:u.l0.backgroundColor.outlineDefault]})}var _={self:(0,l.iv)([u.l0.rowWithGap(8),u.l0.align.center]),text:(0,l.iv)([u.l0.flex.shrink(1)]),underline:(0,l.iv)({textDecoration:"underline"})};function B(e){var n=e.type,t=e.text;return(0,i.BX)(d.G,{css:_.self,children:[(0,i.tZ)(P,{variant:"Project"===n?"primary":"secondary"}),(0,i.BX)(s.xv,{multiline:!0,variant:"small",css:_.text,children:[(0,i.BX)("span",{css:_.underline,children:[n," Memory"]})," ",t]})]})}var A=(0,c.X)({self:[u.l0.colWithGap(2)],selfMini:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[u.l0.height(8)]});function U(e){var n=e.totalAtom,t=e.currentAtom,l=e.currentSecondaryAtom,c=e.measure,u=e.cpuCountAtom,s=e.title,f=e.description,p=(0,g.Z)((function(){return(0,o.cn)((function(e){return S(e(t),e(n))}))}),[t,n]),h=(0,g.Z)((function(){return(0,o.cn)((function(e){return E(e(p),e(t),e(n),u&&e(u),c)}))}),[p,t,n,u,c]),v=(0,g.Z)((function(){return(0,o.cn)((function(e){return l?E(e(p),e(l),e(n),u&&e(u),c):""}))}),[p,l,n,u,c]),m=(0,g.Z)((function(){return(0,o.cn)((function(e){return l?Math.round(e(t)).toString():e(h)}))}),[l,t,h]);return(0,i.BX)(d.G,{css:e.mini?A.selfMini:A.self,children:[(0,i.tZ)(x,(0,a.Z)((0,r.Z)({title:s,description:f,limitStatusAtom:p,limitTextAtom:m},l?{limitTextSecondaryAtom:v}:{}),{mini:e.mini,loading:e.loading})),(0,i.tZ)(N,(0,a.Z)((0,r.Z)({},e),{limitStatusAtom:p,limitTextAtom:h,limitTextSecondaryAtom:v}))]})}var L={tooltip:(0,l.iv)(u.l0.colWithGap(2)),tooltipItem:(0,l.iv)(u.l0.rowWithGap(4),u.l0.align.center,u.l0.width("100%"),u.l0.flex.growAndShrink(1)),tooltipItemText:(0,l.iv)(u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.flex.growAndShrink(1),{"&>span":u.l0.display.inlineFlex,gap:C.TV.space4})};function N(e){var n=e.currentAtom,t=e.currentLabel,l=e.currentSecondaryAtom,c=e.currentSecondaryLabel,u=e.totalAtom,s=e.mini,p=e.inactive,h=e.limitStatusAtom,v=e.limitTextAtom,m=e.limitTextSecondaryAtom,y=e.loading,b=e.secondaryLimitDeterminesStatus,w=void 0!==b&&b,x=(0,o.Dv)(n),k=Z(l),S=(0,o.Dv)(u),E=(0,o.Dv)(v),R=(0,o.Dv)(m),I=(0,o.Dv)((0,g.Z)((function(){return(0,o.cn)((function(e){return T(e(h))}))}),[h])),D=(0,o.Dv)(h),G="At limit"!==D&&"Close to limit"!==D||!w?C.TV.outlineDimmer:T(D),P={shake:"At limit"===D,smoke:"Close to limit"===D||"At limit"===D};return l?(0,i.tZ)(f.J,(0,a.Z)((0,r.Z)({},P),{loading:y,css:s&&A.selfMiniBar,disabled:p,total:S,tooltip:(0,i.BX)(d.G,{css:L.tooltip,children:[(0,i.tZ)(X,{variant:"primary",label:t,labelValue:E}),(0,i.tZ)(X,{variant:"secondary",label:c,labelValue:R})]}),data:[{current:x,color:I},{current:k||0,color:G}]})):(0,i.tZ)(f.J,(0,a.Z)((0,r.Z)({},P),{loading:y,css:s&&A.selfMiniBar,disabled:p,total:S,current:x,color:I,tooltip:E}))}function X(e){var n=e.variant,t=e.label,r=e.labelValue;return(0,i.BX)(d.G,{css:L.tooltipItem,children:[(0,i.tZ)(P,{variant:n}),(0,i.BX)(s.xv,{css:L.tooltipItemText,children:[(0,i.BX)("span",{children:[t,":"]}),(0,i.tZ)("span",{children:r})]})]})}var F=t(57135),O=t(96583),M=t(5884),W=t(70523),H=t(31992),z=t(50959),V=t(12290),j=t(48330),q=t(66539),Y=(0,c.X)({self:[u.l0.colWithGap(8)],summary:[u.l0.colWithGap(2)],summaryRow:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.width("100%"),u.l0.flex.growAndShrink(1)],summaryRowText:[u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.flex.growAndShrink(1),{"&>span":u.l0.display.inlineFlex,gap:C.TV.space4}],miniBar:[u.l0.height(8)],dot:[u.l0.width(8),u.l0.height(8),u.l0.minWidth(8),u.l0.maxHeight(8),{borderRadius:"50%"}]});function K(e){var n=e.thisReplAtom,t=e.otherReplsAtom,l=e.quotaAtom,c=e.mini,u=e.inactive,s=e.accountLimitStatusAtom,p=e.thisReplTextAtom,h=e.otherReplsTextAtom,v=e.quotaTextAtom,m=e.scratchDiskTextAtom,y=e.scratchLimitStatusAtom,b=e.loading,w=(0,o.Dv)(n),x=Z(t),k=(0,o.Dv)(l),S=(0,o.Dv)(p),E=(0,o.Dv)(h),R=(0,o.Dv)(v),I=(0,o.Dv)(m),D=(0,o.Dv)((0,g.Z)((function(){return(0,o.cn)((function(e){return T(e(s))}))}),[s])),G=(0,o.Dv)(s),P=(0,o.Dv)(y),_="At limit"===P||"Close to limit"===P?C.TV.orangeStrongest:C.TV.foregroundDimmer,B="At limit"===G||"Close to limit"===G?T(G):C.TV.outlineDimmer,A={shake:"At limit"===G,smoke:"Close to limit"===G||"At limit"===G};return(0,i.BX)(d.G,{css:Y.self,children:[(0,i.tZ)(f.J,(0,a.Z)((0,r.Z)({},A),{loading:b,css:c&&Y.miniBar,disabled:u,total:k,tooltip:(0,i.BX)(d.G,{css:Y.summary,children:[(0,i.tZ)(J,{label:"This Repl",labelValue:S,color:C.TV.accentPrimaryStronger}),(0,i.tZ)(J,{label:"Your other Repls",labelValue:E,color:C.TV.foregroundDimmer}),(0,i.tZ)(J,{label:"Total account storage",labelValue:R,color:C.TV.foregroundDimmest}),(0,i.tZ)(ee,{displaySize:I,color:_})]}),data:[{current:w,color:D},{current:x||0,color:B}]})),c?null:(0,i.BX)(d.G,{css:Y.summary,children:[(0,i.tZ)(J,{label:"This Repl",labelValue:S,color:C.TV.accentPrimaryStronger}),(0,i.tZ)(J,{label:"Your other Repls",labelValue:E,color:C.TV.foregroundDimmer}),(0,i.tZ)(J,{label:"Total account storage",labelValue:R,color:C.TV.foregroundDimmest}),(0,i.tZ)(ee,{displaySize:I,color:_,tooltip:"Scratch disk storage is temporary storage used for package installation or to store temporary files. It does not count towards account storage, and resets regularly."})]})]})}var $=d.K.div,Q=d.K.span;function J(e){var n=e.color,t=e.label,r=e.labelValue;return(0,i.BX)(d.G,{css:Y.summaryRow,children:[(0,i.tZ)($,{css:Y.dot,style:{backgroundColor:n}}),(0,i.tZ)(s.xv,{variant:"small",css:Y.summaryRowText,children:(0,i.BX)(Q,{style:{color:n},children:[t,": ",r]})})]})}var ee=function(e){var n=e.displaySize,t=e.tooltip,r=e.color;return(0,i.tZ)(d.G,{css:Y.summaryRow,children:t?(0,i.tZ)(q.u,{tooltip:t,children:(0,i.BX)(s.xv,{variant:"small",css:Y.summaryRowText,children:[(0,i.BX)(Q,{style:{color:r},children:["Scratch Disk: ",n]}),(0,i.tZ)(m.Z,{style:{color:r}})]})}):(0,i.tZ)(s.xv,{variant:"small",css:Y.summaryRowText,children:(0,i.BX)(Q,{style:{color:r},children:["Scratch Disk: ",n]})})})};function ne(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return ne=function(){return e},e}var te=(0,c.X)({center:[u.l0.flex.row,u.l0.flex.wrap,u.l0.justify.spaceBetween,u.l0.align.center],text:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.minHeight(u.TV.space24)],textLoading:[u.l0.height(16),u.l0.width(u.TV.space64),h.p.backgroundPulse(),u.l0.borderRadius(4)],textLoadingWrapper:[u.l0.height("fit-content"),{animation:"".concat((0,l.F4)(ne())," 120ms forwards ease-out alternate")}],textWarn:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.px(4)],textPadding:[u.l0.height(16),{lineHeight:"16px"}],textHighlight:[u.l0.color.accentPrimaryStronger],selfMini:[u.l0.rowWithGap(4),u.l0.align.center]});function re(e){var n=e.title,t=e.description,r=e.accountLimitStatusAtom,a=e.accountLimitTextAtom,l=e.expandedAccountUseTextAtom,c=e.scratchLimitStatusAtom,f=e.mini,p=e.loading,h=(0,o.Dv)((0,g.Z)((function(){return(0,o.cn)((function(e){return"At limit"===e(r)||"Close to limit"===e(r)}))}),[r])),Z=(0,o.Dv)((0,g.Z)((function(){return(0,o.cn)((function(e){return"At limit"===e(c)||"Close to limit"===e(c)}))}),[c])),b=h||Z;if(f)return(0,i.BX)(d.G,{css:te.selfMini,children:[(0,i.tZ)(s.xv,{variant:"small",css:Z?u.l0.color.orangeStrongest:u.l0.color.foregroundDimmer,children:n}),b?(0,i.tZ)(y.Z,{size:12,color:u.TV.orangeStrongest}):null]});var w=null;return w=p?(0,i.tZ)(d.G,{css:te.textLoading}):(0,i.BX)(s.xv,{variant:"small",css:te.textPadding,children:[(0,i.BX)("span",{css:te.textHighlight,children:[" ",(0,i.tZ)(ie,{text:a})]})," + ",(0,i.tZ)(ie,{text:l})]}),(0,i.BX)(d.G,{css:te.center,children:[(0,i.BX)(d.G,{css:te.text,children:[(0,i.tZ)(s.xv,{css:{fontWeight:u.TV.fontWeightMedium},children:n}),(0,i.tZ)(v.h,{alt:t,size:24,children:(0,i.tZ)(m.Z,{})}),h?(0,i.BX)(d.G,{css:te.textWarn,children:[(0,i.tZ)(y.Z,{color:u.TV.orangeStronger}),(0,i.tZ)(s.xv,{variant:"small",css:te.textPadding,children:(0,i.tZ)(ie,{text:r})})]}):null]}),(0,i.tZ)(d.G,{css:te.textLoadingWrapper,children:w},p?"loadingResources":"finishedLoadingResources")]})}function ie(e){var n=Z(e.text);return(0,i.tZ)(i.HY,{children:n})}var oe=function(e){return e>2147483648?"".concat((0,H.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,H.p6)(e)).toLocaleString()," MiB")};function ae(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return ae=function(){return e},e}var le=(0,c.X)({self:[u.l0.colWithGap(2)],selfMini:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(2),{flexBasis:32}],center:[u.l0.flex.row,u.l0.flex.wrap,u.l0.justify.spaceBetween,u.l0.align.center],text:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.minHeight(C.TV.space24)],textLoading:[u.l0.height(16),u.l0.width(C.TV.space64),h.p.backgroundPulse(),u.l0.borderRadius(4)],textLoadingWrapper:[u.l0.height("fit-content"),{animation:"".concat((0,l.F4)(ae())," 120ms forwards ease-out alternate")}],textMini:[{alignSelf:"start"},u.l0.color.foregroundDimmest],titleWrapper:[u.l0.rowWithGap(4),u.l0.align.center],titleMini:[u.l0.color.foregroundDimmer],title:[u.l0.fontWeight.medium]});function ce(e){var n=e.currentAtom,t=e.mini,r=e.loading,a=e.description,l=(0,g.Z)((function(){return(0,o.cn)((function(e){return oe(1024*e(n)*1024)}))}),[n]);if(t)return(0,i.BX)(d.G,{css:le.selfMini,children:[(0,i.tZ)(d.G,{css:le.titleWrapper,children:(0,i.tZ)(s.xv,{variant:"small",css:le.titleMini,height:"singleLine",children:"Storage"})}),(0,i.tZ)(s.xv,{variant:"small",css:le.textMini,height:"singleLine",children:(0,i.tZ)(ue,{text:l})})]});var c=r?(0,i.tZ)(d.G,{css:le.textLoading}):(0,i.tZ)(s.xv,{variant:"small",height:"singleLine",children:(0,i.tZ)(ue,{text:l})});return(0,i.tZ)(d.G,{css:t?le.selfMini:le.self,children:(0,i.BX)(d.G,{css:le.center,children:[(0,i.BX)(d.G,{css:le.text,children:[(0,i.tZ)(s.xv,{css:le.title,children:"Storage"}),(0,i.tZ)(v.h,{alt:a,size:24,children:(0,i.tZ)(m.Z,{})})]}),(0,i.tZ)(d.G,{css:le.textLoadingWrapper,children:c},r?"loadingResources":"finishedLoadingResources")]})})}function ue(e){var n=Z(e.text);return(0,i.tZ)(i.HY,{children:n})}var se=(0,c.X)({self:[u.l0.colWithGap(2)],selfMini:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[u.l0.height(8)]}),de=3e5;function fe(e){var n,t,o,a,l=(0,j.Z)(),c=(0,W.Z)(),u=c.dataAtom.disk,s=c.loading,d=(0,M.mE)({variables:{replId:l}}),f=d.data,p=d.loading,h="Repl"===(null===f||void 0===f||null===(n=f.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===(t=f.repl.owner)||void 0===t?void 0:t.__typename),v="Repl"===(null===f||void 0===f||null===(o=f.repl)||void 0===o?void 0:o.__typename)?null===(a=f.repl.owner)||void 0===a?void 0:a.id:void 0;return p||h?(0,i.tZ)(U,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:u.currentAtom,totalAtom:u.totalAtom,measure:"MiB",loading:p||s},e)):(0,i.tZ)(pe,(0,r.Z)({title:"Storage",description:"How much space your account has to store files",resourceData:c,replId:l,ownerId:v},e))}function pe(e){var n,t,l,c=e.title,u=e.description,s=e.resourceData,f=e.replId,p=e.ownerId,h=s.dataAtom.disk,v=h.currentAtom,m=h.totalAtom,y=h.scratchTotalAtom,Z=h.scratchCurrentAtom,b=s.loading,w=(0,o.Dv)(m),x=(0,o.Dv)(v),k=(0,o.Dv)(y),C=(0,o.Dv)(Z),T=(0,M.Pf)({fetchPolicy:"network-only",nextFetchPolicy:"cache-and-network",ssr:!1}),E=T.data,R=T.loading,I=T.refetch,D="number"===typeof p&&(null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.id)===p,G=(0,z.useMemo)((function(){return(0,V.Z)((function(){return I()}),{wait:12e4,maxWait:de})}),[I]);(0,z.useEffect)((function(){var e=!1,n=null,t=function(){var r=(0,F.Z)((function(){return(0,O.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,G()];case 1:return r.sent(),n=setTimeout(t,de),[2]}}))}));return function(){return r.apply(this,arguments)}}();return t(),function(){e=!0,n&&clearTimeout(n),G.isScheduled()&&G.flush()}}),[G,x,w,I]);var P="AccountStorageUtilization"===(null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)?Number(E.currentUser.storageInfo.accountStorageUtilization.total):0,_="StorageQuota"===(null===E||void 0===E||null===(l=E.currentUser)||void 0===l?void 0:l.storageInfo.storageQuota.__typename)?Number(E.currentUser.storageInfo.storageQuota.quota):0,B=ve(f,E),A=!(_>0&&P>0)&&(R||b),U=1024*x*1024,L=Math.max(P-B,0),N=(0,H.p6)(P),X=(0,H.p6)(L),W=(0,H.p6)(_),j=he(1024*C*1024,1024*k*1024),q=S(N,W),Y=S(C,k),$=oe(U),Q=oe(L),J=oe(_),ee=he(L,_),ne=(0,H.$s)(U).toLocaleString(void 0,{maximumFractionDigits:1}),te=(0,g.Z)((function(){return(0,o.cn)(X)}),[X]),ie=(0,g.Z)((function(){return(0,o.cn)(W)}),[W]),ae=(0,g.Z)((function(){return(0,o.cn)(q)}),[q]),le=(0,g.Z)((function(){return(0,o.cn)(Y)}),[Y]),ue=(0,g.Z)((function(){return(0,o.cn)($)}),[$]),fe=(0,g.Z)((function(){return(0,o.cn)(J)}),[J]),pe=(0,g.Z)((function(){return(0,o.cn)(j)}),[j]),ge=(0,g.Z)((function(){return(0,o.cn)(Q)}),[Q]),me=(0,g.Z)((function(){return(0,o.cn)(ee)}),[ee]),ye=(0,g.Z)((function(){return(0,o.cn)(ne)}),[ne]);return D?(0,i.BX)(d.G,{css:e.mini?se.selfMini:se.self,children:[(0,i.tZ)(re,{title:c,description:u,scratchLimitStatusAtom:le,accountLimitStatusAtom:ae,accountLimitTextAtom:ye,expandedAccountUseTextAtom:me,mini:e.mini,loading:A}),(0,i.tZ)(K,(0,a.Z)((0,r.Z)({},e),{loading:A,thisReplAtom:v,otherReplsAtom:te,quotaAtom:ie,accountLimitStatusAtom:ae,thisReplTextAtom:ue,otherReplsTextAtom:ge,quotaTextAtom:fe,scratchDiskTextAtom:pe,scratchLimitStatusAtom:le}))]}):(0,i.tZ)(ce,(0,r.Z)({currentAtom:v,loading:A},e))}var he=function(e,n){var t=(0,H.$s)(e).toLocaleString(void 0,{maximumFractionDigits:2}),r=(0,H.$s)(n).toLocaleString(void 0,{maximumFractionDigits:2});return"".concat(t," / ").concat(r," GiB")},ve=function(e,n){var t,r;if("AccountStorageUtilization"!==(null===n||void 0===n||null===(t=n.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename))return 0;var i=null===(r=n.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(n){return n.repl.id===e})))||void 0===r?void 0:r.usage;return Number(null!==i&&void 0!==i?i:0)},ge=t(88541),me=Symbol("ReplResources");function ye(e){var n=e.resources,t=n.dataAtom,a=t.cpu,l=t.ram,c=t.disk,s=n.loading,f=(0,ge.P5)({controlName:"flag-storage-dynamic-resize-beta",logFlagToAnalytics:!1}),p=(0,i.tZ)(U,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:l.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:l.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:l.totalAtom,measure:"MiB",loading:s},e));return(0,i.BX)(o.zt,{scope:me,children:[(0,i.tZ)(U,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:a.currentAtom,totalAtom:a.totalAtom,cpuCountAtom:a.cpuCountAtom,measure:"vCPU",loading:s},e)),e.mini?p:(0,i.BX)(d.G,{css:u.l0.colWithGap(4),children:[p,(0,i.tZ)(D,{})]}),f?(0,i.tZ)(fe,(0,r.Z)({},e)):(0,i.tZ)(U,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:c.currentAtom,totalAtom:c.totalAtom,measure:"MiB",loading:s},e))]})}},73162:function(e,n,t){t.d(n,{hF:function(){return L},w3:function(){return W},Kq:function(){return Y},lR:function(){return z}});var r=t(2272),i=t(74985),o=t(43312),a=t(87076),l=t(63128),c=t(61284),u=t(85368),s=t(36443),d=t(94045),f=t(39541),p=t(19358),h=t(70523),v=t(50959),g=t(82500),m=t(38467),y=t(48330),Z=t(77511),b=t(51631),w=t(90171),x=t(72006),k=t(43119),C=t(71440),S=t(24635);function T(){var e=(0,k.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}var E,R={},I=(0,C.Ps)(T());function D(){var e,n,t,r,i=(0,y.Z)(),o=(0,w.useRouter)(),a=function(e){var n=(0,x.Z)({},R,e);return S.a(I,n)}({variables:{replId:i}}).data;return(0,Z.Vg)(o)||"number"===typeof(null===a||void 0===a||null===(e=a.currentUser)||void 0===e?void 0:e.id)&&"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)!==(null===(t=null===a||void 0===a?void 0:a.repl.owner)||void 0===t?void 0:t.id)||(null===a||void 0===a||null===(r=a.currentUser)||void 0===r?void 0:r.userSubscriptionType)===b.HP.HackerPro?E.Nothing:E.Upgrade}function G(){var e=null;return D()===E.Upgrade&&(e=(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{multiline:!0,children:"Low on resources?"}),(0,i.tZ)(m.Z,{context:"repl_resources_upgrade"})]})),(0,i.BX)(i.HY,{children:[e,(0,i.BX)(c.xv,{multiline:!0,color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,i.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}!function(e){e.Upgrade="UPGRADE",e.Nothing="NOTHING"}(E||(E={}));var P=t(18171),_=t(84563),B=(t(93658),t(76735)),A=t(62946);function U(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,o=void 0!==r&&r,a=(0,A.Dv)(t);return(0,i.BX)(u.G,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,i.tZ)(c.xv,{variant:"small",css:f.l0.color.foregroundDimmer,children:o?n+" last run":n}),a?(0,i.tZ)(B.Z,{color:f.TV.orangeStronger}):null]})}function L(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,o=e.countAtom,a=e.measure,l=e.limitText,c=e.inactive,s=void 0!==c&&c,d=(0,P.Z)((function(){return(0,A.cn)((function(e){return X(e(r),e(t))}))}),[r,t]),p=(0,P.Z)((function(){return(0,A.cn)((function(e){return l||O(e(d),e(r),e(t),o&&e(o),a)}))}),[l,d,r,t,o,a]),h=(0,P.Z)((function(){return(0,A.cn)((function(e){var n=e(d);return"At limit"===n||"Close to limit"===n}))}),[d]);return(0,i.BX)(u.G,{css:[f.l0.colWithGap(4),f.l0.flex.growAndShrink(2),{flexBasis:32}],children:[n?(0,i.tZ)(U,{title:n,doWarnAtom:h,inactive:s}):null,(0,i.tZ)(N,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:p,mini:!0})]})}function N(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,o=e.inactive,a=e.mini,l=(0,A.Dv)(t),c=(0,A.Dv)(n),u=(0,A.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return f.TV.accentNegativeDefault;case"Close to limit":return f.TV.orangeDefault}}(X(c,l));return(0,i.tZ)(_.J,{css:a&&f.l0.height(8),total:l,current:c,color:s,disabled:o,tooltip:u})}function X(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function F(e){return Math.round(100*(e+Number.EPSILON))/100}function O(e,n,t,r,i){if("empty"!==e&&void 0!==n)return"vCPU"===i?F(100*Math.min(1,n/t))+"% of "+r+" vCPUs":F(n).toLocaleString()+"/"+F(t).toLocaleString()+" "+i}var M={self:(0,o.iv)([f.l0.p(8),f.l0.colWithGap(8),{borderTop:"1px solid ".concat(f.TV.backgroundHigher)}])};function W(){var e=(0,r.Z)(v.useState(!1),2),n=e[0],t=e[1];return(0,i.tZ)(i.HY,{children:(0,i.tZ)(l.T,{css:M.self,children:n?(0,i.tZ)(K,{onClose:function(){return t(!1)}}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(p.M,{}),(0,i.tZ)(j,{onExpand:function(){return t(!0)}})]})})})}var H={self:(0,o.iv)([f.l0.overflow("hidden"),f.l0.rowWithGap(12),f.l0.flex.grow(1),f.l0.justify.spaceBetween,f.l0.align.center,f.l0.focusRing,f.l0.cursor.pointer])};function z(e){var n=e.inactive,t=void 0!==n&&n,r=(0,h.Z)();return(0,i.tZ)(u.G,{css:H.self,"aria-expanded":!1,children:(0,i.tZ)(g.Z,{mini:!0,inactive:t,resources:r})})}var V={self:(0,o.iv)([f.l0.overflow("hidden"),f.l0.reset.button,f.l0.rowWithGap(12),f.l0.flex.grow(1),f.l0.justify.spaceBetween,f.l0.align.center,f.l0.focusRing,f.l0.cursor.pointer])};function j(e){var n=e.onExpand,t=e.inactive,r=void 0!==t&&t,o=(0,h.Z)();return(0,i.BX)(u.G,{css:V.self,role:"button",tag:"button","aria-expanded":!1,onClick:n,children:[(0,i.tZ)(g.Z,{mini:!0,inactive:r,resources:o}),(0,i.tZ)(d.Z,{})]})}var q={self:(0,o.iv)([f.l0.colWithGap(12),f.l0.p(8)]),selfCollapsable:(0,o.iv)([f.l0.colWithGap(12)]),headerCollapsable:(0,o.iv)([f.l0.flex.row,f.l0.justify.spaceBetween])};function Y(e){var n=e.inactive,t=void 0!==n&&n,r=(0,h.Z)();return(0,i.BX)(u.G,{css:q.self,children:[(0,i.tZ)(g.Z,{inactive:t,resources:r}),(0,i.tZ)(G,{})]})}function K(e){var n=e.inactive,t=void 0!==n&&n,r=e.onClose,o=(0,h.Z)();return(0,i.BX)(u.G,{css:q.selfCollapsable,children:[(0,i.BX)(u.G,{css:[q.headerCollapsable],children:[(0,i.tZ)(c.xv,{variant:"subheadDefault",children:"Repl Resources"}),(0,i.tZ)(a.h,{alt:"collapse",tooltipHidden:!0,onClick:r,"aria-expanded":!0,children:(0,i.tZ)(s.Z,{})})]}),(0,i.tZ)(g.Z,{inactive:t,resources:o}),(0,i.tZ)(G,{})]})}},67283:function(e,n,t){t.d(n,{ZP:function(){return ee},al:function(){return Y},L7:function(){return Q}});var r=t(57135),i=t(57389),o=t(72006),a=t(4405),l=t(96583),c=t(74985),u=t(50959),s=t(43119),d=t(71440),f=t(24635);function p(){var e=(0,s.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());var g=t(625),m=t(48330),y=t(10841),Z=t(39541),b=t(85368),w=t(32104),x=t(61284),k=t(66539),C=t(43312),S=t(4421),T=t(2272),E=t(62946),R=t(53397);function I(){var e=(0,s.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return I=function(){return e},e}var D={},G=(0,d.Ps)(I());var P=t(31410),_=t(88254),B=t(28229),A=new Date("2022-07-08"),U=(0,R.O4)("useCelebrateFirstReplPlay",!1);function L(){var e,n,t=function(e){var n=(0,o.Z)({},D,e);return f.a(G,n)}(),r=(0,B.Z)().preferences.extraDelight,i=(0,P.$0)().fireCircularBurstFrom,a=(0,T.Z)((0,E.KO)(U),2),l=a[0],c=a[1],u=null!==(n=null===(e=t.data)||void 0===e?void 0:e.currentUser)&&void 0!==n?n:null,s=!l&&u&&new Date(u.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||s)&&i({element:e}),s&&c(!0)):_.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var N,X=t(40735),F=t(65416),O=t(34338),M=t(13233),W=t(49146),H=t(47518),z=t(45353);function V(e){switch(e.runState){case y.A.IDLE:return(0,c.tZ)(X.Z,{size:16});case y.A.RUNNING:return(0,c.tZ)(F.Z,{size:16});default:return(0,c.tZ)(w.Z,{size:16})}}var j,q=(N={},(0,i.Z)(N,y.A.IDLE,"Run"),(0,i.Z)(N,y.A.RUNNING,"Stop"),(0,i.Z)(N,y.A.STOPPING,"Stopping"),(0,i.Z)(N,y.A.OFFLINE,"Working"),N),Y={small:60,large:100},K=(0,C.iv)([Z.l0.py(12),Z.l0.width(Y.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStronger,Z.l0.cursor.pointer,Z.l0.focusRing,(j={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:Z.TV.accentPositiveStrongest}]},(0,i.Z)(j,(0,O.et)("tabletMax"),[Z.l0.width(Y.large)]),(0,i.Z)(j,":focus-visible",{outlineColor:"".concat(Z.TV.accentPositiveStrongest)}),j)]),$=(0,C.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:Z.TV.accentPrimaryDefault}]}]);function Q(e){var n=(0,u.useState)(e.getRunState()),t=n[0],r=n[1];return(0,u.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),t}var J=u.forwardRef((function(e,n){var t=e.runner,s=e.runConfig,d=e.onRunInitiated,p=e.style,w=void 0===p?"default":p,C=e.disableTooltip,T=e.shortcut,E=(0,m.Z)(),R=Q(t),I=function(e){var n=(0,o.Z)({},h,e);return f.a(v,n)}({variables:{id:E}}).data,D="Repl"===(null===I||void 0===I?void 0:I.repl.__typename)?I.repl:null,G=L().celebrate,P=R!==y.A.IDLE&&R!==y.A.RUNNING,_=(0,M.Z)().showError,B=(0,u.useRef)(null),A=function(){var e=(0,r.Z)((function(){var e,n,r,i,o,a,c,u;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),R!==y.A.IDLE?[3,2]:(d&&d(),B.current&&G(B.current),[4,t.run(s)]);case 1:return l.sent(),D&&(0,g.j)(g.U3.PROJECT_RAN,{language:D.language,replId:D.id,replTitle:D.title,rootOriginReplUrl:D.rootOriginReplUrl,templateTitle:null===(e=D.source)||void 0===e||null===(n=e.release)||void 0===n||null===(r=n.repl)||void 0===r?void 0:r.title,templateOwner:null===(i=D.source)||void 0===i||null===(o=i.release)||void 0===o||null===(a=o.repl)||void 0===a||null===(c=a.owner)||void 0===c?void 0:c.username}),[2];case 2:return R===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 3:return u=l.sent(),_(u.toString()),W.kg.error("run button error",{errorMessage:u.message}),R===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===w)return(0,c.tZ)(b.G,{tag:"button",disabled:P,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:A,innerRef:B,children:(0,c.tZ)(V,{runState:R})});var U=R===y.A.IDLE;return"inline-small"===w?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:A,ref:B,disabled:P,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),U?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,U?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:U?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(V,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],children:q[R]})]}):(0,c.tZ)(k.u,{placement:"bottom",isDisabled:C||!T,tooltip:T?(0,c.tZ)(z.bM,{keyCombo:T}):null,children:function(e,t){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:A,ref:(0,H.l)(B,t,n),css:[K,!U&&$],children:[(0,c.tZ)(V,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8),Z.l0.display.none,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:q[R]})]}))}})})),ee=J},57388:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(87076),c=t(39541),u=(0,t(82568).X)({checked:[c.l0.width(32),c.l0.height(32),c.l0.backgroundColor.backgroundHigher],unchecked:[c.l0.width(32),c.l0.height(32),c.l0.color.foregroundDimmest]});function s(e){var n=e.alt,t=e.icon,c=e.checked,s=e.onClick,d=(0,o.Z)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.h,(0,i.Z)((0,r.Z)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},21296:function(e,n,t){t.d(n,{Z:function(){return he}});var r=t(74985),i=t(88541),o=t(77511),a=t(63128),l=t(85368),c=t(82568),u=t(39541),s=t(57135),d=t(96583),f=t(12404),p=t(38567),h=t(24478),v=t(72006),g=t(77637),m=t(45510),y=(0,c.X)({base:[u.l0.backgroundColor.backgroundDefault,u.l0.color.foregroundDimmer,u.l0.borderRadius(0),u.l0.height("auto"),u.l0.p(4),{"> div":u.l0.rowWithGap(4)}]}),Z=function(e){var n=e.css,t=(0,g.Z)(e,["css"]);return(0,r.tZ)(a.T,{background:"root",children:(0,r.tZ)(m.zx,(0,v.Z)({small:!0,css:[y.base,n]},t))})},b=t(23455);function w(e){var n=e.performPaneOperation,t=(0,p.Z)(function(){var e=(0,s.Z)((function(e){var n,t,r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=o.sent()).error?[2,n]:(t=n.type,r=null,t===f.y5.INITIALIZING?[3,3]:[4,e.status()]);case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null===r||void 0===r?void 0:r.branch,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),i=!t||t.error?null:t.branchName;return i?(0,r.tZ)(Z,{onClick:function(){return null===n||void 0===n?void 0:n({operation:"open",pane:{type:"git"}})},text:i,iconLeft:(0,r.tZ)(h.Z,{color:b.TV.foregroundDimmer,size:12})}):null}var x=t(10035),k=t(50959),C=t(21303),S=t(46889);function T(){var e=(0,k.useContext)(C.ox).openHistory;return e?(0,r.tZ)(Z,{text:"History",iconRight:(0,r.tZ)(x.Z,{size:12}),onClick:function(){(0,S.p)("historyOpened"),e()},css:[{borderBottomRightRadius:u.TV.space6}]}):null}var E=t(69994),R=t(45853),I=t(951),D=t(28229),G=t(66539),P=t(60396),_=t(67745),B=t(64491),A=t(45285),U=t(49828),L=t(16885),N=t(24489),X=t(84912),F=t(32104),O=t(74121),M=t(68339),W=t(87978);function H(){var e,n=(0,O.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(I.Yp);return t?(0,r.tZ)(z,{fileName:t}):null}function z(e){var n=e.fileName,t=(0,D.Z)().preferences.codeIntelligence,i=function(){var e=(0,O.uN)(),n=(0,k.useState)(null===e||void 0===e?void 0:e.state.facet(I.Q$)),t=n[0],r=n[1],i=(0,R.Z)({view:e});return(0,k.useEffect)((function(){if(e)return e.dispatch({effects:i.reconfigure(E.tk.updateListener.of((function(e){var n=e.startState.facet(I.Q$),t=e.state.facet(I.Q$);n!==t&&r(t)})))}),r(e.state.facet(I.Q$)),function(){r(void 0),e.dispatch({effects:i.reconfigure([])})};r(void 0)}),[e,i]),t}(),o=null!=i,a=(0,B.Z)(n),l=function(e){var n=(0,A.Z)(),t=n.lsp,r=n.lspnix,i=(0,B.X)(),o=(0,D.Z)().preferences.codeIntelligence,a=(0,k.useState)(!1),l=a[0],c=a[1];(0,k.useEffect)((function(){null!=e&&c(!1)}),[e]);var u=(0,k.useCallback)((function(){null!==i&&o&&(i?(r.disable(),r.enable()):(t.stop(),t.start()),c(!0))}),[t,r,i,o]);return{isRestartingLSP:l,restartLSP:u}}(a),c=l.isRestartingLSP,s=l.restartLSP,d=(0,k.useState)(null===a||void 0===a?void 0:a.getServerState()),f=d[0],p=d[1],h=(0,k.useState)(null===a||void 0===a?void 0:a.getServerHealth()),v=h[0],g=h[1],m=f===_.a.INITIALIZING||c,y=f===_.a.INITIALIZED,b=f===_.a.EXITED||c,w=null!=a&&v===_.N.READY,x=null!=a&&v===_.N.STALLED;(0,k.useEffect)((function(){if(a)return p(a.getServerState()),g(a.getServerHealth()),(0,M.uf)([a.onServerStateChange((function(e){p(e)})),a.onServerHealthChange((function(e){g(e)}))])}),[a]);var C=function(e){var n=e.codeIntelligence,t=e.isRestartingLSP,r=e.isInitializedLSP,i=e.isExitedLSP,o=e.isReadyLSP,a=e.isStalledLSP,l=e.hasPartialSupport;if(t)return"Restarting language server...";if(!n)return"Code intelligence is disabled. Enable it in settings.";if(i)return"Language support is not available because the language server exited.";if(a)return"Language support is stalled due to a resource constraint.";if(r&&!o)return"Language support may be inaccurate because it is initializing.";if(!r&&l)return"Language support may be inaccurate because code intelligence is not available."}({codeIntelligence:t,isRestartingLSP:c,isInitializedLSP:y,isReadyLSP:w,isExitedLSP:b,isStalledLSP:x,hasPartialSupport:o}),S=b||!a;return(0,r.tZ)(G.u,{isDisabled:void 0===C,tooltip:C,children:(0,r.tZ)(Z,{disabled:!S,css:[{svg:[u.l0.width(16),u.l0.height(16)],borderBottomLeftRadius:u.TV.space6}],iconLeft:j({isLoadingLSP:m,isInitializedLSP:y,isReadyLSP:w,isExitedLSP:b,isStalledLSP:x,hasPartialSupport:o}),text:V({codeMirrorLanguageSupport:i,fileName:n}),onClick:function(){b&&s(),a||window.open("https://docs.replit.com/programming-ide/configuring-repl#languages","_blank")}})})}function V(e){var n,t=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,P.v)(r);return i||(t?0===t.language.name.length?(0,W.r6)(r):(n=t.language.name).slice(0,1).toUpperCase()+n.slice(1).toLowerCase():"Plain Text")}function j(e){var n=e.isLoadingLSP,t=e.isInitializedLSP,i=e.isReadyLSP,o=e.isExitedLSP,a=e.isStalledLSP,l=e.hasPartialSupport;return a?(0,r.tZ)(X.Z,{size:16}):n||t&&!i?(0,r.tZ)(F.Z,{size:16,color:u.TV.blueStronger}):i?(0,r.tZ)(L.Z,{size:16}):o?(0,r.tZ)(N.Z,{size:16}):l?(0,r.tZ)(X.Z,{size:16}):(0,r.tZ)(U.Z,{size:16})}var q=t(26833);function Y(){var e=(0,k.useRef)(null),n=(0,O.uN)(),t=(0,R.Z)({view:n}),i=function(n){e.current&&(e.current.textContent=n)};return(0,k.useEffect)((function(){if(n){var e=null,r=null,o=function(n){n!==r&&(r=n,null===e&&(e=requestAnimationFrame((function(){e=null,i(r?function(e){var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce((function(e,n){return e+(n.to-n.from)}),0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}(r):"")}))))};return n.dispatch({effects:t.reconfigure(E.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(n.state),function(){i(""),null!==e&&(cancelAnimationFrame(e),e=null),n.dispatch({effects:t.reconfigure([])})}}i("")}),[n,t]),(0,k.useMemo)((function(){return(0,r.tZ)(Z,{text:(0,r.tZ)("span",{ref:e,"data-cy":"current-position"}),css:[u.l0.color.foregroundDimmest],onClick:n?function(){return(0,q.zo)(n)}:void 0})}),[n])}var K=t(61284);function $(){var e=(0,k.useState)(null),n=e[0],i=e[1],o=(0,k.useRef)(null),a=(0,O.uN)(),l=(0,R.Z)({view:a}),c=(0,D.Z)().preferences,u="vim"===(null===c||void 0===c?void 0:c.keyboardHandler),s=(0,k.useCallback)((function(e){if(o.current){var t=null!==e&&void 0!==e?e:"";if(a&&n&&void 0===e){var r,i,l=n.getCM(a),c=null!==(i=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==i?i:"normal";t="-- ".concat(c.toUpperCase()," --")}o.current.innerText!==t&&(o.current.innerText=t||"")}}),[a,n]);return(0,k.useEffect)((function(){u&&!n&&t.e(6338).then(t.bind(t,44549)).then((function(e){i(e),s()}))}),[u,n,s]),(0,k.useEffect)((function(){if(a&&u){var e=!1;return setTimeout((function(){e||(e=!0,a.dispatch({effects:l.reconfigure(E.tk.updateListener.of((function(){return s()})))}))}),0),s(),function(){e?a.dispatch({effects:l.reconfigure([])}):e=!0}}s(null)}),[a,u,l,s]),(0,r.tZ)(r.HY,{children:u?(0,r.tZ)(K.xv,{ref:o,color:"dimmer",variant:"small"}):null})}var Q,J=t(57389),ee=t(7225),ne=t(93672),te=(0,c.X)({roundedRectanglePill:[u.l0.display.flex,u.l0.center,u.l0.fontWeight.medium,u.l0.fontSize(10),u.l0.borderRadius(4),u.l0.px(2),{flex:"0 0 auto",minWidth:12,height:16}]}),re=(Q={},(0,J.Z)(Q,ee.DiagnosticSeverity.Error,u.TV.accentNegativeDimmest),(0,J.Z)(Q,ee.DiagnosticSeverity.Warning,u.TV.yellowDimmer),Q);function ie(e){var n,t=e.value,i=e.severity,o=e.onClick,a=o?{cursor:"pointer"}:{},l=null!==(n=re[i])&&void 0!==n?n:void 0;return(0,r.tZ)("div",{onClick:o,onKeyDown:function(e){"Enter"===e.key&&(null===o||void 0===o||o())},role:"button",tabIndex:0,css:[te.roundedRectanglePill,{borderBottom:"solid 1px gray",borderBottomColor:l}],style:a,children:t})}function oe(){var e,n=(0,O.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(I.Yp);return t?(0,r.tZ)(ae,{fileName:t}):null}function ae(e){var n=e.fileName,t=(0,O.uN)(),i=function(e){var n=(0,k.useState)(null),t=n[0],r=n[1],i=(0,B.Z)(e);return(0,k.useEffect)((function(){if(i)return i.onDiagnostics((function(n){n.path===e&&r(n.diagnostics)}))}),[i,e]),t}(n),o=(0,k.useMemo)((function(){return i?function(e){var n=e.reduce((function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e}),{});return e.length>0&&0===Object.keys(n).length&&(n[ee.DiagnosticSeverity.Error]=e.length),n}(i):null}),[i]);if(!o)return null;var a=o[ee.DiagnosticSeverity.Error]||0,l=o[ee.DiagnosticSeverity.Warning]||0;return 0===a&&0===l?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(G.u,{tooltip:"".concat(a," errors"),children:(0,r.tZ)(ie,{value:a,severity:ee.DiagnosticSeverity.Error,onClick:a>0?function(){if(t&&i)return(0,ne.Z)(t)}:void 0})}),(0,r.tZ)(G.u,{tooltip:"".concat(l," warnings"),children:(0,r.tZ)(ie,{value:l,severity:ee.DiagnosticSeverity.Warning,onClick:l>0?function(){if(t&&i)return(0,ne.Z)(t)}:void 0})})]})}var le=t(69310),ce=t(51697),ue=t(94716),se=t(25381);function de(){var e=(0,k.useState)(!1),n=e[0],t=e[1],i=(0,k.useState)(!1),o=i[0],a=i[1],l=(0,ue.Z)(n),c=(0,ue.Z)(o),u=(0,O.uN)();return(0,ce.M)((function(){return E.tk.updateListener.of((function(e){var n=e.state.field(le.Ou,!1);if(!n||null===n.head)return l.current&&t(!1),void(c.current&&a(!1));var r=n.mode===le.Ut.INLINE_DIFF;l.current!==r&&t(r),c.current||a(!0)}))}),[l,c],u,"ToggleGitFileDiff"),u&&o?(0,r.tZ)(Z,{text:n?"Diffing":"Diff",colorway:n?"primary":void 0,iconLeft:(0,r.tZ)(se.Z,{}),onClick:function(){u.dispatch({effects:le.x9.of(n?le.Ut.GUTTER_DIFF:le.Ut.INLINE_DIFF)})}}):null}var fe=t(95245),pe=(0,c.X)({root:[u.l0.position.relative,u.l0.rowWithGap(16),u.l0.align.center,u.l0.justify.spaceBetween,u.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(u.TV.backgroundHigher)},{height:"30px",contain:"strict"}],left:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.px(8)],right:[u.l0.rowWithGap(2),u.l0.display.flex,u.l0.flex.row,u.l0.align.center],group:[u.l0.rowWithGap(2),u.l0.display.flex,u.l0.flex.row,u.l0.flex.shrink(1),u.l0.align.center]});function he(e){var n=e.performPaneOperation,t=(0,i.P5)({controlName:"flag-lsp-status-in-ws",logFlagToAnalytics:!1}),c=(0,i.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),u=(0,fe.d)(),s=!u&&t,d=!u&&c,f=(0,i.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1}),p=(0,i.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(0,o.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7};return(0,r.BX)(a.T,{css:pe.root,style:h,children:[(0,r.BX)(l.G,{css:pe.group,children:[s?(0,r.tZ)(H,{}):null,d?(0,r.tZ)(oe,{}):null,f?(0,r.tZ)(w,{performPaneOperation:n}):null,p?(0,r.tZ)(de,{}):null,(0,r.tZ)($,{})]}),(0,r.BX)(l.G,{css:pe.group,children:[(0,r.tZ)(Y,{}),(0,r.tZ)(T,{})]})]})}},10452:function(e,n,t){t.d(n,{Z:function(){return V}});var r=t(2272),i=t(74985),o=t(50959),a=t(25198),l=t(17755),c=t(85368),u=t(39541),s=t(96351),d=t(66539),f=t(61284),p=t(63837),h=t(206),v=t(82893),g=t.n(v),m=t(72006),y=t(3927),Z=t(47900),b=t(66164),w=t(25462),x=t(28229),k=t(43312),C=function(e){return(0,k.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:u.TV.foregroundDefault,fontFamily:"".concat(u.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium,marginBottom:u.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:u.TV.space8,borderBottom:"1px solid ".concat(u.TV.backgroundHigher),marginTop:u.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:u.TV.space24},h4:{fontSize:"1em",marginTop:u.TV.space16},h5:{fontSize:"0.875em"},h6:{color:u.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(u.TV.space16,")"),paddingRight:u.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:u.TV.space16,fontSize:e,fontFamily:"".concat(u.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:u.TV.space16,wordBreak:"normal",th:{fontWeight:u.TV.fontWeightMedium},"td, th":{padding:"".concat(u.TV.space8," ").concat(u.TV.space12),border:"1px solid ".concat(u.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:u.TV.backgroundDefault,borderTop:"1px solid ".concat(u.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:u.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:u.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:u.TV.space16},ol:{listStyle:"decimal",marginBottom:u.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(u.TV.fontFamilyCode," !important"),margin:"".concat(u.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:u.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:u.TV.space16,borderLeft:"".concat(u.TV.space2," solid ").concat(u.TV.backgroundHighest),paddingLeft:u.TV.space16},"blockquote > *":{color:"".concat(u.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(u.TV.fontFamilyCode),color:u.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:u.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(u.TV.backgroundHighest)},a:{color:u.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:u.TV.space8,padding:0},details:{marginBottom:u.TV.space16,display:"block",background:u.TV.backgroundHigher,borderRadius:u.TV.borderRadius4,padding:u.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:u.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(u.TV.backgroundHighest),marginBottom:u.TV.space16,paddingBottom:u.TV.space16},hr:{height:1,backgroundColor:u.TV.backgroundHigher,margin:"".concat(u.TV.space24," 0"),border:0}})},S=t(71253),T=t(42173),E=t(88167),R=t(34979),I=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function D(e){var n=e.content,t=(0,x.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(R.Z,(0,m.Z)({},e))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:C(t),allowedElements:I,remarkPlugins:[Z.Ic,b.Z,w.Z,S.Z],linkTarget:"_blank",rehypePlugins:[T.Z],components:{code:r,img:E.Z},children:n})})}var G=(0,o.memo)(D),P=t(99397),_=t(79637),B=t(54873),A=t(43119),U=t(71440),L=t(91015),N=t(50216);function X(){var e=(0,A.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var F={},O=(0,U.Ps)(X(),L.j7);var M=t(57370),W=t(13233),H=t(88541),z=function(e){var n=e.thread,t=e.message,v=(0,M.d)(),y=(0,W.Z)().showError,Z=(0,r.Z)(function(e){var n=(0,m.Z)({},F,e);return N.D(O,n)}({onError:function(e){y(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.deleteThreadMessage)||void 0===n?void 0:n.__typename)&&y(e.deleteThreadMessage.message)}}),2),b=Z[0],w=Z[1].loading,x=(0,H.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),k=!(!n||n.indexStart!==n.indexEnd),C={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},S="Outdated",T="The code has changed since the comment was left",E=o.useMemo((function(){return{diff:(0,h.Y)(t.timeCreated),full:(0,h.u)(t.timeCreated)}}),[t]);if(!t.user)return null;var R=v===t.user.id?[{label:"Delete",icon:(0,i.tZ)(B.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.rowWithGap(8)],children:[(0,i.tZ)(g(),{passHref:!0,href:"/@".concat(t.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:t.user.image,username:t.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:E.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:E.diff})})}),R.length>0&&x?(0,i.tZ)(_.Z,{items:R,onItemClick:function(e){"Delete"!==e.label||w||b({variables:{id:t.id}})},label:"More"}):null]}),k?(0,i.tZ)(d.u,{tooltip:T,children:(0,i.tZ)(s.D,{colorway:"negative",text:S})}):null]}),"StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(p.Z,{}),text:C.resolved}):null,"StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(P.Z,{}),text:C.unresolved}):null,"TextMessageContentType"===t.content.__typename&&(0,i.tZ)(G,{content:t.content.text})]})},V=(0,o.memo)(z)},206:function(e,n,t){t.d(n,{Y:function(){return o},u:function(){return a}});var r=t(22107),i=t(52224),o=function(e){var n=new Date(e),t=new Date;return(0,i.Z)(t,n)<60?"just now":(0,r.F)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},71603:function(e,n,t){t.d(n,{Z:function(){return me}});var r=t(2272),i=t(74985),o=t(50959),a=t(54629),l=t(19065),c=t(8622),u=t(48330),s=t(32104),d=t(72006),f=t(4405),p=t(70751),h=t(33814),v=t(66482),g=t(2041),m=t(85368),y=t(39541),Z=t(61284),b=t(45510),w=t(86302),x=t(13233),k=t(54631),C=t(99397),S=t(48306),T=t.n(S),E=t(69994),R=t(14806),I=t(37313),D=t(64804),G=R.q6.define();function P(e){var n=e.editorRef,t=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,u=e.indentSize,s=void 0===u?2:u,d=(0,D.Z)(),f=d.ref,p=d.view,h=o.useRef(a?"".concat(a,"\n"):""),v=c?"\n".concat(c):"",g=" ".repeat(s);return o.useEffect((function(){if(p&&p.state.doc.length){var e=h.current;h.current=a?"".concat(a,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[R.YW.addToHistory.of(!1),G.of(!0)]})}}),[p,a]),o.useEffect((function(){if(p){var e=R.yy.changeFilter.of((function(e){return!!e.annotation(G)||[-1,h.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),i=E.tk.updateListener.of((function(e){var n=e.state.doc.slice(h.current.length,e.state.doc.toString().length-v.length).toString();if(n!=="".concat(g).concat(r,"\n").concat(g)?t(n):t(""),e.docChanged&&e.state.doc.length===h.current.length+v.length){var i="\n"+g;p.dispatch({changes:{from:h.current.length-1,insert:"\n"+g},selection:{anchor:h.current.length+i.length-1},annotations:[G.of(!0)]})}})),o="".concat(h.current).concat(g).concat(r,"\n").concat(v);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:o},effects:R.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:R.YW.addToHistory.of(!1)}),n({setValue:function(e){if(e){var n=p.state.doc.toString().length;p.dispatch({changes:{from:h.current.length,to:n-v.length,insert:e},annotations:R.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[t,l,p,v,n,r,g]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(I.Z,{ref:f,language:l,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(T(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var _=t(625),B=t(63837);function A(e){var n,t,a,l,c=e.isOpen,s=e.meta,h=e.language,w=e.hasMetadata,C=e.onClose,S=(0,u.Z)(),T=(0,x.Z)().showConfirm,E=(0,r.Z)(o.useState(null),2),R=E[0],I=E[1],D=(0,r.Z)(o.useState(!0),2),G=D[0],P=D[1],A=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.initialization)||""),2),F=A[0],O=A[1],M=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.imports)||""),2),W=M[0],H=M[1],z=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.setup)||""),2),V=z[0],j=z[1],q=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.tearDown)||""),2),Y=q[0],K=q[1],$=(0,r.Z)((0,p.rU)({onError:function(e){return I(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTestMeta;r&&("UserError"===r.__typename?I(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.aA});return n?(0,f.Z)((0,d.Z)({},n),{meta:(0,d.Z)({},t)}):{__typename:"ReplUnitTestsWithMeta",meta:t,tests:[]}}}}),T("Setup saved!"),C()))}}),2),Q=$[0],J=$[1],ee=(0,r.Z)((0,p.AF)({onError:function(e){return I(e.message)},onCompleted:function(e){var n=e.updateReplUnitTestMeta;n&&("UserError"===n.__typename?I(n.message):"ReplUnitTestMeta"===n.__typename&&(T("Imports updated!"),C()))}}),2),ne=ee[0],te=ee[1],re=(0,k.x)(h),ie=W!==(null===s||void 0===s?void 0:s.imports)||F!==(null===s||void 0===s?void 0:s.initialization)||V!==(null===s||void 0===s?void 0:s.setup)||Y!==(null===s||void 0===s?void 0:s.tearDown),oe=J.loading||te.loading;return(0,i.tZ)(g.u,{isOpen:c,onRequestClose:C,maxWidth:872,children:(0,i.BX)(m.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(U,{unitTestsLib:re,onChange:H,language:h,initialValue:null!==(n=null===s||void 0===s?void 0:s.imports)&&void 0!==n?n:""}),(0,i.tZ)(m.G,{onClick:function(){return P(!G)},css:{cursor:"pointer"},children:(0,i.BX)(m.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(v.Z,{color:"var(--foreground-default)",size:20,rotate:G?270:0})]})}),G?null:(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(L,{unitTestsLib:re,onChange:O,language:h,initialValue:null!==(t=null===s||void 0===s?void 0:s.initialization)&&void 0!==t?t:""}),(0,i.tZ)(N,{unitTestsLib:re,onChange:j,language:h,initialValue:null!==(a=null===s||void 0===s?void 0:s.setup)&&void 0!==a?a:""}),(0,i.tZ)(X,{unitTestsLib:re,onChange:K,language:h,initialValue:null!==(l=null===s||void 0===s?void 0:s.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!0,children:R}),(0,i.BX)(m.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{disabled:oe,onClick:C,text:"Cancel"}),(0,i.tZ)(b.zx,{colorway:"primary",disabled:!ie||oe,onClick:function(){(0,_.j)(_.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?ne({variables:{input:{initialization:F,imports:W,setup:V,tearDown:Y,replId:S}}}):Q({variables:{input:{initialization:F,imports:W,setup:V,tearDown:Y,replId:S}}})},iconLeft:(0,i.tZ)(B.Z,{}),text:"".concat(oe?"Saving...":"Save")})]})]})]})})}function U(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&(u.setValue(l),u.focus())}),[u,l]);var d=n.defaultImports().trim();return(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(P,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add imports here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function L(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.classConstructorName();return(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,i.BX)(Z.xv,{multiline:!0,children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(P,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add initialization code here"),editorRef:s,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function N(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.setupIntro().trim();return(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(P,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add setup code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}function X(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.tearDownIntro().trim();return(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(P,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add teardown code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}var F=function(e){var n=e.language,t=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(h.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(A,{language:n,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===t||void 0===t?void 0:t.id),meta:t})]})},O=t(9970),M=t(51631),W=t(1809),H=t(1050),z=t(54873),V=t(80336),j=t(88477),q=t(39137),Y=t(87076),K=t(17309),$=t(12318),Q=t(57135),J=t(96583),ee=t(66016),ne=t(45285),te=t(1468),re=t(40842),ie="\x1b[0;31m",oe="\x1b[0m",ae=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function le(e){var n=e.name,t=e.failureMessage,r=e.stack;return"\u274c\t".concat(ie).concat(n).concat(oe,"\r").concat(t?"\nMessage: ".concat(t,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ce=function(e){var n=e.language,t=e.unitTests,a=e.onResult,l=e.trackingContext,c=e.getRunnerOutput,u=function(e){var n,t;null===(n=c())||void 0===n||null===(t=n.write)||void 0===t||t.call(n,e)},s=function(){var e,n;null===(e=c())||void 0===e||null===(n=e.clear)||void 0===n||n.call(e),u("\r\n")},f=(0,r.Z)(o.useState(!1),2),p=f[0],h=f[1],v=(0,ne.Z)(),g=v.container,y=v.packager,Z=v.fs,w=null,x=function(){h(!1),(0,re.WT)(Z),w&&(w.stopLogSpinner(),w=null)},C=function(){var e=(0,Q.Z)((function(){var e,r,i,o,c,f,v,m,b,C,S,T,E,R,I,D,G,P,B,A,U,L;return(0,J.__generator)(this,(function(N){switch(N.label){case 0:if(p)return[2];if(e=null,w={startLogSpinner:function(n){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=n,r=0;return e=setInterval((function(){r++;var e=ae[r%ae.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:u,clearLogs:s,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},!t)throw new Error("Run button should not be active if there are no tests");return h(!0),(0,_.j)(_.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),w.clearLogs(),[4,(r=(0,k.x)(n)).buildAndRunTests((0,d.Z)({container:g,fs:Z,packager:y,logger:w},t))];case 1:if(i=N.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ie).concat(i.error).concat(oe,"\r\n")),x(),t.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(o=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),c=[],f=t.tests.map((function(e){return r.getProperTestName(e.name)})),v=o.filter((function(e){return!f.includes(e)})),v.length)b=v[0],C=i.result.failures[0].stack,w.logMessage(le({name:b,failureMessage:"The following error occurred but was not related to a single unit test",stack:C})),(m=c).push.apply(m,(0,O.Z)(t.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{S=!0,T=!1,E=void 0;try{for(R=t.tests[Symbol.iterator]();!(S=(I=R.next()).done);S=!0)D=I.value,G=r.getProperTestName(D.name),P=o.indexOf(G),B=-1===P,c.push({testId:D.id,didPass:B}),B?w.logMessage((X=G,"\u2705\t".concat("\x1b[0;32m").concat(X).concat(oe,"\r\n\r\n"))):(A=i.result.failures[P].stack,w.logMessage(le({name:G,failureMessage:D.failureMessage,stack:A})))}catch(F){T=!0,E=F}finally{try{S||null==R.return||R.return()}finally{if(T)throw E}}}return a(c),U=t.tests.length,i.result.passed?(w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(U,"/").concat(U,"  ").concat(oe,"\r\n")),x(),[2]):(L=U-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(L,"/").concat(U," passed, see errors above  ").concat(oe)),x(),[2])}var X}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,Q.Z)((function(){return(0,J.__generator)(this,(function(e){try{C()}catch(n){te.c_.withScope((function(e){e.setTag("unittestsrun","true"),te.c_.captureException(n)})),w&&w.logMessage("\r\n".concat(ie," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(oe,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(t&&t.tests.length>0)?(0,i.tZ)(m.G,{children:(0,i.tZ)(b.zx,{disabled:p,colorway:"primary",iconLeft:(0,i.tZ)(ee.Z,{}),onClick:S,text:p?"Running tests...":"Run tests"})}):null},ue=t(1734);function se(e){var n=e.isOpen,t=e.test,a=e.language,l=e.onClose,s=e.trackingContext,h=(0,u.Z)(),v=(0,x.Z)().showConfirm,C=(0,r.Z)(o.useState(null),2),S=C[0],T=C[1],E=(0,r.Z)(o.useState(""),2),R=E[0],I=E[1],D=(0,r.Z)(o.useState(""),2),G=D[0],A=D[1],U=(0,r.Z)(o.useState(""),2),L=U[0],N=U[1],X=(0,r.Z)((0,p.Hd)({onError:function(e){return N(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTest;r&&("UserError"===r.__typename?N(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.Rb});return n?(0,f.Z)((0,d.Z)({},n),{tests:(0,O.Z)(n.tests).concat([t])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[t]}}}}),v("Test created!"),l()))}}),2),F=X[0],M=X[1],H=(0,r.Z)((0,p.kO)({onError:function(e){return N(e.message)},onCompleted:function(e){var n=e.updateReplUnitTest;n&&("UserError"===n.__typename?N(n.message):"ReplUnitTest"===n.__typename&&(v("Test updated!"),l()))}}),2),z=H[0],Y=H[1],Q=(0,$.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){Q.setValue((null===t||void 0===t?void 0:t.name)||"",{preventTouch:!0}),A((null===t||void 0===t?void 0:t.failureMessage)||""),I((null===t||void 0===t?void 0:t.code)||""),S&&S.setValue((null===t||void 0===t?void 0:t.code)||"")}),[t,S]),o.useEffect((function(){N("")}),[R,N]);var J=(0,k.x)(a),ee="".concat(J.getCommentChar()," Enter code here"),ne=!t||t.name!==Q.value||t.code!==R||t.failureMessage!==G,te=M.loading||Y.loading,re=J.testIntro(Q.value||""),ie=J.hasClosingBrackets()?J.getClosingBrackets():"",oe=(0,r.Z)(o.useState(!1),2),ae=oe[0],le=oe[1],ce=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),I(J.exampleTest.code)};return(0,i.tZ)(g.u,{isOpen:n,onRequestClose:l,maxWidth:872,children:(0,i.BX)(m.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(K.Z,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:Q.value,isValid:Q.isValid,error:Q.error,warning:Q.warning,touched:Q.touched,onChange:function(e){Q.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(m.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(ue.Z,{isOpen:ae,onClickOutside:function(){return le(!1)},placement:"bottom-end",children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(W.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[ee,J.exampleTest.code].includes(R.trim())?ce():le(!0)}}),(0,i.BX)(m.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(m.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(b.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(V.Z,{}),onClick:function(){le(!1)}}),(0,i.tZ)(b.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(B.Z,{}),onClick:function(){ce(),le(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(P,{skeleton:re,skeletonClosingBracket:ie,language:a,editorRef:T,onChange:I,placeholder:ee})})})]}),(0,i.BX)(m.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:G,onChange:function(e){return A(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:L}),(0,i.BX)(m.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(b.zx,{text:"".concat(te?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!ne||te,onClick:function(){Q.validate()||(R.length<=0?N("Test cannot be empty"):t?(z({variables:{input:{name:Q.value,code:R,failureMessage:G,testId:t.id}}}),(0,_.j)(_.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(F({variables:{input:{name:Q.value,code:R,failureMessage:G,replId:h}}}),(0,_.j)(_.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function de(e){var n=e.testId,t=e.onClose,a=(0,x.Z)().showConfirm,l=(0,u.Z)(),c=(0,r.Z)((0,p.IV)({onError:function(e){return k(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?k(o.message):"ReplUnitTest"===o.__typename&&n&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,t){var r=t.readField,i=e.tests.filter((function(e){return r("id",e)!==n}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,O.Z)(i)})}}}),(0,_.j)(_.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),t()))}}),2),s=c[0],h=c[1],v=(0,r.Z)(o.useState(""),2),w=v[0],k=v[1];return(0,i.tZ)(g.u,{isOpen:Boolean(n),onRequestClose:t,children:(0,i.BX)(m.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.xv,{multiline:!0,css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(m.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(b.zx,{text:"Cancel",disabled:h.loading,onClick:t}),(0,i.tZ)(b.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(z.Z,{}),disabled:h.loading,onClick:function(){if(!n)throw new Error("Expected a testId");s({variables:{testId:n}})}})]})]})]})})}var fe=function(e){var n=e.unitTests,t=e.isAddingTest,a=e.onClose,l=e.language,s=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,h=e.getRunnerOutput,v=(0,r.Z)(o.useState(t),2),g=v[0],w=v[1],x=(0,r.Z)(o.useState(null),2),k=x[0],C=x[1],S=(0,r.Z)(o.useState(null),2),E=S[0],R=S[1],I=(0,u.Z)(),D=(0,r.Z)((0,p.lQ)(),1)[0],G=(null===n||void 0===n?void 0:n.tests)||[];return(0,i.BX)(m.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(ce,{language:l,unitTests:n,onResult:function(e){D({variables:{input:{replId:I,results:e},replId:I}})},getRunnerOutput:h,trackingContext:f}),G.length>0?(0,i.tZ)(m.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:G.map((function(e){var n,t;return"ReplUnitTestLastRun"===(null===(n=e.lastRun)||void 0===n?void 0:n.__typename)&&(e.lastRun.status===M.$I.Passed?t="passed-test":e.lastRun.status===M.$I.Failed&&(t="failed-test")),(0,i.tZ)(m.G,{className:"test ".concat(t),css:{width:"100%"},children:(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(Z.xv,{children:e.name}),s?(0,i.BX)(m.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)(Y.h,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)(Y.h,{onClick:function(){R(e.id)},alt:"Delete",children:(0,i.tZ)(z.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(m.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.xv,{multiline:!0,css:[y.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s?(0,i.tZ)(b.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(se,{isOpen:g||Boolean(k)||t,test:k,language:l,onClose:function(){C(null),w(!1),a&&a()},trackingContext:f}),(0,i.tZ)(de,{testId:E,onClose:function(){return R(null)}}),(0,i.tZ)(T(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},pe=t(27522),he=t(48667);var ve=function(e){var n=e.onClick,t=e.hasTests,r=t?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(pe.Z,{filled:!1,border:!1,size:"small",Icon:he.Z,onClick:n,disabled:t,children:"Switch test type"}),(0,i.tZ)(T(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},ge=t(72196);var me=function(e){var n,t,d,f,p=e.onBack,h=e.getRunnerOutput,v=(0,u.Z)(),g=(0,r.Z)(o.useState(!1),2),b=g[0],w=g[1],x=(0,ge.Z)(),k=x.language,C=x.isLoading,S=(0,a.CH)({variables:{replId:v}}),T=null===(n=S.data)||void 0===n?void 0:n.repl;if(S.loading||C)return(0,i.tZ)(m.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!T||"Repl"!==T.__typename)return(0,i.tZ)(m.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!k)return(0,i.tZ)(m.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var E="default";(null===T||void 0===T?void 0:T.isProject)?E="project_repl":(null===T||void 0===T?void 0:T.isProjectFork)&&(E="submission_repl");var R=Boolean((null===(t=T.unitTests)||void 0===t?void 0:t.tests)&&T.unitTests.tests.length>0);return(null===T||void 0===T||null===(d=T.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(m.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(m.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(Y.h,{alt:"Add test",size:32,onClick:function(){return w(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(m.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(F,{language:k,meta:(null===(f=T.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(fe,{isAddingTest:b,unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,onClose:function(){return w(!1)},language:k,canWrite:!0,trackingContext:E,getRunnerOutput:h}),p?(0,i.tZ)(ve,{hasTests:R,onClick:p}):null]})]}):(0,i.BX)(m.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(m.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(fe,{unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,language:k,isAddingTest:!1,canWrite:!1,trackingContext:E,getRunnerOutput:h})})]})}},54631:function(e,n,t){t.d(n,{x:function(){return E},y:function(){return T}});var r=t(57135),i=t(9970),o=t(96583),a=t(625),l=t(1468),c=t(66091),u=function(){function e(n){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=n}var n=e.prototype;return n.indent=function(){this.currentIndent+=1},n.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},n.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},n.push=function(e){var n=e.split("\n"),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},n.newLine=function(){this.code+="\n"},n.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},n.toString=function(){return this.code},e}(),s=t(40842),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,s.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,s.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,s.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(d);r.push(d.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(d.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(d.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","java10"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,s.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,s.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r.Z)((function(e){var n,t,r,l,c,u,v,g,m,y,Z,b,w,x,k,C,S,T,E,R,I,D,G,P;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,l=e.logger,c=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return g=o.sent(),(m=g.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(v("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:h,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return y=o.sent(),(Z=y.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,n.exec("find",".","-type","f","-name","*.java","-print0")]);case 6:if(b=o.sent(),w=b.output,x=b.error)return k="Failed to fetch working directory java files",d.captureSetupError({tag:k,raw:x}),[2,{error:"".concat(k,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(u=n).exec.apply(u,["javac","-classpath",S,"-d","."].concat((0,i.Z)(C)))];case 7:return T=o.sent(),E=T.output,(R=T.error)?(I="Failed to compile test runner file",d.captureSetupError({tag:I,raw:R}),[2,{error:"".concat(I,"\r\n\r\n")+(null===E||void 0===E?void 0:E.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(v("Running your tests"),[4,n.exec("java","-classpath",S,(0,s.Og)(d.testRunnerName()))]);case 8:if(D=o.sent(),G=D.output,P=D.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===G||void 0===G?void 0:G.replace(/\n/g,"\n\r"))+"\r\n\r\n"+P}];if("string"!==typeof G)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(G.slice(G.indexOf(f)+f.length,G.lastIndexOf(p))),error:null}]}}))}))).apply(this,arguments)}var g=d,m=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(y);r.push(y.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),m(t.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.newLine()),m(t.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","python3"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,s.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,s.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var n,t,r,i,l,c,u,d,f,p,h,v,g;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",y.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:w,filename:"".concat(y.testRunnerName(),".py")})]);case 3:return f=o.sent(),(p=f.error)?("Failed to create test runner file",y.captureSetupError({tag:"Failed to create test runner file",raw:p}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,n.exec("python","-B",(0,s.Og)("".concat(y.testRunnerName(),".py")))]);case 5:if(h=o.sent(),v=h.output,g=h.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+g}];if("string"!==typeof v)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(v.slice(v.indexOf(Z)+Z.length,v.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var k={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return k.testIntroPreName()+e+k.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(k);r.push(k.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(k.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(k.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(k.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(k.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return C.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=k.buildSuite({tests:o,meta:a});return k.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","nodejs"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function C(){return(C=(0,r.Z)((function(e){var n,t,r,i,l,c,u,d,f,p,h,v,g,m,y,Z,b,w,x,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:l,filename:"".concat(k.testSuiteName(),".js")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",k.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,s.Og)("".concat(k.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,s.e3)({fs:t,code:JSON.stringify(h),filename:p})]);case 3:return v=o.sent(),(g=v.error)?("Failed to create config file",k.captureSetupError({tag:"Failed to create config file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),c=i.startLogSpinner("Running your tests"),m=(0,s.Og)("output.json"),[4,n.exec("jest","--json","--outputFile",m,"--config",(0,s.Og)(p),"--forceExit","--passWithNoTests")]);case 5:return y=o.sent(),Z=y.output,(b=y.error)&&!b.endsWith(f.toString())?((0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,t.readFile(m)]);case 6:return(w=o.sent()).error?("Error reading test results",k.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(C=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=C.testResults[0],(T=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:T}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:g,java10_beta:g,java:g,python3:y,python3_beta:y,python:y,nodejs:k,javascript:k,nodejs_beta:k};function T(e){return e in S}function E(e){if(!T(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},40842:function(e,n,t){t.d(n,{Og:function(){return s},WT:function(){return p},e3:function(){return d}});var r=t(57135),i=t(96583),o=t(1468),a=t(22011),l=t(12583),c=t(4561),u="_test_runner";function s(e){return u+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var n,t,r,o,l;return(0,i.__generator)(this,(function(i){return n=e.fs,t=e.code,r=e.filename,o=s(r),l=a.Z.from(t,"utf8"),[2,n.writeFile(o,l)]}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:return(n=r.sent()).error?[2]:[4,Promise.all(n.children.map((function(n){return n.filename.startsWith(u)?n.type===c.Tv.File?e.deleteFile(n.filename):e.deleteDir(n.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o.c_.withScope((function(e){e.setTag("unitTestLib","true"),o.c_.captureException(t)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},70751:function(e,n,t){t.d(n,{AF:function(){return w},Hd:function(){return k},IV:function(){return E},Rb:function(){return m},aA:function(){return g},kO:function(){return S},lQ:function(){return I},rU:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},g=(0,o.Ps)(l()),m=(0,o.Ps)(c()),y=(0,o.Ps)(u(),g);function Z(e){var n=(0,r.Z)({},v,e);return a.D(y,n)}var b=(0,o.Ps)(s(),g);function w(e){var n=(0,r.Z)({},v,e);return a.D(b,n)}var x=(0,o.Ps)(d(),m);function k(e){var n=(0,r.Z)({},v,e);return a.D(x,n)}var C=(0,o.Ps)(f(),m);function S(e){var n=(0,r.Z)({},v,e);return a.D(C,n)}var T=(0,o.Ps)(p());function E(e){var n=(0,r.Z)({},v,e);return a.D(T,n)}var R=(0,o.Ps)(h());function I(e){var n=(0,r.Z)({},v,e);return a.D(R,n)}},72196:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(68825),i=t(88688),o=t(45285),a=t(50959),l=t(54631);function c(){var e=(0,r.Z)(),n=(0,o.Z)().dotReplit,t=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(t){if((0,l.y)(t))return s(t),void p(!1);var e=!1,r=n.watch((function(n){var t,r;if(e||(e=!0,p(!1)),n.error)n.error===i.Yt.NotFound&&s(null);else{var o=null===(t=n.config.unitTest)||void 0===t||null===(r=t.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?s(o):s(null)}}));return function(){r()}}}),[t,n]),{language:u,isLoading:f}}},41677:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(72006),i=t(4405),o=t(2272),a=t(74985),l=t(88541),c=t(63064),u=t(77511),s=t(625),d=t(45510),f=t(2041),p=t(61284),h=t(85368),v=t(39541),g=t(46688),m=t(20811),y=t(82500),Z=t(70523),b=t(51631),w=t(62946),x=t(90171),k=t(50959),C=t(53435),S="resources_upgrade_modal";function T(e){var n=e.isOwnRepl,t=e.userSubscriptionType,r=(0,x.useRouter)(),i=(0,l.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),c=(0,o.Z)(k.useState(!0),2),s=c[0],d=c[1],f=(0,g.Z)("announcement","resources-upgrade-modal"),p=f.shouldDisplay,h=f.register,v=f.dismiss;return k.useEffect((function(){!(0,u.Vg)(r)&&n&&t!==b.HP.HackerPro&&i&&h()}),[i,n,h,r,t]),k.useEffect((function(){var e=setTimeout((function(){d(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),i?s||(0,u.Vg)(r)?null:n?t===b.HP.HackerPro?null:p?(0,a.tZ)(E,{dismissTour:v}):null:null:null}function E(e){var n=e.dismissTour,t=(0,o.Z)(k.useState(null),2),l=t[0],u=t[1],g=(0,Z.Z)(),b=g.dataAtom,x=b.cpu,T=b.ram,E=b.disk,R=k.useRef(!1),I=(0,c.Z)(),D=(0,C.f)({currentAtom:x.currentAtom,totalAtom:x.totalAtom}),G=D.cached,P=D.setCached,_=D.utilizationRatio,B=D.utilization,A=D.utilizationRef,U=(0,C.f)({currentAtom:T.currentRssAtom,totalAtom:T.totalAtom}),L=U.cached,N=U.setCached,X=U.utilizationRatio,F=U.utilization,O=U.utilizationRef,M=k.useCallback((function(e){u("cta"),P(B),N(F),(0,s.j)(s.U3.MODAL_VIEWED,{modalName:S,cause:e,unsolicited:!0})}),[B,F,P,N]);k.useEffect((function(){var e;if(!l&&!R.current)return _>.9?(R.current=!0,e=setTimeout((function(){R.current=!1,A.current>.9&&M("cpu")}),1e4)):X>.9&&(R.current=!0,e=setTimeout((function(){R.current=!1,O.current>.9&&M("ram")}),1e4)),function(){I.current||clearTimeout(e)}}),[_,R,l,I,F,M,A,X,O]);var W=(0,i.Z)((0,r.Z)({},g),{dataAtom:{cpu:(0,i.Z)((0,r.Z)({},x),{currentAtom:(0,w.cn)(G)}),ram:(0,i.Z)((0,r.Z)({},T),{currentRssAtom:(0,w.cn)(L)}),disk:E}});return(0,a.tZ)(f.u,{isOpen:null!==l,preventOutsideModalClickClose:!0,onRequestClose:function(){u(null),n()},maxWidth:"plans"===l?m.W:360,children:"plans"===l?(0,a.tZ)(m.Z,{context:S,uponPurchaseGoTo:"profile",initialTab:"plans"}):(0,a.BX)(h.G,{css:[v.l0.p(8),v.l0.colWithGap(24)],children:[(0,a.BX)(h.G,{css:[v.l0.colWithGap(16)],children:[(0,a.tZ)(p.xv,{variant:"subheadDefault",children:"Your Repl ran out of resources!"}),(0,a.tZ)(p.xv,{multiline:!0,children:"Upgrade to a plan to increase your Repl's resources so your programs can use more power."})]}),(0,a.tZ)(h.G,{css:[v.l0.colWithGap(12)],children:(0,a.tZ)(y.Z,{mini:!0,inactive:!1,resources:W})}),(0,a.tZ)(d.zx,{big:!0,text:"Upgrade to get more resources",colorway:"primary",onClick:function(){(0,s.j)(s.U3.UPGRADE_SELECTED,{source:S}),u("plans")}})]})})}},67183:function(e,n,t){t.d(n,{Q:function(){return o}});var r=t(74985),i=t(50959);function o(e){var n=e.uploadFiles,t=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:t,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},91350:function(e,n,t){t.d(n,{I5:function(){return h},sY:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f,d);function h(e){var n=(0,r.Z)({},s,e);return a.a(p,n)}},19660:function(e,n,t){t.d(n,{Z:function(){return ae}});var r=t(72006),i=t(4405),o=t(74985),a=t(50959),l=t(88254),c=t(91350),u=t(48330),s=t(48306),d=t.n(s),f=t(24743),p=t(19065),h=t(35301),v=t(625);function g(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(h.gC,{align:"center",spacing:4,children:[(0,o.BX)(h.gC,{align:"center",children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(p.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(p.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(h.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var m=a.createContext(!1),y=t(85368),Z=t(39541),b=t(94488),w=t(2272),x=t(1050),k=t(96864),C=t(32973),S=t(8907),T=t(24976),E=t(87076),R=(0,a.forwardRef)((function(e,n){return(0,o.tZ)(E.h,(0,r.Z)({disabled:e.disabled,ref:n,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),I=t(91102),D=t(13716),G=new Set(["draw.js"]);function P(e,n){var t=(0,b.f6)(),r=(0,D.R3)(),i=a.useCallback((function(e,t){var r,i;null===(r=n.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:t},"*")}),[n]);a.useEffect((function(){if(n.current&&t){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var t=l.value;n.current.onload=function(){e.readFile(t).then((function(e){e.error||i(t,e.content.toString())}))}},u=G[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}}),[e,i,n,t]),a.useEffect((function(){if(t&&r&&G.has(r))return e.watchTextFile(r,{onReady:function(e){var n=e.initialContent;return i(r,n)},onChange:function(e){var n=e.latestContent;return i(r,n)}})}),[e,r,i,t])}var _=function(e){var n=e.iframe,t=(0,u.Z)();return a.useEffect((function(){var e="https://".concat(t,".id.repl.co"),n=function(n){if(n.origin===e&&"DOWNLOAD"===n.data.action){var t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=n.data.url,t.download=n.data.filename,t.click(),document.body.removeChild(t)}};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(R,{alt:"Save image",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(T.Z,{})}),(0,o.tZ)(R,{alt:"Toggle Record",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(I.Z,{})})]})},B=t(70628),A=t(1734),U=t(39137),L=t(43312),N=(0,L.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function X(e){var n,t=e.canRefresh,r=e.refreshing,i=e.devToolsBadge,l=e.url,c=e.displayUrl,u=e.onToggleDevtools,s=a.useRef(null),d=(0,w.Z)(a.useState(!1),2),f=d[0],p=d[1];return n=t?r?"Refreshing":"Refresh":"Run the Repl to refresh",(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(0,o.tZ)(R,{disabled:!t,alt:n,onClick:e.onRefresh,css:r&&{animation:"".concat(N," infinite 0.5s")},children:(0,o.tZ)(k.Z,{})}),(0,o.tZ)(U.II,{dataCy:"ws-webview-url-bar-input",css:[Z.l0.px(4),Z.l0.py(2),Z.l0.flex.growAndShrink(1),Z.l0.fontSize(12)],value:null!==c&&void 0!==c?c:l,type:"text",onFocus:function(n){e.trackUrlSelect(),n.currentTarget.select()},readOnly:!0}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(A.Z,{showArrow:!0,maxWidth:320,isOpen:f,onClickOutside:function(){return p(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(R,{alt:"Custom domain",onClick:function(){return p(!f)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(S.Z,{onLink:function(){return p(!1)},onUnlink:function(){return p(!1)},replId:e.replId})]}):null,u?(0,o.tZ)(R,{alt:"Toggle developer tools",ref:s,onClick:u,css:{position:"relative"},suffix:!!i&&(0,o.tZ)("span",{css:{position:"absolute",color:Z.TV.accentNegativeStrongest,borderRadius:Z.TV.borderRadiusRound,padding:"".concat(Z.TV.space2," ").concat(Z.TV.space4),backgroundColor:Z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:i}),children:(0,o.tZ)(B.Z,{})}):null,(0,o.tZ)("a",{href:l,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(R,{alt:"Open in a new tab",children:(0,o.tZ)(C.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(_,{iframe:e.iframe}):null]})]})}var F=t(54733),O=t(20841),M=t(61284);function W(){return(0,o.BX)(y.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,o.BX)(y.G,{css:[Z.l0.align.center],children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(M.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],multiline:!0,variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)(M.xv,{css:[Z.l0.textAlign.center],multiline:!0,variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)(y.G,{css:[Z.l0.p(16)],children:(0,o.tZ)(M.xv,{multiline:!0,css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var H=t(88541),z=t(46688),V=t(23785),j=t(23455),q=t(45510),Y=t(57475),K=t(71002);function $(e){var n=e.onCompleted,t=e.startTimeInSeconds,r=(0,w.Z)(a.useState(t),2),i=r[0],l=r[1];a.useEffect((function(){var e=setInterval((function(){return l((function(n){return 0===n?(clearInterval(e),0):n-1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){i>0||n()}),[i]);var c=24*2.6;return(0,o.tZ)(y.G,{css:{width:24,height:24},children:(0,o.BX)(y.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:c,strokeDashoffset:c,strokeLinecap:"butt",strokeWidth:2,stroke:j.TV.accentPrimaryDefault,fill:"none"}],children:[(0,o.tZ)("svg",{width:"100%",height:"100%",className:d().dynamic([["23bd846669111030",[c]]]),children:(0,o.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(t,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:d().dynamic([["23bd846669111030",[c]]])})}),(0,o.tZ)(d(),{id:"23bd846669111030",dynamic:[c],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(c,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}")}),(0,o.tZ)(M.xv,{css:[Z.l0.position.absolute],variant:"small",children:i})]})})}function Q(e){var n=e.onCompleted,t=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:j.TV.accentPrimaryDimmest,borderColor:j.TV.accentPrimaryDimmer,color:j.TV.accentPrimaryStrongest}];return(0,o.BX)(y.G,{css:t,children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(M.xv,{variant:"small",multiline:!0,children:"When you're ready, you can deploy from the"}),(0,o.tZ)(q.zx,{iconLeft:(0,o.tZ)(Y.Z,{}),text:"Release",disabled:!0,small:!0}),(0,o.tZ)(M.xv,{variant:"small",multiline:!0,children:"menu!"})]}),(0,o.tZ)($,{startTimeInSeconds:3,onCompleted:n})]})}function J(e){var n,t=e.repl,r=e.onClick,i=(0,w.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,K.gg)().isDeployableRepl,s=(0,z.Z)("workspace","workspace-deployments-webview-banner"),d=s.shouldDisplay,f=s.register,p=s.dismiss;a.useEffect((function(){f()}),[f]);var h=t.hostingDeploymentPermissions.canDeploy&&u,g="HostingDeployment"===(null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)&&t.hostingDeployment.currentBuild;return h&&!g&&d?(0,o.tZ)(y.G,{children:l?(0,o.tZ)(Q,{onCompleted:function(){p()}}):(0,o.tZ)(V.U,{onClick:function(){(0,v.j)(v.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),p(),r()},onDismiss:function(){c(!0)},rounded:!1})}):null}var ee=t(5889),ne={container:(0,L.iv)(Z.l0.p(16),Z.l0.height("100%"),Z.l0.align.center),imageContainer:(0,L.iv)(Z.l0.height("100%"),Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.justify.center,Z.l0.width(300)),image:(0,L.iv)(Z.l0.width(200))};function te(){return(0,o.tZ)(y.G,{css:ne.container,children:(0,o.BX)(y.G,{css:ne.imageContainer,children:[(0,o.tZ)("div",{css:ne.image,children:(0,o.tZ)(ee.Z,{src:"/public/images/run_pointer.svg",alt:"A play button with a mouse pointer",height:"250px",width:"400px"})}),(0,o.tZ)(M.h4,{level:3,variant:"subheadDefault",children:"Run this Repl to see the hosted output."})]})})}var re=t(10841),ie=function(e,n){return e===re.A.OFFLINE||e===re.A.STOPPING||e===re.A.IDLE&&"html"!==n.mode},oe=function(e,n){var t=e.fs,s=e.session,d=e.runner,f=e.trackUrlSelect,p=e.openPane,h=e.isVisible,w=e.className,x=e.containerRef,k=(0,u.Z)(),C=(0,c.I5)({variables:{id:k}}).data,S="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,T=(0,a.useContext)(m),E=(0,F.S)().isCircuitBroken,R=(0,a.useRef)(null),I=(0,a.useState)(!1),D=I[0],G=I[1],_=(0,a.useState)(!1),B=_[0],A=_[1],U=(0,a.useState)(d.getRunState()),L=U[0],N=U[1],M=(0,a.useState)(0),z=M[0],V=M[1],j=(0,b.f6)();P(t,R);var q="html"===(null===S||void 0===S?void 0:S.lang.id)||"html_beta"===(null===S||void 0===S?void 0:S.lang.id),Y=(0,H.P5)({controlName:"flag-webview-show-protocol",logFlagToAnalytics:!1}),K=null;K=S?T?(0,o.tZ)(g,{}):E?(0,o.tZ)(W,{}):ie(L,d)?(0,o.tZ)(te,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:R,src:S.devUrl,onLoad:function(){return G(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},O.Z)):null,(0,a.useEffect)((function(){var e=function(e){var n;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(n=e.data)||void 0===n?void 0:n.type))switch(e.data.type){case"event":var t=e.data,o=t.event,a=t.payload;return void("error"===o?l.Tb(a):(0,v.j)(o,(0,i.Z)((0,r.Z)({},a),{replId:k,isHTML:q})));case"show-badge":return void V(e.data.count);case"ready":var c,u;if(e.data.wasShown)null===(c=R.current)||void 0===c||null===(u=c.contentWindow)||void 0===u||u.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}},n=d.onStateChanged(N);if(R.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e),n()}}),[k,q,R.current,s,d]);var $=function(){V(0),A(!0),t.flush().then((function(){R.current&&(R.current.src+="")})).finally((function(){A(!1)}))};if((0,a.useImperativeHandle)(n,(function(){return{refresh:$}})),!S)return null;var Q=Y?S.prodUrl:S.prodUrl.replace(/^(https?:)?\/\//,"");return(0,o.BX)(y.G,{className:w,css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:x,children:[(0,o.tZ)(X,{canEditDomain:S.currentUserPermissions.linkDomain,displayUrl:Q,url:S.prodUrl,trackUrlSelect:function(){f&&f(S.devUrl)},replId:k,refreshing:B,onRefresh:$,isKaboomDraw:j,canRefresh:!ie(L,d),iframe:R,isVisible:h,devToolsBadge:z,onToggleDevtools:function(){var e,n;V(0),null===(e=R.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),D?(0,o.tZ)(J,{repl:S,onClick:function(){return p({type:"deployments"})}}):null,K]})},ae=(0,a.forwardRef)(oe)},83505:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(e){var n=e.container,t=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===t.mode&&r.push(t.onOutput((function(n){n&&n.includes("exit status 1")&&(e=Date.now())}))),r.push(n.onPortOpened((function(n){var t=n.isVnc;if(n.isForwarded&&!t){var r=Date.now();void 0!==e&&r-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[n,i,t])}},95587:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(10841);function o(e){var n=e.runner,t=e.refreshWebView;(0,r.useEffect)((function(){if("html"===n.mode)return n.onStateChanged((function(e){e===i.A.RUNNING&&t()}))}),[n,t])}},54733:function(e,n,t){t.d(n,{S:function(){return d},e:function(){return s}});var r=t(2272),i=t(10841),o=t(45285),a=t(49146),l=t(50959),c=t(62946),u=(0,c.cn)(!1),s=function(){return(0,c.KO)(u)};function d(){var e=(0,o.Z)().runner,n=(0,r.Z)(s(),2),t=n[0],c=n[1];return l.useEffect((function(){if("shellrunner"===e.mode){var n,t=[],r=Date.now(),o=Array(6),l=0;return t.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),t.push(e.onStateChanged((function(e){if(n===i.A.RUNNING&&e===i.A.IDLE){var t=Date.now();o[l%6]=t;var u=o.at((l-5)%6);void 0!==u&&t-u<6e4&&null!=r&&r<u&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,n=e}else n=e}))),function(){c(!1),t.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:t}}},44058:function(e,n,t){var r=t(90171),i=t.n(r);n.Z=function(){return Boolean(i().query.embed||i().query.lite)}},54659:function(e,n,t){t.d(n,{cR:function(){return y},Sp:function(){return Z}});var r=t(2272),i=t(50959),o=t(45285),a=t(48330),l=t(72006),c=t(43119),u=t(71440),s=t(24635),d=t(50216);function f(){var e=(0,c.Z)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,c.Z)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,u.Ps)(f());var g=(0,u.Ps)(p());var m=t(48506);t(47031);function y(){var e,n=i.useContext(m.Z),t=(0,r.Z)(i.useState(null!==(e=null===n||void 0===n?void 0:n.replConfigIsExtension)&&void 0!==e&&e),2),a=t[0],l=t[1],c=(0,o.Z)().dotReplit;return i.useEffect((function(){return c.watch((function(e){var n,t,r,i=null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r;l(i)}))}),[c]),a}function Z(){var e=(0,a.Z)(),n=function(e){var n=(0,l.Z)({},h,e);return s.a(v,n)}({variables:{replId:e}}),t=n.data,c=n.loading,u=n.error,f=(0,r.Z)(function(e){var n=(0,l.Z)({},h,e);return d.D(g,n)}(),1)[0],p=function(){var e,n;return!c&&!u&&(!(!(null===t||void 0===t?void 0:t.repl)||"Repl"!==t.repl.__typename)&&(null!==(n=null===(e=t.repl.config)||void 0===e?void 0:e.isExtension)&&void 0!==n&&n))}(),m=(0,r.Z)(i.useState(!1),2),y=m[0],Z=m[1],b=(0,o.Z)().dotReplit;i.useEffect((function(){return b.watch((function(e){var n,t,r;Z(null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)}))}),[b]),i.useEffect((function(){c||u||y!==p&&f({variables:{replId:e,isExtension:y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:e,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:y}}}}})}),[c,u,e,p,y,f])}},77410:function(e,n,t){t.d(n,{AR:function(){return k},LF:function(){return x},R9:function(){return b},Ve:function(){return C},aq:function(){return E},gp:function(){return w},jF:function(){return R},q_:function(){return T}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n    background {\n      page\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n    isBlessed\n    isListed\n    enableInternalApi\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query ExtensionSystemUserContext {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query ExtensionReplHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation UninstallExtension($installationId: String!, $replId: String) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var m={},y=(0,o.Ps)(l()),Z=(0,o.Ps)(c()),b=(0,o.Ps)(u(),y,Z),w=(0,o.Ps)(s(),b),x=(0,o.Ps)(d());var k=(0,o.Ps)(f(),w);var C=(0,o.Ps)(p(),w);var S=(0,o.Ps)(h());function T(e){var n=(0,r.Z)({},m,e);return a.a(S,n)}var E=(0,o.Ps)(v(),w);var R=(0,o.Ps)(g(),w)},18952:function(e,n,t){t.d(n,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=t(35759),i=t(7909)},35759:function(e,n,t){t.d(n,{EO:function(){return D},I1:function(){return _},Kf:function(){return P},LM:function(){return I},WF:function(){return R},bN:function(){return T},dI:function(){return G},ot:function(){return E},zm:function(){return B}});var r=t(57135),i=t(81962),o=t(72006),a=t(4405),l=t(2272),c=t(96583),u=t(48330),s=t(625),d=t(40176),f=t(42445),p=t(19334),h=t.n(p),v=t(50959),g=t(91046),m=t(97836),y=t(85234),Z=t.n(y),b=t(44945),w=t(77410),x=t(98449),k=t(7909),C=t(99822),S=t(47031);function T(){var e=(0,C.E4)(k.We);return v.useCallback(function(){var n=(0,r.Z)((function(n){return(0,c.__generator)(this,(function(t){return e({installationId:n}),[2]}))}));return function(e){return n.apply(this,arguments)}}(),[e])}function E(){var e=L(),n=e.throwSystemError,t=e.throwExtensionError,l=(0,C.E4)(k.nk),u=(0,C.ZC)(k.Ol),s=(0,C.Ld)();return v.useCallback(function(){var e=(0,r.Z)((function(e){var r,d,f,p,v,y,Z,w,C,T,E,R,I,D,G,P,_,B,A,U;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=e.installationId,d=e.forceRefetch,f=void 0===d||d,[4,(0,x.Al)()];case 1:return!(p=c.sent())||p.error?(n({friendlyMessage:"Failed to load user context",error:p.error}),[2]):(v=p.result.userHasInternalApiEnabled,(y=s.get(k.Lq).find((function(e){return e.installationId===r})))?[4,(0,x.V9)(y.baseUrl)]:[3,3]);case 2:return Z=c.sent(),w=u.createLogger({extensionId:y.extensionId,installationId:y.installationId,local:!0}),Z.error?(C=(0,a.Z)((0,o.Z)({},y),{manifest:(0,g.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:w.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),u.info("Adding extension: ".concat(C.manifest.name),{extensionArgs:h()(C,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:C.isLocal,error:!0}),l(C),T="Failed to load extension manifest",(0,i.Z)(Z.error,b.jm)&&(T=Z.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n")),t({extensionId:y.extensionId,installationId:y.installationId,extensionError:{error:Z.error,friendlyMessage:T}}),[2]):(E=(0,m.MU)(Z.result,"experimental-api"),R=(0,a.Z)((0,o.Z)({},y),{manifest:Z.result,enableExperimentalApi:E,enableInternalApi:v,logger:w.createLogger({extensionName:Z.result.name}),isLocal:!0}),u.info("Adding extension: ".concat(R.manifest.name),{extensionArgs:h()(R,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),l(R),[3,5]);case 3:return[4,(0,x.mr)(r,f)];case 4:return(I=c.sent()).error?(n({friendlyMessage:"Something went wrong while downloading an extension",error:I.error}),[2]):(D=I.result)?(G=D.extension)?G.manifest?"ExtensionManifestError"===G.manifest.__typename?(t({extensionId:(0,S.T8)(G.id),installationId:(0,S.Ad)(D.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(G.manifest.message),error:new Error(G.manifest.message)}}),[2]):G.manifest&&"ExtensionManifest"===G.manifest.__typename?(P=(0,g.tr)(G.manifest),_=(0,m.MU)(P,"experimental-api"),B=(0,S.T8)(G.id),A=G.enableInternalApi,U={extensionId:B,installationId:r,manifest:P,baseUrl:(0,g.BY)(G.url),enableExperimentalApi:_,enableInternalApi:v||A,logger:u.createLogger({extensionId:B,installationId:r,extensionName:P.name,local:!1}),isLocal:!1},u.info("Adding extension: ".concat(U.manifest.name),{extensionArgs:h()(U,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),l(U),[2,D]):(t({extensionId:(0,S.T8)(G.id),installationId:(0,S.Ad)(D.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({extensionId:(0,S.T8)(G.id),installationId:(0,S.Ad)(D.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[l,t,n,s,u])}function R(){var e=E(),n=L().throwSystemError;return v.useCallback(function(){var t=(0,r.Z)((function(t){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=t.extensionId,i=t.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:return(l=c.sent()).error?(n({error:l.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):((0,s.j)(s.U3.EXTENSION_INSTALLED,{name:null===(o=l.result)||void 0===o||null===(a=o.extension)||void 0===a?void 0:a.name,extensionId:r}),[4,e({installationId:(0,S.Ad)(l.result.id)})]);case 2:return c.sent(),[2,l.result]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function I(){var e=T(),n=(0,C.Ld)(),t=L().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return i=r.installationId,o=r.replId,a=n.get(k._t),(l=a.find((function(e){return e.installationId===i})))?l.installationId&&l.extensionId?((0,s.j)(s.U3.EXTENSION_UNINSTALLED,{name:l.manifest.name,extensionId:l.extensionId}),[4,(0,x.Y4)({installationId:l.installationId,replId:o})]):(t({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(t({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return c.sent(),[4,e(l.installationId)];case 2:return c.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,n,t])}function D(){var e=T(),n=E();return v.useCallback(function(){var t=(0,r.Z)((function(t){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(t)];case 1:return r.sent(),[4,n({installationId:t,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function G(){var e=function(){var e=E(),n=(0,C.ZC)(k.Ol),t=L().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l,u,s,d,f,p;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=c.sent()).error)return t({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,l=void 0,c.label=2;case 2:c.trys.push([2,9,10,11]),u=i.result[Symbol.iterator](),c.label=3;case 3:if(o=(s=u.next()).done)return[3,8];d=s.value,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,e({installationId:(0,S.Ad)(d.id),forceRefetch:!0})];case 5:return c.sent(),[3,7];case 6:return f=c.sent(),n.error("Extension Loading error: ".concat(f.message),{extension:!0,errors:f.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=c.sent(),a=!0,l=p,[3,11];case 10:try{o||null==u.return||u.return()}finally{if(a)throw l}return[7];case 11:return[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,t,n])}(),n=(0,C.E4)(k.Ol),t=(0,C.E4)(k.zk),i=(0,l.Z)(v.useState(!1),2),o=i[0],a=i[1],u=(0,l.Z)(v.useState(null),2),s=u[0],f=u[1],p=(0,l.Z)(v.useState(null),2),h=p[0],g=p[1];return v.useEffect((function(){if(s&&h&&!o){var n=s.replId;a(!0),e(n)}}),[s,h,e,o]),v.useCallback((function(e){var r=e.replId,i=e.userId;if(!o){f({replId:r,userId:i});var a=(0,d.Z)({extension:!0,isInitialized:!0,replId:r,userId:i},{onLog:function(e){t(e)}});g(a),n(a)}}),[n,o,t])}function P(){var e=E(),n=(0,k.qr)(),t=(0,k.Mu)(),i=(0,C.E4)(k.ot);return v.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,l,u;return(0,c.__generator)(this,(function(c){return o=(0,g.BY)(r),(a=n.find((function(e){return e.baseUrl===o})))||(l=(0,S.T8)(Z()()),u=(0,S.Ad)(Z()()),i(a={extensionId:l,installationId:u,baseUrl:o})),t.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[n,t,i,e])}function _(){var e=(0,u.Z)(),n=(0,w.q_)({variables:{replId:e}}).data,t=(0,C.E4)(k.M1),i=(0,C.Ld)(),o=E();return v.useCallback((0,r.Z)((function(){var e;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return"Repl"!==(null===n||void 0===n?void 0:n.repl.__typename)?[2]:(e=t(n.repl.hostedUrl),[4,o({installationId:e.installationId,forceRefetch:!0})]);case 1:return r.sent(),[2,i.get(k._t).find((function(n){return n.installationId===e.installationId}))]}}))})),[n,t,o,i])}function B(){var e=(0,u.Z)(),n=(0,w.q_)({variables:{replId:e}}).data,t=(0,C.E4)(k.M1),r=(0,k.Mu)();return v.useMemo((function(){if("Repl"===(null===n||void 0===n?void 0:n.repl.__typename)){var e=t(n.repl.hostedUrl);return r.find((function(n){return e.installationId===n.installationId}))}}),[n,r,t])}var A=(0,f.cn)(null,(function(e,n,t){var r=e(k.Ol);n(k.wQ,t),r.error("Extension System Error: ".concat(t.error.message),{extensionSystem:!0,originalError:t.error.message,friendlyMessage:t.friendlyMessage})})),U=(0,f.cn)(null,(function(e,n,t){var r=e(k._t),i=e(k.Ol),o=r.find((function(e){return e.extensionId===t.extensionId}));if(i.error("Extension Error: ".concat(t.extensionError.friendlyMessage),{extension:!0,extensionId:t.extensionId,originalError:t.extensionError.error.message,friendlyMessage:t.extensionError.friendlyMessage}),!o)return n(k.nk,{extensionId:t.extensionId,installationId:t.installationId,manifest:(0,g.fF)({name:t.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:t.extensionId,extensionName:t.extensionId,installationId:t.installationId,local:void 0}),isLocal:null}),void n(k.f4,{extensionId:t.extensionId,extensionError:t.extensionError});n(k.f4,{extensionId:t.extensionId,extensionError:t.extensionError})}));function L(){return{throwSystemError:(0,C.E4)(A),throwExtensionError:(0,C.E4)(U)}}},98449:function(e,n,t){t.d(n,{Al:function(){return Z},V9:function(){return m},Wc:function(){return u},Y4:function(){return d},Zw:function(){return v},mr:function(){return p}});var r=t(57135),i=t(96583),o=t(68216),a=t(12379),l=t(91046),c=t(77410);function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((function(e){var n,t,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.extensionId,t=e.replId,a.l?[4,a.l.mutate({mutation:c.aq,variables:{extensionId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when installing extension: "+u.message),result:null}]:u.extension?u.extension.url?[2,{result:u,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var n,t,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.installationId,t=e.replId,a.l?[4,a.l.mutate({mutation:c.jF,variables:{installationId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when uninstalling extension: "+u.message),result:null}]:[2,{result:u,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=(0,r.Z)((function(e){var n,t,r,o=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],a.l?[4,a.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:n?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=i.sent(),"ExtensionInstallation"!==(r=t.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),h.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return a.l?[4,a.l.query({query:c.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=r.sent(),"ExtensionInstallationList"!==(t=n.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:t.installations,error:null}]}}))}))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r,a,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(n)];case 2:return[4,i.sent().text()];case 3:return t=i.sent(),r=o.ku(t),(a=(0,l.U4)(r)).error?[2,{error:a.error,result:null}]:[2,{result:a.manifest,error:null}];case 4:return"SyntaxError"===(c=i.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}}))}))).apply(this,arguments)}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return a.l?[4,a.l.query({query:c.LF,fetchPolicy:"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return e=t.sent(),(n=e.data.currentUser)&&"CurrentUser"===n.__typename?[2,{result:{userHasInternalApiEnabled:n.isAdmin||n.isStaff},error:null}]:[2,{error:new Error("Expected to find CurrentUser"),result:null}]}}))}))).apply(this,arguments)}},7909:function(e,n,t){t.d(n,{FX:function(){return T},Lq:function(){return g},M1:function(){return k},Mu:function(){return D},Ol:function(){return y},Sj:function(){return Z},WG:function(){return B},We:function(){return C},_t:function(){return v},c_:function(){return _},f4:function(){return S},jx:function(){return G},nk:function(){return w},ot:function(){return x},qr:function(){return U},r9:function(){return P},s6:function(){return A},wQ:function(){return m},zk:function(){return b}});var r=t(57135),i=t(72006),o=t(4405),a=t(9970),l=t(96583),c=t(42445),u=t(47031),s=t(92153),d=t(99822),f=t(85234),p=t.n(f),h=t(40176),v=(0,c.cn)([]);var g=(0,c.cn)([]),m=(0,c.cn)(null),y=(0,c.cn)((0,h.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw new Error("Logged before extension system was initialized.")}})),Z=(0,c.cn)([]),b=(0,c.cn)(null,(function(e,n,t){var r=e(Z),i=(0,s.ZP)(r,(function(e){e.push(t),e.length>1e3&&e.splice(0,e.length-1e3)}));n(Z,i)})),w=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(r){if(e(v).find((function(e){return e.extensionId===t.extensionId})))throw new Error("Extension already loaded");return n(v,(function(e){return(0,s.ZP)(e,(function(e){var n=function(e){var n,t=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest,a=e.enableExperimentalApi,l=e.enableInternalApi,u=e.logger;return{baseUrl:t,extensionId:r,installationId:i,manifest:o,isLocal:e.isLocal,stateAtom:(0,c.cn)({error:null,panes:[],scopes:new Set(null===(n=o.scopes)||void 0===n?void 0:n.map((function(e){return e.name}))),enableExperimentalApi:a,enableInternalApi:l,commands:new Map}),logger:u}}(t);e.push(n)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),x=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(r){if(e(g).find((function(e){return e.extensionId===t.extensionId||e.installationId===t.installationId||e.baseUrl===t.baseUrl})))throw new Error("Extension already loaded");return n(g,(function(e){return(0,s.ZP)(e,(function(e){e.push(t)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),k=(0,c.cn)(null,(function(e,n,t){var r=e(g).find((function(e){return e.baseUrl===t}));if(r)return r;var i={baseUrl:t,extensionId:(0,u.T8)(p()()),installationId:(0,u.Ad)(p()())};return n(g,(function(e){return(0,s.ZP)(e,(function(e){e.push(i)}))})),i})),C=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(e){return n(v,(function(e){return(0,s.ZP)(e,(function(e){var n=e.findIndex((function(e){return"extensionId"in t?e.extensionId===t.extensionId:e.installationId===t.installationId}));-1!==n&&e.splice(n,1)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),S=(0,c.cn)(null,(function(e,n,t){var r=e(v).find((function(e){return e.extensionId===t.extensionId}));if(!r)throw new Error("Extension not found");n(r.stateAtom,(function(e){return(0,s.ZP)(e,(function(e){e.error=t.extensionError}))}))})),T=(0,c.cn)(null,(function(e,n,t){var r=t.command.data.id;if(!r)throw new Error("A top level command must have an id");n(t.extensionStateAtom,(function(e){return(0,s.ZP)(e,(function(e){e.commands.set(r,t.command)}))}))})),E=(0,c.cn)((function(e){return e(v).flatMap((function(n){return(0,a.Z)(e(n.stateAtom).commands.values())}))})),R=(0,c.cn)((function(e){return e(v).map((function(e){var n;return null===(n=e.manifest.fileHandlers)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))})),I=(0,c.cn)((function(e){return e(v).map((function(e){var n;return null===(n=e.manifest.tools)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function D(){return(0,d.ZC)(v)}function G(e){return D().find((function(n){return n.installationId===e}))}function P(e){var n=G(e);return n&&e?n.stateAtom:null}function _(){return(0,d.ZC)(R)}function B(){return(0,d.ZC)(I)}function A(){return(0,d.ZC)(E)}function U(){return(0,d.ZC)(g)}},99822:function(e,n,t){t.d(n,{E4:function(){return d},Ld:function(){return u},Wv:function(){return f},ZC:function(){return s}});var r=t(2272),i=t(74985),o=t(42445),a=t(33523),l=t(50959),c=(0,l.createContext)(null);function u(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}function s(e){var n=u();return(0,a.Dv)(e,{store:n})}var d=function(e){var n=u();return(0,a.b9)(e,{store:n})};function f(e){var n=e.children,t=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:t},children:n})}},47031:function(e,n,t){t.d(n,{Ad:function(){return i},T8:function(){return r}});Symbol("extensionId"),Symbol("installationId"),Symbol("extensionCommandId");function r(e){return e}function i(e){return e}},40176:function(e,n,t){t.d(n,{Z:function(){return d},i:function(){return r}});var r,i=t(57389),o=t(72006),a=t(4405),l=t(49146),c=t(59245),u=t.n(c),s=t(49500);function d(e,n){var t=function(t){var a,c,d,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:r.debug},h=null!==(a=(c={},(0,i.Z)(c,r.debug,l.kg.debug),(0,i.Z)(c,r.warn,l.kg.warn),(0,i.Z)(c,r.info,l.kg.info),(0,i.Z)(c,r.error,l.kg.error),c)[p.logLevel])&&void 0!==a?a:l.kg.debug,v=null!==(d=(f={},(0,i.Z)(f,r.debug,s.debug),(0,i.Z)(f,r.warn,s.warn),(0,i.Z)(f,r.info,s.info),(0,i.Z)(f,r.error,s.error),f)[p.logLevel])&&void 0!==d?d:s.debug;v(t,p),h(t,u()((0,o.Z)({},p,e),["replId","logLevel"])),n.onLog((0,o.Z)({message:t},p,e))},c={context:e,info:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.info}))},warn:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.warn}))},error:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.error}))},createLogger:function(t){return d((0,o.Z)({},e,t),n)}};return c}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(r||(r={}))},10507:function(e,n,t){t.d(n,{aG:function(){return Z},tv:function(){return b},pu:function(){return y}});var r=t(57370),i=t(24746),o=t(2272),a=t(9970),l=t(50959),c=t(83344);var u=t(45285),s=t(4821),d=t(72006),f=t(43119),p=t(71440),h=t(24635);function v(){var e=(0,f.Z)(["\n  query WorkspaceActiveUsers($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return v=function(){return e},e}var g={},m=(0,p.Ps)(v());function y(e){var n=function(e){var n=(0,d.Z)({},g,e);return h.a(m,n)}({variables:{userIds:e.slice(0,s.I)},skip:0===e.length}).data;return n?new Map(n.usersByIds.map((function(e){return[e.id,e.image]}))):null}function Z(){var e=function(){var e=(0,u.Z)().presence,n=(0,i.Z)({presence:e}),t=(0,r.d)();return n.filter((function(e){return e.id!==t}))}(),n=y(e.map((function(e){return e.id}))),t=[],o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;t.push({id:d.id,username:d.username,color:d.color,image:null===n||void 0===n?void 0:n.get(d.id)})}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return t}function b(e){var n=(0,u.Z)().presence,t=Z(),r=function(e){var n=e.presence,t=e.path,r=n.getPathToUserIds().get(t)||[],i=(0,o.Z)(l.useState(r),2),u=i[0],s=i[1];return l.useEffect((function(){s(n.getPathToUserIds().get(t)||[]);var e=n.onActiveUsersChange((function(e){s((function(n){return n.filter((function(n){return e.some((function(e){return n===e.id}))}))}))})),r=n.onUserOpenedFile((function(e){var n=e.user,r=e.file;r&&(t===r||(0,c.yr)(t,r))?s((function(e){return e.includes(n.id)?e:(0,a.Z)(e).concat([n.id])})):s((function(e){return e.filter((function(e){return e!==n.id}))}))}));return function(){e(),r()}}),[n,t]),u}({path:e,presence:n});return t.filter((function(e){return r.includes(e.id)}))}},74121:function(e,n,t){t.d(n,{VD:function(){return u},d8:function(){return a},uN:function(){return c}});var r=t(2272),i=t(62946),o=t(50959),a=Symbol("CodeEditorView"),l=(0,i.cn)(null);function c(){return(0,i.KO)(l,a)[0]}function u(e){var n=(0,r.Z)((0,i.KO)(l,a),2),t=n[0],c=n[1];(0,o.useEffect)((function(){t!==e&&c(e)}),[e,t,c])}},31672:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(45285),i=t(50959),o=t(87978);function a(e){var n=(0,r.Z)().fs,t=(0,i.useCallback)((function(t,r){var i=t.code,a=t.insertAt,l=t.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==i.length)var u=n.watchTextFile(e,{onReady:function(e){var t=e.initialContent,o=e.writeChange,l=t.toString(),s="end"===a?l.length:a,d=i;c&&(0!==s&&s!==l.length&&-1===(s=l.indexOf("\n",s))&&(s=l.length),0!==s&&"\n"!==l[s-1]&&(d="\n"+d),"\n"!==l[s]&&(d+="\n")),o({from:s,insert:d},r),n.flush().finally((function(){u()}))}})}),[e,n]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:t}},20125:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(57135),i=t(9970),o=t(96583),a=t(50959),l=t(83293),c=t(625),u=t(12583),s=t(4561),d=t(13716),f=t(45285),p=t(13424),h=t(87978),v=t(49514),g=t(84524);function m(e){var n=e.moveOrDeleteFile,t=(0,f.Z)().fs,m=(0,v.K)(),y=(0,a.useRef)(new Map),Z=(0,d.ex)(),b=(0,a.useState)(!1),w=b[0],x=b[1],k=(0,a.useState)(!1),C=k[0],S=k[1],T=(0,a.useState)([]),E=T[0],R=T[1],I=(0,g.k)(),D=(0,p.uV)(),G=E.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),P=(0,a.useState)(),_=P[0],B=P[1],A=(0,d.Gg)();(0,a.useEffect)((function(){if(Z&&!y.current.has(Z)&&Z!==u.rq){var e=function(e){var t=e.node.path;A(e.eventType===s.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),n&&n(e),y.current.delete(Z),R((function(e){return e.filter((function(e){return e.path!==Z}))}))};(0,h.Mb)(Z)?t.watchTextFile(Z,{onMoveOrDelete:e,onError:function(e,n){e.code||(t.flush(),t.persist({skipDebounce:!0}),D({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){R((function(t){return(0,i.Z)(t.filter((function(e){return e.path!==Z}))||[]).concat([{path:Z,prompt:n,cb:e}])})),m("user:ot:diverged",{path:Z,divergence:n}),x(!0),_||B(Z)}}):t.watchFile(Z,{onChange:function(){},onMoveOrDelete:e}),y.current.set(Z,!0)}}),[Z,t,D,n,_,m,A]);var U,L,N=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),S(!0),[4,Promise.all(E.map((function(n){return R((function(e){var t=e.filter((function(e){return e.path!==n.path}));return 0===t.length?x(!1):B(t[0].path),t})),n.cb(e)})))];case 1:return n.sent(),S(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),X=_?E.find((function(e){return e.path===_})):null,F=null===X||void 0===X?void 0:X.prompt,O=_,M=(0,l.J)({left:{code:null!==(U=null===F||void 0===F?void 0:F.localContent)&&void 0!==U?U:"",filePath:O},right:{code:null!==(L=null===F||void 0===F?void 0:F.remoteContent)&&void 0!==L?L:"",filePath:O}}),W=M.left,H=M.right;return{isConverging:C,didContentsDiverge:w,showMoreDetail:I,failedFiles:E,failedFilesOptions:G,selectedFile:_,setSelectedFile:B,reviewingPrompt:F,onChoice:N,local:W,remote:H}}},79410:function(e,n,t){t.d(n,{F:function(){return ve}});var r,i,o,a=t(57135),l=t(72006),c=t(4405),u=t(2272),s=t(96583),d=t(71813),f=t(13233),p=t(48330),h=t(75885),v=t(77502),g=t(45285);!function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));r.NONE,i.None;var m="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function y(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}var Z=function(e,n){return y('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(n.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")},b=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(n=e.remote)&&void 0!==n?n:"";return y(t?"git fetch ".concat(r," --progress --deepen=10"):"git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},w=function(e){return["git","remote","get-url","origin"]},x=function(e,n){return n.includes("No such remote")||n.startsWith("fatal")?(0,c.Z)((0,l.Z)({},e),{remote:""}):(0,c.Z)((0,l.Z)({},e),{remote:n.trim()})},k=function(e,n){return e.remote?y("git remote remove origin; git remote add origin ".concat(n)):y("git remote add origin ".concat(n))},C=function(e){var n;return y("git remote show ".concat(null!==(n=e.remote)&&void 0!==n?n:""," | grep 'HEAD branch'"))},S=function(e,n){var t=(0,u.Z)(n.split(":"),2),r=(t[0],t[1].trim());return(0,c.Z)((0,l.Z)({},e),{defaultBranch:r})},T=function(e){return y("git checkout -f ".concat(e.defaultBranch))},E=function(e){return y((n="git reset $(".concat(m,") --"),"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(n)));var n},R=t(69834),I=t(50959),D=t(10702),G=t(33859),P=t.n(G),_=t(87861),B=t(20593),A=t(43119),U=t(71440),L=t(3481),N=t(24635);function X(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function F(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}var O={},M=(0,U.Ps)(X(),L.C,L.D);var W=(0,U.Ps)(F(),L.C,L.D);var H=t(5993),z="Couldn't fetch the template .replit. Please try again.",V=function(){var e=(0,f.Z)().showError,n=function(e){var n=(0,l.Z)({},O,e);return N.a(W,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,t=function(e){var n=(0,l.Z)({},O,e);return N.a(M,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,r=(0,H.S)(),i=I.useCallback(function(){var i=(0,a.Z)((function(i){var o,a,l,c,u,d,f,p,h,v,g,m;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return o=i.replId,a=i.replUrl,o?[4,n({replId:o})]:[3,2];case 1:return l=s.sent(),[3,5];case 2:return a?[4,t({rootOriginReplUrl:a})]:[3,4];case 3:return l=s.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=l.data,u=l.error,!c||u)return e(z),[2,null];if(d=c.repl,f=c.currentUser,"Repl"!==(null===d||void 0===d?void 0:d.__typename)||"CurrentUser"!==(null===f||void 0===f?void 0:f.__typename))return e(z),[2,null];(p=(0,_.ZP)({onUnrecoverableError:function(){e(z)}})).connect({context:{repl:d,currentUser:f,asViewer:!0},getMinimumRetryDelayMs:r}),h=(0,B.Z)({container:p}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,h.readFile(D.l)];case 7:return"content"in(g=s.sent())&&(v=g.content),[3,9];case 8:return s.sent(),e(z),p.destroy(),[2,null];case 9:if(p.destroy(),!v)return e(z),[2,null];try{m=P().parse(v.toString())}catch(y){return e(z),[2,null]}return[2,m]}}))}));return function(e){return i.apply(this,arguments)}}(),[n,t,e,r]);return i},j=t(9125);function q(){var e=(0,A.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return q=function(){return e},e}var Y={},K=(0,U.Ps)(q());var $=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},Q=new Map([["hintsList","hints"]]);function J(e){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)((function(e){var n,t,r,i,o,c,d,f,p,h,v,g,m,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function(){var e,t,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof r.env?r.env:null)&&0!==Object.keys(e).length?(t="object"===typeof i.env?i.env:null,o=t?(0,l.Z)({},e,t):e,[4,n.updateDotReplit([$("env",o)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)((function(){var e,a,l,c;return(0,s.__generator)(this,(function(u){switch(u.label){case 0:return(null===(e=i.nix)||void 0===e?void 0:e.channel)?[2]:(null===r||void 0===r||null===(a=r.nix)||void 0===a?void 0:a.channel)?[3,2]:[4,t.getLatestStableChannel()];case 1:return(c=u.sent()).channel?(l=c.channel,[3,3]):[2];case 2:l=r.nix.channel,u.label=3;case 3:return[4,n.updateDotReplit([$("nix/channel",l)])];case 4:return u.sent().error||o.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(l.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function C(e,n){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function(e,t){var a,l,c,u,d,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return a=i[e],l=Boolean(a),Array.isArray(a)?l=a.length>0:a&&"object"===typeof a&&(l=Object.keys(a).length>0),u=null!==(c=Q.get(e))&&void 0!==c?c:e,l||!r[u]?[2]:(d=$(u,r[u]),[4,n.updateDotReplit([d])]);case 1:return s.sent().error||!t||(f="A ".concat(t," was not detected in your imported .replit file so a recommended one was automatically added."),o.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,s.__generator)(this,(function(a){switch(a.label){case 0:n=e.dotReplit,t=e.nixService,r=e.templateConfig,i=e.config,o=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config"},d=[],f=!0,p=!1,h=void 0;try{for(v=Object.entries(c)[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)m=(0,u.Z)(g.value,2),y=m[0],null!==(Z=m[1])&&("function"===typeof Z?d.push(Z()):d.push(C(y,Z)))}catch(l){p=!0,h=l}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[4,Promise.all(d)];case 1:return a.sent(),[2,o]}}))})),ee.apply(this,arguments)}function ne(){var e=(0,g.Z)(),n=e.dotReplit,t=e.nixService,r=(0,p.Z)(),i=(0,u.Z)(function(e){var n=(0,l.Z)({},Y,e);return j.t(K,n)}(),1)[0],o=V(),c=(0,f.Z)().showWarning;return(0,I.useCallback)((0,a.Z)((function(){var e,a,l,u,d,f,p,h,v,g,m;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,n.getConfig()];case 1:return(e=s.sent().config)?[4,i({variables:{replId:r}})]:[2];case 2:return a=s.sent().data,(null===(l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null)||void 0===l?void 0:l.rootOriginReplUrl)?[4,o({replUrl:l.rootOriginReplUrl})]:[2];case 3:return(u=s.sent())?[4,J({nixService:t,dotReplit:n,config:e,templateConfig:u})]:[2];case 4:d=s.sent(),f=!0,p=!1,h=void 0;try{for(v=d[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)m=g.value,c(m,1e3)}catch(y){p=!0,h=y}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[2]}}))})),[r,c,n,t,i,o])}var te=t(29061),re=t(26201),ie=t(75665),oe=t(12583),ae=t(4561),le=t(50216);function ce(){var e=(0,A.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=(0,A.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=(0,A.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return se=function(){return e},e}var de={},fe=(0,U.Ps)(ce());var pe=(0,U.Ps)(ue());se();var he=t(91620).lW;function ve(e){var n=e.insertConfigPlugin,t=e.setConfigScreenLockIsOpen,o=e.openFile,m=(0,p.Z)(),y=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return le.D(pe,n)}(),2),G=y[0],P=y[1],_=(0,g.Z)(),B=_.container,A=_.fs,U=_.runner,L=_.dotReplit,N=(0,v.Z)(B),X=(0,f.Z)(),F=X.showError,O=X.showConfirm,M=ne();(0,I.useEffect)((function(){P.error&&F("Failed to finish cloning Repl - "+P.error)}),[P.error]),(0,I.useEffect)((function(){P.data&&O("Finished cloning Repl")}),[P.data]),(0,I.useEffect)((function(){H()}),[]);var W=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return j.t(fe,n)}({variables:{replId:m},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,a.Z)((function(e){var n,t,r,i,o;return(0,s.__generator)(this,(function(a){return n=e.repl,t=e.currentUser,"Repl"===n.__typename&&t&&"CurrentUser"===t.__typename&&n.config.gitRemoteUrl&&n.config.doClone?(me({remote:null!==(i=n.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=t.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:t.username}),[2]):[2]}))}));return function(n){return e.apply(this,arguments)}}()}),1),H=W[0],z={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},V=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,N({args:Z(z,null!==e&&void 0!==e?e:"")})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,N({args:k(z,e)})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((function(){var e,n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,N({args:w(z)})];case 1:return e=t.sent(),x?(n=x(z,null===e.error?e.output:""),[2,n.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.remote,t=e.remoteToken,[4,N({args:C((0,c.Z)((0,l.Z)({},z),{remote:n,remoteToken:t}))})];case 1:return r=o.sent(),S?(i=S(z,null===r.error?r.output:"HEAD branch: main"),[2,i.defaultBranch]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,N({args:T((0,c.Z)((0,l.Z)({},z),{defaultBranch:e}))})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((function(e){var n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n=e.remote,t=e.remoteToken,[4,J()];case 1:return r.sent(),[4,Y()];case 2:return r.sent(),[4,ee({deepen:!0,remote:n,remoteToken:t})];case 3:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,N({args:E(z)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.deepen,t=void 0!==n&&n,r=e.remote,i=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,N({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,N({args:b((0,c.Z)((0,l.Z)({},z),{remote:r,remoteToken:i}),t)})]}}))}));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((function(){var e,n,t,r,i,o,a;return(0,s.__generator)(this,(function(l){switch(l.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(r=l.sent()).error?[2]:[4,L.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(n=e.gitHubImport)||void 0===n?void 0:n.requiredFiles)?(o=i.config.gitHubImport.requiredFiles,a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(n){return null!=e.filename.match(n)}))})).map((function(e){return e.type===ae.Tv.Directory?A.deleteDir(e.filename):A.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(t=i.config)||void 0===t?void 0:t.entrypoint)?[4,A.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((function(e,n,t){var r;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,V(t)];case 1:return i.sent(),[4,q(e)];case 2:return i.sent(),[4,Y()];case 3:return i.sent(),[4,ee({deepen:!1,remote:e,remoteToken:n})];case 4:return i.sent(),[4,K({remote:e,remoteToken:n})];case 5:return r=i.sent(),[4,$(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,Q({remote:e,remoteToken:n})];case 7:return i.sent(),"html"!==U.mode?[3,10]:[4,(0,te.r)(B,oe.Ql)];case 8:return i.sent(),[4,U.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((function(){var e,n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(e=r.sent()).error||(n=e.children.map((function(e){return e.filename})),(t=(0,R.T)(n,"nix"))&&o({path:t})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((function(e,n){var t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,re.J9)({repoNameWithOwner:e,accessToken:n})];case 1:return"error"in(t=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=t.some((function(e){return e.path===D.l})),i=t.some((function(e){return e.path===d.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(n,t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((function(e,n){var t,r,i,o,a,l,c,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,(0,re.LK)({repoNameWithOwner:e,filePath:d.E,accessToken:n})];case 1:return"error"in(t=s.sent())?[2,{showConfigPanel:!0}]:(r=he.from(t.content,"base64").toString(),(i=(0,d.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(l=a.command+" "+a.options.join(" "),[4,L.updateDotReplit([(0,ie.KQ)(l),(0,ie.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return c=s.sent(),u=i.web&&!i.worker||!i.web&&i.worker,c.error||!u?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(n,t){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((function(e){var r,i,o,a,l,c,u,d,f,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return r=e.remote,i=e.accessToken,o=e.username,t(!0),[4,ce()];case 1:return s.sent(),[4,ue(r,i,o)];case 2:return s.sent(),[4,M()];case 3:return s.sent(),[4,G({variables:{input:{id:m,doClone:!1}}})];case 4:return s.sent(),[4,se()];case 5:return s.sent(),a=(0,h.J)(r),l=!1,a?(c=a.username,u=a.repository,[4,ve("".concat(c,"/").concat(u),i)]):[3,9];case 6:return d=s.sent(),f=d.hasDotReplit,!d.hasProcfile||f?[3,8]:[4,ge("".concat(c,"/").concat(u),i)];case 7:return p=s.sent(),l=!p.showConfigPanel,[3,9];case 8:l=f,s.label=9;case 9:return t(!1),"html"===U.mode?[2]:(l||n(),[2])}}))}));return function(n){return e.apply(this,arguments)}}()}},36662:function(e,n,t){t.d(n,{T:function(){return d}});var r=t(48330),i=t(72006),o=t(43119),a=t(71440),l=t(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}({variables:{replId:(0,r.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;if(!t)return!1;var o=t.owner;return!!o&&(t.isProjectFork&&!t.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},85682:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(50959),i=t(89479),o=t(45285),a=t(4561),l=t(87861);function c(){var e=(0,o.Z)().fs,n=(0,r.useState)(!1),t=n[0],c=n[1],u=(0,i.Z)(),s=(0,r.useState)(!1),d=s[0],f=s[1];return(0,r.useEffect)((function(){u===l.em.CONNECTED&&f(!0)}),[u]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:t,isOffline:u!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},68243:function(e,n,t){t.d(n,{O:function(){return c}});var r=t(57135),i=t(96583),o=t(88541),a=t(12404),l=t(38567);function c(){var e,n,t=(0,o.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),c=(0,l.Z)(function(){var e=(0,r.Z)((function(e){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t?[4,e.getRepositoryState()]:[2,{status:null,error:null}];case 1:return(n=i.sent()).error?[2,n]:n.type!==a.y5.NORMAL?[2,{status:null,error:null}]:[4,e.status()];case 2:return(r=i.sent()).error?[2,r]:[2,{status:r,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[t]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null===(n=c.status)||void 0===n?void 0:n.changes):null}},61253:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(74985),i=t(50959),o=t(45285),a=t(13233),l=t(76735),c=t(85368),u=t(61284),s=t(39541),d=t(82568),f=t(49146),p=(0,d.X)({noticeContainer:[s.l0.rowWithGap(8),s.l0.align.center],noticeText:[s.l0.colWithGap(0)]}),h=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,8e3,8008,8080,8081,8888,9e3,1e4,25565,25577]);function v(){var e=(0,o.Z)().container,n=(0,a.Z)().showNotice;(0,i.useEffect)((function(){return e.onPortOpened((function(e){var t=e.port,i=e.address;if(!e.isForwarded){var o=h.has(t);if(f.kg.info("Failed to forward opened port",{port:t,address:i,isCommonPort:o}),o){var a="Port ".concat(t," opened on host ").concat(i,".");n((0,r.BX)(c.G,{css:p.noticeContainer,children:[(0,r.tZ)(l.Z,{}),(0,r.BX)(c.G,{css:p.noticeText,children:[(0,r.tZ)(u.xv,{children:a}),(0,r.tZ)(u.xv,{variant:"small",children:"Use the host 0.0.0.0 to open the port to web traffic."})]})]}),1e4)}}}))}),[n,e])}},29552:function(e,n,t){t.d(n,{V:function(){return a},Z:function(){return l}});var r=t(50959),i=t(45285),o=t(4561),a=".tutorial";function l(){var e=(0,i.Z)().fs,n=(0,r.useState)({isLoading:!0,isTutorial:!1}),t=n[0],l=n[1];return(0,r.useEffect)((function(){e.watchDir(".",{onChange:function(e){l({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===a}))})},onMoveOrDelete:function(){l({isLoading:!1,isTutorial:!1})},onError:function(){l({isLoading:!1,isTutorial:!1})}})}),[e]),t}},37056:function(e,n,t){t.d(n,{ZP:function(){return E},Ln:function(){return T}});var r=t(57135),i=t(96583),o=t(50959),a=t(62946),l=t(45285),c=t(88254),u=t(48330),s=t(68051),d=t(87861),f=t(43694),p=t(18548),h=t(20593),v=t(72006),g=t(43119),m=t(71440),y=t(3481),Z=t(24635);function b(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}var w={},x=(0,m.Ps)(b(),y.D,y.C);var k=t(5993),C=t(49500),S=(0,a.cn)(!1);function T(){return(0,a.Dv)(S)}function E(){var e,n,t=(0,u.Z)(),g=(0,l.Z)().fs,m=function(e){var n=(0,v.Z)({},w,e);return Z.a(x,n)}({variables:{id:t}}).data,y=(0,a.b9)(S);o.useEffect((function(){return function(){y(!1)}}),[y]);var b="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:null,T="CurrentUser"===(null===m||void 0===m||null===(e=m.currentUser)||void 0===e?void 0:e.__typename)?m.currentUser:null,E="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)&&m.repl.isModelSolutionFork,R=E?b&&(null===(n=b.origin)||void 0===n?void 0:n.origin):b&&b.origin||null,I=(0,f.b)("Repl"===(null===R||void 0===R?void 0:R.__typename)?{repl:R,currentUser:T||void 0}:null),D=(0,k.S)();o.useEffect((function(){b&&T&&b.isProject&&g.stat(".lesson").then((function(e){e.exists||g.createDir(".lesson")}))}),[g,T,b]),o.useEffect((function(){if(b&&(b.isProjectFork||E)&&R&&I){var e=(0,d.ZP)({onUnrecoverableError:function(e){C.error(e),c.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",R.id),c.Tb(e)}))}}),n=(0,h.Z)({container:e});e.connect({context:I,getMinimumRetryDelayMs:D,fetchConnectionMetadata:function(){return(0,s.Z)({url:"/data/repls/".concat(b.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var o=(0,r.Z)((function(r){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r!==p.e.CONNECTED)return[3,8];t(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,g.copyDirFromRemote(".lesson",".lesson",n)];case 2:return(o=i.sent()).error?(c.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",R.id),c.Tb(new Error("Error copying lesson: ".concat(o.error)))})),[3,5]):[3,3];case 3:return[4,g.stat(".lesson/instructions.md")];case 4:i.sent().exists&&y(!0),i.label=5;case 5:return[3,8];case 6:return a=i.sent(),c.$e((function(e){e.setTag("curriculum-authoring",!0),c.Tb(a)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return o.apply(this,arguments)}}());return function(){return e.destroy()}}}),[g,I,b,R,E,y])}},10578:function(e,n,t){t.d(n,{Z:function(){return l},f:function(){return a}});var r=t(50959),i=t(62946),o=t(94716),a=(0,i.cn)({current:null});function l(){var e=(0,o.Z)((0,i.Dv)(a));return(0,r.useCallback)((function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.current)||void 0===t||t.refresh()}),[e])}},70523:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(57135),i=t(2272),o=t(96583),a=t(62946),l=t(49146),c=t(77502),u=t(45285),s=t(10206),d=t.n(s),f=t(50959),p=t(94716),h=t(18171),v="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.soft_limit_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes &&grep '^\\(total_rss\\|total_cache\\) ' /sys/fs/cgroup/memory/memory.stat",g="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes",m=1073741824;function y(){var e=(0,h.Z)((function(){return(0,a.cn)({wallTimeNanos:d().BigInt(0),cpuTimeNanos:d().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,numVCpu:0})}),[]),n=(0,h.Z)((function(){return{cpu:{currentAtom:(0,a.cn)((function(n){return Z(n(e).cpuUtilPercent)})),totalAtom:(0,a.cn)((function(){return 100})),cpuCountAtom:(0,a.cn)((function(n){return n(e).numVCpu}))},ram:{currentCacheAtom:(0,a.cn)((function(n){return Z(b(n(e).memoryUsageCacheBytes))})),currentRssAtom:(0,a.cn)((function(n){return Z(b(n(e).memoryUsageRssBytes))})),totalAtom:(0,a.cn)((function(n){return b(n(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,a.cn)((function(n){return b(n(e).storageUsedBytes)})),totalAtom:(0,a.cn)((function(n){return b(n(e).storageTotalBytes)})),scratchCurrentAtom:(0,a.cn)((function(n){return b(n(e).scratchUsedBytes)})),scratchTotalAtom:(0,a.cn)((function(n){return b(n(e).scratchTotalBytes)}))}}}),[e]),t=(0,a.b9)(e),s=(0,i.Z)(f.useState(!0),2),y=s[0],w=s[1];return function(e){var n=(0,u.Z)().container,t=(0,c.Z)(n),i=(0,p.Z)(e);f.useEffect((function(){var e=!1,n=null;function a(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(){var r,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,t({args:["bash","-c",v]})];case 1:return c=o.sent(),e?[2]:null!==c.error?(l.kg.error("Error running resource tracking command",{errorMessage:c.error}),[2]):[4,t({args:["bash","-c",g]})];case 2:return u=o.sent(),e?[2]:null===u.error||(null===(r=u.output)||void 0===r?void 0:r.includes("No such file or directory"))?(i.current({trackingResult:c,storageResult:u}),n=setTimeout(a,2e3),[2]):(l.kg.error("Error running storage command",{errorMessage:u.error}),[2])}}))}))).apply(this,arguments)}return a(),function(){e=!0,n&&clearTimeout(n)}}),[n,t,i])}((function(e){var n=e.trackingResult,r=e.storageResult;t((function(e){var t,o;try{t=function(e,n){if(9!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var t={wallTimeNanos:d().BigInt(0),cpuTimeNanos:d().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:m,scratchUsedBytes:0,scratchTotalBytes:2147483648,numVCpu:0},r=e.slice(0,7).map((function(e){return parseInt(e,10)}));if(r.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o,a,l=d().BigInt(e[0]),c=d().BigInt(e[1]),u=r[2],s=r[3],f=r[5],p=r[6],h=new Map(e.slice(7).map((function(e){var n=(0,i.Z)(e.trim().split(" "),2),t=n[0],r=n[1];return[t,parseInt(r,10)]}))),v=null!==(o=h.get("total_rss"))&&void 0!==o?o:0,g=null!==(a=h.get("total_cache"))&&void 0!==a?a:0;if(!(v>=0&&g>=0&&p>0&&f>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(t.memoryUsageRssBytes=v,t.memoryUsageCacheBytes=g,t.memorySoftLimitBytes=f,t.memoryHardLimitBytes=p,d().GT(n.wallTimeNanos,0)&&d().GT(n.cpuTimeNanos,0)){var y=d().toNumber(d().subtract(l,n.wallTimeNanos)),Z=d().toNumber(d().subtract(c,n.cpuTimeNanos));if(y>0&&Z>=0&&u>0&&s>0){var b=u/s;t.cpuUtilPercent=100*Z/y/b,t.numVCpu=b}else t.cpuUtilPercent=0}return t.wallTimeNanos=l,t.cpuTimeNanos=c,t}((n.output||"").trim().split("\n"),e)}catch(a){return l.kg.error("Could not calculate resources",{errorMessage:a.message}),e}if(!t)throw new Error("Expected resources");try{o=function(e){if(4!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var n=parseInt(e[0],10),t=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(n)||isNaN(t)||isNaN(r)||isNaN(i))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:n,storageTotalBytes:t,scratchUsedBytes:r,scratchTotalBytes:i}}((r.output||"").trim().split("\n"))}catch(c){return l.kg.error("Could not calculate resources",{errorMessage:c.message}),e}return t.storageUsedBytes=o.storageUsedBytes,t.storageTotalBytes=o.storageTotalBytes,t.scratchUsedBytes=o.scratchUsedBytes,t.scratchTotalBytes=o.scratchTotalBytes,w(!1),t}))})),{dataAtom:n,loading:y}}function Z(e){return Math.round(100*(e+Number.EPSILON))/100}function b(e){return e/1024/1024}},53435:function(e,n,t){t.d(n,{f:function(){return a}});var r=t(18171),i=t(62946),o=t(50959);function a(e){var n=e.currentAtom,t=e.totalAtom,a=(0,o.useState)(0),l=a[0],c=a[1],u=(0,r.Z)((function(){return(0,i.cn)((function(e){return e(n)/e(t)}))}),[n,t]),s=(0,i.Dv)(u),d=(0,i.Dv)(n),f=(0,o.useRef)(0);return(0,o.useEffect)((function(){f.current=s}),[s]),{cached:l,setCached:c,utilizationRatio:s,utilization:d,utilizationRef:f}}},28681:function(e,n,t){t.d(n,{T:function(){return Z}});var r=t(50959),i=t(81203),o=t(48330),a=t(72006),l=t(43119),c=t(71440),u=t(24635);function s(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}var h=t(59253),v=t(27562),g=t(20575),m=t(45285),y=t(13716),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,o.Z)(),t=(0,v.Z)(),a=(0,m.Z)().dotReplit,l=p({variables:{replId:n}}),c=l.data,u=l.loading,s="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&(c.repl.isProjectFork||c.repl.isModelSolution||c.repl.isModelSolutionFork),d=(0,i.P)(a),f=(0,y.t9)();return r.useCallback((function(n){return!!((s||u)&&(0,h.TI)(n)||(0,h.MF)(n))||!f&&(e&&(0,h.uC)(n)||(0,g.C)(n)||(0,h.yb)(n,t)||(0,h.lv)(n,d))}),[s,u,t,f,d,e])}},84524:function(e,n,t){t.d(n,{k:function(){return d}});var r=t(90171),i=t(72006),o=t(43119),a=t(71440),l=t(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}().data,t=(0,r.useRouter)();return(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(t.query.debug)}},99662:function(e,n,t){t.d(n,{B:function(){return _}});var r=t(2272),i=t(92508),o=t(29552),a=t(40948),l=t(72196),c=t(36662),u=t(18171),s=t(48330),d=t(72006),f=t(43119),p=t(71440),h=t(24635);function v(){var e=(0,f.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,f.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            meteredTrial {\n              cap\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var m={},y=(0,p.Ps)(v()),Z=(0,p.Ps)(g(),y);var b=t(90171),w=t(88541),x=t(37056),k=t(77511),C=t(60471),S=t(51631),T=t(18952),E=t(91046),R=t(98707),I=t(54659);function D(){var e,n=function(e){var n=(0,d.Z)({},m,e);return h.a(Z,n)}({variables:{replId:(0,s.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;return t?{repl:t,currentUser:(null===n||void 0===n?void 0:n.currentUser)||null}:{repl:null,currentUser:null}}var G=["shell","git","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator","webview"],P=["ghostwriterChat","deployments"];function _(){var e,n,t,s=D(),d=s.repl,f=s.currentUser,p=(0,b.useRouter)(),h=(0,k.T3)(),v=(0,w.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),g=(0,w.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),m=(0,w.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),y=Boolean(m&&(null===d||void 0===d?void 0:d.hostingDeploymentPermissions.canDeploy)),Z=(0,w.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),_=(0,w.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),B=(0,I.cR)(),A=(0,l.Z)().language,U=(0,c.T)(),L=(0,x.Ln)(),N=(0,o.Z)().isTutorial,X=(0,a.I)().length>0,F=(0,C.T)(),O=(0,T.WG)(),M=(null===F||void 0===F?void 0:F.debuggers)&&(null===F||void 0===F?void 0:F.debuggers.length)>0||!1,W=(0,R.jX)(null===f||void 0===f?void 0:f.userSubscriptionType),H="Team"===(null===d||void 0===d||null===(e=d.owner)||void 0===e?void 0:e.__typename)&&(null===d||void 0===d?void 0:d.owner.isTeamsPro),z=(null===f||void 0===f?void 0:f.isAdmin)||Boolean(p.query.debug),V="UserPowerUpsTypes"===(null===f||void 0===f||null===(n=f.userPowerUpsByType)||void 0===n?void 0:n.__typename)&&(null===f||void 0===f?void 0:f.userPowerUpsByType.ghostwriter)&&((null===f||void 0===f?void 0:f.userPowerUpsByType.ghostwriter.active)||((null===(t=null===f||void 0===f?void 0:f.userPowerUpsByType.ghostwriter.meteredTrial)||void 0===t?void 0:t.cap)||0)>0),j=Boolean(f&&!f.isPrivacyLimitedAccess)&&!h||V,q=(0,i.Se)();return(0,u.Z)((function(){var e=h&&(null===d||void 0===d?void 0:d.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!d||!f)return e;var n=Boolean(d.config.isServer),t=Boolean(d.config.isVnc),i=d.lang.supportsGit,o=d.lang.key.startsWith("html"),a="nix"===d.lang.key,l=!o,c=d.isProject||d.isProjectFork,u=!o,s=W||H,p=Boolean(Z&&X),m=[[{type:"shell"},!0],[{type:"instructions"},L],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},n||o],[{type:"vnc"},t],[{type:"runnerOutput"},!o],[{type:"git"},i],[{type:"packager"},X],[{type:"envEditor"},l],[{type:"debugger"},M],[{type:"tutorial"},N],[{type:"database"},u],[{type:"neon"},g||a&&v],[{type:"replAuth"},p],[{type:"autograder"},c],[{type:"unitTests"},!c&&null!==A],[{type:"education"},Boolean(U)],[{type:"preferences"},!0],[{type:"adminPanel"},z],[{type:"deployments"},y],[{type:"sshConfigurator"},s],[{type:"ghostwriterChat"},j],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},_],[{type:"extensionDevtools"},B]];if(h){var b=d.workspaceCta===S.Sy.Submit||d.workspaceCta===S.Sy.Resubmit;m.push([{type:"submitEduRepl"},b])}var w=!0,x=!1,k=void 0;try{for(var C,T=O[Symbol.iterator]();!(w=(C=T.next()).done);w=!0){var R=C.value;m.push([{type:"extension",data:{extensionId:R.extension.extensionId,installationId:R.extension.installationId,name:R.name||R.extension.manifest.name,icon:R.icon||R.extension.manifest.icon,url:(0,E.Vh)(R.extension.baseUrl,R.handler)}},!0])}}catch(Q){x=!0,k=Q}finally{try{w||null==T.return||T.return()}finally{if(x)throw k}}var I=!0,D=!1,F=void 0;try{for(var V,Y=m[Symbol.iterator]();!(I=(V=Y.next()).done);I=!0){var K=(0,r.Z)(V.value,2),$=K[0];K[1]&&(h&&!G.includes($.type)||e.push($))}}catch(Q){D=!0,F=Q}finally{try{I||null==Y.return||Y.return()}finally{if(D)throw F}}return e.map((function(e){return{title:q.getTitle(e),pane:e}})).sort((function(e,n){return P.includes(e.pane.type)?-1:P.includes(n.pane.type)?1:e.title.localeCompare(n.title)})).map((function(e){return e.pane}))}),[d,f,v,y,Z,A,U,L,N,X,M,z,h,g,_,O,B,W,H,q,j])}},23159:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(49146),i=t(50959);function o(){(0,i.useEffect)((function(){var e=null;return function n(){if(window.performance.memory){var t=window.performance.memory,i={jsHeapSizeLimit:t.jsHeapSizeLimit,totalJSHeapSize:t.totalJSHeapSize,usedJSHeapSize:t.usedJSHeapSize,timeElapsed:window.performance.now()};r.kg.info("perf:browser_memory",i);var o=5*-Math.log(Math.random())*60*1e3;e=setTimeout(n,o)}}(),function(){e&&clearTimeout(e)}}),[])}},24370:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(72006),i=t(48330),o=t(50959),a=t(43746),l=t(48224);function c(){var e=(0,i.Z)(),n=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r.Z)({replId:e},o))}),[e,n])}},18946:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(49146),i=t(48330),o=t(50959),a=t(45285),l=t(2050),c=t(68241),u=t(88688),s=t(63763),d=t(88541);var f=new Set;function p(e){var n=e.workspaceType,t=(0,i.Z)(),p=(0,a.Z)(),h=p.dotReplit,v=p.container,g=(0,d.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,o.useEffect)((function(){if(!f.has(t)){f.add(t);var e=h.watch((function(t){if(!t.error||t.error!==u.Yt.Disconnected){try{var i=v.getConnectionMetadata();if(!i||!i.token)throw new Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,i=e.flagChannelRequestPriority,o=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),a={ssr:!o,workspaceType:n,tokenCluster:t.cluster,flagChannelRequestPriority:i},u="time to code";window.performance.measure(u,o?c.Iy.pageNavStart:void 0);var s=window.performance.getEntriesByName(u,"measure")[0];if(s){var d="page invisible fetch connection metadata",f=s.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",s.duration,a),window.performance.clearMeasures(u),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",s.duration)}else r.kg.info("Could not obtain measure for time to code",a)}({workspaceType:n,parsedToken:(0,s.he)(i.token),flagChannelRequestPriority:g})}catch(o){r.kg.info("Could not measure time to code",{workspaceType:n,e:o,dotReplitResult:t.error?t.error:"success"})}e()}}));return e}}),[t,n,h,v,g])}},48224:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(87978),i=t(49146),o=t(89448),a=new Map,l=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-t,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return function(e,n){if((0,r.Mb)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}}(n,e)},trackTimeToLoadFileEnd:l}}},54669:function(e,n,t){t.d(n,{p:function(){return x}});var r=t(72006),i=t(4405),o=t(28681),a=t(18171),l=t(50959),c=t(91926),u=t(27562),s=t(2272),d=t(88688),f=t(63064),p=t(45285),h=t(87978),v=function(){var e=(0,u.Z)(),n=function(){var e=(0,p.Z)().dotReplit,n=(0,f.Z)(),t=(0,s.Z)(l.useState(null),2),r=t[0],i=t[1];return l.useEffect((function(){return e.watch((function(e){var t;n.current&&(e.error?e.error===d.Yt.NotFound&&i(null):i(null!==(t=e.config.entrypoint)&&void 0!==t?t:null))}))}),[e]),r}()||c.Z.getMainFileName(e);return l.useCallback((function(e,t){return(0,h.x$)(e,t,n)}),[n])},g=t(13716),m=t(13233),y=t(43746),Z=t(48330),b=t(28229),w=t(94716),x=function(e){var n=e.onFileDoubleClick,t=e.onFileDragEnd,c=e.openShell,u=e.openFile,s=e.flagFiletreeMultiselect,d=void 0===s||s,f=(0,g.ex)(),h=(0,o.T)(!0),x=v(),k=(0,p.Z)().fs,C=(0,m.Z)().showError,S=(0,Z.Z)(),T=(0,l.useCallback)((function(e){(0,y.Z)((0,i.Z)((0,r.Z)({},e),{replId:S}))}),[S]),E=(0,b.Z)().preferences,R="cmdOrCtrlKey"===(null===E||void 0===E?void 0:E.multiselectModifierKey)?"cmdOrCtrlKey":"altKey",I=(0,w.Z)(u),D=(0,w.Z)(c);return(0,a.Z)((function(){return{flags:{flagFiletreeMultiselect:d},preferences:{multiselectModifierKey:R},activeFile:f,watchDir:k.watchDir,openShell:D.current,openFile:function(e,n){return I.current(e,n)},shouldHideFile:h,sortNode:x,readFile:k.readFile,deleteFile:k.deleteFile,deleteDir:k.deleteDir,moveFile:k.moveFile,moveDir:k.moveDir,onError:C,onAction:T,onFileDragEnd:t,onFileDoubleClick:n}}),[R,f,k.watchDir,k.readFile,k.deleteFile,k.deleteDir,k.moveFile,k.moveDir,D,I,h,x,C,T,t,n])}},83718:function(e,n,t){t.d(n,{bM:function(){return g}});var r=t(57389),i=t(72006),o=t(4405),a=t(74985),l=t(250),c=t(82568),u=t(39541),s=t(85368),d=t(56997),f=(0,t(68973).$)(["fontSize","gap"]),p=f.cssVars,h=f.styleTokens,v=(0,c.X)({chord:[u.l0.display.inlineFlex,u.l0.rowWithGap(12)],shortcut:[u.l0.justify.end,u.l0.display.inlineFlex,u.l0.flex.row,{fontSize:h.fontSize,"& > div":{minWidth:u.TV.space16,marginRight:h.gap},"& > div:last-child":{marginRight:0}}]});function g(e){if((0,l.bU)(e.keyCombo))return(0,a.tZ)(s.G,{css:v.chord,children:e.keyCombo.map((function(n,t){return(0,a.tZ)(g,(0,o.Z)((0,i.Z)({},e),{keyCombo:n}),t)}))});var n,t=(0,l.QR)(e.keyCombo);return(0,a.tZ)(s.G,{css:v.shortcut,style:(n={},(0,r.Z)(n,p.fontSize,e.small?u.TV.fontSizeSmall:u.TV.fontSizeDefault),(0,r.Z)(n,p.gap,e.hideBorder?"2px":"4px"),n),title:e.keyCombo,children:t.map((function(n){var t;return(0,a.tZ)(Z,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null===e||void 0===e||null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)}))})}var m=(0,c.X)({root:[u.l0.color.foregroundDimmest,u.l0.position.relative,u.l0.px(4),u.l0.py(2),{fontSize:"inherit",width:"max-content",textAlign:"center",textTransform:"capitalize"}],border:[u.l0.coverContainer,u.l0.borderRadius(4),{opacity:.5,minWidth:u.TV.space16,border:"1px solid",borderColor:u.TV.outlineStrongest}]}),y={Ctrl:d.V5?"\u2303":"Ctrl",Cmd:d.V5?"\u2318":"Cmd",Alt:d.V5?"\u2325":"Alt",Shift:d.V5?"\u21e7":"Shift",Enter:d.V5?"Return":"Enter",ArrowLeft:"\u2190",ArrowRight:"\u2192",ArrowUp:"\u2191",ArrowDown:"\u2193"," ":"Space"};function Z(e){var n,t=e.text,r=e.isActive,i=void 0!==r&&r,o=e.hideBorder,l=void 0!==o&&o,c={fontWeight:u.TV.fontWeightMedium,color:u.TV.foregroundDefault},d={borderColor:u.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:m.root,style:i?c:void 0,children:[null!==(n=y[t])&&void 0!==n?n:t,l?null:(0,a.tZ)(s.G,{css:m.border,style:i?d:void 0})]})}},45353:function(e,n,t){t.d(n,{GO:function(){return u},Il:function(){return o.Il},bM:function(){return c.bM},gf:function(){return o.gf}});var r=t(74985),i=t(50959),o=t(82001),a=t(250),l=t(88541),c=t(83718);function u(e){var n=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(s,{})]})}function s(){var e=(0,o.gk)(),n=(0,o.XU)(),t=(0,i.useRef)(null),r=(0,l.P5)({controlName:"flag-run-keybindings-in-capture",logFlagToAnalytics:!1}),c=function(e,n){if(e){var t=e.run,r=e.bubble;if(!1===t())return;if(n.preventDefault(),!r)return 1}},u=function(e,n){e&&!1!==e.run()&&(n.defaultPrevented||n.preventDefault())};return(0,i.useEffect)((function(){var i=function(r){if(e){var i=(0,a.IX)(r);if(i)if(t.current){var o=n.scopedShortcuts.get(t.current),l=n.globalShortcuts.get(t.current);if(t.current=null,o&&"chord"===o.type){var s=o.matches.get(i);if(c(s,r))return}if(l&&"chord"===l.type){var d=l.matches.get(i);u(d,r)}}else{var f=n.scopedShortcuts.get(i),p=n.globalShortcuts.get(i);if(f||p){if("chord"===(null===f||void 0===f?void 0:f.type)||"chord"===(null===p||void 0===p?void 0:p.type))return t.current=i,void r.preventDefault();if(f&&"shortcut"===f.type)if(c(f,r))return;p&&"shortcut"===p.type&&u(p,r)}}}};return document.addEventListener("keydown",i,r),function(){document.removeEventListener("keydown",i,r)}}),[e,n,r]),null}},86188:function(e,n,t){t.d(n,{_:function(){return Z},O:function(){return m}});var r=t(57135),i=t(2272),o=t(96583),a=t(250),l=t(72006),c=t(43119),u=t(71440),s=t(50216);function d(){var e=(0,c.Z)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.Ps)(d());var h=t(18171),v=t(53306),g=t(47091);function m(){var e=(0,g.O)(),n=(0,i.Z)(function(e){var n=(0,l.Z)({},f,e);return s.D(p,n)}(),1)[0];return(0,h.Z)((function(){return function(){var t=(0,r.Z)((function(t){var r,a,l,c,u,s,d,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d=(0,i.Z)(s.value,2),f=d[0],p=d[1],r.push({commandId:f,keyCombo:p})}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[4,n({variables:{input:{environment:e,platform:(0,v.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}()}),[e,n])}function y(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"===typeof e.keyCombo){var t=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}function Z(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=y(o.value);l&&n.set(l.commandId,l.keyCombo)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}},53306:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(56997),i=t(11086);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},74441:function(e,n,t){t.d(n,{R:function(){return s}});var r=t(57135),i=t(96583),o=t(12379),a=t(43119),l=t(71440);function c(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u=(0,l.Ps)(c());function s(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e){var n,t,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:u,variables:{replId:e}})];case 1:return t=i.sent(),r="Repl"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.repl.__typename)?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}}))}))).apply(this,arguments)}},73941:function(e,n,t){t.d(n,{mn:function(){return s}});var r=t(2272),i=t(9970),o=t(4561),a=t(87978),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function u(e,n){var t=new Map,o=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value,f=(0,a.r6)(d);if(f&&(!n||f.startsWith(n))){var p,h=null!==(p=t.get(f))&&void 0!==p?p:0;t.set(f,h+1)}}}catch(v){l=!0,c=v}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return(0,i.Z)(t.entries()).sort((function(e,n){var t=(0,r.Z)(e,2)[1];return(0,r.Z)(n,2)[1]-t})).map((function(e){return(0,r.Z)(e,1)[0]}))}function s(e,n){if(e.fileType===o.Tv.Directory||!e.input)return[];if("."===e.input)return c.map((function(e){return{value:e,highlight:[{from:1,to:e.length}]}}));if(e.input.startsWith("."))return c.filter((function(n){return n.startsWith(e.input)})).map((function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}}));var t,r=(0,a.r6)(e.input),s=u(e.siblings.map((function(e){return e.filename})),r);s.length<3&&(t=s).push.apply(t,(0,i.Z)(u(n(),r)));if(s.length<3){var d,f=r?l.filter((function(e){return e.startsWith(r)})):l;(d=s).push.apply(d,(0,i.Z)(f))}return(0,i.Z)(new Set(s)).slice(0,3).map((function(n){var t="."+n,i=e.input;i.endsWith(".")?i=i.slice(0,-1):r&&(i=i.slice(0,-(r.length+1)));var o=i+t;return{value:o,highlight:[{from:e.input.length,to:o.length}]}}))}},52624:function(e,n,t){t.d(n,{B:function(){return o},H:function(){return i}});var r=t(4561),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var n=e.filter((function(e){return e.type===r.Tv.File})).length,t=e.filter((function(e){return e.type===r.Tv.Directory})).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map((function(e){return e.path})).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},22405:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(87978),i=/\(copy\)( \d+)?$/,o=/\d+$/;function a(e,n){for(var t=(0,r.r6)(e),a=(0,r.eb)(e),l=i.test(a)?e:"".concat(a," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size;c++){if(!n.has(l))return l;var u=(0,r.eb)(l),s=u.split(" ");o.test(u)&&s.pop(),l="".concat(s.join(" ")," ").concat(c),t.length>0&&(l+=".".concat(t))}return l}},43330:function(e,n,t){t.d(n,{h:function(){return u},x:function(){return c}});var r=t(9970),i=t(50959),o=t(42256),a=t(62946),l=(0,a.cn)([]);function c(e,n){var t=n.run,o=n.enabled,c=void 0===o||o,u=(0,a.b9)(l);(0,i.useEffect)((function(){if(c){var n=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:t}}));return u((function(e){return(0,r.Z)(e).concat((0,r.Z)(n))})),function(){u((function(e){return e.filter((function(e){return!n.includes(e)}))}))}}}),[e,t,u,c])}function u(){var e=(0,a.Dv)(l);return(0,i.useEffect)((function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value,s=u.shortcut,d=u.run;Boolean(s.cmdOrCtrlKey)===Boolean((0,o.j)(n))&&Boolean(s.altKey)===Boolean(n.altKey)&&Boolean(s.shiftKey)===Boolean(n.shiftKey)&&(null===(c=s.key)||void 0===c?void 0:c.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),d(s))}}catch(f){r=!0,i=f}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[e]),null}},29061:function(e,n,t){function r(e,n){return new Promise((function(t){var r=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:n}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()}}))}))}t.d(n,{r:function(){return r}})},68702:function(e,n,t){t.d(n,{e:function(){return R},Z:function(){return E}});var r=t(72006),i=t(2272),o=t(85234),a=t.n(o),l=t(50993),c=t(37001),u=t(77637),s=t(1468),d="exit status 1";function f(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u.Z)(e,["execer","onComplete","onError","onParse"]);if(0!==o.query.length){var a=new TextEncoder,f=(0,c.Tq)(),p=0,h=0,v=function(){},g=function(e){r(e),t("error")},m=n.onOutput((function(e){var n=a.encode(e).length;h+=n;var t=f(e);if(t){var r=t.error,o=t.filesMap,l=t.filesMapChanges;r&&g(r),p=o.size,l.forEach((function(e){var n=o.get(e);n&&o.set(e,(0,c.Vd)(n))})),i(o,l)}})),y=n.onStderr((function(e){if(e.trim()===d)return g(l.f.EMPTY_RESULTS);g(l.f.INVALID_COMMAND)}));v=function(){m(),y()};var Z=(0,c.PR)(o);n.request({args:Z}).then((function(e){if(e.error)return e.error.trim()===d?g(l.f.EMPTY_RESULTS):g(l.f.INVALID_COMMAND);var n;n="finished",0!==p||"finished"!==n?("finished"===n?t(n,{bytes:h}):t(n),v()):g(l.f.EMPTY_RESULTS)})).catch((function(e){return s.c_.captureException(new Error("Ripgrep search command failed with error: ".concat(e))),g(l.f.INVALID_COMMAND)}))}else t("abort")}var p=t(86763),h=t.n(p),v=t(57135),g=t(9970),m=t(96583),y=t(88254),Z=t(32524),b="signal: broken pipe",w="Channel closed";function x(){return(x=(0,v.Z)((function(e){var n,t,r,i,o,a,s;return(0,m.__generator)(this,(function(f){switch(f.label){case 0:return t=e.container,0===(r=(0,u.Z)(e,["container"])).query.trim().length?[2,k(l.f.EMPTY_QUERY)]:t.getConnectionState()===Z.em.DISCONNECTED?[2,k(l.f.CONTAINER_DISCONNECTED)]:t.getConnectionState()===Z.em.CONNECTING?[2,k(l.f.CONTAINER_CONNECTING)]:[4,(n=t).exec.apply(n,(0,g.Z)((0,c.PR)(r)))];case 1:if(i=f.sent(),o=i.output,a=i.error)switch(a){case d:return[2,k(l.f.EMPTY_RESULTS)];case b:return[2,k(l.f.PARTIAL_RESULTS)];case w:return[2,k(l.f.CHANNEL_CLOSED)];default:return y.Tb(new Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}return(null===o||void 0===o?void 0:o.trim())&&((s=(0,c.Tq)()(o))&&0!==s.filesMap.size)?[2,k(s.error,s.filesMap)]:[2,k(l.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var C=t(46335),S=t(49146),T="File Search Used";function E(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,u=e.isStreaming,s=e.trackLatency,d=void 0!==s&&s,p=(0,C.Z)({container:n}),v=[],g=a()(),m=Date.now(),y=function(e){i(v=e)};return h()((function(e){var n=a()();g=n,m=Date.now(),t(null),o(!0);var i=!0;if(""===e.query)return y([]),void o(!1);f((0,r.Z)({execer:p,onComplete:function(r,i){if(g===n){o(!1);var a,u,s,f,p="finished"===r&&i&&i.bytes===c.Ak;if(p&&t(l.f.PARTIAL_RESULTS),d)S.kg.time("".concat(T," - complete"),Date.now()-m,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(u=e.excludeGlobs)||void 0===u?void 0:u.length)&&void 0!==f?f:0)>0,latency:Date.now()-m,isPartialResults:p})}},onError:function(e){g===n&&t(e)},onParse:function(t,r){if(g===n){if(i){var a,l,s,f;if(d)S.kg.time("".concat(T," - first_chunk"),Date.now()-m,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==f?f:0)>0});y((0,c.Md)([],t,r)),i=!1}else y((0,c.Md)(v,t,r));u&&o(!1)}},mode:"json",context:0},e))}),200)}function R(e){var n=e.container,t=h()((function(e,t,o){(function(e){return x.apply(this,arguments)})((0,r.Z)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then((function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=(0,i.Z)(a.value,2),u=c[0],s=c[1];n[u]=s.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;return r?t({error:null,results:n,isPartialResult:r}):e.error?t({error:e.error,results:null,isPartialResult:r}):t({error:null,results:n,isPartialResult:r})})).catch(o)}),200);return function(e){return new Promise((function(n,r){return t(e,n,r)}))}}},17843:function(e,n,t){t.d(n,{Eu:function(){return u},m6:function(){return i}});var r=t(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=function(e){return e.forEach((function(e){return e&&t.push("-g",e)}))},i=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=l(h);v.startsWith("**")?i.push(v):c.push(v)}}catch(g){s=!0,d=g}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return c.length>0&&(r(["!*"]),new Set(c).forEach((function(e){r(a(e).map(o))}))),r(i),r(n.map((function(e){return"!".concat(o(l(e)))}))),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var n=function(e){var n;Array.isArray(i[e])||(i[e]=[]);var o=t[e],a=o.startsWith("{")&&o.endsWith("}")?u(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r.Z)(a.map((function(n){var t=i[e-1];return t&&t.length>0?t.map((function(e){return"".concat(e,"/").concat(n)})):n})).flat(2)))},t=u(e,"/").filter((function(e){return e.length>0}));"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)}function l(e){return e.replaceAll(/\*/g,(function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"}))}var c=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(c.hasKey(d))r.push(d);else if(c.hasValue(d)&&r.pop()!==c.getValue(d))return[e];i+=d}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},37001:function(e,n,t){t.d(n,{Ak:function(){return d},Tq:function(){return f},PR:function(){return y},Vd:function(){return g},Md:function(){return m}});var r=t(72006),i=t(4405),o=t(9970);function a(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map((function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")})).join(" ")}var l=t(17843),c=t(50993),u=t(49146),s=t(91620).lW,d=524288;function f(){var e="",n=new Map;return function(t){var r=new Set,i=!1;if(t.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:n,filesMapChanges:r};var o=t.indexOf("\n"),a=0,l=e+t;if(o>=0){for(o+=e.length;o>=0;){var u=l.substring(a,o).trim();if(0!==u.length){var s=p(u);if(s)h(s,n,r)||(i=!0)}a=o+1,o=l.indexOf("\n",a)}return e=l.substring(a),{error:i?c.f.INVALID_LINE:null,filesMap:n,filesMapChanges:r}}e=l}}function p(e){try{return JSON.parse(e)}catch(n){return null}}function h(e,n,t){switch(e.type){case"begin":var o=v(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":return!0;case"match":case"context":var a=v(e.data.path);if(!a)return!1;t.add(a);var l=n.get(a);if(!l)return!1;var c=function(e,n){var t,o,a=v(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(t=l[0])||void 0===t?void 0:t.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var u=0,s=0,d=e.data.submatches;return l.forEach((function(n,t){var r=e.data.line_number+t,i=s;s+=n.length+1;for(var o=[];u<d.length;){var a=d[u];if(a.start>=s)break;var l=a.start-i,f=void 0;if(f=a.end<s?a.end-a.start:a.end===s?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:f}),a.end>s){a.start=s;break}u++}c.push({lineNumber:r,content:n,matches:o})})),(0,i.Z)((0,r.Z)({},n),{lines:n.lines.concat(c)})}(e,l);return c&&n.set(a,c),!0;case"error":return u.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}function v(e){return e?"bytes"in e?s.from(e.bytes,"base64").toString():e.text:null}function g(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:t})}function m(e,n,t){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=n.get(l);t.has(l)&&c&&(r[a]=c,i.add(l))}var u=!0,s=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=n.get(h);!i.has(h)&&v&&r.push(v)}}catch(g){s=!0,d=g}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return r}function y(e){var n,t=e.mode,r=e.query,i=e.context,c=e.isRegex,u=e.isCaseSensitive,s=e.isMatchingWholeWords,f=e.includeGlobs,p=e.excludeGlobs,h=["rg"];switch(t){case"json":h.push("--json");break;case"files":h.push("--files-with-matches")}return null!==i&&h.push("--context","".concat(i)),r.includes("\n")&&h.push("--multiline"),c||h.push("--fixed-strings"),h.push("--max-count","100"),h.push("--max-filesize","4M"),h.push("--max-depth","24"),h.push("--max-columns","512"),h.push("--max-columns-preview"),h.push(u?"--case-sensitive":"--ignore-case"),s&&h.push("--word-regexp"),(n=h).push.apply(n,(0,o.Z)((0,l.m6)(f,p))),h.push("--",r),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o.Z)(e))," | head -c ").concat(n)]}(h)}},50993:function(e,n,t){var r;t.d(n,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed."}(r||(r={}))},43746:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(625);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},29599:function(e,n,t){t.d(n,{YI:function(){return A},kW:function(){return B}});var r,i=t(72006),o=t(4405),a=t(74985),l=t(48306),c=t.n(l),u=(t(50959),t(24743));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var s=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:t,style:r,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("b",{onClick:t,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("i",{onClick:t,children:n.content})},y=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("span",{onClick:t,className:"jsx-e2f6e2707e7599fa",children:[n.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("blockquote",{onClick:t,className:"jsx-8741a91fadaf26be",children:[n.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,k=/(`.+?`)/,C=/(\*\*.+?\*\*)/,S=/(_.+?_)/,T=/(\*.+?\*)/,E=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function D(e){var n=e.url;return{type:r.LINK,url:n,content:n}}function G(e){var n=e.hash;return{type:r.DEEP_LINK,url:n,content:n}}function P(e,n){if(x.test(e)){var t={};try{t=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(t.host)?t.pathname===n.replUrl?G({hash:t.hash}):I.test(t.pathname)?function(e){var n=e.url,t=I.exec(n.pathname);if(!t)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:n.href,content:"@".concat(t[1],"/").concat(t[2]).concat(n.hash)}}({url:t}):D({url:e}):D({url:e})}if(w.test(e))return G({hash:e});if(R.test(e))return function(e){var n=e.text;return{type:r.QUOTE,content:n}}({text:e.slice(1).trim()});if(k.test(e))return function(e){var n=e.code;return{type:r.CODE,content:n}}({code:e.slice(1,-1)});if(C.test(e))return function(e){var n=e.text;return{type:r.BOLD,content:n}}({text:e.slice(2,-2)});if(S.test(e)||T.test(e))return function(e){var n=e.text;return{type:r.ITALICS,content:n}}({text:e.slice(1,-1)});if(E.test(e))return function(e){var n=e.text;return{type:r.STRIKETHROUGH,content:n}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!n.users||n.users.includes(i))return function(e){var n=e.username;return{type:r.MENTION,username:n,content:"@".concat(n)}}({username:i})}return{content:e,type:r.TEXT}}var _=new RegExp([k.source,C.source,S.source,T.source,E.source,x.source,b.source,w.source,R.source].join("|"),"m");function B(e,n){var t=e.split(_),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d){var f=P(d,n);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var n=e.message,t=e.onMentionClick,l=void 0===t?function(){}:t,c=e.codeStyles,u=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:n.tokens.map((function(e,n){var t={fragment:e,key:n};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},t),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},t)):e.type===r.REPL_LINK?(0,a.tZ)(p,(0,i.Z)({},t)):e.type===r.DEEP_LINK?(0,a.tZ)(h,(0,i.Z)({},t)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},t),{style:u})):e.type===r.BOLD?(0,a.tZ)(g,(0,i.Z)({},t)):e.type===r.ITALICS?(0,a.tZ)(m,(0,i.Z)({},t)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},t)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},t)):(0,a.tZ)(s,(0,i.Z)({},t))}))})}},86956:function(e,n,t){t.d(n,{D:function(){return sc}});var r=t(72006),i=t(4405),o=t(9970),a=t(74985),l=t(77511),c=t(83005),u=t(28998),s=t(62405),d=t(71338),f=t(83946),p=t(44058),h=t(62946),v=t(90171),g=t.n(v),m=t(36900),y=t(2272),Z=t(86419),b=t(50959),w=t(23271),x=t(39541),k=t(85368),C=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],S=function(e){var n=e.img,t=e.code,r=(0,y.Z)((0,w.c)({item:{type:Z.z.Code,code:t},type:Z.z.Code}),2)[1];return(0,a.tZ)("img",{alt:"kaboom shape",ref:r,src:n,css:[x.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},T=function(){return(0,a.tZ)(k.G,{css:[x.l0.flex.row,x.l0.justify.spaceEvenly,x.l0.backgroundColor.backgroundHigher,x.l0.borderRadius(8),x.l0.width("calc(100% - 32px)"),x.l0.height("64px"),x.l0.position.absolute,x.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:C.map((function(e){return(0,a.tZ)(S,(0,r.Z)({},e),e.img)}))})},E=t(94488),R=t(27256),I=t(57135),D=t(96583),G=t(26833),P=t(14806),_=t(69994),B=t(45853),A=t(45634),U=t(87076),L=t(63128),N=t(18200),X=t(99964),F=t(80336),O=t(93658),M=t(48667),W=t(69341),H=_.tk.baseTheme({"& .cm-contextual-ai-tooltip .cm-content":{paddingBottom:"0px"}});var z=function(e){var n=e.children,t=e.title,r=e.newInferenceAlt,i=e.width,o=e.dataCy,l=e.onRequestClose,c=e.onRequestNewInference,u=(0,X.Z)(l,[]);return(0,a.tZ)("div",{"data-cy":o,ref:u,children:(0,a.tZ)(W.Z,{bsod:!0,tags:{ai:!0},extras:{title:t},origin:"ErrorBoundary: ContextualAiModal",children:(0,a.BX)(L.T,{background:"higher",css:[x.l0.borderRadius(8),x.l0.maxWidth("100%"),x.l0.width(i||320),{background:x.TV.backgroundHigher,boxShadow:x.TV.shadow1,borderWidth:1,borderColor:x.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,a.BX)("div",{css:[x.l0.display.flex,x.l0.justify.spaceBetween,x.l0.flex.row,x.l0.rowWithGap(2),x.l0.p(8),{borderBottom:"1px solid",borderBottomColor:x.TV.backgroundHighest}],children:[(0,a.BX)("div",{css:[x.l0.display.grid,x.l0.align.center,{gridAutoFlow:"column",gridGap:x.TV.space8}],children:[(0,a.tZ)("div",{css:[{color:x.TV.foregroundDefault}],children:t}),(0,a.tZ)("a",{href:N.$q,target:"_blank",css:x.l0.color.foregroundDefault,children:(0,a.tZ)(U.h,{alt:"Learn more about AI at Replit",tooltipDelay:"none",tooltipContents:"This feature is powered by Replit Ghostwriter. Click to learn more.",type:"button",children:(0,a.tZ)(O.Z,{color:x.TV.foregroundDimmer})})}),c?(0,a.tZ)(U.h,{alt:r||"Try again",onClick:c,type:"button",children:(0,a.tZ)(M.Z,{})}):null]}),(0,a.tZ)("div",{className:"right",children:(0,a.tZ)(U.h,{alt:"Close",tooltipHidden:!0,onClick:l,type:"button",children:(0,a.tZ)(F.Z,{})})})]}),n]})})})},V=P.Py.define({map:function(e,n){if(e)return e.map(n)}});function j(e){var n=e.setExplainCodeParams,t=P.QQ.define({create:function(){return null},update:function(e,n){var t=!1,r=null;return(0,A.j)(n,V,(function(e){r=e.value,t=!0})),t?r:e&&!n.changes.empty?e.map(n.changes):e},provide:function(e){return[_.hJ.compute([e],(function(t){var r=t.field(e);return r?{pos:r.to,create:function(){var e=document.createElement("div");return e.className="cm-contextual-ai-tooltip",n({dom:e,code:t.doc.sliceString(r.from,r.to)}),{dom:e}}}:null}))]}});return[t,H]}var q=P.Py.define();function Y(e){var n=e.setGenerateCodePortalProps,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state,i=t.doc.sliceString(t.selection.main.from,t.selection.main.to);n({dom:r,selectedCode:i,onRequestClose:function(){e.dispatch({effects:q.of(!1)}),e.hasFocus||e.focus()},insertCode:function(n){var t=e.state.selection.main.head;e.dispatch({changes:{from:t,insert:n},effects:q.of(!1)}),e.hasFocus||e.focus()}})},r=document.createElement("div");r.className="cm-contextual-ai-tooltip";var i={dom:r,mount:function(e){t(e)},update:function(e){(e.docChanged||e.selectionSet)&&t(e.view,e.state)},destroy:function(){n(null)}};return[P.QQ.define({create:function(){return null},update:function(e,n){return null!==e&&n.docChanged&&(e=n.changes.mapPos(e)),(0,A.j)(n,q,(function(t){e=t.value?n.newSelection.main.to:null})),e},provide:function(e){return _.hJ.from(e,(function(e){return null===e?null:{pos:e,create:function(){return i}}}))}}),H]}var K=P.Py.define();function $(e){var n=e.setTransformCodePortalProps,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state,i=t.doc.sliceString(t.selection.main.from,t.selection.main.to);n({dom:r,selectedCode:i,onRequestClose:function(){e.dispatch({effects:K.of(!1)}),e.hasFocus||e.focus()},replaceCode:function(n){var t=e.state.selection.main.from,r=e.state.selection.main.to;e.dispatch({changes:{from:t,to:r,insert:n},effects:K.of(!1)}),e.hasFocus||e.focus()}})},r=document.createElement("div");r.className="cm-contextual-ai-tooltip";var i={dom:r,mount:function(e){t(e)},update:function(e){(e.docChanged||e.selectionSet)&&t(e.view,e.state)},destroy:function(){n(null)}};return[P.QQ.define({create:function(){return null},update:function(e,n){var t=n.newSelection.main;return t.from===t.to?null:(null!==e&&n.docChanged&&(e=n.changes.mapPos(e,P.gc.TrackDel)),(0,A.j)(n,K,(function(n){e=n.value?t.to:null})),e)},provide:function(e){return _.hJ.from(e,(function(e){return null===e?null:{pos:e,create:function(){return i}}}))}}),H]}var Q=t(48468),J=t(49146),ee=t(625),ne=t(64491),te=t(96796),re=t(45285),ie=t(60566),oe=t(49747),ae=t(87978),le=t(85234),ce=t.n(le),ue=t(45076),se=t(66091),de=t(5683),fe=t(45347),pe=t(59165),he=new(function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(){return(0,se.Z)(this,t),n.apply(this,arguments)}return t.prototype.toDOM=function(){return document.createTextNode("\u25cf")},t}(_.SJ)),ve=P.Py.define({}),ge=P.Py.define({}),me=_.p.line({attributes:{class:"cm-debuggerLine"}}),ye=P.Py.define({}),Ze=P.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(ye))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}});function be(e){var n=new P.f_,t=e.state.field(Ze);if(null!==t&&t<=e.state.doc.lines){var r=e.state.doc.line(t);n.add(r.from,r.from,me)}return n.finish()}var we=_.lg.fromClass(function(){function e(n){(0,se.Z)(this,e),this.decorations=be(n)}return e.prototype.update=function(e){this.decorations=be(e.view)},e}(),{decorations:function(e){return e.decorations}});function xe(e,n){e.dispatch({effects:ge.of({pos:n})})}var ke=P.QQ.define({create:function(){return P.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var t=o.value;if(t.is(ge)){var r=!1;e.between(t.value.pos,t.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==t.value.pos}}):e.update({add:[he.range(t.value.pos)]})}t.is(ve)&&(e=Te(t.value.lines,n.state))},l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e}}),Ce=_.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:x.TV.accentPrimaryDefault,paddingLeft:x.TV.space4,paddingRight:x.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:x.TV.accentPrimaryDimmest,borderRadius:x.TV.borderRadius4,marginRight:x.TV.space4}});function Se(e,n){var t;return e&&0!==e.length?null===n||(null===(t=e[0].source)||void 0===t?void 0:t.path)!==n?null:e[0].line:null}function Te(e,n){var t=(0,o.Z)(new Set(e.filter((function(e){return e<=n.doc.lines})))).map((function(e){return he.range(n.doc.line(e).from)}));return P.Xs.of(t,!0)}var Ee=t(57530),Re=t(67530),Ie=t(85577),De=t(19204),Ge=t(9951),Pe=t(88541),_e=t(95245),Be=t(22917),Ae=t(52364),Ue=t(45510),Le=t(61284),Ne=t(51531),Xe=t(38335),Fe=t(23455),Oe=t(63837),Me=t(96028),We=RegExp(".*?```(\\w+)\\n(.*?)(?:$|\\n$|\\n`$|\\n``$|\\n```)","gs"),He=function(e){for(var n,t=[];null!==(n=We.exec(e));){var r=n[1],i=n[2];t.push({language:r,code:i})}return t},ze=t(82568),Ve=(0,ze.X)({inlinePocketContainer:[x.l0.width("100%"),x.l0.backgroundColor.backgroundRoot,x.l0.position.relative],caretWrapper:[x.l0.position.absolute,x.l0.height("fit-content"),x.l0.display.flex,x.l0.flex.row,x.l0.align.center],inlinePocketWrapper:[x.l0.font.default,x.l0.p(4),{borderTopWidth:x.TV.borderWidthDefault,borderBottomWidth:x.TV.borderWidthDefault,borderStyle:"solid",borderColor:x.TV.accentPrimaryDefault}],headerContainer:[x.l0.rowWithGap(4),x.l0.py(4),x.l0.align.center],authorContainer:[x.l0.flex.growAndShrink(1)],inputContainer:[x.l0.p(4),x.l0.py(8),x.l0.rowWithGap(4),x.l0.align.center],input:[{height:28,width:"100%",resize:"vertical"}],messageActionContainer:[x.l0.rowReverseWithGap(4)],messageContainer:[x.l0.rowWithGap(8),x.l0.align.center],messageMarkdown:[x.l0.colWithGap(8),x.l0.py(8),x.l0.flex.growAndShrink(1),{whiteSpace:"normal"}],messageError:[x.l0.px(8)],messageText:[x.l0.color.accentNegativeStronger,x.l0.fontSize(16)]}),je=t(34204),qe=t(95434),Ye=t(39137),Ke=t(54414),$e=t(32104),Qe=function(e){var n=e.isLoading,t=e.autoFocus,r=e.sendDisabled,i=e.onSend,o=function(){requestAnimationFrame((function(){h()})),i(u,u===g.current),g.current=u},l=(0,b.useId)(),c=(0,b.useState)(""),u=c[0],s=c[1],d=(0,b.useRef)(null),f=(0,qe.Z)(),p=f.ref,h=f.update,v=(0,b.useCallback)((function(){var e;null===(e=d.current)||void 0===e||e.focus()}),[]),g=(0,b.useRef)(null),m=!n&&u===g.current;return(0,b.useLayoutEffect)((function(){t&&v()})),(0,a.BX)(k.G,{css:Ve.inputContainer,children:[(0,a.tZ)(Ye.B,{id:l,ref:(0,je.lq)(p,d),css:Ve.input,autoSize:!0,placeholder:"Write your prompt",value:u,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(s((function(e){var n,t;return e.slice(0,null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.selectionStart)+"\n"+e.slice(null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.selectionEnd,e.length)})),requestAnimationFrame((function(){h()}))):o())},onChange:function(e){return s(e.currentTarget.value)}}),m?(0,a.tZ)(U.h,{alt:"Regenerate",size:28,onClick:o,children:(0,a.tZ)(M.Z,{})}):(0,a.tZ)(U.h,{alt:"Send message",size:28,type:"submit",onClick:o,disabled:n||r,children:n?(0,a.tZ)($e.Z,{}):(0,a.tZ)(Ke.Z,{})})]})},Je=t(99450),en=t(54873),nn=function(e){var n=e.codeReference,t=e.onClose,r=e.updateCodeBlock,i=e.insertCode,o=e.autoFocus,l=e.onLoadingChanged,c=(0,Ae.ql)(),u=(0,Me.oQ)(n.filePath),s=(0,Ae.gp)(),d=Boolean(null===u||void 0===u?void 0:u.loading),f=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;u&&!s&&(null===(e=f.current)||void 0===e||e.focus())}),[s,u]),(0,b.useEffect)((function(){l(d)}),[d,l]);var p=(0,b.useMemo)((function(){if(!(null===u||void 0===u?void 0:u.text))return null;var e=He((null===u||void 0===u?void 0:u.text)||"");return e.length>0?e[0].code:null}),[null===u||void 0===u?void 0:u.text]);(0,b.useEffect)((function(){return r(p)}),[p,r]);var h=null,v="Assistant"===(null===u||void 0===u?void 0:u.attribution)&&"string"===typeof(null===u||void 0===u?void 0:u.error),g=!p&&!s;return u&&!(!v&&!g)&&(h=(0,a.tZ)(k.G,{css:[Ve.messageContainer],children:(0,a.BX)(k.G,{css:Ve.messageMarkdown,children:[g?(0,a.tZ)(Xe.J,{text:u.text,textColor:Fe.TV.foregroundDefault,codeComponent:Je.K2}):null,v?(0,a.tZ)(k.G,{css:Ve.messageError,children:(0,a.tZ)(Le.xv,{css:Ve.messageText,multiline:!0,children:u.error})}):null]})})),(0,a.BX)(k.G,{children:[(0,a.BX)(k.G,{css:Ve.headerContainer,children:[(0,a.tZ)(k.G,{css:Ve.authorContainer,children:(0,a.tZ)(Ne.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"GENERATE",smallAvatar:!0})}),(0,a.tZ)(U.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(F.Z,{})})]}),(0,a.tZ)(Qe,{isLoading:d,autoFocus:o,sendDisabled:s,onSend:function(){var e=(0,I.Z)((function(e,t){return(0,D.__generator)(this,(function(r){switch(r.label){case 0:return(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,isRetry:t,action:t?"refresh":"submit",language:n.language}),[4,c({chatMessage:{type:"generateCode",text:e,codeReference:n}})];case 1:return r.sent(),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()}),h,u&&!s?(0,a.BX)(k.G,{css:Ve.messageActionContainer,children:[(0,a.tZ)(Ue.zx,{ref:f,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(Oe.Z,{}),onClick:function(){p?(i(p),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"inserted-in-editor",language:n.language})):t()}}),(0,a.tZ)(Ue.zx,{text:"Discard",iconLeft:(0,a.tZ)(en.Z,{}),onClick:t})]}):null]})},tn=t(47648),rn=function(e){var n=e.codeReference,t=e.replaceHighlightedAreaWithCode,r=e.updateCodeBlock,i=e.onClose,o=e.autoFocus,l=e.onLoadingChanged,c=(0,Ae.ql)(),u=(0,tn.iH)(n.filePath),s=(0,Ae.gp)(),d=Boolean(null===u||void 0===u?void 0:u.loading),f=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;u&&!s&&(null===(e=f.current)||void 0===e||e.focus())}),[s,u]),(0,b.useEffect)((function(){l(d)}),[d,l]);var p=(0,b.useMemo)((function(){if(!(null===u||void 0===u?void 0:u.text))return null;var e=He((null===u||void 0===u?void 0:u.text)||"");return e.length>0?e[0].code:null}),[null===u||void 0===u?void 0:u.text]);(0,b.useEffect)((function(){return r(p)}),[p,r]);var h=null,v="Assistant"===(null===u||void 0===u?void 0:u.attribution)&&"string"===typeof(null===u||void 0===u?void 0:u.error),g=!p&&!s;return u&&!(!v&&!g)&&(h=(0,a.tZ)(k.G,{css:[Ve.messageContainer],children:(0,a.BX)(k.G,{css:Ve.messageMarkdown,children:[g?(0,a.tZ)(Xe.J,{text:u.text,textColor:Fe.TV.foregroundDefault,codeComponent:Je.K2}):null,v?(0,a.tZ)(k.G,{css:Ve.messageError,children:(0,a.tZ)(Le.xv,{css:Ve.messageText,multiline:!0,children:u.error})}):null]})})),(0,a.BX)(k.G,{children:[(0,a.BX)(k.G,{css:Ve.headerContainer,children:[(0,a.tZ)(k.G,{css:Ve.authorContainer,children:(0,a.tZ)(Ne.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"TRANSFORM",smallAvatar:!0})}),(0,a.tZ)(U.h,{alt:"Close",onClick:i,type:"button",children:(0,a.tZ)(F.Z,{})})]}),(0,a.tZ)(Qe,{isLoading:d,autoFocus:o,sendDisabled:s,onSend:function(){var e=(0,I.Z)((function(e,t){return(0,D.__generator)(this,(function(r){switch(r.label){case 0:return(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",inline:!0,isRetry:t,action:t?"refresh":"submit",language:n.language}),[4,c({chatMessage:{type:"transformCode",text:e,codeReference:n}})];case 1:return r.sent(),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()}),h,u&&!s?(0,a.BX)(k.G,{css:Ve.messageActionContainer,children:[(0,a.tZ)(Ue.zx,{ref:f,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(Oe.Z,{}),onClick:function(){p?(t(p),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"replaced-selection-in-editor",language:n.language})):i()}}),(0,a.tZ)(Ue.zx,{text:"Discard",iconLeft:(0,a.tZ)(en.Z,{}),onClick:i})]}):null]})},on=t(67036),an=t(63026),ln=t(5293),cn=function(e){var n=e.codeReference,t=e.onClose,r=e.onLoadingChanged,i=(0,Ae.Gd)(),o=(0,ln.OT)(),l=(0,an.j)(n.filePath),c=(0,Ae.gp)(),u=Boolean(null===l||void 0===l?void 0:l.loading);(0,b.useEffect)((function(){r(u)}),[u,r]);var s=null;if(l){var d=l.attribution,f=l.loading,p=l.error,h="Assistant"===d;s=(0,a.BX)(k.G,{css:[Ve.messageContainer,f&&x.l0.px(16)],children:[f?(0,a.tZ)($e.Z,{}):null,(0,a.BX)(k.G,{css:Ve.messageMarkdown,children:[(0,a.tZ)(Xe.J,{text:l.text,textColor:Fe.TV.foregroundDefault,codeComponent:Je.K2}),h&&"string"===typeof p?(0,a.tZ)(k.G,{css:Ve.messageError,children:(0,a.tZ)(Le.xv,{css:Ve.messageText,multiline:!0,children:p})}):null]})]})}return(0,a.BX)(k.G,{children:[(0,a.BX)(k.G,{css:Ve.headerContainer,children:[(0,a.tZ)(k.G,{css:Ve.authorContainer,children:(0,a.tZ)(Ne.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"EXPLAIN",smallAvatar:!0})}),(0,a.tZ)(U.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(F.Z,{})})]}),s,s&&!c?(0,a.BX)(k.G,{css:Ve.messageActionContainer,children:[(0,a.tZ)(Ue.zx,{colorway:"primary",text:"Reply in Chat",iconLeft:(0,a.tZ)(on.Z,{}),onClick:function(){(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!0,action:"reply-in-chat",language:n.language}),o()}}),(0,a.tZ)(Ue.zx,{text:"Regenerate",iconLeft:(0,a.tZ)(M.Z,{}),onClick:function(){l&&((0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!0,action:"refresh",language:n.language}),i(l.id))}})]}):null]})},un=t(21084),sn=t(72669),dn=P.Py.define(),fn=P.Py.define(),pn=t(28229),hn=t(77637),vn=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,o=(0,hn.Z)(e,["caretSize"]);return(0,a.BX)("svg",(0,i.Z)((0,r.Z)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("mask",{id:"outline",fill:"white",children:(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,a.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,a.tZ)("defs",{children:(0,a.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,a.tZ)("stop",{stopColor:"#57ABFF"}),(0,a.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},gn=function(e){var n=e.children,t=e.onEscapeKey,r=e.caretPosition,i=[12,8];switch((0,pn.Z)().preferences.fontSize){case 10:i=[8,6];break;case 14:i=[10,6];break;case 18:i=[12,8];break;case 24:i=[14,10]}return(0,a.BX)(k.G,{css:Ve.inlinePocketContainer,onKeyDown:function(e){"Escape"===e.key&&t()},children:[null!==r&&(0,a.tZ)("span",{css:[Ve.caretWrapper,x.l0.top(-i[1]),x.l0.left(r)],children:(0,a.tZ)(vn,{caretSize:i})}),(0,a.tZ)(k.G,{css:Ve.inlinePocketWrapper,children:n})]})},mn=t(87042);function yn(e){var n=e.state.field(Zn);if(n){var t=n.codeReference,r=n.type;return"explainCode"===r?(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,action:"close",language:t.language}):"generateCode"===r?(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"close",language:t.language}):"transformCode"===r&&(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"close",language:t.language}),e.dispatch({effects:dn.of(null)}),!0}return!1}var Zn=P.QQ.define({create:function(){return null},update:function(e,n){if((0,A.j)(n,dn,(function(n){e=n.value?{codeReference:n.value.codeReference,type:n.value.type,loading:n.value.loading,data:n.value.data}:null})),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i.Z)((0,r.Z)({},e),{codeReference:(0,i.Z)((0,r.Z)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[P.Wl.highest(_.$f.of([{key:"Escape",run:yn}])),mn.gb.from(e,(function(e){var n;return null!==(n=(null===e||void 0===e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==n?n:null}))]}}),bn=P.QQ.define({create:function(){return null},update:function(e,n){if(!n.state.field(Zn))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(dn)&&(e=null),l.is(fn)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),wn=t(59066),xn={explainCode:{intent:"EXPLAIN",userFriendlyName:"Explain Code",activationContext:"inline_explain_code"},generateCode:{intent:"GENERATE",userFriendlyName:"Generate Code",activationContext:"inline_generate_code"},editCode:{intent:"TRANSFORM",userFriendlyName:"Edit Code",activationContext:"inline_edit_code"}},kn=function(e){var n=e.data,t=e.onClose,r=n.from,i=xn[r],o=i.intent,l=i.userFriendlyName,c=i.activationContext;return(0,a.BX)(k.G,{children:[(0,a.BX)(k.G,{css:Ve.headerContainer,children:[(0,a.tZ)(k.G,{css:Ve.authorContainer,children:(0,a.tZ)(Ne.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:o,smallAvatar:!0})}),(0,a.tZ)(U.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(F.Z,{})})]}),(0,a.tZ)(k.G,{css:Ve.messageContainer,children:(0,a.tZ)(k.G,{css:Ve.messageMarkdown,children:(0,a.tZ)(Xe.J,{text:"Activate Ghostwriter to get access to ".concat(l," and other AI-powered features!"),textColor:x.TV.foregroundDefault,codeComponent:Je.K2})})}),(0,a.tZ)(k.G,{css:Ve.messageActionContainer,children:(0,a.tZ)(wn.Z,{context:c})})]})},Cn=t(81202),Sn=t.n(Cn),Tn=t(10103);function En(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ae.r6)(n);return{code:i,filePath:n,fileVersion:t,range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o}}var Rn=new sn.Jf((function(e){var n=e.codeReference,t=e.type,r=e.data,i=e.autoFocus,o=e.insertCode,l=e.replaceHighlightedAreaWithCode,c=e.updateCodeBlock,u=e.onClose,s=e.getCaretPosition,d=e.onLoadingChanged,f=function(){(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,action:"close",language:n.language}),u()},p=function(){(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"close",language:n.language}),u()},h=function(){(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"close",language:n.language}),u()},v=null,g=s(n);return"explainCode"===t?v=(0,a.tZ)(gn,{caretPosition:g,onEscapeKey:f,children:(0,a.tZ)(cn,{codeReference:n,onClose:f,onLoadingChanged:d})}):"generateCode"===t?v=(0,a.tZ)(gn,{caretPosition:g,onEscapeKey:p,children:(0,a.tZ)(nn,{codeReference:n,onClose:p,insertCode:o,autoFocus:i,updateCodeBlock:c,onLoadingChanged:d})}):"transformCode"===t?v=(0,a.tZ)(gn,{caretPosition:g,onEscapeKey:h,children:(0,a.tZ)(rn,{codeReference:n,onClose:h,autoFocus:i,replaceHighlightedAreaWithCode:l,updateCodeBlock:c,onLoadingChanged:d})}):"ghostwriterPaywall"===t&&(v=(0,a.tZ)(gn,{caretPosition:g,onEscapeKey:u,children:(0,a.tZ)(kn,{onClose:u,data:r})})),(0,a.tZ)(W.Z,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:v})})),In=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e){var r,i=e.codeReference,o=e.type,a=e.data;return(0,se.Z)(this,t),(r=n.call(this)).codeReference=i,r.type=o,r.data=a,r}var o=t.prototype;return o.toDOM=function(e){var n=this,t=n.codeReference,o=n.type,a=n.data,l=Rn.create({codeReference:t,data:a,type:o,onClose:function(){e.dispatch({effects:dn.of(null)}),e.dispatch({selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()},insertCode:function(n){var t=e.state.selection.main.head;e.dispatch({changes:{from:t,to:t,insert:n},selection:{anchor:t+n.length},scrollIntoView:!0,effects:dn.of(null),annotations:Tn.Z.of(!0)}),e.hasFocus||e.focus()},replaceHighlightedAreaWithCode:function(n){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:dn.of(null),annotations:Tn.Z.of(!0)}),e.hasFocus||e.focus()},updateCodeBlock:function(n){e.dispatch({effects:fn.of(n)})},autoFocus:!0,getCaretPosition:function(n){var t,r=n.range.indexTo<=e.state.doc.length?null===(t=e.coordsAtPos(n.range.indexTo))||void 0===t?void 0:t.left:null,i=e.dom.getBoundingClientRect().left;return r&&i?r-i-6:null},onLoadingChanged:function(n){var t=e.state.field(Zn);t&&t.loading!==n&&e.dispatch({effects:dn.of((0,i.Z)((0,r.Z)({},t),{loading:n}))})}});l.className="cm-pocket-widget";var c=e.dom.querySelector(".cm-scroller"),u=e.dom.querySelector(".cm-gutters");return c&&u&&Dn(l,c,u),l},o.updateDOM=function(e){var n=this;return Rn.update(e,(function(e){return(0,r.Z)({},e,{codeReference:n.codeReference,type:n.type,data:n.data,autoFocus:!1})})),!0},o.eq=function(e){return this.codeReference.range.indexFrom===e.codeReference.range.indexFrom&&this.codeReference.range.indexTo===e.codeReference.range.indexTo&&this.codeReference.filePath===e.codeReference.filePath&&this.codeReference.fileVersion===e.codeReference.fileVersion&&this.type===e.type&&Sn()(this.data,e.data)},t}(_.l9);function Dn(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var Gn=_.tk.updateListener.of((function(e){(0,A.j)(e,un.R,(function(){var n=(0,o.Z)(e.view.dom.querySelectorAll(".cm-pocket-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){Dn(c.value,t,r)}}catch(s){a=!0,l=s}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),Pn=t(18180),_n=t(89047);function Bn(e){var n=e.view,t=e.filePath,r=e.openFile,i=(0,ne.Z)(t),o=b.useRef(null),a=b.useRef(0),l=(0,re.Z)().fs,c=(0,y.Z)(b.useState(null),2),u=c[0],s=c[1],d=(0,_e.d)({tablet:!1}),f=(0,Pe.P5)({controlName:"flag-ghostwriter-inline-ui",logFlagToAnalytics:!0}),p=(0,Pn.d)(),h=(0,Me.eD)(),v=(0,tn.Ef)(),g=(0,Ae.ql)(),m=b.useCallback((function(){s(null),n&&n.focus()}),[n]);b.useEffect((function(){var e=function(e){"Escape"===e.key&&m()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,u]),b.useEffect((function(){if(n&&u)return n.scrollDOM.addEventListener("scroll",m),function(){n.scrollDOM.removeEventListener("scroll",m)}}),[n,u,m]);var Z=(0,Q.Z)((function(){if(n&&u){var e=n.coordsAtPos(a.current);s((function(n){return e?{x:e.left,y:e.top}:n}))}}),{type:"throttle",wait:25}),w=b.useCallback(function(){var e=(0,I.Z)((function(e,a){var c,u,s,d,m,Z,b,w,x,k,C,S,T,E,P,B,A,U,L,N,X,F,O,M;function W(e,n,t){return H.apply(this,arguments)}function H(){return(H=(0,I.Z)((function(e,r,a){var l,u,d,f,p,h,v,g,m;return(0,D.__generator)(this,(function(Z){switch(Z.label){case 0:if(!i||!n)throw new Error("Expected client");return o.current&&i.notify.cancelRequest(o.current),o.current=i.generateId(),l=(0,Ie.s)(c.doc,s),[4,e(t,l,{id:o.current,tap:function(e){return(0,mn.SC)(n,e)}})];case 1:if(u=Z.sent(),o.current=null,"error"in u)throw new Error("Something went wrong fetching location: ".concat(u.error.message));return d=u.result,u.cancelled?[2]:d&&0!==d.length?(f=(0,y.Z)(d,1),p=f[0],h=p.uri,v=p.range,g=v.start,(m=i.documentUriToPath(h))!==t?a({path:m,line:g.line+1,col:g.character}):(0,Be.S)({view:n,line:g.line+1,col:g.character}),[2]):((0,Ge.J)(n,{message:r,offset:s}),[2])}}))}))).apply(this,arguments)}return(0,D.__generator)(this,(function(o){switch(o.label){case 0:if(!n)throw new Error("Expected view");switch(c=n.state,u=c.selection.main,s=u.head,(0,ee.j)(ee.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case R.D2.Cut:return[3,1];case R.D2.Copy:return[3,2];case R.D2.Paste:return[3,3];case R.D2.JumpToDefinition:return[3,8];case R.D2.JumpToTypeDefinition:return[3,10];case R.D2.JumpToImplementation:return[3,12];case R.D2.FindReferences:return[3,14];case R.D2.Rename:return[3,15];case R.D2.SelectAllOccurrences:return[3,16];case R.D2.CodeActions:return[3,17];case R.D2.ToggleBreakpoint:return[3,18];case R.D2.StartThread:return[3,19];case R.D2.ExplainCode:return[3,20];case R.D2.GenerateCode:return[3,21];case R.D2.TransformCode:return[3,22];case R.D2.CopyLinkToPos:return[3,23]}return[3,24];case 1:return d=c.doc.sliceString(u.from,u.to),(0,ie.Z)(d),n.dispatch(c.replaceSelection("")),[3,25];case 2:return m=c.doc.sliceString(u.from,u.to),(0,ie.Z)(m),[3,25];case 3:Z="",o.label=4;case 4:return o.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return Z=o.sent(),[3,7];case 6:return b=o.sent(),J.kg.error("CodeMirror context menu paste failed",{message:b.message}),[3,25];case 7:return(0,_n.l)({filePath:t,view:n,clipboardText:Z}),[3,25];case 8:if(!i)throw new Error("Expected client");return r?[4,(0,De.B)({offset:s,lspClient:i,openFile:r,view:n,newPane:Boolean(null===a||void 0===a?void 0:a.isCmdOrCtrl)})]:[3,25];case 9:return o.sent(),[3,25];case 10:if(!i)throw new Error("Expected client");return r?[4,W(i.request.findTypeDefinitions,"No type definition found",r)]:[3,25];case 11:return o.sent(),[3,25];case 12:if(!i)throw new Error("Expected client");return r?[4,W(i.request.findImplementations,"No implementation found",r)]:[3,25];case 13:return o.sent(),[3,25];case 14:return n.dispatch({effects:[Ee.hI.of(s)]}),[3,25];case 15:return n.dispatch({effects:[Ee.nD.of(s)]}),[3,25];case 16:if(c.selection.main.empty){if(!(w=c.wordAt(s)))return[2];n.dispatch({selection:w})}return(0,G.tm)(n),setTimeout((function(){return n.focus()})),[3,25];case 17:return(x=n.coordsAtPos(s))?(n.dispatch({effects:[ue.O.of(x)]}),[3,25]):[2];case 18:return k=c.doc.lineAt(s),xe(n,k.from),[3,25];case 19:return n.dispatch({effects:[Re.UQ.of(ce()())]}),[3,25];case 20:return f?(C=n.state.selection.main,S=l.getOTVersion(t),T=En(n.state,t,S),p?(g({chatMessage:{type:"explainCode",codeReference:T}}),n.dispatch({selection:{anchor:C.to},effects:[dn.of({codeReference:T,type:"explainCode"}),_.tk.scrollIntoView(C.to,{y:"center"})]}),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!1,action:"submit",language:T.language}),[3,25]):(n.dispatch({selection:{anchor:C.to},effects:[dn.of({codeReference:T,type:"ghostwriterPaywall",data:{from:"explainCode"}}),_.tk.scrollIntoView(C.to,{y:"center"})]}),[3,25])):(E=n.state.selection.main,n.dispatch({effects:[V.of(E),_.tk.scrollIntoView(E.to)]}),[3,25]);case 21:if(f){if(h(t),P=n.state.selection.main,B=l.getOTVersion(t),A=En(n.state,t,B),!p)return n.dispatch({selection:{anchor:P.to},effects:[dn.of({codeReference:A,type:"ghostwriterPaywall",data:{from:"generateCode"}}),_.tk.scrollIntoView(P.to,{y:"center"})]}),[3,25];n.dispatch({selection:{anchor:P.to},effects:[dn.of({codeReference:A,type:"generateCode"}),_.tk.scrollIntoView(P.to,{y:"center"})]})}else n.dispatch({effects:q.of(!0)});return[3,25];case 22:if(f){if(v(t),U=c.selection.main,L=l.getOTVersion(t),N=En(n.state,t,L),!p)return n.dispatch({selection:{anchor:U.to},effects:[dn.of({codeReference:N,type:"ghostwriterPaywall",data:{from:"editCode"}}),_.tk.scrollIntoView(U.to,{y:"center"})]}),[3,25];n.dispatch({selection:{anchor:U.to},effects:[dn.of({type:"transformCode",codeReference:N}),_.tk.scrollIntoView(U.to,{y:"center"})]})}else n.dispatch({effects:K.of(!0)});return[3,25];case 23:return X=(0,Ie.s)(c.doc,s),F=X.line,O=X.character,M=(0,oe.dr)({path:t,line:F+1,col:O}),(0,ie.Z)(M),[3,25];case 24:throw new Error("Unexpected action: ".concat(e));case 25:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[n,i,t,r,f,l,g,h,v]),x=(0,y.Z)(b.useState(!1),2),k=x[0],C=x[1];(0,B.Z)({view:n,initialExtension:_.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&C("undefined"!==typeof e.view.state.field(ke,!1))}))});var S=(0,te.Z)(i),T=b.useMemo((function(){if(!n)return[];var e=[];return S&&(S.isFindDefinitionSupported&&e.push(R.D2.JumpToDefinition),S.isFindTypeDefinitionSupported&&e.push(R.D2.JumpToTypeDefinition),S.isFindImplementationSupported&&e.push(R.D2.JumpToImplementation),(S.isFindDefinitionSupported||S.isFindReferencesSupported)&&e.push(R.D2.FindReferences),S.isRenameSupported&&e.push(R.D2.Rename),S.isCodeActionsSupported&&e.push(R.D2.CodeActions)),e.push(R.D2.SelectAllOccurrences),e.push(R.JJ),e.push(R.D2.CopyLinkToPos),k&&e.push(R.D2.ToggleBreakpoint),e.push(R.D2.StartThread),e.push(R.D2.ExplainCode),e.push(R.D2.GenerateCode),e.push(R.D2.TransformCode),e.push(R.JJ),e.push(R.D2.Cut),e.push(R.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(R.D2.Paste),e}),[n,S,k]),E=(0,B.Z)({view:n});return b.useEffect((function(){if(n){var e=T.filter((function(e){return!(0,R.s3)(e)})).filter((function(e){return"keyboardShortcut"in R.Wo[e]})).filter((function(e){return e!==R.D2.Cut&&e!==R.D2.Copy&&e!==R.D2.Paste})).map((function(e){var n=R.Wo[e].keyboardShortcut,t={key:n.key,preventDefault:!0,run:function(){return w(e),!0}};return n.altKey&&(t.key="Alt-".concat(t.key)),n.shiftKey&&(t.key="Shift-".concat(t.key)),n.cmdOrCtrlKey&&(t.key="Mod-".concat(t.key)),t}));return n.dispatch({effects:E.reconfigure(_.$f.of(e))}),function(){n.dispatch({effects:E.reconfigure([])})}}}),[n,w,T,E]),{onAction:w,actions:T,contextMenuCoords:u,onContextMenu:function(e){if(!d&&n){e.preventDefault();var r=e.clientX,i=e.clientY,o=n.state.selection.main,l=n.posAtCoords({x:r,y:i}),c=n.state.doc.length,u=null===l?c:l;if(a.current=u,u<o.from||u>o.to){var f=P.jT.cursor(u);n.dispatch({selection:f})}var p=(0,ae.r6)(t);(0,ee.j)(ee.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:p}),s({x:r,y:i})}},closeMenu:m,resizeRef:Z}}var An=t(73872),Un=t(68825);function Ln(e){var n=e.view,t=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,re.Z)().fs,a=(0,Un.Z)(),l=(0,An.Z)(t.mainClient),c=(0,B.Z)({view:n});b.useEffect((function(){if(!i&&a&&l&&n){var e=(0,pe.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),t=function(e,n,t,r){var i,o=[];o.push(n.breakpoints.subscribe((function(n){var r=n.get(t);e.dispatch({effects:ve.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=_.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(ge)){var o=(0,pe.om)(t);if(!o)throw new Error("Expected relative path");n.toggleBreakpoint(t,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(n.stackFrames.subscribe((function(n){var r=Se(n,t);e.dispatch({effects:ye.of(r)})})));var l=(0,_.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(ke)},initialSpacer:function(){return he},domEventHandlers:{mousedown:function(e,n){return xe(e,n.from),!0}}}),c=(null===(i=n.breakpoints.current.get(t))||void 0===i?void 0:i.map((function(e){return e.line})))||[],u=[P.Wl.highest(l),ke.init((function(e){return Te(c,e)})),a,Ze.init((function(){return Se(n.stackFrames.current,t)})),we,Ce];return{extensions:u,dispose:function(){return o.forEach((function(e){return e()}))}}}(n,l,e,o),u=t.extensions,s=t.dispose;return n.dispatch({effects:c.reconfigure(u)}),function(){n.dispatch({effects:c.reconfigure([])}),s()}}}),[l,n,a,r,i,o,c])}var Nn=t(57866),Xn=t(24025);var Fn=function(){return(0,a.tZ)("div",{css:[x.l0.p(16)],children:(0,a.BX)(Xn.Z,{viewBox:"0 0 100 10",backgroundColor:x.TV.backgroundHigher,foregroundColor:x.TV.backgroundHighest,speed:1.5,children:[(0,a.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,a.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})},On=t(25198),Mn=t(76735),Wn=t(43119),Hn=t(71440),zn=t(24635);function Vn(){var e=(0,Wn.Z)(["\n  query CodeExplanation {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Vn=function(){return e},e}var jn={},qn=(0,Hn.Ps)(Vn());var Yn=t(49880),Kn=t(74121),$n=t(51631),Qn=t(10422),Jn=t(9608),et=t(50216);function nt(){var e=(0,Wn.Z)(["\n  query ExplainCode($code: String!, $language: String!, $replId: String) {\n    explainCode(code: $code, language: $language, replId: $replId) {\n      ... on ExplainCodeResult {\n        id\n        explanation\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nt=function(){return e},e}function tt(){var e=(0,Wn.Z)(["\n  mutation ExplainCodeCodexFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n        id\n        feedback\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return tt=function(){return e},e}var rt={},it=(0,Hn.Ps)(nt());var ot=(0,Hn.Ps)(tt());var at=t(48330),lt=t(12379),ct=function(){var e=(0,I.Z)((function(e){var n,t,r;return(0,D.__generator)(this,(function(i){switch(i.label){case 0:return n=e.code,t=e.language,[4,null===lt.l||void 0===lt.l?void 0:lt.l.query({query:it,variables:{code:n,language:t}})];case 1:return"ExplainCodeResult"===(null===(r=i.sent())||void 0===r?void 0:r.data.explainCode.__typename)?[2,r.data.explainCode.explanation]:[2]}}))}));return function(n){return e.apply(this,arguments)}}();function ut(e){var n,t,i,o,a,l,c,u,s,d,f,p,h,v,g,m=e.language,Z=e.code,b=(0,at.Z)(),w=function(e){var n=(0,r.Z)({},rt,e);return zn.a(it,n)}({fetchPolicy:"no-cache",variables:{code:Z,language:m,replId:b},skip:!m||!Z,notifyOnNetworkStatusChange:!0}),x=(0,y.Z)(function(e){var n=(0,r.Z)({},rt,e);return et.D(ot,n)}(),2),k=x[0],C=x[1],S=function(){var e=(0,I.Z)((function(e){var n,t;return(0,D.__generator)(this,(function(r){return"ExplainCodeResult"!==(null===(n=w.data)||void 0===n?void 0:n.explainCode.__typename)||w.loading||C.loading||(k({variables:{input:{feedback:e,inferenceClass:$n.Sg.Explanation,inferenceId:null===(t=w.data)||void 0===t?void 0:t.explainCode.id}}}),(0,ee.j)(ee.U3.CODEX_FEEDBACK_SUBMITTED,{feature:"explanation",language:m,feedback:e})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),T="ExplainCodeResult"===(null===(n=w.data)||void 0===n||null===(t=n.explainCode)||void 0===t?void 0:t.__typename)?w.data.explainCode.explanation:void 0,E="ExplainCodeResult"===(null===(i=w.data)||void 0===i||null===(o=i.explainCode)||void 0===o?void 0:o.__typename)?null===(a=w.data)||void 0===a||null===(l=a.explainCode)||void 0===l?void 0:l.id:void 0,R="UserError"===(null===(c=w.data)||void 0===c||null===(u=c.explainCode)||void 0===u?void 0:u.__typename)||"UnauthorizedError"===(null===(s=w.data)||void 0===s||null===(d=s.explainCode)||void 0===d?void 0:d.__typename)?w.data.explainCode.message:null,G="ExplainCodeResult"===(null===(f=w.data)||void 0===f||null===(p=f.explainCode)||void 0===p?void 0:p.__typename)&&"CodexFeedback2"===(null===(h=C.data)||void 0===h||null===(v=h.giveCodexFeedback2)||void 0===v?void 0:v.__typename)&&w.data.explainCode.id===(null===(g=C.data.giveCodexFeedback2)||void 0===g?void 0:g.id)?C.data.giveCodexFeedback2.feedback:null;return{id:E,getCodeExplanation:ct,loading:w.loading,explanation:T,errorMessage:R,refetchExplanation:(0,I.Z)((function(){return(0,D.__generator)(this,(function(e){return(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,action:"refresh",language:m}),[2,w.refetch()]}))})),giveCodexFeedback:S,codexFeedback:G}}function st(e){var n=e.dom,t=e.filePath,r=e.code;return(0,Qn.createPortal)((0,a.tZ)(dt,{code:r,filePath:t}),n)}function dt(e){var n,t,i=e.filePath,o=e.code,l=function(){null===g||void 0===g||g.dispatch({effects:[V.of(null)]})},c=(0,Jn.U)(i),u=ut({code:o,language:c}),s=u.id,d=u.explanation,f=u.errorMessage,p=u.loading,h=u.refetchExplanation,v=null,g=(0,Kn.uN)(),m=function(e){var n=(0,r.Z)({},jn,e);return zn.a(qn,n)}(),y=m.data,Z=m.loading,w="UserPowerUpsTypes"===(null===y||void 0===y||null===(n=y.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===y||void 0===y||null===(t=y.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active);if(b.useEffect((function(){w&&(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,action:"submit",language:c})}),[c,w]),Z)return null;if(p)v=(0,a.tZ)(Fn,{});else if(w)v=d&&s?(0,a.BX)("div",{css:[x.l0.p(8),x.l0.display.grid,{gridGap:x.TV.space8}],children:[(0,a.tZ)("pre",{css:{fontFamily:x.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:x.TV.lineHeightDefault,fontSize:x.TV.fontSizeDefault,color:x.TV.foregroundDefault,backgroundColor:x.TV.backgroundHighest,padding:x.TV.space8,borderRadius:x.TV.borderRadius8},children:d}),p?null:(0,a.tZ)(Yn.Z,{inferenceId:s,language:c,inferenceClass:$n.Sg.Explanation})]}):(0,a.tZ)(k.G,{css:[x.l0.p(8)],children:(0,a.tZ)(On.E,{colorway:"negative",icon:(0,a.tZ)(Mn.Z,{}),text:null!==f&&void 0!==f?f:"Oops! An unexpected error occurred. Please try again or contact support."})});else if(!w&&!p)return(0,a.tZ)(z,{title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestClose:l,width:320,children:(0,a.BX)(k.G,{css:[x.l0.colWithGap(12),x.l0.p(8)],children:[(0,a.tZ)(Le.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Explain Code and other AI-powered features!"}),(0,a.tZ)(k.G,{css:{alignSelf:"center"},children:(0,a.tZ)(wn.Z,{context:"explain_code_modal"})})]})});return(0,a.tZ)(z,{dataCy:"explain-code-modal",title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestNewInference:h,onRequestClose:l,width:420,children:v})}var ft=t(6394),pt=t(13233),ht=t(66539),vt=t(50575),gt=t(49085),mt=t(1809),yt=t(42914),Zt=t(71540),bt=t(92471),wt=t(9125);function xt(){var e=(0,Wn.Z)(["\n  query GenerateCode($input: GenerateCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    generateCode(input: $input) {\n      ... on GenerateCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return xt=function(){return e},e}function kt(){var e=(0,Wn.Z)(["\n  query GenerateCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return kt=function(){return e},e}var Ct={},St=(0,Hn.Ps)(xt());var Tt=(0,Hn.Ps)(kt());function Et(e){var n,t,i=e.filePath,o=e.selectedCode,l=e.onRequestClose,u=e.insertCode,s=(0,at.Z)(),d=(0,y.Z)(b.useState(o),2),f=d[0],p=d[1],h=(0,y.Z)(b.useState(""),2),v=h[0],g=h[1],m=(0,y.Z)(b.useState(!1),2),Z=m[0],w=m[1],C=b.useRef(null),S=(0,y.Z)(function(e){var n=(0,r.Z)({},Ct,e);return wt.t(St,n)}({fetchPolicy:"no-cache"}),2),T=S[0],E=S[1],R=E.called,I=E.data,D=E.error,G=E.loading,P=function(e){var n=(0,r.Z)({},Ct,e);return zn.a(Tt,n)}(),_=P.data,B=P.loading,A="UserPowerUpsTypes"===(null===_||void 0===_||null===(n=_.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===_||void 0===_||null===(t=_.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active),N=(0,Jn.S)(i),X=function(){if(!G&&""!==f){var e=f===v;(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,action:e?"refresh":"submit",language:N}),g(f),T({variables:{input:{language:N,prompt:f,replId:s}}})}},F=(0,pt.Z)().showConfirm;if(B)return null;if(!A)return(0,a.tZ)(z,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:l,width:320,children:(0,a.BX)(k.G,{css:[x.l0.colWithGap(12),x.l0.p(8)],children:[(0,a.tZ)(Le.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Generate Code and other AI-powered features!"}),(0,a.tZ)(k.G,{css:{alignSelf:"center"},children:(0,a.tZ)(wn.Z,{context:"generate_code_modal"})})]})});var O=null,M=null===I||void 0===I?void 0:I.generateCode.__typename;if(G)O=(0,a.tZ)(Fn,{});else if(D||"UserError"===M||"UnauthorizedError"===M){var W,H;O=(0,a.tZ)(k.G,{children:(0,a.tZ)(On.E,{colorway:"negative",icon:(0,a.tZ)(Mn.Z,{}),text:"UserError"!==M&&"UnauthorizedError"!==M||!(null===I||void 0===I||null===(W=I.generateCode)||void 0===W?void 0:W.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===I||void 0===I||null===(H=I.generateCode)||void 0===H?void 0:H.message})})}else if("GenerateCodeResult"===M&&null!=(null===I||void 0===I?void 0:I.generateCode)){var V,j=I.generateCode,q=j.code,Y=j.id;if(null==q||""===q)O=(0,a.tZ)(k.G,{children:(0,a.tZ)(On.E,{colorway:"warning",icon:(0,a.tZ)(Zt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else O=(0,a.BX)(k.G,{css:[x.l0.colWithGap(8)],children:[(0,a.BX)(L.T,{background:"default",css:[x.l0.py(8),x.l0.px(8),x.l0.borderRadius(8)],children:[(0,a.tZ)(k.G,{dataCy:"generate-code-modal-generation-preview",css:[x.l0.maxHeight(300),x.l0.overflowY("auto")],children:(0,a.tZ)(ft.Z,{code:q,filePath:i})}),(0,a.BX)(k.G,{css:[x.l0.flex.row,x.l0.justify.spaceBetween,x.l0.align.center,x.l0.pt(8),x.l0.px(4)],children:[(0,a.BX)(k.G,{css:[x.l0.rowWithGap(4),x.l0.align.center],children:[(0,a.tZ)(c.Z,{path:i,size:16}),(0,a.tZ)(Le.xv,{color:"dimmer",css:[{textTransform:"capitalize"},x.l0.fontSize(12)],children:N})]}),(0,a.BX)(k.G,{css:x.l0.rowWithGap(8),children:[(0,a.tZ)(Ue.zx,{small:!0,iconLeft:(0,a.tZ)(gt.Z,{}),text:"Copy to clipboard",onClick:function(){(0,ie.Z)(q).then((function(){F("Code copied to clipboard")})),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",action:"copied-to-clipboard",language:N})}}),(0,a.tZ)(Ue.zx,{dataCy:"generate-code-modal-insert-button",small:!0,iconLeft:(0,a.tZ)(yt.Z,{}),text:"Insert in editor",colorway:"primary",onClick:function(){u(q),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"generation",action:"inserted-in-editor",language:N})}}),(null===I||void 0===I||null===(V=I.currentUser)||void 0===V?void 0:V.isAdmin)?(0,a.tZ)(ht.u,{tooltip:(0,a.tZ)(k.G,{children:(0,a.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(I.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,a.tZ)(U.h,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,a.tZ)(vt.Z,{})})}):null]})]})]}),(0,a.tZ)(k.G,{css:[x.l0.flex.row,x.l0.align.center,x.l0.justify.spaceBetween],children:(0,a.tZ)(Yn.Z,{inferenceId:Y,language:N,inferenceClass:$n.Sg.Generation})})]})}return(0,a.tZ)(z,{dataCy:"generate-code-modal",title:"Generate Code",onRequestClose:l,width:500,children:(0,a.BX)(k.G,{css:[x.l0.p(8),x.l0.colWithGap(8)],children:[(0,a.BX)(k.G,{tag:"form",onSubmit:function(e){e.preventDefault(),X()},css:[x.l0.rowWithGap(8)],children:[(0,a.tZ)(Ye.II,{autoFocus:!0,dataCy:"generate-code-modal-prompt-input",placeholder:'Write a prompt (e.g. "draw a square")',value:f,onChange:function(e){return n=e.target.value,Z||((0,ee.j)(ee.U3.CODEX_FEATURE_USED,{action:"prompt-written",feature:"generation",language:N}),w(!0)),void p(n);var n},ref:C,maxLength:1e3,onKeyDown:function(e){"Escape"===e.key&&l(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),X())}}),(0,a.tZ)(Ue.zx,{text:"Generate",dataCy:"generate-code-modal-submit-button",colorway:"primary",disabled:G||""===f,type:"submit",iconRight:!G&&R?(0,a.tZ)(bt.Z,{}):(0,a.tZ)(mt.Z,{})})]}),O]})})}function Rt(e){var n=e.dom,t=(0,hn.Z)(e,["dom"]);return Qn.createPortal((0,a.tZ)(Et,(0,r.Z)({},t)),n)}var It=t(38556);function Dt(){var e=(0,Wn.Z)(["\n  query TransformCode($input: TransformCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    transformCode(input: $input) {\n      ... on TransformCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return Dt=function(){return e},e}function Gt(){var e=(0,Wn.Z)(["\n  query TransformCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Gt=function(){return e},e}var Pt={},_t=(0,Hn.Ps)(Dt());var Bt=(0,Hn.Ps)(Gt());function At(e){var n,t,i=e.filePath,o=e.selectedCode,l=e.onRequestClose,u=e.replaceCode,s=(0,at.Z)(),d=(0,pt.Z)(),f=d.showError,p=d.showConfirm,h=(0,y.Z)(b.useState(""),2),v=h[0],g=h[1],m=(0,y.Z)(b.useState(""),2),Z=m[0],w=m[1],C=(0,y.Z)(b.useState(!1),2),S=C[0],T=C[1],E=b.useRef(null),R=(0,y.Z)(function(e){var n=(0,r.Z)({},Pt,e);return wt.t(_t,n)}({fetchPolicy:"no-cache",onError:function(e){return f(e.message)}}),2),I=R[0],D=R[1],G=D.called,P=D.data,_=D.error,B=D.loading,A=function(e){var n=(0,r.Z)({},Pt,e);return zn.a(Bt,n)}(),N=A.data,X=A.loading,F="UserPowerUpsTypes"===(null===N||void 0===N||null===(n=N.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===N||void 0===N||null===(t=N.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active),O=B,M=(0,Jn.S)(i),W=function(){if(!O&&""!==v){var e=v===Z;(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",isRetry:e,action:e?"refresh":"submit",language:M}),w(v),I({variables:{input:{input:o,language:M,prompt:v,replId:s}}})}},H=null===P||void 0===P?void 0:P.transformCode.__typename,V=_||"UserError"===H||"UnauthorizedError"===H;if(X)return null;if(!F)return(0,a.tZ)(z,{title:"Edit Code",newInferenceAlt:"Edit your code",onRequestClose:l,width:320,children:(0,a.BX)(k.G,{css:[x.l0.colWithGap(12),x.l0.p(8)],children:[(0,a.tZ)(Le.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Edit Code and other AI-powered features!"}),(0,a.tZ)(k.G,{css:{alignSelf:"center"},children:(0,a.tZ)(wn.Z,{context:"transform_code_modal"})})]})});var j=null;if(O)j=(0,a.tZ)(Fn,{});else if(V){var q,Y;j=(0,a.tZ)(k.G,{children:(0,a.tZ)(On.E,{colorway:"negative",icon:(0,a.tZ)(Mn.Z,{}),text:"UserError"!==H&&"UnauthorizedError"!==H||!(null===P||void 0===P||null===(q=P.transformCode)||void 0===q?void 0:q.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===P||void 0===P||null===(Y=P.transformCode)||void 0===Y?void 0:Y.message})})}else if("ServiceUnavailable"===H)j=(0,a.tZ)(k.G,{children:(0,a.tZ)(On.E,{colorway:"warning",icon:(0,a.tZ)(Zt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else if("TransformCodeResult"===H&&null!=P){var K,$=P.transformCode,Q=$.code,J=$.id;if(null==Q||""===Q)j=(0,a.tZ)(k.G,{children:(0,a.tZ)(On.E,{colorway:"warning",icon:(0,a.tZ)(Zt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else j=(0,a.BX)(k.G,{css:[x.l0.colWithGap(8)],children:[(0,a.BX)(L.T,{background:"default",css:[x.l0.py(8),x.l0.px(4),x.l0.borderRadius(8)],children:[(0,a.tZ)(k.G,{dataCy:"transform-code-modal-generation-preview",css:[x.l0.maxHeight(300),x.l0.overflowY("auto")],children:(0,a.tZ)(ft.Z,{code:Q,filePath:i})}),(0,a.BX)(k.G,{css:[x.l0.flex.row,x.l0.justify.spaceBetween,x.l0.align.center,x.l0.pt(8),x.l0.px(4)],children:[(0,a.BX)(k.G,{css:[x.l0.rowWithGap(4),x.l0.align.center],children:[(0,a.tZ)(c.Z,{path:i,size:16}),(0,a.tZ)(Le.xv,{color:"dimmer",css:[{textTransform:"capitalize"},x.l0.fontSize(12)],children:M})]}),(0,a.BX)(k.G,{css:x.l0.rowWithGap(8),children:[(0,a.tZ)(Ue.zx,{iconLeft:(0,a.tZ)(gt.Z,{}),text:"Copy to clipboard",onClick:function(){(0,ie.Z)(Q).then((function(){p("Code copied to clipboard")})),(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"copied-to-clipboard",language:M})},small:!0}),(0,a.tZ)(Ue.zx,{dataCy:"transform-code-modal-replace-button",iconLeft:(0,a.tZ)(It.Z,{}),text:"Replace selection",colorway:"primary",small:!0,onClick:function(){try{u(Q)}catch(e){f("Couldn't replace code. Please make sure you don't edit your selection.")}(0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"replaced-selection-in-editor",language:M})}}),(null===P||void 0===P||null===(K=P.currentUser)||void 0===K?void 0:K.isAdmin)?(0,a.tZ)(ht.u,{tooltip:(0,a.tZ)(k.G,{children:(0,a.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(P.transformCode.metadata),null," ")})}),placement:"bottom",children:(0,a.tZ)(U.h,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,a.tZ)(vt.Z,{})})}):null]})]})]}),(0,a.tZ)(k.G,{css:[x.l0.flex.row,x.l0.align.baseline,x.l0.justify.spaceBetween],children:(0,a.tZ)(Yn.Z,{inferenceId:J,language:M,inferenceClass:$n.Sg.Transformation})})]})}else O||_||(j=null);return(0,a.tZ)(z,{dataCy:"transform-code-modal",title:"Edit Code",onRequestClose:l,width:500,children:(0,a.BX)(k.G,{css:[x.l0.p(8),x.l0.colWithGap(8)],children:[(0,a.BX)(k.G,{tag:"form",onSubmit:function(e){e.preventDefault(),W()},css:[x.l0.rowWithGap(8)],children:[(0,a.tZ)(Ye.II,{dataCy:"transform-code-modal-prompt-input",autoFocus:!0,placeholder:'Write a prompt (e.g. rename all variables to "foo")',value:v,onChange:function(e){return n=e.target.value,S||((0,ee.j)(ee.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"prompt-written",language:M}),T(!0)),void g(n);var n},ref:E,onKeyDown:function(e){"Escape"===e.key&&l(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),W())}}),(0,a.tZ)(Ue.zx,{dataCy:"transform-code-modal-submit-button",text:"Edit",colorway:"primary",disabled:O||""===v,type:"submit",iconRight:!O&&G?(0,a.tZ)(bt.Z,{}):(0,a.tZ)(mt.Z,{})})]}),j]})})}function Ut(e){var n=e.dom,t=(0,hn.Z)(e,["dom"]);return Qn.createPortal((0,a.tZ)(At,(0,r.Z)({},t)),n)}var Lt=t(49129),Nt=t(47434),Xt=t(12372),Ft=t(20293),Ot=t(39799),Mt=t(57913);function Wt(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var Ht=P.Py.define();var zt=t(63064),Vt=t(86763),jt=t.n(Vt),qt=t(42256),Yt=t(94716),Kt=t(57388),$t=t(57786),Qt=t(79249);function Jt(e){return e>420?"large":"small"}var er=k.K.div,nr=(0,ze.X)({root:[x.l0.rowWithGap(8),x.l0.px(4),x.l0.py(8),{borderBottom:"1px solid",borderColor:x.TV.outlineDimmest}],panelButtonWrapper:[x.l0.center,x.l0.height(32)],content:[x.l0.display.grid,x.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:x.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[x.l0.position.absolute,x.l0.top(0),x.l0.right(0),x.l0.height("100%"),x.l0.center,x.l0.pr(4)],inputControlsSmall:[x.l0.colWithGap(8),x.l0.flex.growAndShrink(1)],searchInputWrapper:[x.l0.position.relative,{gridArea:"search"}],searchControls:[x.l0.display.flex,x.l0.align.center,x.l0.rowWithGap(8),x.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[x.l0.display.flex,x.l0.align.center,x.l0.rowWithGap(8),x.l0.flex.wrap,{gridArea:"replace-controls"}]});function tr(e){var n=e.view,t=function(){if(!n)throw new Error("Expected view");(0,G.g)(n);var e=n.state.selection.main;n.dispatch({effects:_.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),N<=1||D((function(n){if(null===n){var t=T.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n>=N?1:n+1}))},r=function(){if(!n)throw new Error("Expected view");(0,G.a7)(n);var e=n.state.selection.main;n.dispatch({effects:_.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),N<=1||D((function(n){if(null===n){var t=T.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n<=1?N||1:n-1}))},i=function(e){var t=e;return!!n&&(0,_.$1)(n,t,"search-panel")},o=(0,y.Z)(b.useState(!1),2),l=o[0],c=o[1],u=(0,y.Z)(b.useState(!1),2),s=u[0],f=u[1],p=(0,y.Z)(b.useState(!1),2),h=p[0],v=p[1],g=(0,y.Z)(b.useState(""),2),m=g[0],Z=g[1],w=(0,y.Z)(b.useState(""),2),x=w[0],C=w[1],S=(0,y.Z)(b.useState([]),2),T=S[0],E=S[1],R=(0,y.Z)(b.useState(null),2),I=R[0],D=R[1],B=(0,zt.Z)(),A=b.useRef(new G.Jb({search:""})),N=T.length,X=(0,Yt.Z)(T),O=b.useCallback((function(e){e.eq(A.current)||(Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp),A.current=e)}),[]),M=b.useCallback((function(){c(!0)}),[]),W=b.useMemo((function(){return jt()((function(e){B.current&&(E(Wt(A.current,e)),D(null))}),250)}),[B]),H=b.useMemo((function(){return jt()((function(e){if(B.current){var n=X.current.findIndex((function(n){return n.from<=e&&n.to>=e}));D(-1!==n?n+1:null)}}),250)}),[B,X]);b.useEffect((function(){return function(){W.cancel(),H.cancel()}}),[W,H]),function(e){var n=e.view,t=e.onDocChanged,r=e.onSearchQuery,i=e.onSelectionChanged,o=e.onExpandSearchPanel;b.useEffect((function(){n&&n.dispatch({effects:P.Py.appendConfig.of([_.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(G.ql)&&r(e.value),e.is(Ht)&&o()}))}))})),_.tk.updateListener.of((function(e){e.docChanged&&t(e.view.state.doc),e.selectionSet&&i(e.view.state.selection.main.anchor)}))])})}),[n,r,o,t,i])}({view:n,onSearchQuery:O,onSelectionChanged:H,onExpandSearchPanel:M,onDocChanged:W}),b.useEffect((function(){if(n){var e=(0,G.uP)(n.state);Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp),A.current=e}}),[n]),b.useEffect((function(){if(n){var e=new G.Jb({search:m,replace:x,caseSensitive:s,regexp:h}),t=A.current;if(!e.eq(t)){A.current=e,n.dispatch({effects:G.ql.of(e)});var r=Wt(e,n.state.doc);E(r);var i=n.state.selection.main.anchor,o=r.findIndex((function(e){return e.from<=i&&e.to>=i}));D(-1!==o?o+1:null)}}}),[n,m,x,s,h]);var z=(0,y.Z)(b.useState(Jt(0)),2),V=z[0],j=z[1],q=(0,Q.Z)((function(e){e.width&&j(Jt(e.width))}));if(!n)return null;var Y=N>0,K=m.length>0?"0 / 0":null,$=Y?"".concat(I||1," / ").concat(N):K,J=$?8*$.length:null,ee=(0,a.BX)(a.HY,{children:[(0,a.tZ)(Kt.Z,{alt:"Case sensitive",icon:(0,a.tZ)($t.Z,{}),checked:s,onClick:function(){f((function(e){return!e}))}}),(0,a.tZ)(Kt.Z,{alt:"Regular expressions",icon:(0,a.tZ)(d.Z,{}),checked:h,onClick:function(){v((function(e){return!e}))}})]}),ne=[nr.content];return"small"!==V&&l?ne.push(nr.contentExpanded):"small"===V&&l?ne.push(nr.contentExpandedSmall):"small"!==V||l||ne.push(nr.contentSmall),(0,a.tZ)(er,{ref:q,onKeyDown:function(e){i(e)&&e.preventDefault()},children:(0,a.BX)(L.T,{elevated:!0,css:nr.root,children:[(0,a.tZ)(k.G,{css:nr.panelButtonWrapper,children:(0,a.tZ)(U.h,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){c((function(e){return!e}))},children:(0,a.tZ)(Mt.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,a.BX)(k.G,{css:ne,children:[(0,a.BX)(k.G,{css:nr.searchInputWrapper,children:[(0,a.tZ)(Qt.h,{style:{padding:4,paddingRight:null!==J&&void 0!==J?J:void 0},placeholder:"Search",value:m,name:"search","main-field":"true",onKeyDown:function(e){(0,qt.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),e.shiftKey?r():t()))},onChange:function(e){Z(e)}}),$?(0,a.tZ)(k.G,{css:nr.matchLabel,children:(0,a.tZ)(Le.xv,{variant:"small",color:"dimmest",children:$})}):null]}),(0,a.BX)(k.G,{css:nr.searchControls,children:[(0,a.tZ)(U.h,{alt:"Previous",onClick:function(){r()},children:(0,a.tZ)(Mt.Z,{rotate:-90})}),(0,a.tZ)(U.h,{alt:"Next",onClick:function(){t()},children:(0,a.tZ)(Mt.Z,{rotate:90})}),(0,a.tZ)(Ue.zx,{text:"Select All",onClick:function(){(0,G.i3)(n),n.focus()}}),ee]}),l?(0,a.BX)(a.HY,{children:[(0,a.tZ)(k.G,{css:nr.replaceInputWrapper,children:(0,a.tZ)(Ye.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:x,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),(0,G.K9)(n)))},onChange:function(e){C(e.target.value)}})}),(0,a.BX)(k.G,{css:nr.replaceControls,children:[(0,a.tZ)(Ue.zx,{text:"Replace",onClick:function(){(0,G.K9)(n)}}),(0,a.tZ)(Ue.zx,{text:"Replace All",onClick:function(){(0,G.ko)(n)}})]})]}):null]}),(0,a.tZ)(k.G,{css:nr.panelButtonWrapper,children:(0,a.tZ)(U.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,G.N$)(n)},children:(0,a.tZ)(F.Z,{})})})]})})}function rr(e){var n=e.dom,t=e.view;return Qn.createPortal((0,a.tZ)(tr,{view:t}),n)}var ir=t(64642),or=t(62199),ar=t(57389),lr=t(53828);function cr(e,n,t,o){var a=(0,pt.Z)().showError,l=(0,at.Z)(),c=(0,lr.eR)({variables:{replId:l,path:e},onError:function(e){a(e.message)},skip:!o||n}),u=b.useMemo((function(){var o;return n||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(o=c.data.threadsByFile)||void 0===o?void 0:o.__typename)?{}:c.data.threadsByFile.threads.filter((function(n){return n.path===e&&(!t||!n.isResolved)})).reduce((function(e,n){return(0,i.Z)((0,r.Z)({},e),(0,ar.Z)({},n.id,n))}),{})}),[c.loading,c.data,c.error,e,n,t]);return u}var ur=t(89475),sr=t(91513),dr=t(57843),fr=t(56440),pr=t(28737);function hr(e){var n=e.view,t=e.filePath,i=e.enable,a=e.isLoading,l=function(e){return[P.Wl.highest((0,Re.zj)(f)),Re.cR,Re.OQ,Re.ZS,Re.PQ,_.tk.decorations.compute([Re.OQ,Re.ZS,Re.PQ],(function(e){var n=e.field(Re.OQ),t=e.field(Re.ZS),r=e.field(Re.PQ),i=t||Object.values(n).find((function(e){return e.id===r}));return _.p.set((0,o.Z)(Object.values(n)).map((function(e){var n=i&&e.id===i.id;return function(e,n,t,r,i){if(n===t)return null;var o=(0,y.Z)(r,2),a=o[0],l=o[1];return _.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)}(e.id,e.indexStart,e.indexEnd,m,n)})).filter((function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length})),!0)})),_.tk.decorations.compute([Re.OQ,Re.ZS,Re.PQ],(function(e){var n=e.field(Re.OQ),t=e.field(Re.ZS),r=e.field(Re.PQ),i=(0,o.Z)(Object.values(n)).concat((0,o.Z)(t?[t]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?_.p.set([_.p.widget({widget:new Re.nE(i.id,s),block:!0,side:1}).range(i.indexEnd)],!0):_.p.none})),_.tk.updateListener.of((function(e){(0,A.j)(e,un.R,(function(){var n=(0,o.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;(0,sr.L)(s,t,r)}}catch(d){a=!0,l=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),_.tk.updateListener.of((function(e){(0,A.j)(e,Re.eR,(function(t){var r=t.value,i=e.state.field(Re.OQ)[r];i&&(null===n||void 0===n||n.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[_.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},c=(0,y.Z)(b.useState({}),2),u=c[0],s=c[1],d=(0,B.Z)({view:n}),f=(0,dr.x)(),p=(0,h.Dv)(ur.Q);b.useEffect((function(){n&&p&&n.dispatch({effects:[Re.YM.of(p),Re.eR.of(p)]})}),[n,p]);var v=(0,pr.F)().theme,g=(0,y.Z)(b.useState([Fe.TV.accentPrimaryDimmest,Fe.TV.accentPrimaryDimmer]),2),m=g[0],Z=g[1];b.useEffect((function(){var e=v.values.global.accentPrimaryDimmest,n=(0,fr.w)(e),t="rgba(".concat(n.join(","),", 0.5)");Z([t,Fe.TV.accentPrimaryDimmer])}),[v]),b.useEffect((function(){if(n&&i)return n.dispatch({effects:d.reconfigure(l())}),function(){n.dispatch({effects:d.reconfigure([])})}}),[n,t,d,i]);return function(e,n,t,i){var o=(0,re.Z)().fs,a=(0,or.kL)(t),l=a.contentRef,c=a.loadedFile,u=a.transformSelectionRef;b.useEffect((function(){var a=!1,s=u.current,d=l.current;if(c&&s&&d&&!i&&n){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,or.Ft)({anchor:e,version:o.getOTVersion(t),transformSelection:s,content:d})}))).then((function(e){if(!a){var t=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return n.dispatch({effects:Re.qi.of(t.reduce((function(e,n){return e[n.id]=n,e}),{}))}),function(){a=!0,n&&n.dispatch({effects:Re.qi.of({})})}}})):n.dispatch({effects:Re.qi.of({})})}}),[e,n,c,o,u,l,t,i])}(cr(t,a,!0,i),n,t,a),{threadElements:u}}var vr=t(48306),gr=t.n(vr),mr=t(96351),yr=t(88132),Zr=t(58027),br=t(10452),wr=t(97318),xr=t(92674),kr=t.n(xr),Cr=t(9911),Sr=t(98150),Tr=t(9353),Er=t(11969),Rr=t(9247),Ir=t(57835),Dr=t(21371),Gr=t(46179),Pr=t(35301),_r=t(47518),Br=t(73785),Ar=t(57370),Ur=function(e){var n=e.isCreating,t=e.threadId,r=e.filePath,i=e.isResolved,o=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,s=void 0===u?function(){}:u,d=e.onResolveThread,f=void 0===d?function(){}:d,p=e.openThreadsInbox,v="Inbox",g="Next thread",m="Previous thread",y="Collapse",Z=cr(null===r?"":r,o,!0,!0),w=[12,8];switch((0,pn.Z)().preferences.fontSize){case 10:w=[8,6];break;case 14:w=[10,6];break;case 18:w=[12,8];break;case 24:w=[14,10]}var C=b.useMemo((function(){return Object.values(Z).sort((function(e,n){return e.indexStart-n.indexStart}))}),[Z]),S=b.useMemo((function(){return C.findIndex((function(e){return e.id===t}))}),[C,t]),T=(0,h.b9)(ur.Q),E=function(){var e=(0,I.Z)((function(){var e;return(0,D.__generator)(this,(function(n){return e=S===C.length-1?C[0].id:C[S+1].id,T(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,I.Z)((function(){var e;return(0,D.__generator)(this,(function(n){return e=0===S?C[C.length-1].id:C[S-1].id,T(e),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(L.T,{background:"root",css:[x.l0.flex.row,x.l0.align.center,x.l0.justify.spaceBetween,x.l0.position.relative,x.l0.px(12),x.l0.py(8),{borderBottomWidth:x.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:x.TV.outlineDimmest}],children:[null!==c&&(0,a.tZ)("span",{css:[x.l0.position.absolute,x.l0.top(-w[1]),x.l0.left(c),x.l0.height("fit-content"),x.l0.display.flex,x.l0.flex.row,x.l0.align.center],children:(0,a.tZ)(vn,{caretSize:w})}),(0,a.tZ)(Ue.zx,{iconLeft:(0,a.tZ)(Sr.Z,{}),onClick:function(){p()},text:v,small:!0}),C.length>1?(0,a.BX)(k.G,{css:[x.l0.flex.row,x.l0.align.center,x.l0.rowWithGap(4)],children:[(0,a.tZ)(U.h,{alt:m,onClick:R,children:(0,a.tZ)(Zr.Z,{})}),(0,a.BX)(Le.xv,{color:"dimmest",variant:"small",children:[S+1,"/",C.length]}),(0,a.tZ)(U.h,{alt:g,onClick:E,children:(0,a.tZ)(yr.Z,{})})]}):null,(0,a.BX)(k.G,{css:[x.l0.flex.row,x.l0.align.center,x.l0.rowWithGap(4)],children:[n||i||l?null:(0,a.tZ)(Ue.zx,{onClick:f,text:"Resolve",small:!0,iconLeft:(0,a.tZ)(Oe.Z,{})}),!n&&i?(0,a.tZ)(mr.D,{text:"Resolved",colorway:"positive"}):null,(0,a.tZ)(Ue.zx,{onClick:s,text:y,small:!0,iconLeft:(0,a.tZ)(Cr.Z,{})})]})]})},Lr=function(e){var n,t=e.threadId,o=e.isResolved,l=e.onMessageChange,c=e.onMessageSubmit,u=e.isPlaceholder,s=e.onRequestClose,d=void 0===s?function(){}:s,f=(0,y.Z)(b.useState(""),2),p=f[0],h=f[1],v=(0,y.Z)(b.useState(kr().v4()),2),g=v[0],m=v[1],Z=(0,qe.Z)(),w=Z.ref,C=Z.update,S=b.useRef(null),T={placeholder:function(){return u?"Start a new thread\u2026 (Markdown is supported)":o?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},E="Post reply",R="Cancel",G=function(){var e=p.trim();0!==e.length&&(c({message:e,messageId:g}),h(""),m(kr().v4()))},P=(0,Ar.d)(),_=(0,Gr.Z)(),B=(0,y.Z)((0,Ir.Z)({"@":function(){var e=(0,I.Z)((function(e){var n,t;return(0,D.__generator)(this,(function(r){return n=_.filter((function(e){return e.id!==P})),e&&(t=e.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(t)}))),[2,n.slice(0,5).map((function(e){return{icon:(0,a.tZ)(Rr.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(n){return e.apply(this,arguments)}}()}),2),A=B[0].suggestions,N=B[1],X=(0,Dr.Kb)({items:(null===A||void 0===A?void 0:A.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null===A||void 0===A?void 0:A.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(A&&n){var t=A.applySuggestion({targetValue:p,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;h(r),setTimeout((function(){S.current&&(S.current.setSelectionRange(i,i),S.current.focus(),C())}))}}}),F=X.isOpen,O=X.getInputProps,M=X.getMenuProps,W=X.getItemProps,H=X.highlightedIndex,z=X.getComboboxProps;return b.useEffect((function(){var e="threads/drafts/".concat(t),n=Er.Z.get(e,"string");n&&h(n);var r=S.current;return function(){if(r){var n=r.value;0!==n.length?Er.Z.set(e,n):Er.Z.remove(e)}}}),[t]),(0,a.BX)(L.T,{background:"root",css:[x.l0.px(12),x.l0.pb(8),x.l0.pt(8),{borderTop:"1px solid ".concat(x.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,a.BX)("div",(0,i.Z)((0,r.Z)({css:[x.l0.flex.row,x.l0.align.start,x.l0.rowWithGap(8),x.l0.width("full")]},z()),{className:"jsx-45ff32690e481e34",children:[u?(0,a.tZ)(Ue.zx,{text:R,onClick:d}):null,(0,a.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,a.tZ)(Ye.B,(0,r.Z)({},O({ref:function(e){S.current=e,w(e),N(e)},value:p,onChange:function(e){var n=e.target.value;h(n),l({message:n,messageId:g})},onKeyDown:function(e){F||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),G(),requestAnimationFrame((function(){C()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),d())},placeholder:T.placeholder(),css:[x.l0.height(32),x.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,a.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},M({css:[{position:"absolute",top:x.TV.space2,overflow:"hidden"},x.l0.borderRadius(16),x.l0.shadow(1),x.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===A||void 0===A?void 0:A.results.map((function(e,n){return(0,b.createElement)("div",(0,i.Z)((0,r.Z)({},W({item:e,index:n})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,a.BX)(Pr.Ug,{spacing:2,css:[H===n?x.l0.backgroundColor.backgroundHighest:null,x.l0.p(8)],children:[e.icon,(0,a.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,a.tZ)(k.G,{css:[x.l0.pt(4)],children:(0,a.tZ)(U.h,{alt:E,tooltipDelay:"long",onClick:G,children:(0,a.tZ)(Ke.Z,{})})})]})),(0,a.tZ)(gr(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var Nr=function(e){var n,t=e.threadId,r=e.isCreating,i=e.isResolved,l=void 0!==i&&i,c=e.view,u=e.filePath,s=e.openThreadsInbox,d=(0,wr.Z)(t,c,u),f=d.thread,p=d.loading,h=d.isPlaceholder,v=d.getLatestAnchor,g=d.updateThread,m=d.changeThreadMessage,y=d.finalizeThreadMessage,Z=function(){null===c||void 0===c||c.dispatch({effects:[Re.YM.of(null)]})},w=(0,pn.Z)().preferences.fontSize,C=(0,b.useRef)(null);(0,Br.Z)(f);var S=v(),T=c&&!p&&"number"===typeof(null===S||void 0===S?void 0:S.indexEnd)&&S.indexEnd<=c.state.doc.length?null===(n=c.coordsAtPos(S.indexEnd))||void 0===n?void 0:n.left:null,E=(null===c||void 0===c?void 0:c.dom.getBoundingClientRect().left)||null,R=T&&E?T-E-6:null,I=w;switch(w){case 10:I=13;break;case 14:I=19;break;case 18:I=25;break;case 24:I=34}var D=(0,pt.Z)().showConfirm,G=(0,at.Z)(),P=(0,b.useRef)(null);b.useEffect((function(){setTimeout((function(){P.current&&(P.current.scrollTop=P.current.scrollHeight)}),0)}),[null===f||void 0===f?void 0:f.messages]);var _=b.useMemo((function(){return(null===f||void 0===f?void 0:f.messages)?(0,o.Z)(f.messages).sort((function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)})):[]}),[null===f||void 0===f?void 0:f.messages]),B=function(e){var n=(0,b.useRef)(0);return(0,Q.Z)((function(t){var r=t.height;r!==n.current&&(null===e||void 0===e||e.requestMeasure()),n.current=r}))}(c);return(0,a.tZ)("div",{css:[x.l0.width("100%"),x.l0.backgroundColor.backgroundRoot],children:(0,a.BX)(k.G,{innerRef:(0,_r.l)(C,B),css:[x.l0.font.default,{borderTopWidth:x.TV.borderWidthDefault,borderBottomWidth:x.TV.borderWidthDefault,borderStyle:"solid",borderColor:x.TV.accentPrimaryDefault}],children:[h||p?null:(0,a.tZ)(Ur,{isCreating:r,isResolved:l,isLoading:p,threadId:t,filePath:u,caretPosition:R,isPlaceholder:h,onRequestClose:Z,onResolveThread:function(){g({changes:{isResolved:!0}}),D("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),!p||h?(0,a.BX)(a.HY,{children:[!r&&_.length>0?(0,a.tZ)("div",{css:[x.l0.px(12),x.l0.py(12),x.l0.maxHeight(300),x.l0.overflowY("auto"),x.l0.colWithGap(16),x.l0.fontSize(w)],ref:P,children:_.map((function(e){return(0,a.tZ)(br.Z,{thread:f,message:e},e.id)}))}):null,(0,a.tZ)(Lr,{threadId:t,isPlaceholder:h,isResolved:l,onRequestClose:Z,onMessageChange:m,onMessageSubmit:function(e){y(e),(0,ee.j)(Tr.U3.MESSAGE_SENT,{replId:G,source:"threads",newThread:h})}})]}):(0,a.tZ)(k.G,{css:[x.l0.height(I)],children:(0,a.tZ)(Xn.Z,{viewBox:"0 0 400 21",backgroundColor:x.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:x.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,a.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})})},Xr=t(1468),Fr=t(52491),Or=t(63086),Mr=t(75205),Wr=t(6191),Hr=t(91669),zr=t(52118),Vr=t(951);var jr=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e,r){var i;return(0,se.Z)(this,t),(i=n.call(this)).src=e,i.pos=r,i}var r=t.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},t}(_.l9),qr=/"data:image\/\w+;base64,[^"\s]+"/g,Yr=Number.MAX_VALUE,Kr=_.lg.define((function(e){var n=new _.Y1({regexp:qr,decoration:function(e,n,t){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return _.p.replace({widget:new jr(r,t)})},maxLength:Yr});return{matcher:n,deco:n.createDeco(e),update:function(e){e.docChanged&&(this.deco=n.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return _.tk.atomicRanges.of((function(n){var t=n.plugin(e);return t?t.deco:_.p.none}))}});var $r=t(56568),Qr=t(5925),Jr=t(21848),ei=t(13424),ni=t(20864),ti=t(51697);function ri(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var ii,oi,ai=t(80906);function li(e){var n=e.view,t=e.path,r=e.isHidden,i=(0,ai.NH)();!function(e,n){var t=(0,Yt.Z)(n);(0,ti.M)((function(){return _.tk.focusChangeEffect.of((function(n){return(null===e||void 0===e?void 0:e.hasFocus)?t.current({type:"focus",position:ri(n)}):t.current({type:"blur"}),null}))}),[e,t],e,"useCursorChange"),(0,ti.M)((function(){return _.tk.updateListener.of((function(e){e.selectionSet&&t.current({type:"update",hasFocus:e.view.hasFocus,position:ri(e.state)})}))}),[t],e,"useCursorChange"),(0,b.useEffect)((function(){return function(){t.current({type:"unmount"})}}),[])}(n,(function(e){i(t,e)})),(0,b.useEffect)((function(){i(t,r?{type:"hidden"}:{type:"unhidden"})}),[r])}var ci=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e){var r;return(0,se.Z)(this,t),(r=n.call(this)).type=e,r}return t.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},t.range=function(e,n,t){return this.from(e).range(n,t)},t}(P.uU);function ui(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}function si(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=ui(t);if(!r)return null;var i=t.repeat(n),o=e.text.slice(0,n);return o!==i||e.text.length>n&&" "!==e.text[n]?null:r}function di(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=si(a,n);l&&i.push(ci.range(l,a.from,a.to)),o=a.to+1}return i}ci.yours=new ci("yours"),ci.base=new ci("base"),ci.middle=new ci("middle"),ci.theirs=new ci("theirs");var fi=["yours","base","middle","theirs"];function pi(e){Array.isArray(e)&&(e=P.Xs.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i={},a={},l=[],c=!0,u=!1,s=void 0;try{for(var d,f=fi[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=r.value,v=r.from,g=r.to;if("base"!==p||h.type===p){if(h.type===p)i[p]={from:v,to:g},l.push({from:v,to:g,type:h.type});else{if("yours"===h.type)break;l.push({from:v,to:g,type:h.type})}if(r.next(),null===r.value)break}}}catch(I){u=!0,s=I}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}if(i.yours&&i.middle&&i.theirs){var m,y,Z;null!==(m=(ii=i).base)&&void 0!==m||(ii.base=null),null!==(y=(oi=a).base)&&void 0!==y||(oi.base=null);var b=null!==(Z=i.base)&&void 0!==Z?Z:i.middle,w=i.yours.to+1,x=b.from-1;if(a.yours=w<x?{from:w,to:x}:null,i.base){var k=i.base.to+1,C=i.middle.from-1;a.base=k<C?{from:k,to:C}:null}var S=i.middle.to+1,T=i.theirs.from-1;a.theirs=S<T?{from:S,to:T}:null;var E={from:i.yours.from,to:i.theirs.to,markers:i,content:a};n.push(E)}else{var R;(R=t).push.apply(R,(0,o.Z)(l))}}return{hunks:n,hanging:t}}var hi,vi=P.r$.define({combine:function(e){return e.length?e[0]:7}}),gi=P.QQ.define({create:function(e){var n=e.doc,t=e.facet(vi),r=P.Xs.of(di(n,t)),i=pi(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(vi),i=n.state.facet(vi);if(r!==i){var o=P.Xs.of(di(t,i)),a=pi(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,c=null,u=null,s=null;n.changes.iterChangedRanges((function(e,n,t,r){l=null===l?e:Math.min(l,e),c=null===c?n:Math.max(c,n),u=null===u?t:Math.min(u,t),s=null===s?r:Math.max(s,r)}));var d=e.markers;if(null!==l&&null!==c){var f=n.startState.doc.lineAt(l).from,p=n.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:p})}d=d.map(n.changes),null!==u&&null!==s&&(d=d.update({add:di(t,i,u,s)}));var h=pi(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),mi=[_.tk.atomicRanges.from(gi,(function(e){return function(){return e.markers}})),P.yy.changeFilter.of((function(e){var n=e.startState.field(gi);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges((function(e,i,o,a,l){var c=l.length,u=Math.max(t.lineAt(e).from-1,0),s=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(u,s,(function(n,u){if(!(e<=n&&i>=u)&&(0===c||!(e===u&&"\n"===l.sliceString(0,1)||i===n&&"\n"===l.sliceString(c-1,c)))){if(o===a){if(i===u+1&&0===t.lineAt(i).length)return;if(e===n-1&&0===t.lineAt(e).length)return}r.push(n-1,u+1)}}))})),!(r.length>0)||r})),P.yy.transactionFilter.of((function(e){var n=e.docChanged?e.state.field(gi):e.startState.field(gi);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{var o=function(e){var o=t.ranges[e],a=o.from,l=o.to,c=a,u=l;if(n.markers.between(a,l,(function(e,n){var t=(e+n)/2;a>e&&a<n&&(c=a<t?e:n),l>e&&l<n&&(u=l<t?e:n)})),c!==a||u!==l){var s,d=o.anchor<o.head?c:u,f=o.anchor<o.head?u:c,p=o.goalColumn,h=null!==(s=o.bidiLevel)&&void 0!==s?s:void 0,v=P.jT.range(d,f,p,h);return t=t.replaceRange(v,e),i=!0,r=!0,"break"}};i=!1;for(var a=0;a<t.ranges.length;a++){if("break"===o(a))break}}while(i);return r?[e,{selection:t,sequential:!0}]:e}))],yi="cm-git-conflict-marker-yours",Zi="cm-git-conflict-marker-base",bi="cm-git-conflict-marker-middle",wi="cm-git-conflict-marker-theirs",xi="cm-git-conflict-marker-hanging",ki="cm-git-conflict-content-yours",Ci="cm-git-conflict-content-base",Si="cm-git-conflict-content-theirs";function Ti(e){var n=e.background,t=e.color,r=e.noBorder,i=void 0!==r&&r,o={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:x.TV.space4,paddingBottom:x.TV.space4,fontWeight:x.TV.fontWeightBold};return i||(o.borderLeft="4px solid rgba(0, 150, 255, 0.1)",o.paddingLeft="2px"),o}function Ei(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var Ri=_.tk.theme((hi={},(0,ar.Z)(hi,".".concat(yi),Ti({background:"rgba(0, 150, 255, 0.1)",color:x.TV.blueStrongest,noBorder:!0})),(0,ar.Z)(hi,".".concat(bi),Ti({background:"rgba(255, 0, 0, 0.1)",color:x.TV.redStrongest})),(0,ar.Z)(hi,".".concat(Zi),Ti({background:"rgba(255, 165, 0, 0.1)",color:x.TV.orangeStrongest})),(0,ar.Z)(hi,".".concat(wi),Ti({background:"rgba(0, 150, 255, 0.1)",color:x.TV.blueStrongest,noBorder:!0})),(0,ar.Z)(hi,".".concat(xi),Ti({background:"rgba(100, 150, 255, 0.1)",color:x.TV.blueStrongest,noBorder:!0})),(0,ar.Z)(hi,".".concat(ki),Ei({background:"rgba(0, 255, 0, 0.1)"})),(0,ar.Z)(hi,".".concat(Si),Ei({background:"rgba(255, 0, 0, 0.1)"})),(0,ar.Z)(hi,".".concat(Ci),Ei({background:"rgba(255, 165, 0, 0.1)"})),hi)),Ii={yours:{marker:_.p.line({class:yi}),content:_.p.line({class:ki})},base:{marker:_.p.line({class:Zi}),content:_.p.line({class:Ci})},middle:{marker:_.p.line({class:bi})},theirs:{marker:_.p.line({class:wi}),content:_.p.line({class:Si})},hanging:{marker:_.p.line({class:xi})}},Di=function(){function e(n){(0,se.Z)(this,e),this.builder=new P.f_,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to)this.builder.add(t.from,t.from,n);else for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),Gi=_.tk.decorations.from(gi,(function(e){return function(n){var t=n.state.doc,r=new Di(t),i=!0,o=!1,a=void 0;try{for(var l,c=e.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;n.viewport.from>u.to||n.viewport.to<u.from||(r.add(u.markers.yours,Ii.yours.marker),u.content.yours&&r.add(u.content.yours,Ii.yours.content),u.markers.base&&r.add(u.markers.base,Ii.base.marker),u.content.base&&r.add(u.content.base,Ii.base.content),r.add(u.markers.middle,Ii.middle.marker),u.content.theirs&&r.add(u.content.theirs,Ii.theirs.content),r.add(u.markers.theirs,Ii.theirs.marker))}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.finish()}})),Pi=_.tk.decorations.from(gi,(function(e){return function(){var n=new P.f_,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,Ii.hanging.marker)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}})),_i=[P.Wl.lowest(Ri),Gi,Pi],Bi=[gi,mi,_i],Ai=t(69310);var Ui,Li=t(42082),Ni=t(13716),Xi=t(37313),Fi=t(64804),Oi=t(67850),Mi=t(57988),Wi=t(81962),Hi="cm-transform-diff-line-deletion-base",zi="cm-transform-diff-line-deletion",Vi="cm-transform-diff-text-deletion",ji="cm-transform-diff-line-insertion-base",qi="cm-transform-diff-line-insertion",Yi="cm-transform-diff-text-insertion",Ki="cm-transform-diff-number-marker",$i="rgba(180, 0, 0, 0.1)",Qi="rgba(180, 0, 0, 0.125)",Ji="rgba(0, 180, 0, 0.1)",eo="rgba(0, 180, 0, 0.125)";function no(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var to,ro,io=_.tk.theme((Ui={},(0,ar.Z)(Ui,".".concat(ji,", .").concat(qi),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(x.TV.accentPrimaryDimmest," !important")}}),(0,ar.Z)(Ui,".".concat(Hi),{background:no($i),backgroundClip:"content-box"}),(0,ar.Z)(Ui,".".concat(zi),{background:no($i,Qi),backgroundClip:"content-box"}),(0,ar.Z)(Ui,".".concat(ji),{background:no(Ji),backgroundClip:"content-box"}),(0,ar.Z)(Ui,".".concat(qi),{background:no(Ji,eo),backgroundClip:"content-box"}),(0,ar.Z)(Ui,".".concat(Yi),{display:"inline-block",background:eo}),(0,ar.Z)(Ui,".".concat(Vi),{display:"inline-block",background:Qi}),(0,ar.Z)(Ui,".".concat(Ki),{opacity:.5}),Ui)),oo=t(68935),ao=t(57600),lo=t(52276),co=t(78194),uo=P.r$.define({combine:function(e){return null!==(to=e.filter(Boolean)[0])&&void 0!==to?to:null}}),so=P.QQ.define({create:function(){return{diff:null,tree:ao.mp.empty}},update:function(e,n){var t,r,i=n.state.facet(uo),o=null===(t=n.state.facet(oo.dK))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===ao.mp.empty?e:{diff:null,tree:ao.mp.empty};var a=e.diff,l=e.tree;return a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=lo.z.create(n.newDoc,i),l=ao.mp.empty),(null===(r=n.startState.facet(oo.dK))||void 0===r?void 0:r.parser)!==o&&(l=ao.mp.empty),o&&l.length!==a.b.length?{diff:a,tree:l=(0,co.p)({parser:o,text:a.b,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),fo=t(92111),po=t(18599),ho=t(3341),vo=t.n(ho),go=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e,r,i){var o;return(0,se.Z)(this,t),(o=n.call(this)).line=e,o.index=r,o.changed=i,o}var r=t.prototype;return r.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(ji):"cm-line ".concat(qi),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",n.appendChild(s)}}catch(C){r=!0,i=C}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,f=0,p=null,h=null,v=function(n,t){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,t-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",n.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var g=this.line[f].text;p={from:d,to:d+g.length}}if(!h){var m=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=Yi,h={from:x.from,to:x.to,dom:k},d<h.from&&v(n,h.from),n.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{m||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(n,p.to),d>=p.to&&(p=null,f++)}return n},r.eq=function(e){var n,r;return(0,Wi.Z)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null===(n=this.changed)||void 0===n?void 0:n.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&vo()(this.line,e.line)&&vo()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,Mi.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(_.l9),mo=_.p.line({class:Hi}),yo=_.p.line({class:zi}),Zo=_.p.mark({class:Vi}),bo=_.tk.decorations.compute([so],(function(e){var n=function(e,n){if(r.getLineChangeType(e.number,fo.MF.A)===fo.dQ.COVERED)o.push(yo.range(e.from));else{o.push(mo.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,c=(0,fo.Po)(e,n,fo.MF.A,!1)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;o.push(Zo.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}}},t=e.field(so,!1);if(!t||!t.diff)return _.p.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,s=r.chunks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.fromA!==d.endA)for(var f=r.a.lineAt(d.fromA),p=r.a.lineAt(d.endA),h=f.number;h<=p.number;h++)n(r.a.line(h),d);else d.fromB===d.endB&&n(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var v=r.b.lineAt(d.fromB),g=(0,po.CT)(i,r.b,e,d.fromB,d.endB),m=0;m<g.length;m++){var y=g[m],Z=r.b.line(v.number+m),b=r.getLineChangeType(Z.number,fo.MF.B)===fo.dQ.COVERED?null:(0,fo.Po)(Z,d,fo.MF.B,!0),w=_.p.widget({widget:new go(y,Z.number,b),block:!0,side:m+1}),x=Math.min(d.endA,r.a.length);o.push(w.range(x))}}}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return _.p.set(o,!0)})),wo=t(96302),xo=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e){var r;return(0,se.Z)(this,t),(r=n.call(this)).index=e,r}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=Ki,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},t}(_.SJ),ko=wo.X4.of((function(e,n){if((0,Wi.Z)(n,go))return new xo(n.index)})),Co=P.r$.define({enables:function(e){return[uo.computeN([e],(function(n){return n.facet(e)})),so,io,bo,ko]}}),So=t(12470),To=t(70114),Eo=(0,ze.X)({headerContainer:[x.l0.backgroundColor.backgroundRoot,x.l0.fontSize(14),{borderBottom:"1px solid ".concat(x.TV.backgroundHigher),'[role="tab"][aria-selected="true"]':{borderBottom:"1px solid ".concat(x.TV.accentPrimaryDefault)}}]});!function(e){e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion"}(ro||(ro={}));var Ro=new sn.Jf((function(e){var n=e.selection,t=e.onSelected,r=(0,b.useState)(null!==n&&void 0!==n?n:0),i=r[0],o=r[1];return(0,a.tZ)(k.G,{css:Eo.headerContainer,children:(0,a.tZ)(So.mQ,{selectedIndex:i,onSelectionChange:function(e){o(e),t(e)},children:(0,a.BX)(So.td,{withDividers:!1,withUnderline:!1,children:[(0,a.tZ)(So.OK,{iconLeft:(0,a.tZ)(To.Diff,{}),children:"Compare"}),(0,a.tZ)(So.OK,{iconLeft:(0,a.tZ)(To.BookOpen,{}),children:"Original"}),(0,a.tZ)(So.OK,{iconLeft:(0,a.tZ)(To.Ghostwriter,{}),children:"Suggestion"})]})})})})),Io=P.Py.define(),Do=P.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Io))e=l.value;else if(l.is(dn))e=null;else if(l.is(fn)){var c=n.state.field(Zn);if("transformCode"===(null===c||void 0===c?void 0:c.type)&&l.value){var u=n.startState.field(bn),s=l.value;!u&&s&&(e=ro.Compare)}}}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return _.mH.from(e,(function(e){return null!=e?function(e){return{top:!0,dom:Ro.create({selection:e.state.field(Do),onSelected:function(n){e.dispatch({effects:Io.of(n)})}})}}:null}))}}),Go=t(53265),Po=P.QQ.define({create:function(){return null},update:function(e,n){if(!(0,Go.a)(n,"doc",Zn,Vr.Yp,Do,bn))return e;var t=n.state.field(Zn),r=n.state.facet(Vr.Yp),i=n.state.field(Do);if(!t||!r||t.codeReference.filePath!==r||i!==ro.Suggestion)return null;var o,a=t.codeReference.range.indexFrom,l=t.codeReference.range.indexTo,c=n.state.doc.slice(a,l),u=null!==(o=n.state.field(bn))&&void 0!==o?o:"",s=c.lines,d=a,f=u.split(n.state.lineBreak).length-s;return e&&e.after===d&&e.offset===f?e:{after:d,offset:f}}}),_o=wo.gy.of((function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(Po);if(r&&!(t.from<=r.after))return new wo.un(t.number+r.offset)})),Bo=wo.X4.of((function(e,n){if((0,Wi.Z)(n,Ao))return new wo.un(n.index)})),Ao=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e,r,i){var o;return(0,se.Z)(this,t),(o=n.call(this)).line=e,o.block=r,o.index=i,o}var r=t.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,c=a.tags,u=document.createElement("span");u.textContent=l||"\xa0",c&&(u.className=c),e.appendChild(u)}}catch(s){t=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,po.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,Mi.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(_.l9),Uo=_.tk.decorations.compute([oo.dK,Zn,bn,Do,so,Vr.Yp,P.yy.lineSeparator],(function(e){var n,t=e.field(Zn),r=e.facet(Vr.Yp),i=e.field(Do);if(!t||"transformCode"!==t.type||!r||t.codeReference.filePath!==r||i!==ro.Suggestion)return _.p.none;var o,a,l=t.codeReference.range.indexFrom,c=t.codeReference.range.indexTo,u=e.doc.lineAt(l),s=e.doc.lineAt(c),d=e.toText(null!==(o=e.field(bn))&&void 0!==o?o:""),f=e.changes({from:l,to:c,insert:d}),p=f.apply(e.doc),h=l+d.length,v=null===(n=e.facet(oo.dK))||void 0===n?void 0:n.parser,g=null;if(v)g=(0,co.p)({parser:v,text:p,changes:f,base:e,upTo:h}),a=(0,po.CT)(g,p,e,l,h);else{a=[];var m=!0,y=!1,Z=void 0;try{for(var b,w=d.iterLines()[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var x=b.value;a.push([{text:x}])}}catch(R){y=!0,Z=R}finally{try{m||null==w.return||w.return()}finally{if(y)throw Z}}}var k=[];a.length>1&&l!==c&&0!==s.length&&c===s.to&&c<e.doc.length?k.push(_.p.replace({inclusive:!1,block:!0}).range(l,c)):k.push(_.p.replace({inclusiveStart:!1,block:!0}).range(l,c));for(var C=0;C<a.length;C++){var S=a[C],T=u.number+C,E=_.p.widget({widget:new Ao(S,C>0,T),inlineOrder:!0,side:C+1,block:C>0});k.push(E.range(l))}return _.p.set(k,!0)})),Lo=[Po,_o,Bo,Uo],No=Fe.TV.blurpleDimmest,Xo=Fe.TV.accentPrimaryDimmest,Fo=_.tk.theme({".cm-pocket-highlight":{backgroundColor:"rgba(120, 95, 255, 0.1)"},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(Fe.TV.blurpleDimmest,", ").concat(Xo,", ").concat(No,", ").concat(Xo,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),Oo=_.tk.decorations.compute([Zn,Vr.Yp],(function(e){var n=e.field(Zn),t=e.facet(Vr.Yp);if(!n||!t||n.codeReference.filePath!==t)return _.p.none;var r=_.p.widget({widget:new In({codeReference:n.codeReference,type:n.type,data:n.data}),block:!0,side:1e3}).range(n.codeReference.range.indexTo);return _.p.set(r)})),Mo=(0,_.EY)({above:!1,update:function(e){return(0,Go.a)(e,Zn)},markers:function(e){var n=e.state.field(Zn),t=e.state.facet(Vr.Yp);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=P.jT.range(r,i),l=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return _.dc.forRange(e,l,a)}}),Wo=Co.compute([Zn,bn,Vr.Yp,Do],(function(e){var n=e.field(Zn),t=e.field(bn),r=e.facet(Vr.Yp),i=e.field(Do);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===ro.Compare?P.as.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null})),Ho=Oi.V.compute([Zn,bn,Vr.Yp],(function(e){var n=e.field(Zn),t=e.field(bn),r=e.facet(Vr.Yp);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?P.as.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null})),zo=[Fo,Zn,bn,Oo,Mo,Do,Wo,Lo,Ho,Gn],Vo=t(20881),jo=t(42785),qo=t(55143),Yo=[jo.Gj,jo._j,jo.yK,jo.gm,jo.ZF],Ko=[jo.ZF],$o=new qo.j((function(e,n){return n?null:(0,Vo.ZP)({key:"mod",rules:e?Yo:Ko})})),Qo=t(86528),Jo=t(66075),ea=t(94889),na={"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Cloud Platform API Key":/(google|gcp|youtube|drive|yt)(.{0,20})?['"][AIza[0-9a-z\\-_]{35}]['"]/gi,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mailchimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g};var ta=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e,r){var i;return(0,se.Z)(this,t),(i=n.call(this)).id=e,i.value=r,i}return t.range=function(e,n){return new this(this.generateId(),n).range(e.from,e.to)},t.generateId=function(){return this.secretId++},t}(P.uU);ta.secretId=0;var ra=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e){var r;return(0,se.Z)(this,t),(r=n.call(this)).key=e,r}return t.from=function(e){return new this(e)},t}(P.uU),ia=P.Py.define(),oa=P.Py.define(),aa=P.Py.define(),la=P.Py.define(),ca=P.Py.define(),ua=P.Py.define(),sa=function(e){var n=e.state.field(ga);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,c=P.as.empty(l),u=[],s=[],d=!0,f=!1,p=void 0;try{for(var h,v=function(){var e=h.value,n=e.from,t=e.to,r=e.value,i=r.value,o=P.as.of({from:n,to:t,insert:i},l).map(c,!0);u=u.map((function(e){return e.map(o)}));var a=(c=c.compose(o)).mapPos(n)+i.length;u.push(P.jT.cursor(a)),s.push(oa.of(r.id))},g=r[Symbol.iterator]();!(d=(h=g.next()).done);d=!0)v()}catch(m){f=!0,p=m}finally{try{d||null==g.return||g.return()}finally{if(f)throw p}}return e.dispatch({changes:c,effects:s,selection:P.jT.create(u)}),(0,ee.j)(ee.U3.PASTE_SCANNER_USED,{action:"original_accepted"}),!0},da=function(e){return!!e.state.field(ga).size&&(setTimeout((function(){e.dispatch({effects:e.state.selection.ranges.map((function(e){return aa.of(e)}))})})),!0)},fa=function(e){return!!e.state.field(ga).size&&(e.dispatch({effects:e.state.selection.ranges.map((function(e){return oa.of(e)}))}),!1)};function pa(e,n){var t,o=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain");if(!o)return!1;var a=function(e){if(e.length>2e3)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(na)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,y.Z)(i.value,2),l=a[0],c=a[1],u=e.search(c);if(!(u<0)){var s=e.match(c);if(s){var d=u+s[0].length;return{start:u,end:d,secret:e.slice(u,d),provider:l}}}}}catch(f){t=!0,r=f}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(o);if(!a)return!1;e.preventDefault(),e.stopPropagation();var l=o.slice(0,a.start)+o.slice(a.end);return n.dispatch((0,i.Z)((0,r.Z)({},n.state.changeByRange((function(e){var n=e.from,t=e.to,r=P.jT.cursor(n+a.start);return{range:r,changes:{from:n,to:t,insert:l},effects:ia.of(ta.range(r,a.secret))}}))),{scrollIntoView:!0})),(0,ee.j)(ee.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:a.provider}),!0}var ha=P.QQ.define({create:function(){return P.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(ca)){var c=l.value,u=c.from,s=c.to,d=c.secret;e=e.update({add:[ra.from(d).range(u,s)],filter:function(){return!1}})}l.is(ua)&&(e=P.Xs.empty)}}catch(f){r=!0,i=f}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),va=P.QQ.define({create:function(){return null},update:function(e,n){var t=n.state.field(ga,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t&&c.is(aa)&&((0,Wi.Z)(c.value,P.xm)?t.between(c.value.from,c.value.to,(function(n,t,r){e=r})):e=c.value),c.is(la)&&(e=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),ga=P.QQ.define({create:function(){return P.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;n.is(ia)&&(e=e.update({add:[n.value],sort:!0})),n.is(oa)&&(e=(0,Wi.Z)(n.value,P.xm)?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))},l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e},provide:function(){return[_.tk.domEventHandlers({paste:pa}),P.Wl.highest(_.$f.of([{key:"Mod-z",run:fa},{key:"Enter",run:sa},{key:"Tab",run:da}]))]}}),ma=t(1436),ya=t(18988),Za=t(2041),ba=t(84815),wa=t(34489),xa=(0,ze.X)({buttons:[x.l0.display.flex,x.l0.rowWithGap(4),x.l0.justify.end],input:[x.l0.colWithGap(4),x.l0.flex.grow(1)],gap:[x.l0.colWithGap(16)],label:[x.l0.color.foregroundDimmer,x.l0.fontSize(12),x.l0.height(24),x.l0.justify.center],flexRow:[x.l0.display.flex,x.l0.rowWithGap(8),x.l0.align.center]}),ka={fontFamily:"text-security-disc"},Ca=k.K.label;function Sa(e){var n=(0,re.Z)().fs,t=(0,b.useId)(),o=(0,b.useId)(),l=(0,b.useState)(""),c=l[0],u=l[1],d=(0,b.useState)(e.initialValue),f=d[0],p=d[1],h=(0,b.useState)(!1),v=h[0],g=h[1],m=(0,b.useRef)(null);return(0,b.useEffect)((function(){var n;e.isOpen&&(null===(n=m.current)||void 0===n||n.focus(),(0,ee.j)(ee.U3.PASTE_SCANNER_USED,{action:"modal_opened"}))}),[e.isOpen]),(0,a.tZ)(ya.MT,{contain:!0,children:(0,a.tZ)(Za.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,a.BX)(k.G,{css:xa.gap,children:[(0,a.tZ)(Le.xv,{variant:"subheadBig",children:"Add a key name for your secret value"}),(0,a.BX)(k.G,{css:xa.flexRow,children:[(0,a.BX)(k.G,{css:xa.input,children:[(0,a.tZ)(Ca,{css:xa.label,htmlFor:t,children:"Key"}),(0,a.tZ)(Ye.II,{id:t,ref:m,value:c,onChange:function(e){return u(e.target.value)}})]}),(0,a.BX)(k.G,{css:xa.input,children:[(0,a.BX)(k.G,{css:xa.flexRow,children:[(0,a.tZ)(Ca,{css:xa.label,htmlFor:o,children:"Value"}),(0,a.tZ)(U.h,{alt:"Toggle Secret",onClick:function(){return g((function(e){return!e}))},tooltipPlacement:"top",children:v?(0,a.tZ)(s.Z,{}):(0,a.tZ)(ba.Z,{})})]}),(0,a.tZ)(Ye.II,{id:o,value:f,onChange:function(e){return p(e.target.value)},style:v?void 0:ka})]})]}),(0,a.BX)(k.G,{css:xa.buttons,children:[(0,a.tZ)(Ue.zx,{text:"Cancel",onClick:e.onCancel}),(0,a.tZ)(Ue.zx,{colorway:"primary",text:"Save Secret",disabled:0===c.length||0===f.length,onClick:(0,I.Z)((function(){var t,o,a;return(0,D.__generator)(this,(function(l){switch(l.label){case 0:return t={},[4,n.readFile(".env")];case 1:return(o=l.sent()).error||(t=wa.Z.parse(o.content.toString())),[4,n.writeFile(".env",wa.Z.serialize((0,i.Z)((0,r.Z)({},t),(0,ar.Z)({},c,f))))];case 2:return(a=l.sent()).error&&Xr.c_.withScope((function(e){e.setExtra("keyInput",c),Xr.c_.captureException(a.error)})),e.onSaveSecret(c,f),(0,ee.j)(ee.U3.PASTE_SCANNER_USED,{action:"secret_created"}),[2]}}))}))})]})]})})})}var Ta=t(13548),Ea=t(45353),Ra=(0,ze.X)({hint:[x.l0.align.center,x.l0.border({color:x.TV.outlineDimmer,direction:"top"}),x.l0.color.foregroundDimmest,x.l0.display.flex,x.l0.flex.row,x.l0.px(8),x.l0.py(4),x.l0.rowWithGap(8)],info:[x.l0.p(8)],key:[x.l0.px(4)],wrapper:[x.l0.backgroundColor.backgroundHigher,x.l0.borderRadius(4),x.l0.cursor.default]});function Ia(e){return(0,a.BX)(k.G,{css:Ra.wrapper,children:[(0,a.BX)(k.G,{css:Ra.info,children:[(0,a.tZ)(k.G,{children:"The value you pasted looks like a secret."}),(0,a.tZ)(k.G,{children:"Store it securely using our Secrets feature."})]}),(0,a.BX)(k.G,{css:Ra.hint,onClick:e.onClickUseSecrets,children:[(0,a.tZ)(Ta.Z,{}),"Press",(0,a.tZ)(k.G,{css:Ra.key,children:(0,a.tZ)(Ea.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}),(0,a.BX)(k.G,{css:Ra.hint,onClick:e.onClickPasteAnyway,children:[(0,a.tZ)(Mn.Z,{}),"Press",(0,a.tZ)(k.G,{css:Ra.key,children:(0,a.tZ)(Ea.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]})]})}var Da=t(9493),Ga=(0,ze.X)({border:[x.l0.border({color:Fe.TV.accentPrimaryDefault,direction:"y",width:1})],title:[x.l0.display.flex,x.l0.rowWithGap(8),x.l0.align.center,x.l0.justify.spaceBetween,x.l0.px(8),x.l0.pt(4),x.l0.font.default],wrapper:[x.l0.backgroundColor.backgroundRoot,x.l0.py(0),x.l0.position.relative,x.l0.zIndex(200)]});function Pa(e){return(0,a.tZ)(k.G,{css:Ga.wrapper,children:(0,a.BX)(k.G,{css:Ga.border,children:[(0,a.BX)(k.G,{css:Ga.title,children:[(0,a.BX)(Le.xv,{children:["Access the secret ",(0,a.tZ)("b",{children:e.keyName}),":"]}),(0,a.tZ)(U.h,{alt:"Close",onClick:e.onClose,children:(0,a.tZ)(F.Z,{})})]}),(0,a.tZ)(L.T,{background:"root",children:(0,a.tZ)(Da.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})}var _a=Oi.V.compute([ga],(function(e){var n=e.field(ga).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.value}),n.next()}return t})),Ba=_.hJ.computeN([va,ga],(function(e){var n=function(){var e=r.value;i.push({arrow:!0,pos:r.to,create:function(n){return{dom:(0,sn.VV)((0,a.tZ)(Ia,{onClickUseSecrets:function(){n.dispatch({effects:aa.of(e)})},onClickPasteAnyway:function(){sa(n)}}))}}}),r.next()};if(null!=e.field(va,!1))return[];var t=e.field(ga,!1);if(!t)return[];for(var r=t.iter(),i=[];r.value;)n();return i})),Aa=ma.t.compute([va],(function(e){var n=e.facet(Vr.Yp),t=e.field(va);return t&&n?{key:"pasteScannerModal",node:function(e){return(0,a.tZ)(Sa,{isOpen:!0,initialValue:t.value,onSaveSecret:function(){var n=(0,I.Z)((function(n){var r,i;return(0,D.__generator)(this,(function(a){for(r=e.state.field(ga).iter(),i=[];r.value;){var l=r.from,c=r.to,u=r.value;u.id===t.id&&(i.push(oa.of(u.id)),i.push(ca.of({secret:n,from:l,to:c}))),r.next()}return e.dispatch({effects:(0,o.Z)(i).concat([la.of()])}),[2]}))}));return function(e){return n.apply(this,arguments)}}(),onCancel:function(){return e.dispatch({effects:la.of()})}})}}:null})),Ua=_.tk.decorations.compute([ha],(function(e){var n=e.field(ha).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(Vr.Yp);return i&&o?_.p.set(_.p.widget({widget:new La(i.key,o),side:1,block:!0}).range(t,r)):_.p.none})),La=function(e){(0,de.Z)(t,e);var n=(0,fe.Z)(t);function t(e,r){var i;return(0,se.Z)(this,t),(i=n.call(this)).key=e,i.filePath=r,i}var r=t.prototype;return r.toDOM=function(e){var n=(0,sn.VV)((0,a.tZ)(Pa,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:ua.of()})},onInsert:function(n){e.dispatch(e.state.changeByRange((function(e){return{range:P.jT.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}}))),e.focus(),(0,ee.j)(ee.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},r.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},r.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},t}(_.l9),Na=[_a,Ba,Aa,Ua];var Xa=new qo.j((function(e,n){return e?null:function(e){return e?[ha,ga,va,Na]:[]}(n)})),Fa=_.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),Oa=_.tk.theme({".cm-ruler-element":{backgroundColor:x.TV.backgroundHigher}}),Ma=(0,_.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,Go.a)(e,Wa,un.R)},markers:function(e){var n=e.state.facet(Wa);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left,o=r.width-2,a=e.contentHeight,l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=i+e.defaultCharacterWidth*f;p<o&&t.push(new _.dc("cm-ruler-element",p,0,2,a))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return t}}),Wa=P.r$.define({enables:[Ma,Oa]}),Ha=new qo.j((function(e){return e.map((function(e){return Wa.of(e)}))})),za=t(88253),Va=t(75886),ja=t(72499),qa=t(33767),Ya=1e3,Ka=_.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:Fe.TV.backgroundDefault,borderLeft:"1px solid ".concat(Fe.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),$a=new qo.j((function(e,n,t,r){if(e||!n)return null;var i=t.minimapDisplay;return"blocks"!==i&&"characters"!==i?null:new ja.R((function(e){var n=new P.F6;return[Ka,n.of(e.state.doc.lines<=Ya?(0,Va.r)({displayText:i}):[]),_.tk.updateListener.of((function(e){if(e.docChanged){var t=e.startState.doc.lines<=Ya,r=e.state.doc.lines<=Ya;return t!==r?e.view.dispatch({effects:n.reconfigure(r?(0,Va.r)({displayText:i}):[])}):void 0}})),Va.J.compute([qa.m],(function(e){var n=e.field(qa.m,!1);if(!n)return{};for(var t={},i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case fo.dQ.COVERED:t[i]=r.values.global.greenDefault;break;case fo.dQ.MODIFIED:t[i]=r.values.global.blueDefault}return t}))]}))}));function Qa(e){var n=e.filePath,t=e.autoFocus,o=e.isHidden,c=e.deeplink,u=e.onDeeplinkUpdated,s=e.askGhostwriter,d=e.openFile,f=e.openThreadsInbox,p=(0,re.Z)(),h=p.fs,m=p.debuggest,w=p.presence,x=(0,pn.Z)().preferences,k=(0,Fi.Z)(),C=k.ref,S=k.view;(0,Kn.VD)(S);var T=(0,ei.uV)(),I=(0,Jo.FS)(),D=Qo.M.use(Boolean(null===I||void 0===I?void 0:I.match(/Chrome/i))&&Boolean(null===I||void 0===I?void 0:I.match(/Android/i))),P=(0,Pe.P5)({controlName:"flag-ghostwriter-inline-ui",logFlagToAnalytics:!1}),A=(0,Pe.P5)({controlName:"flag-ultra-hardcore",logFlagToAnalytics:!1}),U=(0,Pe.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),L="/replEnvironmentDesktop"===g().pathname,N=(0,b.useContext)(Li.B3),X=(0,ei.jT)();li({view:S,path:n,isHidden:o});var F=(0,Xt.Z)({view:S,presence:w,fs:h,filePath:n}).isLoading;(0,Or.Z)({view:S,autoFocus:t,isLoading:F}),(0,ir.Z)({view:S,filePath:n,isLoading:F}),(0,Fr.Y)({view:S});var O=(0,Lt.Lh)();(0,Nt.Z)({view:S,filePath:n,isLoading:F,decorations:O,openFile:d,askGhostwriter:s}),Ln({view:S,debuggest:m,filePath:n,isLoading:F});var M=Bn({view:S,filePath:n,askGhostwriter:s,openFile:d}),W=M.onAction,H=M.actions,z=M.contextMenuCoords,V=M.onContextMenu,Q=M.closeMenu,J=M.resizeRef,ee=(0,Ot.Z)({view:S,filePath:n,isLoading:F}),ne=function(e){var n=e.view,t=(0,y.Z)(b.useState(null),2),r=t[0],i=t[1],o=(0,B.Z)({view:n});return b.useEffect((function(){if(n){var e=document.createElement("div");return i(e),n.dispatch({effects:o.reconfigure([(0,G.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),_.tk.updateListener.of((function(n){if((0,G.Ep)(n.state)!==(0,G.Ep)(n.startState)&&(0,G.Ep)(n.state)){var t=e.querySelector("[main-field]");if(!t)return;t.focus(),t.select()}})),_.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return n.dispatch({effects:Ht.of(null)}),(0,G.nx)(n)}}])])}),function(){n.dispatch({effects:o.reconfigure([])}),i(null)}}}),[n,o]),{domNode:r}}({view:S});(0,Be.Z)({filePath:n,view:S,isLoading:F,deeplink:c,onDeeplinkUpdated:u}),(0,$r.Z)({view:S,filePath:n}),function(e){var n=e.view,t=(0,B.Z)({view:n}),r=(0,E.f6)();b.useEffect((function(){if(n&&r)return n.dispatch({effects:t.reconfigure(Kr)}),function(){n.dispatch({effects:t.reconfigure([])})}}),[n,t,r])}({view:S});var te=function(e){var n,t=e.view,r=e.filePath,i=(0,re.Z)().fs,o=(0,E.xZ)(null!==(n=null===t||void 0===t?void 0:t.state.facet(Vr.Yp))&&void 0!==n?n:null);return(0,y.Z)((0,Mr.L)({accept:[Z.z.Code,Wr.FILE],drop:function(e,n){if(t){var a=n.getClientOffset(),l=a?t.posAtCoords(a):null;if(null!==l){var c=function(e){t.focus(),t.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===Z.z.Code)c(e.code);else{var u=!0,s=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;o?(0,Hr.L0)(h).then((function(e){return c('"'+e+'"')})):r&&(0,ae.gK)(r)&&(0,zr.r)(h,i,r).then(c)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}}}}),2)[1]}({view:S,filePath:n});(0,Nn.Z)({view:S,filePath:n,decorations:O});var ie=function(e){var n=e.view,t=e.filePath,r=(0,y.Z)(b.useState(null),2),i=r[0],o=r[1],a=(0,B.Z)({view:n});return b.useEffect((function(){if(n)return n.dispatch({effects:a.reconfigure(j({setExplainCodeParams:o}))}),function(){n.dispatch({effects:a.reconfigure([])})}}),[n,a,t]),i}({view:S,filePath:n}),oe=function(e){var n=e.view,t=(0,y.Z)(b.useState(null),2),r=t[0],i=t[1],o=(0,B.Z)({view:n}),a=b.useCallback((function(){if(!n)throw new Error("did not expect to be asked to open generate code modal without view");var e=n.state.selection.main;n.dispatch({effects:[q.of(!0),_.tk.scrollIntoView(e.to)]})}),[n]);return b.useEffect((function(){if(n)return n.dispatch({effects:o.reconfigure(Y({setGenerateCodePortalProps:i}))}),function(){n.dispatch({effects:o.reconfigure([])})}}),[n,o]),{generateCodePortalProps:r,openGenerateCodeModal:a}}({view:S}),le=oe.generateCodePortalProps,ce=oe.openGenerateCodeModal,ue=function(e){var n=e.view,t=(0,y.Z)(b.useState(null),2),r=t[0],i=t[1],o=(0,B.Z)({view:n}),a=b.useCallback((function(){if(!n)throw new Error("did not expect to be asked to open transform code modal without view");var e=n.state.selection.main;n.dispatch({effects:[K.of(!0),_.tk.scrollIntoView(e.to)]})}),[n]);return b.useEffect((function(){if(n)return n.dispatch({effects:o.reconfigure($({setTransformCodePortalProps:i}))}),function(){n.dispatch({effects:o.reconfigure([])})}}),[n,o]),{transformCodePortalProps:r,openTransformCodeModal:a}}({view:S}).transformCodePortalProps,se=hr({view:S,filePath:n,isLoading:F,enable:L});(0,Qr.Z)({view:S,filePath:n}),(0,Jr.Z)({view:S,filePath:n}),function(e){var n=e.view,t=e.filePath,r=void 0===t?null:t,i=e.disableDiff,o=void 0!==i&&i,a=e.disableConflicts,l=void 0!==a&&a,c=(0,Pe.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),u=(0,Pe.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),s=(0,Pe.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),d=(0,re.Z)().git;o=!c||!u||o,l=!c||!s||l,(0,ti.M)((function(){var e=[];return o||e.push((0,Ai.W2)(d,r)),l||e.push(Bi),0===e.length?null:e}),[l,o,r,d],n,"useGitEditorFeatures")}({view:S,filePath:n});var de,fe=(0,v.useRouter)(),pe=(0,l.Vg)(fe),he=(0,E.xZ)(null!==(de=null===S||void 0===S?void 0:S.state.facet(Vr.Yp))&&void 0!==de?de:null),ve=$o.use(he,pe),ge=_n.hx.use(he,h),me=ea.p.use(pe),ye=Ha.use(U?x.rulers:[]),Ze=za.U.use(pe),be=(0,Pe.P5)({controlName:"flag-paste-secrets",logFlagToAnalytics:!1}),we=Xa.use(pe,be),xe=(0,Pe.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),ke=(0,pr.F)(),Ce=$a.use(pe,xe,x,ke),Se=(0,b.useMemo)((function(){return[Ze,ve,D,me,Ce,_n.sy,ge,Qo.k,zo,Fa,ye,we]}),[Ze,ve,D,Ce,me,ge,ye,we]);return(0,a.BX)("div",{ref:J,css:ni.ac,"data-cy":F?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(n),children:[(0,a.tZ)(Xi.Z,{ref:C,elementRef:te,css:ni.Mp,initializing:F,filePath:n,extensions:Se,onContextMenu:V,onException:function(e){var t,r=X({filePath:n}),i={filePath:n,cursorPosition:JSON.stringify(null===(t=null===N||void 0===N?void 0:N.get(Ni._s))||void 0===t?void 0:t.position),fileVersion:r};A?T({error:e,tags:{codemirror:!0},extras:i,origin:"CodemirrorEditor: useEditor/onException"}):(0,Xr.xp)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:i})},noHistory:!0}),z&&S?(0,a.tZ)(R.ZP,{view:S,coords:z,actions:H,closeMenu:Q,onAction:W}):null,ie?(0,a.tZ)(st,{code:ie.code,dom:ie.dom,filePath:n}):null,le?(0,a.tZ)(Rt,(0,i.Z)((0,r.Z)({},le),{filePath:n})):null,ue?(0,a.tZ)(Ut,(0,i.Z)((0,r.Z)({},ue),{filePath:n})):null,ee&&n?(0,a.tZ)(Ft.Z,{dom:ee,onShowGenerateCodeModal:function(){return P?W(R.D2.GenerateCode):ce()},filePath:n}):null,ne.domNode?(0,a.tZ)(rr,{dom:ne.domNode,view:S}):null,(0,a.tZ)(Lt.Iq,{source:O.observable}),S&&f?(0,a.tZ)(a.HY,{children:Object.entries(se.threadElements).map((function(e){var t=(0,y.Z)(e,2),r=t[0],i=t[1];return Qn.createPortal((0,a.tZ)(Nr,{threadId:r,view:S,filePath:n,openThreadsInbox:f}),i)}))}):null]})}var Ja=t(21296),el=t(4143),nl=t(13474),tl=t(69861),rl=t(2187),il=t(17077),ol=t(18171);function al(e,n,t){var r=t.find((function(t){var r=t.range;return(0,Ie.R)(e,r.end)>=n&&(0,Ie.R)(e,r.start)<=n}));return null==r?[]:r.children?[r].concat(al(e,n,r.children)):[r]}function ll(e,n){return e.length===n.length&&e.every((function(e,t){return e===n[t]}))}var cl=t(53397),ul=t(98143),sl=t(51875),dl=t(80731),fl=t(54301),pl=t(53674),hl=t(43312),vl=t(17807),gl=(0,hl.iv)([vl.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),ml={button:(0,hl.iv)([x.l0.reset.button,x.l0.p(2),x.l0.rowWithGap(4),x.l0.align.center,gl]),text:(0,hl.iv)({fontSize:x.TV.fontSizeSmall})},yl={opacity:1};function Zl(e){var n=e.icon,t=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,u=(0,fl.U)(l,o).buttonProps,s=(0,pl.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.BX)(k.G,(0,i.Z)((0,r.Z)({tag:"button",css:ml.button,style:f||c?yl:void 0,innerRef:o},(0,je.dG)(u,d)),{children:[n?(0,b.cloneElement)(n,{size:16}):null,(0,a.tZ)(k.G,{css:ml.text,children:t})]}))}var bl=t(73457),wl=t(23257),xl={underlay:(0,hl.iv)([x.l0.coverContainer,x.l0.position.fixed]),surface:(0,hl.iv)([x.l0.borderRadius(8),{boxShadow:x.TV.shadow2,border:"1px solid",borderColor:x.TV.backgroundHighest}])};function kl(e){var n=e.state,t=e.triggerRef,o=e.placement,l=e.children,c=(0,y.Z)((0,wl.Z)(),2),u=c[0],s=c[1],d=(0,bl.Sv)({placement:o,triggerRef:t,popoverRef:u,offset:8},n),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(bl.aV,{children:[(0,a.tZ)(k.G,(0,i.Z)((0,r.Z)({},p),{css:xl.underlay})),(0,a.BX)(L.T,(0,i.Z)((0,r.Z)({elevated:!0,css:xl.surface,innerRef:s},f),{children:[(0,a.tZ)(bl.U4,{onDismiss:n.close}),l,(0,a.tZ)(bl.U4,{onDismiss:n.close})]}))]})}var Cl=t(51936),Sl=(0,hl.iv)([x.l0.p(4)]);function Tl(e){var n=e.items,t=e.children,l=e.menuProps,c=e.selectedKeys,u=e.onAction,s=(0,Cl.D)({items:n,children:t,selectedKeys:c,selectionMode:"single"}),d=(0,b.useRef)(null),f=(0,sl.H9)((0,r.Z)({items:n,onAction:u},l),s,d);return(0,a.tZ)(k.G,(0,i.Z)((0,r.Z)({},f.menuProps),{innerRef:d,css:Sl,children:(0,o.Z)(s.collection).map((function(e){return(0,a.tZ)(Il,{item:e,state:s},e.key)}))}))}var El={root:(0,hl.iv)([x.l0.flex.row,x.l0.align.center,x.l0.position.relative,gl]),selected:(0,hl.iv)([{opacity:1,backgroundColor:vl.vb.interactiveBackground}])},Rl={opacity:1};function Il(e){var n=e.item,t=e.state,o=(0,b.useRef)(null),l=(0,sl.iX)({key:n.key},t,o),c=l.menuItemProps,u=l.isSelected,s=(0,pl.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.tZ)(k.G,(0,i.Z)((0,r.Z)({innerRef:o,css:[El.root,u&&El.selected],style:f||u?Rl:void 0},(0,je.dG)(c,d)),{children:n.rendered}))}var Dl={root:(0,hl.iv)([x.l0.p(4),x.l0.rowWithGap(4),x.l0.align.center]),text:(0,hl.iv)([x.l0.truncate,x.l0.flex.growAndShrink(1),{fontSize:x.TV.fontSizeDefault}])};function Gl(e){return(0,a.BX)(k.G,{css:[Dl.root],children:[e.icon?(0,b.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(k.G,{css:Dl.text,children:e.text})]})}var Pl=t(29892),_l=t(20406),Bl=t(14433),Al=t(33064),Ul=t(53272),Ll=t(98355),Nl=t(95271),Xl=t(70628),Fl=t(82874),Ol=t(7225),Ml=t(97130),Wl=t(65911),Hl=t(29143),zl=function(e){var n=new Set(Hl.Z),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,y.Z)(a.value,3),u=c[0],s=c[1],d=c[2];if(!n.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof s&&(s=Ml.s.get(s)),t.set(u,[s,null!==d&&void 0!==d?d:x.TV.foregroundDefault])}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[Ol.SymbolKind.Array,Nl.Z],[Ol.SymbolKind.Boolean,f.Z],[Ol.SymbolKind.Class,"class",x.TV.yellowDefault],[Ol.SymbolKind.Constant,"constant",x.TV.blueStronger],[Ol.SymbolKind.Constructor,"method",x.TV.blurpleDefault],[Ol.SymbolKind.Enum,Bl.Z,x.TV.orangeDefault],[Ol.SymbolKind.EnumMember,Fl.Z,x.TV.blueStronger],[Ol.SymbolKind.Event,Pl.Z],[Ol.SymbolKind.Field,Xl.Z],[Ol.SymbolKind.File,Al.Z],[Ol.SymbolKind.Function,"function",x.TV.blurpleStronger],[Ol.SymbolKind.Interface,Ul.Z,x.TV.blueStronger],[Ol.SymbolKind.Key,Ll.Z],[Ol.SymbolKind.Method,"method",x.TV.blurpleDefault],[Ol.SymbolKind.Module,Wl.Z,x.TV.purpleDefault],[Ol.SymbolKind.Namespace,_l.Z],[Ol.SymbolKind.Object,f.Z,x.TV.blueDimmer],[Ol.SymbolKind.Operator,f.Z],[Ol.SymbolKind.Package,Wl.Z,x.TV.purpleDefault],[Ol.SymbolKind.Property,Xl.Z],[Ol.SymbolKind.String,d.Z],[Ol.SymbolKind.Struct,_l.Z],[Ol.SymbolKind.TypeParameter,Fl.Z],[Ol.SymbolKind.Variable,Fl.Z,x.TV.blueStronger]]);function Vl(e){var n,t=e.kind,r=(0,y.Z)(null!==(n=zl.get(t))&&void 0!==n?n:[f.Z,x.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}function jl(e){return CSS.escape(e.name)}function ql(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,ul.W)({onOpenChange:function(e){e&&(0,ee.j)(ee.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=b.useRef(null),u=(0,sl.u4)({},l,c),s=u.menuTriggerProps,d=u.menuProps,f=n?new Set([n.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(Zl,{text:o,icon:i,innerRef:c,ariaProps:s,active:l.isOpen}),l.isOpen?(0,a.tZ)(kl,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(Tl,{menuProps:d,items:t,selectedKeys:f,onAction:function(e){var n=t.find((function(n){return jl(n)===e}));n&&(r(n.selectionRange.start),(0,ee.j)(ee.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(dl.ck,{children:(0,a.tZ)(Gl,{icon:(0,a.tZ)(Vl,{kind:e.kind}),text:e.name})},jl(e))}})}):null]})}var Yl=b.memo((function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,a.BX)(a.HY,{children:[t.map((function(e,i){var o=0===i?n:t[i-1].children;return o?(0,a.BX)(b.Fragment,{children:[(0,a.tZ)(Mt.Z,{size:12}),(0,a.tZ)(ql,{symbols:o,icon:(0,a.tZ)(Vl,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},jl(e)):null})),(null===o||void 0===o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(Mt.Z,{size:12}),(0,a.tZ)(ql,{symbols:o,text:"...",moveCursor:r})]}):null]})}));function Kl(e){var n=e.view,t=(0,ol.Z)((function(){return(0,h.cn)(null)}),[]),r=(0,h.b9)(t),i=b.useCallback((function(e){null===n||void 0===n||n.dispatch({scrollIntoView:!0,selection:P.jT.cursor((0,Ie.R)(n.state.doc,e))}),null===n||void 0===n||n.focus()}),[n]);(0,ti.M)((function(){var e=jt()(r,200);return _.tk.updateListener.of((function(n){var t=n.state.field(il.A,!1)||null,r=t!==n.startState.field(il.A,!1);(n.selectionSet||r)&&e({doc:n.view.state.doc,cursor:n.state.selection.main.head,symbols:t})}))}),[r],n,"useCodeNav");var o=(0,ol.Z)((function(){return(0,cl.kv)(t,(function(e){return(null===e||void 0===e?void 0:e.symbols)?al(e.doc,e.cursor,e.symbols):[]}),ll)}),[t]),a=(0,ol.Z)((function(){return(0,cl.kv)(t,(function(e){return null===e||void 0===e?void 0:e.symbols}),Sn())}),[t]);return{symbols:(0,h.Dv)(a),symbolsPath:(0,h.Dv)(o),moveCursor:i}}var $l=b.memo((function(e){var n=Kl({view:e.view}),t=n.symbols,r=n.symbolsPath,i=n.moveCursor;return(null===t||void 0===t?void 0:t.length)?(0,a.tZ)(Yl,{symbols:t,symbolsPath:r,moveCursor:i}):null})),Ql=t(79752),Jl=t(39187);function ec(e){var n=e.path,t=e.performPaneOperation,r=(0,Kn.uN)(),i=(0,b.useCallback)((function(e){t({operation:"replace",pane:(0,Ql.$E)(e)})}),[t]);return(0,a.tZ)(Ql.h4,{children:(0,a.tZ)(Ql.Qc,{children:(0,a.tZ)(Jl.tr,{path:n,onFileClick:i,children:(0,a.tZ)($l,{view:r})})})})}function nc(e){var n=(0,tl.Z)(),t=(0,E.xZ)(e.filePath),r=(0,el.Z)(nl.y.Editor),i=(0,rl.Z)();return(0,a.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(n?"0 3px 0 3px ".concat(n):"0")},children:[e.performPaneOperation?(0,a.tZ)(ec,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,a.BX)("div",{css:ni.ev,children:[(0,a.tZ)(Qa,{askGhostwriter:e.askGhostwriter,openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated}),t?(0,a.tZ)(T,{}):null]}),(0,a.tZ)("div",{css:{display:i?"none":"block"},children:(0,a.tZ)(Ja.Z,{performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,a.tZ)(m.Z,{filePath:e.filePath,isLoading:!1})]})}var tc=t(21303),rc=t(27549),ic=t(41681),oc=t(5616),ac=t(43330),lc=t(90288),cc=t(94452),uc=t(6449);var sc={Content:function(e){var n=e.pane,t=e.options;return(0,a.tZ)(fc,(0,i.Z)((0,r.Z)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,a.tZ)(c.Z,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,ae.UO)(e.data.path):"No file open"}};function dc(e){var n=e.path,t=e.isActive,r=e.performPaneOperation,i=(0,Kn.uN)(),c=(0,ic.Gb)({filePath:n});(0,lc.Z)({view:i,onUpdate:function(){return r({operation:"commit"})}});var p=function(e){return(0,ol.Z)((function(){return e?{match:cc.pl,data:{type:"action",label:"Toggle all folds",icon:(0,a.tZ)(Mt.Z,{}),run:function(){0===(0,oo.q2)(e.state).size?(0,oo.g_)(e):(0,oo.jZ)(e)}}}:null}),[e])}(i);(0,ac.x)(ic.kq,{enabled:Boolean(t&&c),run:function(){null===c||void 0===c||c.format()}});var h=(0,ol.Z)((function(){return c?c.isFormatting?{type:"action",icon:(0,a.tZ)($e.Z,{}),label:"Formatting...",run:function(){}}:{type:"action",icon:(0,a.tZ)(oc.Z,{}),label:"Format "+(0,ae.UO)(n),run:function(){c.format()}}:null}),[c,n]),v=(0,Ql.Mp)({path:n,performPaneOperation:r}),g=function(){var e=(0,Pe.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),n=(0,l.T3)(),t=(0,pn.Z)(),r=t.preferences.minimapDisplay,i=t.update;return(0,ol.Z)((function(){return!e||n?null:{match:cc.pl,data:{label:"Minimap",icon:(0,a.tZ)(u.Z,{}),type:"context"},commands:function(e){var n=e.active,t=e.search;return n||t?[{value:"none",label:"Hide",icon:(0,a.tZ)(s.Z,{})},{value:"characters",label:"Characters",icon:(0,a.tZ)(d.Z,{})},{value:"blocks",label:"Blocks",icon:(0,a.tZ)(f.Z,{})}].filter((function(e){return e.value!==r})).map((function(e){return{match:cc.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){i({minimapDisplay:e.value})}}}})):[]}}}),[i,r,e,n])}();return(0,rc.L5)((function(){if(i){var e,n=g?[g]:[];if(p&&n.push(p),v)(e=n).push.apply(e,(0,o.Z)(v));return{type:"codeEditor",actions:h?[h]:void 0,commands:n,getCurrentSelectionText:function(){if(!i.state.selection.main.empty)return i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to)}}}}),[i,h,p,v,g]),(0,rc.Wk)((function(){return i}),[i]),null}function fc(e){var n=e.path,t=e.line,r=e.col,i=e.isActive,o=e.isHidden,c=e.performPaneOperation,u=(0,tc.EI)(n,c),s=(0,v.useRouter)(),d=!(0,p.Z)()&&!(0,l.Vg)(s)&&i,f=(0,uc.T)(n),g=(0,ol.Z)((function(){return{line:t,col:r}}),[t,r]),m=(0,ol.Z)((function(){return function(){c({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}}),[c,n]),y=function(e){var n=e.openPane,t=(0,Pn.d)(),r=(0,Yt.Z)(n),i=(0,Ae.ql)();return(0,ol.Z)((function(){if(t)return function(e){r.current({type:"ghostwriterChat"}),i({chatMessage:e})}}),[r,i,t])}({openPane:function(e){return c({operation:"open",secondary:!0,pane:e})}}),Z=(0,ol.Z)((function(){return function(e){c({operation:"commit"}),c({operation:"open",pane:{type:"codeEditor",data:e}})}}),[c]),w=(0,b.useCallback)((function(){c({operation:"open",secondary:!0,pane:{type:"threadInbox"}})}),[c]);return n?f?(0,a.tZ)(uc.c,{path:n,error:f}):(0,a.tZ)(h.zt,{scope:Kn.d8,children:(0,a.BX)(tc.ox.Provider,{value:u,children:[(0,a.tZ)(nc,{filePath:n,autoFocus:d,isHidden:null!==o&&void 0!==o&&o,deeplink:g,onDeeplinkUpdated:m,hideMobileKeyboardToolbar:!0,performPaneOperation:c,askGhostwriter:y,openFile:Z,openThreadsInbox:w},n),(0,a.tZ)(dc,{path:n,isActive:i,performPaneOperation:c})]})}):null}},73561:function(e,n,t){t.d(n,{R:function(){return Ft}});var r,i,o=t(74985),a=t(92508),l=t(2272),c=t(50959),u=t(85368),s=t(39541),d=t(25198),f=t(57135),p=t(57389),h=t(72006),v=t(4405),g=t(96583),m=t(45510),y=t(17807),Z=t(33814),b=t(95271),w=t(15544),x=t(10035),k=t(45348),C=t(57475),S=t(77637),T=t(43312),E=function(e){var n=e.children;return(0,o.tZ)(u.G,{css:[s.l0.height("100%"),s.l0.overflowY("auto")],children:(0,o.tZ)(u.G,{css:[s.l0.position.relative],children:n})})},R=(0,T.iv)([s.l0.width("100%"),s.l0.maxWidth("none")]),I=function(e){var n=e.children,t=e.fullWidth,r=(0,S.Z)(e,["children","fullWidth"]);return(0,o.tZ)(u.G,(0,v.Z)((0,h.Z)({},r),{css:[t?R:a.F3,s.l0.px(8),s.l0.pt(16)],children:n}))},D=t(29316),G=t(16572),P=t(61284),_=t(63128),B=t(51631),A=t(32104),U=t(71002),L=(r={},(0,p.Z)(r,B.Fe.Suspended,{title:"Suspended",color:s.TV.greyDefault}),(0,p.Z)(r,B.Fe.UpdatingTier,{title:"Updating tier",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Suspending,{title:"Suspending",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Resuming,{title:"Resuming",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Pending,{title:"Provisioning",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Building,{title:"Building",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Running,{title:"Bundling",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Promoting,{title:"Promoting",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Failed,{title:"Failed",color:s.TV.accentNegativeDefault}),(0,p.Z)(r,B.Fe.Success,{title:"Success",color:s.TV.accentPositiveDefault}),r),N=function(){var e=(0,U.kW)(),n=(0,U.$y)();if(e===U.z4.Loading||!n)return(0,o.tZ)(A.Z,{size:12});var t=n.status,r=t in L?L[t]:{title:"",color:s.TV.greyDefault},i=r.title,a=r.color;return(0,o.BX)(u.G,{css:[s.l0.align.center,s.l0.rowWithGap(6),{textTransform:"capitalize"}],children:[(0,o.tZ)(u.G,{as:"span",css:[s.l0.width("8px"),s.l0.height("8px"),s.l0.borderRadius("full"),{backgroundColor:a,boxShadow:"0 0 12px ".concat(a)}]}),(0,o.tZ)("div",{className:"always-on-indicator","aria-label":i,"data-microtip-position":"bottom",role:"tooltip"}),(0,o.tZ)(P.xv,{children:i})]})},X=t(32973),F=t(13548),O=function(e){var n=e.currentBuild,t=(0,l.Z)(c.useState([]),2),r=t[0],i=t[1];return c.useEffect((function(){var e,t="HostingDeployment"===(null===(e=n.repl.hostingDeployment)||void 0===e?void 0:e.__typename)&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case B.r4.Goval:r.push({href:"https://".concat(t,".id.repl.co"),private:!0});break;case B.r4.Gce:case B.r4.CloudRun:case B.r4.Static:var o,a,l,c,u="HostingDeployment"===(null===(o=n.repl.hostingDeployment)||void 0===o?void 0:o.__typename)?null===(a=n.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;if(!u&&(null===(l=n.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),u)r.push({href:"https://".concat(u).concat("replit.com"!==(null===window||void 0===window||null===(c=window.location)||void 0===c?void 0:c.hostname)?".staging":"",".replit.app"),private:!1})}if(n.repl.domains){var s=n.repl.domains.filter((function(e){return(null===e||void 0===e?void 0:e.hosting_deployment_id)===t})),d=!0,f=!1,p=void 0;try{for(var h,v=s[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value;g&&r.push({href:"https://".concat(g.domain),private:!1,state:"verified"!==g.state?g.state:void 0})}}catch(m){f=!0,p=m}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}}i(r)}),[n]),(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8),s.l0.flex.growAndShrink(1)],children:r.map((function(e,n){return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,o.tZ)(P.xv,{css:[s.l0.flex.shrink(1)],children:(0,o.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.color.foregroundDefault],children:e.href})}),e.private?(0,o.tZ)(F.Z,{color:s.TV.foregroundDefault}):null,(0,o.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.display.flex,s.l0.align.center],children:(0,o.tZ)(X.Z,{color:s.TV.foregroundDefault})}),e.state?(0,o.BX)(P.xv,{children:["(",e.state,")"]}):null]},"domains-".concat(n))}))})},M=t(652),W=t(4421),H=t(76735),z=t(88541),V=(i={},(0,p.Z)(i,B.r4.Gce,"Reserved VM"),(0,p.Z)(i,B.r4.CloudRun,"On Demand"),(0,p.Z)(i,B.r4.Static,"Static"),i),j=t(87076),q=t(43119),Y=t(71440),K=t(24635);function $(){var e=(0,q.Z)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n  }\n"]);return $=function(){return e},e}function Q(){var e=(0,q.Z)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return Q=function(){return e},e}function J(){var e=(0,q.Z)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return J=function(){return e},e}var ee={},ne=(0,Y.Ps)($()),te=(0,Y.Ps)(Q(),ne),re=(0,Y.Ps)(J(),te);var ie,oe=t(42241),ae=t(66482),le=t(1734),ce=function(e){var n=e.color;return(0,o.tZ)(u.G,{css:[s.l0.align.center,s.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,o.tZ)(u.G,{as:"span",css:[s.l0.width("8px"),s.l0.height("8px"),s.l0.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})};!function(e){e.Current="current"}(ie||(ie={}));var ue,se,de=(0,p.Z)({},ie.Current,{icon:(0,o.tZ)(ce,{color:s.TV.blueStronger}),text:"Current deployment"}),fe=u.K.div,pe=function(e){var n=e.activityLogItem,t=e.isCurrent?ie.Current:n.type,r=(0,l.Z)(c.useState(!1),2),i=r[0],a=r[1],d=(0,l.Z)(c.useState(!1),2),f=d[0],p=d[1],h=c.useRef(!1);c.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(i)}),200);return function(){clearTimeout(e)}}),[i]);var v=t in de&&de[t];if(!v)return null;var g=v.icon,m=v.text;return(0,o.tZ)(u.G,{css:[s.l0.p(8)],onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.BX)(le.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,o.tZ)(fe,{css:s.l0.cursor.pointer,children:g}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(240)],children:(0,o.tZ)(P.xv,{multiline:!0,children:m})})]})})},he=t(93658),ve=function(e){return e.loading?(0,o.tZ)(u.G,{css:[s.l0.p(8),s.l0.center],children:(0,o.tZ)(A.Z,{})}):null},ge=t(11086),me=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,l.Z)(c.useState(!1),2),i=r[0],a=r[1],d=(0,l.Z)(c.useState(!1),2),f=d[0],p=d[1],h=c.useRef(!1);return c.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(i)}),200);return function(){clearTimeout(e)}}),[i]),(0,o.tZ)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.BX)(le.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,o.tZ)("span",{css:[y.gU.filled,s.l0.display.inlineBlock,s.l0.fontSize("small"),s.l0.px(4),s.l0.py(2),s.l0.borderRadius(4)],children:t}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(260)],children:(0,o.tZ)(P.xv,{variant:"small",multiline:!0,children:n.id})})]})})},ye=(ue={},(0,p.Z)(ue,ge.dD.Deploy,(function(e){return(0,o.BX)(o.HY,{children:["deployed ",(0,o.tZ)(me,{build:e})]})})),(0,p.Z)(ue,ge.dD.Rollback,(function(e){return(0,o.BX)(o.HY,{children:["rolled back ",(0,o.tZ)(me,{build:e})]})})),(0,p.Z)(ue,ge.dD.Fail,(function(e){return(0,o.BX)(o.HY,{children:["failed to deploy ",(0,o.tZ)(me,{build:e})]})})),ue),Ze=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=n.user.displayName,a=t in ye&&ye[t](r);return a?(0,o.BX)(P.xv,{css:s.l0.color.foregroundDimmer,children:[(0,o.tZ)("span",{css:[s.l0.color.foregroundDefault,s.l0.fontWeight.medium],children:i+" "}),a]}):null},be=(se={},(0,p.Z)(se,ge.dD.Deploy,{icon:(0,o.tZ)(C.Z,{}),color:s.TV.accentPositiveDefault}),(0,p.Z)(se,ge.dD.Rollback,{icon:(0,o.tZ)(C.Z,{}),color:s.TV.blurpleStronger}),(0,p.Z)(se,ge.dD.Fail,{icon:(0,o.tZ)(H.Z,{}),color:s.TV.accentNegativeDefault}),se),we=function(e){var n=e.type,t=n in be&&be[n];if(!t)return null;var r=t.icon,i=t.color;return(0,o.tZ)(u.G,{css:[s.l0.p(8),{color:i}],children:r})},xe=t(625),ke=function(e){var n=e.context;(0,xe.j)(xe.U3.DEPLOYMENT_SECTION_VIEWED,{context:n})},Ce=t(9970),Se=t(62740),Te=t(9348);function Ee(){var e=(0,q.Z)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Ee=function(){return e},e}var Re={},Ie=(0,Y.Ps)(Ee());var De,Ge=t(60583),Pe=t(23455),_e=t(96351),Be=t(24592),Ae=t(63837),Ue=t(27691),Le=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,o.tZ)(H.Z,{alt:"error"}):n<t?(0,o.tZ)(Ae.Z,{alt:"success"}):n===t?(0,o.tZ)(A.Z,{alt:"current"}):(0,o.tZ)(Be.Z,{alt:"waiting"})},Ne=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?{color:Pe.TV.white,backgroundColor:Pe.TV.accentNegativeDefault}:n<t?{color:Pe.TV.accentPositiveStrongest,backgroundColor:Pe.TV.accentPositiveDimmer}:n===t?{color:Pe.TV.white,backgroundColor:Pe.TV.accentPrimaryDefault}:{color:Pe.TV.foregroundDimmest,backgroundColor:Pe.TV.backgroundHigher}},Xe=function(e){var n=e.stage,t=e.totalStagesWithTitle,r=e.activeStage,i=e.text,a=e.erroredStage;return(0,o.tZ)(_e.D,{text:r?i:"",css:[s.l0.border({color:Pe.TV.backgroundDefault}),r?(0,h.Z)({},Ne({stage:n,activeStage:r,erroredStage:a})):Ue.p.foregroundPulse(),{flex:1,height:26,zIndex:t-n,":first-of-type":{paddingLeft:16},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}}],iconRight:r?(0,o.tZ)(Le,{stage:n,activeStage:r,erroredStage:a}):void 0})},Fe=t(80336),Oe=t(33280),Me=t(70114),We=t(45285),He=t(82568),ze=[{id:0,title:"Provision",statusType:B.Fe.Pending},{id:1,title:"Build",statusType:B.Fe.Building},{id:2,title:"Bundle",statusType:B.Fe.Running},{id:3,title:"Promote",statusType:B.Fe.Promoting},{id:4,statusType:B.Fe.Success}],Ve=function(e){return ze.find((function(n){return n.statusType===e}))},je=(0,He.X)({container:[s.l0.borderRadius(8),{border:"1px solid var(--outline-dimmest)"}],top:[s.l0.colWithGap(12),s.l0.p(16),s.l0.pt(12)],header:[s.l0.flex.row,s.l0.justify.spaceBetween],cancel:{borderRadius:6,paddingLeft:6},canceling:{pointerEvents:"none",color:s.TV.greyDefault,borderRadius:6,paddingLeft:6},stages:[s.l0.flex.row,s.l0.flex.grow(1)],bottom:[s.l0.borderRadius(0,0,8,8),s.l0.overflow("hidden")],logsOpen:[s.l0.overflow("hidden"),s.l0.height("auto")],logsClosed:[s.l0.overflow("hidden"),s.l0.height(0)],xterm:[s.l0.width("100%"),s.l0.maxWidth("100%")],errorContainer:[s.l0.p(12),s.l0.colWithGap(4)],warning:[s.l0.rowWithGap(4),s.l0.align.center],link:{color:s.TV.foregroundDefault,textDecoration:"underline",":hover":{color:s.TV.accentPrimaryStronger}}}),qe=function(e){var n,t,r,i,a,d,p,v,y,Z,w,x,k=e.initialBuild,C=e.hideHeader,S=e.viewBuildLogsOnLoad,T=e.onViewLogs,E=e.onCanceled,R=e.onError,I=e.openFile,D=(0,U.rm)(),_=(0,U.pn)(),L=_?{id:_.id,status:_.status,timeStarted:_.timeCreated,userDisplayName:_.user.displayName}:void 0,N=c.useRef(k||L),X=function(e){var n=(0,h.Z)({},Re,e);return K.a(Ie,n)}({skip:!(null===(n=N.current)||void 0===n?void 0:n.id),variables:{input:{buildId:null!==(x=null===(t=N.current)||void 0===t?void 0:t.id)&&void 0!==x?x:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null===e||void 0===e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":R(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.__typename){case"HostingBuildDeployLogAction":t.push(u.log);break;case"HostingBuildDeployStatusAction":r.push(u)}}}catch(g){o=!0,a=g}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}le({type:"history",payload:t});var s=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;ce(v.status)}}catch(g){d=!0,f=g}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}break;default:R("Unexpected typename.")}},onError:function(e){R(e.message)}}),F=X.loading,O=X.refetch;(0,U.U)((function(e){switch(e.__typename){case"HostingBuildDeployLogAction":var n=e.log;le({type:"update",payload:n});break;case"HostingBuildDeployStatusAction":var t=e.status;ce(t)}}));var M=(0,l.Z)(c.useState(N.current?null===(r=Ve(N.current.status))||void 0===r?void 0:r.id:void 0),2),W=M[0],z=M[1],V=(0,l.Z)(c.useState("failed"===(null===(i=N.current)||void 0===i?void 0:i.status)?null===(d=Ve(null===(a=N.current)||void 0===a?void 0:a.status))||void 0===d?void 0:d.id:void 0),2),q=V[0],Y=V[1],$=(0,l.Z)(c.useState(!1),2),Q=$[0],J=$[1],ee=(0,We.Z)().fs,ne=(0,l.Z)((0,Te.Z)({openFile:I,listFiles:ee.listFiles}),2),te=ne[0],re=ne[1],ie=(0,Ge.f)(),oe=(0,l.Z)(c.useReducer((function(e,n){switch(n.type){case"history":return te&&te.clear(),(0,Ce.Z)(n.payload).concat((0,Ce.Z)(e));case"update":return[n.payload];case"refetch":return te&&te.clear(),F||O(),[]}}),[]),2),ae=oe[0],le=oe[1],ce=function(e){if(e===B.Fe.Failed)Y(W);else{var n=Ve(e);if(!n)return;z(n.id)}},ue=function(){var e=(0,f.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return J(!0),[4,D()];case 1:return e.sent(),E(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),se=(0,l.Z)(c.useState(S||!1),2),de=se[0],fe=se[1],pe=function(){fe(!de),de||ke({context:"deploy_progress_logs"})};c.useEffect((function(){ke({context:"deploy_progress"})}),[]),c.useEffect((function(){var e;(null===(e=N.current)||void 0===e?void 0:e.id)&&_&&_.id!==N.current.id&&(N.current={id:_.id,status:_.status,timeStarted:_.timeCreated,userDisplayName:_.user.displayName},z(void 0),Y(void 0),le({type:"refetch"}))}),[_,null===(p=N.current)||void 0===p?void 0:p.id,O]),c.useEffect((function(){var e;void 0!==W&&"failed"===(null===(e=N.current)||void 0===e?void 0:e.status)&&Y(W)}),[W,null===(v=N.current)||void 0===v?void 0:v.status]),c.useEffect((function(){te&&ae.forEach((function(e){return te.write(e)}))}),[ae,te]);var he,ve=null===(he=W,y=ze.find((function(e){return e.id===he})))||void 0===y?void 0:y.statusType,ge=ve!==B.Fe.Success&&!q;if(!N.current)return null;var me=ze.filter((function(e){return"title"in e}));return(0,o.BX)(u.G,{css:je.container,children:[(0,o.BX)(u.G,{css:je.top,children:[C?null:(0,o.BX)(u.G,{css:je.header,children:[(0,o.BX)(u.G,{css:s.l0.rowWithGap(8),children:[(0,o.tZ)(P.xv,{variant:"subheadDefault",children:"Upcoming"}),ge?(0,o.tZ)(Se.T,{text:"Cancel",css:Q?je.canceling:je.cancel,onClick:ue,iconRight:Q?(0,o.tZ)(A.Z,{}):(0,o.tZ)(Fe.Z,{})}):null]}),(0,o.BX)(u.G,{css:s.l0.rowWithGap(6),children:[(null===(Z=N.current)||void 0===Z?void 0:Z.timeStarted)&&(null===(w=N.current)||void 0===w?void 0:w.userDisplayName)?(0,o.BX)(P.xv,{css:s.l0.color.greyStronger,children:["Started ".concat((0,G.Z)(new Date(N.current.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,o.tZ)("span",{css:s.l0.color.foregroundDefault,children:N.current.userDisplayName})]}):null,(0,o.tZ)(j.h,{onClick:pe,alt:"View build logs",children:de?(0,o.tZ)(Me.ChevronUp,{}):(0,o.tZ)(Me.ChevronDown,{})})]})]}),(0,o.tZ)(u.G,{css:je.stages,children:me.map((function(e){var n=e.id,t=e.title;return(0,o.tZ)(Xe,{stage:n,totalStagesWithTitle:me.length,text:t,activeStage:W,erroredStage:q},n)}))})]}),(0,o.BX)(u.G,{css:je.bottom,children:[(0,o.BX)(u.G,{css:de?je.logsOpen:je.logsClosed,children:[(0,o.tZ)(Oe.R,{}),(0,o.tZ)(u.G,{css:[s.l0.display.flex,s.l0.pt(12),s.l0.pl(16),s.l0.overflow("hidden"),{backgroundColor:null===ie||void 0===ie?void 0:ie.background}],children:(0,o.tZ)(u.K.div,{css:je.xterm,ref:re})})]}),q&&ve?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Oe.R,{}),ve===B.Fe.Building?(0,o.BX)(u.G,{css:je.errorContainer,children:[(0,o.BX)(u.G,{css:je.warning,children:[(0,o.tZ)(H.Z,{color:s.TV.accentNegativeStronger}),(0,o.tZ)(P.xv,{css:s.l0.fontWeight.medium,children:"Your app failed to build"})]}),(0,o.BX)(P.xv,{multiline:!0,css:s.l0.mb(16),children:["It looks like your Repl doesn\u2019t run. In order to deploy, your Repl has to run successfully in the Workspace. Please fix any issues and try deploying again or see"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:je.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),de?null:(0,o.tZ)(m.zx,{text:"Build logs",iconLeft:(0,o.tZ)(b.Z,{}),onClick:pe})]}):null,ve===B.Fe.Promoting?(0,o.BX)(u.G,{css:je.errorContainer,children:[(0,o.BX)(u.G,{css:je.warning,children:[(0,o.tZ)(H.Z,{color:s.TV.accentNegativeStronger}),(0,o.tZ)(P.xv,{css:s.l0.fontWeight.medium,children:"Your app failed to promote"})]}),(0,o.BX)(P.xv,{multiline:!0,css:s.l0.mb(16),children:["It looks like something went wrong on the production server. It might have something to do with your apps logs. Please fix any issue and try deploying again or see"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:je.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),(0,o.tZ)(m.zx,{text:"App logs",iconLeft:(0,o.tZ)(b.Z,{}),onClick:function(){T()}})]}):null]}):null]})]})},Ye=t(3652);function Ke(e){var n,t=e.view,r=e.onViewAction,i=e.onError,a=e.openFile,u=e.data,s=(0,U.$y)(),d=(0,l.Z)(c.useState((0,D.yF)({view:t,data:u},D.kO.History)||{view:De.List}),2),f=d[0],p=d[1];if(!s)return i("No current build found"),null;switch(f.view){case De.List:n=(0,o.tZ)($e,{replId:s.repl.id,buildId:s.id,onError:i,onSelect:function(e,n){return p({view:De.Logs,buildId:e,buildStatus:n})}});break;case De.Logs:n=(0,o.tZ)(Qe,{openFile:a,buildId:f.buildId,buildStatus:f.buildStatus,onViewLogs:function(){return r({type:D.ap.ChangeView,payload:{view:D.kO.Logs}})},onBack:function(){return p({view:De.List})}})}return(0,o.tZ)(I,{children:n})}!function(e){e.List="list",e.Logs="logs"}(De||(De={}));var $e=function(e){var n=e.replId,t=e.buildId,r=e.onError,i=e.onSelect,a=function(e){var n=(0,h.Z)({},ee,e);return K.a(re,n)}({variables:{replId:n,count:20},fetchPolicy:"cache-and-network",ssr:!1}),p=a.data,v=a.loading,m=a.error,y=a.fetchMore,Z=(0,l.Z)(c.useState(null),2),w=Z[0],x=Z[1];c.useEffect((function(){ke({context:D.kO.History})}),[]),c.useEffect((function(){if(null===p||void 0===p?void 0:p.repl)if("Repl"===p.repl.__typename){if(p.repl.hostingDeployment)switch(p.repl.hostingDeployment.__typename){case"HostingDeployment":x(p.repl.hostingDeployment.activityLogs.items);break;case"NotFoundError":case"UnauthorizedError":r(p.repl.hostingDeployment.message)}}else r("Unexpected typename.")}),[p,r]),c.useEffect((function(){m&&r(m.message)}),[m,r]);var k=function(e){var n;return"Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"HostingDeployment"===(null===(n=e.repl.hostingDeployment)||void 0===n?void 0:n.__typename)&&"HostingActivityLogConnection"===e.repl.hostingDeployment.activityLogs.__typename&&e.repl.hostingDeployment.activityLogs}(p),C=k&&k.pageInfo.hasNextPage,S=function(){var e=(0,f.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return v||k&&null==k.pageInfo.nextCursor||!k||!k.pageInfo.hasNextPage?[2]:[4,y({variables:{input:{after:k.pageInfo.nextCursor,count:20}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=(0,oe.Z)({onLoadMore:S,rootMargin:"0px 0px 300px 0px"}).targetRef;return(0,o.BX)(o.HY,{children:[w&&0===w.length?(0,o.tZ)(u.G,{css:[s.l0.pb(8),s.l0.center,s.l0.align.stretch],children:(0,o.tZ)(d.E,{colorway:"grey",icon:(0,o.tZ)(he.Z,{}),text:"Deployment has no history"})}):null,w&&w.length>0?w.map((function(e){var n=t===e.build.id;return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(12),s.l0.py(12),s.l0.align.center,{borderBottom:"1px solid ".concat(s.TV.outlineDimmest),"&:first-child":{paddingTop:0},"&:last-child":{borderBottom:"none"}}],children:[(0,o.tZ)(we,{type:e.type}),(0,o.BX)(u.G,{css:s.l0.flex.growAndShrink(1),children:[(0,o.tZ)(Ze,{activityLogItem:e}),(0,o.tZ)(P.xv,{variant:"small",css:s.l0.color.foregroundDimmest,children:(0,G.Z)(new Date(e.timeCreated),Date.now(),{addSuffix:!0})})]}),(0,o.tZ)(u.G,{css:[s.l0.width(32),s.l0.align.end],children:(0,o.tZ)(pe,{activityLogItem:e,isCurrent:n})}),(0,o.tZ)(u.G,{children:(0,o.tZ)(j.h,{alt:"View Build Logs",onClick:function(){return i(e.build.id,e.build.status)},children:(0,o.tZ)(b.Z,{})})})]},e.id)})):null,(0,o.tZ)(ve,{loading:v}),!v&&C?(0,o.tZ)(u.G,{css:[s.l0.center,s.l0.pt(16)],children:(0,o.tZ)(j.h,{tooltipHidden:!0,alt:"Show more",onClick:S,ref:T,children:(0,o.tZ)(ae.Z,{})})}):null]})},Qe=function(e){var n=e.buildId,t=e.buildStatus,r=e.onViewLogs,i=e.onBack,a=e.openFile;return(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(j.h,{alt:"Back to History",onClick:function(){return i()},children:(0,o.tZ)(Ye.Z,{})}),(0,o.tZ)(qe,{initialBuild:{id:n,status:t},hideHeader:!0,viewBuildLogsOnLoad:!0,onViewLogs:r,onError:function(){},onCanceled:function(){},openFile:a})]})},Je=function(e){var n=e.text,t=e.onClick;return(0,o.tZ)("button",{css:[s.l0.cursor.pointer,s.l0.reset.button,s.l0.color.accentPrimaryStronger,s.l0.focusRing,{lineHeight:1.2,transitionProperty:"color, box-shadow",transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction,":not([disabled])":{cursor:"pointer","@media (hover: hover)":{":hover":{color:s.TV.accentPrimaryStrongest}},":not(textarea):active":{color:s.TV.accentPrimaryStronger}}}],onClick:t,children:n})},en=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.onManageClick;return(0,o.BX)(u.G,{css:s.l0.rowWithGap(4),children:[(0,o.tZ)(P.xv,{children:n}),(0,o.BX)(P.xv,{color:"dimmest",children:["(",t,")"]}),r?(0,o.tZ)(Je,{text:"Manage",onClick:i}):null]})},nn=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,o.BX)(u.G,{css:[s.l0.flex.row,s.l0.align.baseline,r?[s.l0.flex.grow(1),s.l0.justify.spaceBetween]:null],children:[(0,o.tZ)(u.G,{css:s.l0.minWidth(100),children:(0,o.tZ)(P.xv,{css:[s.l0.color.foregroundDimmer],children:n})}),t]})},tn=function(e){var n=e.provider,t=e.onViewAction,r=(0,U.kW)(),i=(0,U.Sl)(),a=(0,U.$y)(),l=void 0!==i,c=void 0!==a,f=n===B.r4.Gce&&c&&!l,p=n!==B.r4.Static&&c&&null===a.hasImageTag,h=Boolean((r===U.z4.Ready||r===U.z4.Suspended)&&!p),v=null,g=null,y=null,Z=null;a&&(v=(0,o.BX)(o.HY,{children:[(0,o.BX)(nn,{label:"Deployed",children:[(0,G.Z)(new Date(a.timeCreated),Date.now(),{addSuffix:!0})," ","by ",a.user.displayName]}),(0,o.BX)(nn,{label:"Status",children:[(0,o.tZ)(N,{}),a.status===B.Fe.Failed?(0,o.tZ)(u.G,{css:s.l0.ml(8),children:(0,o.tZ)(Je,{text:"View logs",onClick:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.History,data:{view:De.Logs,buildId:a.id,buildStatus:a.status}}})}})}):null]}),(0,o.tZ)(nn,{label:"Domains",children:(0,o.tZ)(O,{currentBuild:a})})]}));var b=(0,z.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});switch(n){case B.r4.Gce:l&&(g=(0,o.tZ)(nn,{label:"Type",fullWidth:!c,children:(0,o.tZ)(en,{name:"Reserved VM",sku:(0,M.$)(i.sku),canManage:h,onManageClick:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.TierSelection}})}})}));break;case B.r4.CloudRun:case B.r4.Static:b&&!l&&(g=(0,o.tZ)(nn,{label:"Type",fullWidth:!c,children:(0,o.tZ)(en,{name:V[n],sku:"Beta",canManage:h&&c,onManageClick:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.Settings}})}})}));case B.r4.Goval:}return p&&(y=(0,o.tZ)(u.G,{children:(0,o.tZ)(d.E,{icon:(0,o.tZ)(H.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f&&(Z=(0,o.tZ)(m.zx,{onClick:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.TierSelection}})},text:"Select hosting tier"})),v||g||y||Z?(0,o.tZ)(I,{children:(0,o.BX)(_.T,{elevated:!0,css:[s.l0.colWithGap(8),s.l0.p(16),s.l0.pt(12),s.l0.borderRadius(8)],children:[a?(0,o.tZ)(P.xv,{variant:"subheadDefault",children:"Production"}):null,(0,o.BX)(u.G,{css:[s.l0.colWithGap(4)],children:[v,g,y,Z]})]})}):null},rn=t(56169),on=u.K.div,an=function(e){var n=e.id,t=e.title,r=e.information,i=e.optional,a=void 0!==i&&i,d=e.children,f=(0,rn.H)()(n),p=(0,l.Z)(c.useState(!1),2),h=p[0],v=p[1],g=(0,l.Z)(c.useState(!1),2),m=g[0],y=g[1],Z=c.useRef(!1);return c.useEffect((function(){Z.current=!0;var e=setTimeout((function(){y(h)}),200);return function(){clearTimeout(e)}}),[h]),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.BX)(u.G,{tag:"label",htmlFor:f,css:[s.l0.flex.row,s.l0.flex.grow(1),s.l0.justify.spaceBetween,s.l0.align.baseline],children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.justify.center],onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[(0,o.tZ)(P.xv,{color:"dimmer",children:t}),(0,o.BX)(le.Z,{isOpen:m,onClickOutside:function(){return y(!1)},padding:8,children:[(0,o.tZ)(on,{children:(0,o.tZ)(he.Z,{css:[s.l0.color.foregroundDimmer]})}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(240)],children:(0,o.tZ)(P.xv,{color:"dimmer",multiline:!0,children:r})})]})]}),a?(0,o.tZ)(P.xv,{variant:"small",color:"dimmest",children:"optional"}):null]}),d]})},ln=t(11192),cn=function(e){return"string"===typeof e&&""!==e.trim()},un=t(39137),sn=t(59884),dn=t(8622);function fn(){var e=(0,q.Z)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return fn=function(){return e},e}var pn={},hn=(0,Y.Ps)(fn());var vn,gn=t(75920),mn=t(66539),yn=function(e){var n=e.type,t=e.loading,r=e.disabled,i=e.onClick;return(0,o.tZ)(m.zx,{onClick:i,text:t?"":"Add ".concat(n),iconLeft:t?void 0:(0,o.tZ)(dn.Z,{}),disabled:t||r})},Zn=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,a=e.onChange,l=e.error,c=(0,rn.H)(),d=cn(t);return(0,o.BX)(u.G,{css:[s.l0.colWithGap(4)],children:[(0,o.tZ)(un.II,{value:d?t:"",onChange:function(e){return a(e.target.value)},css:[s.l0.color.greyStrongest],disabled:r||i,"aria-describedby":c(n+"reasonError")}),l?(0,o.tZ)(u.G,{css:[s.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:c(n+"reasonError"),children:(0,o.tZ)("span",{children:l})}):null]})},bn=function(e){var n=e.index,t=e.name,r=e.value,i=e.disabled,a=e.updateEnvVarName,l=e.updateEnvVarValue,c=e.removeEnvVar,d=(0,rn.H)();return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(12)],children:[(0,o.tZ)(un.II,{placeholder:"Name",id:"".concat(d,"-name-").concat(n),value:t,onChange:function(e){return a(t,e.target.value)},disabled:i}),(0,o.tZ)(un.II,{placeholder:"Value",name:"".concat(d,"-value-").concat(n),value:r,onChange:function(e){return l(t,e.target.value)},disabled:i}),i?null:(0,o.tZ)(j.h,{css:[y.gU.outlined,s.l0.p(16)],onClick:function(){return c(t)},alt:"Remove variable",children:(0,o.tZ)(sn.Z,{})})]})},wn=function(e){var n,t,r=e.subdomain,i=e.deploymentId,a=e.onChange,l=e.updateValidity,f=(0,rn.H)(),p=function(e){var n=(0,h.Z)({},pn,e);return K.a(hn,n)}({variables:{subdomain:r,deploymentId:i},skip:0===r.length}),v=p.data,g=p.loading,m=p.error,y="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)&&v.replitAppSubdomainAvailability.available,Z="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)?v.replitAppSubdomainAvailability.message:null===v||void 0===v||null===(n=v.replitAppSubdomainAvailability)||void 0===n?void 0:n.errorMessage;return(0,c.useEffect)((function(){l(y)}),[y]),m?(0,o.tZ)(d.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,o.BX)(u.G,{children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[(0,o.tZ)(un.II,{id:"subdomain-".concat(f),placeholder:"subdomain",value:r,onChange:function(e){return a(e.target.value)}}),(0,o.BX)(P.xv,{children:["replit.com"!==(null===window||void 0===window||null===(t=window.location)||void 0===t?void 0:t.hostname)?".staging":"",".replit.app"]})]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.pt(4)],children:[g?(0,o.BX)(o.HY,{children:[(0,o.tZ)(A.Z,{}),(0,o.tZ)(P.xv,{children:"Checking availability"})]}):null,y?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ae.Z,{color:"green"}),(0,o.tZ)(P.xv,{css:[s.l0.color.greenDefault],children:"Available"})]}):null,y||g?null:(0,o.BX)(o.HY,{children:[(0,o.tZ)(H.Z,{color:"red"}),(0,o.tZ)(P.xv,{css:[s.l0.color.redDefault],children:Z})]})]})]})},xn=function(e){var n=e.appType,t=e.onChange,r=(0,rn.H)();return(0,o.tZ)(gn.hE,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[s.l0.width("100%"),s.l0.flex.row],children:[{value:B.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:B.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map((function(e,n){return(0,o.tZ)(u.G,{css:[s.l0.flex.grow(1)],children:(0,o.tZ)(mn.u,{tooltip:e.description,children:(0,o.tZ)(gn.rK,{id:r(e.value),value:e.value,text:e.name})})},n)}))})},kn=t(20888),Cn=t(4561),Sn=t(75665),Tn=function(e){var n,t,r,i,a,d=e.isNewDeployment,p=e.initialSubdomain,h=e.provider,v=e.onDeploy,y=e.onCancel,Z=e.onError,b=(0,U.$y)(),w=(0,U.XA)(),x=(0,We.Z)(),k=(0,l.Z)(c.useState(B.Vp.Server),2),S=k[0],T=k[1],E=(0,l.Z)(c.useState(p),2),R=E[0],I=E[1],D=(0,l.Z)(c.useState(!1),2),G=D[0],P=D[1],_=(0,l.Z)(c.useState(null),2),L=_[0],N=_[1],X=(0,l.Z)(c.useState(null),2),F=X[0],O=X[1],M=(0,l.Z)(c.useState(void 0),2),W=M[0],H=M[1],V=(0,l.Z)(c.useState(null!==(a=b&&b.envVars.map((function(e){return{name:e.name,value:e.value}})))&&void 0!==a?a:[]),2),j=V[0],q=V[1],Y=(0,l.Z)(c.useState(!0),2),K=Y[0],$=Y[1],Q=(0,l.Z)(c.useState(null),2),J=Q[0],ee=Q[1],ne=(0,l.Z)(c.useState(void 0),2),te=ne[0],re=ne[1],ie=(0,l.Z)(c.useState("loading"),2),oe=ie[0],ae=ie[1],le=S!==B.Vp.Static,ce=h===B.r4.Gce,ue=S===B.Vp.Static,se=(0,z.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});c.useEffect((function(){ke({context:"deploy_options"})}),[]),c.useEffect((function(){(0,f.Z)((function(){var e,n,t,r;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,(0,ln.o)(x.dotReplit)];case 1:return e=i.sent(),d?[4,(0,ln.x)(x.fs)]:[3,3];case 2:n=i.sent(),q(n),i.label=3;case 3:switch(N(e.buildCommand),O(e.runCommand),null!==e.publicDir&&ee(e.publicDir),t=void 0,h){case B.r4.Gce:if(null===e.ignorePorts){t=B.Vp.Server;break}t=e.ignorePorts?B.Vp.Worker:B.Vp.Server;break;case B.r4.CloudRun:se&&(t=B.Vp.CloudRun);break;case B.r4.Static:se&&(t=B.Vp.Static)}return T(t||B.Vp.Server),[3,5];case 4:return r=i.sent(),Z(r),[3,5];case 5:return ae("ready"),[2]}}))}))()}),[d,h,se,x.fs,x.dotReplit,b,Z]);var de=function(e,n){var t=j.findIndex((function(n){return n.name===e})),r=(0,Ce.Z)(j);r[t].name=n,q(r)},fe=function(e,n){var t=j.findIndex((function(n){return n.name===e})),r=(0,Ce.Z)(j);r[t].value=n,q(r)},pe=function(e){var n=j.filter((function(n){return n.name!==e}));q(n)},he=function(){var e=(0,f.Z)((function(){var e,n,t,r,i,o,a,l;return(0,g.__generator)(this,(function(c){switch(c.label){case 0:if(!(e=(G||ve)&&R.length?R:void 0))return[2];if(ae("storing"),n={build:L,run:F||""},t=[],S!==B.Vp.Static){if(!cn(F))return H("Run command cannot be empty."),ae("ready"),[2];n.run=F,t.push((0,Sn.X6)(F))}else if(!cn(J))return re("Public directory cannot be empty."),ae("ready"),[2];switch(cn(L)?(n.build=L,t.push((0,Sn.pi)(L))):t.push((0,Sn.xz)("deployment/build")),t.push((0,Sn.KB)(!K)),r=null,S){case B.Vp.Server:case B.Vp.Worker:r="gce";break;case B.Vp.CloudRun:r="cloudrun";break;case B.Vp.Static:r="static"}return null!==r&&t.push((0,Sn.zk)(r)),null!==J&&t.push((0,Sn.TT)(J)),x.container.getConnectionState()!==kn.em.CONNECTED&&(Z("Repl is offline."),ae("ready")),[4,x.dotReplit.updateDotReplit(t)];case 1:return i=c.sent(),(o=i.error)?(Z(o),ae("ready"),[2]):(a=null,[4,new Promise((function(e){ae("syncing"),a=setInterval((function(){x.fs.getStatus()===Cn.kO.Syncing||e(!0)}),1e3)}))]);case 2:c.sent(),a&&clearInterval(a),ae("deploying"),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,w(n,j.filter((function(e){return function(e){return"object"===typeof e&&"string"===typeof e.name&&"string"===typeof e.value&&""!==e.name}(e)})),e,S)];case 4:return c.sent(),[3,6];case 5:return l=c.sent(),Z(l.message),[3,6];case 6:return v(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve="HostingDeployment"===(null===b||void 0===b||null===(n=b.repl)||void 0===n||null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)?b.repl.hostingDeployment.replitAppSubdomain:void 0,ge="HostingDeployment"===(null===b||void 0===b||null===(r=b.repl)||void 0===r||null===(i=r.hostingDeployment)||void 0===i?void 0:i.__typename)?b.repl.hostingDeployment.id:void 0,me="ready"!==oe,ye=me||!G&&!ve;return(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[ve?null:(0,o.tZ)(an,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,o.tZ)(wn,{subdomain:R,deploymentId:ge,onChange:I,updateValidity:P})}),(0,o.tZ)(an,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,o.tZ)(Zn,{id:"buildCommand",value:L,onChange:N,loading:"loading"===oe,disabled:me})}),le?(0,o.tZ)(an,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,o.tZ)(Zn,{id:"runCommand",value:F,onChange:O,loading:"loading"===oe,disabled:me,error:W})}):null,(0,o.tZ)(an,{id:"envVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(12)],children:[j.length>0?j.map((function(e,n){var t=e.name,r=e.value;return(0,o.tZ)(bn,{index:n,name:t,value:r,updateEnvVarName:de,updateEnvVarValue:fe,removeEnvVar:pe,disabled:me},n)})):null,(0,o.tZ)(yn,{onClick:function(){q((0,Ce.Z)(j).concat([{name:"",value:""}]))},type:"environment variable",loading:"loading"===oe,disabled:me})]})}),ue?(0,o.tZ)(an,{id:"publicDir",title:"Public Directory",information:"The public directory is the root of your static site.",children:(0,o.tZ)(Zn,{id:"publicDir",value:J,onChange:ee,loading:"loading"===oe,disabled:me,error:te})}):null,ce?(0,o.tZ)(an,{id:"deploymentAppType",title:"App type",information:"The type of app you'd like to deploy.",children:(0,o.tZ)(xn,{appType:S,onChange:function(e){T(e),$(e===B.Vp.Server||e===B.Vp.CloudRun)}})}):null,(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8)],children:[!me&&b?(0,o.tZ)(m.zx,{text:"Cancel",onClick:y,disabled:me}):null,(0,o.tZ)(u.G,{css:s.l0.flex.grow(1),children:(0,o.tZ)(m.zx,{colorway:"primary",onClick:he,text:("loading"===oe?"Fetching options":"ready"===oe&&"Deploy")||"storing"===oe&&"Adding deployment options"||"syncing"===oe&&"Syncing file changes"||"deploying"===oe&&"Let's go!"||"",iconLeft:me?(0,o.tZ)(A.Z,{}):(0,o.tZ)(C.Z,{}),disabled:ye})})]})]})},En=function(e){var n=e.view,t=e.onViewAction,r=e.onError,i=e.openFile,a=e.data,l=(0,U.kW)(),u=(0,U.hn)(),s=(0,U.Sl)(),f=(0,U.H7)(),p=(0,U.$y)(),h=(0,U.pn)(),v=(0,D.yF)({view:n,data:a},D.kO.DeploymentOptions),g=!(void 0!==h)&&!("string"===typeof u),y=void 0!==p,Z=void 0!==s&&void 0!==s,b=y?p.provider:null===v||void 0===v?void 0:v.provider,w=b===B.r4.Gce&&y&&!Z,x=l===U.z4.Ready||l===U.z4.Suspended;c.useEffect((function(){ke({context:D.kO.Deployment})}),[]),c.useEffect((function(){l===U.z4.Deploying&&n!==D.kO.DeploymentInProgress&&t({type:D.ap.ChangeView,payload:{view:D.kO.DeploymentInProgress}})}),[l,n,t]);var k=null;switch(n){case D.kO.Deployment:if(w||!y)break;k=(0,o.tZ)(I,{children:(0,o.tZ)(m.zx,{disabled:!x,onClick:function(){return t({type:D.ap.ChangeView,payload:{view:D.kO.DeploymentOptions,data:{provider:p.provider}}})},text:"Redeploy",iconLeft:(0,o.tZ)(Me.Deploy,{})})});break;case D.kO.DeploymentOptions:if(w)break;if(!b){k=(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:"Provider not found"});break}k=(0,o.tZ)(I,{children:(0,o.tZ)(Tn,{isNewDeployment:g,initialSubdomain:null!==f&&void 0!==f?f:"",provider:b,onDeploy:function(){return t({type:D.ap.ChangeView,payload:{view:D.kO.DeploymentInProgress}})},onCancel:function(){return t({type:D.ap.ChangeView,payload:{view:D.kO.Deployment}})},onError:r})});break;case D.kO.DeploymentInProgress:k=(0,o.BX)(o.HY,{children:[(0,o.tZ)(I,{children:(0,o.tZ)(qe,{openFile:i,viewBuildLogsOnLoad:!y,onViewLogs:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.Logs}})},onCanceled:function(){t({type:D.ap.ChangeView,payload:{view:D.kO.Deployment}}),r("Build cancelled")},onError:r})}),x&&y?(0,o.tZ)(I,{children:(0,o.tZ)(m.zx,{onClick:function(){return t({type:D.ap.ChangeView,payload:{view:D.kO.DeploymentOptions,data:{provider:p.provider}}})},text:"Redeploy",iconLeft:(0,o.tZ)(Me.Deploy,{})})}):null]})}return(0,o.BX)(o.HY,{children:[(0,o.tZ)(tn,{provider:b,onViewAction:t}),k,w?(0,o.tZ)(I,{children:(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(he.Z,{}),text:"Your deployment requires a tier in order to re-deploy"})}):null]})},Rn=t(8907),In=t(77806),Dn=t(60566),Gn=t(91204),Pn=t(10394),_n=t(11983),Bn=function(e){var n=e.onError,t=(0,U.hn)(),r=(0,U.$y)(),i=(r&&r.repl.domains||[]).filter((function(e){return null!==e&&null==(null===e||void 0===e?void 0:e.hosting_deployment_id)})),a=(0,c.useState)(0!==i.length),l=a[0],d=a[1],f=(0,c.useState)(!0),p=f[0],h=f[1];return(0,c.useEffect)((function(){ke({context:D.kO.Domains})}),[]),t&&r?(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[l?(0,o.tZ)(Un,{canonicalCustomDomains:i,deploymentId:t,proxyIp:r.repl.apexProxy,replId:r.repl.id,onBegin:function(){return h(!1)},onClose:function(){return h(!0)},onComplete:function(){d(!1),h(!0)}}):null,p?(0,o.tZ)(Rn.Z,{showTitle:!1,replId:r.repl.id,deploymentId:t,onLink:function(){},onUnlink:function(){}}):null]})}):(n("No current build found"),null)};!function(e){e.Intro="intro",e.BeginTransfer="begin-transfer",e.Finished="finished"}(vn||(vn={}));var An,Un=function(e){var n,t=e.canonicalCustomDomains,r=e.deploymentId,i=e.onBegin,a=e.onClose,l=e.onComplete,d=e.replId,f=e.proxyIp,p=(0,c.useState)(vn.Intro),h=p[0],v=p[1],g=0,y=1===t.length?"domain":"domains",Z=(0,o.BX)(u.G,{css:[s.l0.rowWithGap(16)],children:[(0,o.tZ)(j.h,{alt:"Back",onClick:function(){v(vn.Intro),a()},colorway:"grey",children:(0,o.tZ)(Ye.Z,{})}),(0,o.tZ)(P.xv,{variant:"subheadDefault",children:"Transfer Domains"})]});switch(h){case vn.Intro:n=(0,o.BX)(_.T,{elevated:!0,css:[s.l0.align.start,s.l0.border({color:s.TV.outlineDimmer}),s.l0.borderRadius(8),s.l0.colWithGap(8),s.l0.p(8)],children:[(0,o.BX)(P.xv,{multiline:!0,children:["You have attached ",t.length," custom ",y," to your development Repl. Please transfer"," ","domain"===y?"it":"them"," to your deployment for the best user experience."]}),(0,o.tZ)(m.zx,{colorway:"primary",text:"Transfer ".concat(y," to deployment"),onClick:function(){v(vn.BeginTransfer),i()}})]});break;case vn.BeginTransfer:n=(0,o.BX)(o.HY,{children:[Z,(0,o.tZ)(P.xv,{multiline:!0,children:"Update the following records with your domain provider."}),t.map((function(e){return(0,o.tZ)(Ln,{deploymentId:r,customDomain:e,onTransferred:function(){(g+=1)===t.length&&v(vn.Finished)},proxyIp:f,replId:d},e.domain)}))]});break;case vn.Finished:n=(0,o.BX)(o.HY,{children:[Z,(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),s.l0.align.center,s.l0.justify.center,s.l0.p(32)],children:[(0,o.tZ)(P.xv,{multiline:!0,css:[s.l0.textAlign.center],children:"You've finished initiating the domain transfers. It can take up to 48 hours for your domains to be re-verified."}),(0,o.tZ)(m.zx,{colorway:"primary",text:"Return to Domains",onClick:function(){return l()}})]})]})}return(0,o.tZ)(u.G,{css:[s.l0.colWithGap(16)],children:n})};!function(e){e.Overview="overview",e.Transferring="transferring",e.Finished="finished"}(An||(An={}));var Ln=function(e){var n,t,r=e.customDomain,i=e.deploymentId,a=e.onTransferred,p=e.proxyIp,h=e.replId,v=(0,l.Z)((0,_n.h3)(),1)[0],y=(0,l.Z)((0,Pn.N)(),1)[0],Z=(0,c.useState)(),b=Z[0],w=Z[1],x=(0,c.useState)(An.Overview),k=x[0],C=x[1],S=[{type:"A",value:p},{type:"TXT",value:"replit-verify=".concat(i)}],T=function(){var e=(0,f.Z)((function(){var e,t,o;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:C(An.Transferring),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,y({variables:{input:{id:h,removeDomain:r.domain}}})];case 2:return l.sent().data?[3,4]:(w("Something unexpected happened, please try again."),[2]);case 3:return e=l.sent(),w(e.message),[2];case 4:return l.trys.push([4,6,,7]),[4,v({variables:{replId:h,domain:r.domain,deploymentId:i}})];case 5:return(t=l.sent()).data?"Repl"!==t.data.linkReplDomain2.__typename&&-1===t.data.linkReplDomain2.message.indexOf("DNS updates can take up to 48 hours to fully synchronize")?(w(t.data.linkReplDomain2.message),[2]):("Repl"===t.data.linkReplDomain2.__typename&&(n=!0),[3,7]):(w("Something unexpected happened, please try again."),[2]);case 6:return o=l.sent(),w(o.message),[2];case 7:return C(An.Finished),a(),[2]}}))}));return function(){return e.apply(this,arguments)}}();switch(k){case An.Overview:t=(0,o.BX)(o.HY,{children:[(0,o.tZ)(P.xv,{variant:"subheadDefault",children:r.domain}),S.map((function(e,n){return(0,o.BX)(u.G,{css:0===n?[s.l0.border({direction:"bottom"}),s.l0.pb(8)]:[],children:[(0,o.BX)(P.xv,{children:[e.type," Record"]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(24),s.l0.align.end],children:[(0,o.BX)(u.G,{children:[(0,o.tZ)(P.xv,{variant:"small",color:"dimmer",children:"Hostname"}),(0,o.tZ)(P.xv,{children:r.domain})]}),(0,o.BX)(u.G,{children:[(0,o.tZ)(P.xv,{variant:"small",color:"dimmer",children:"Type"}),(0,o.tZ)(P.xv,{children:e.type})]}),(0,o.BX)(u.G,{css:[s.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(P.xv,{variant:"small",color:"dimmer",children:"Record"}),(0,o.tZ)(P.xv,{children:e.value})]}),(0,o.tZ)(j.h,{alt:"Copy to Clipboard",onClick:function(){return(0,Dn.Z)(e.value)},children:(0,o.tZ)(In.Z,{})})]})]},n)})),(0,o.tZ)(u.G,{css:[s.l0.align.start,s.l0.pt(8)],children:(0,o.tZ)(m.zx,{colorway:"primary",text:"I've updated these records",stretch:!1,onClick:function(){return T()}})})]});break;case An.Transferring:t=(0,o.BX)(o.HY,{children:[(0,o.tZ)(P.xv,{variant:"subheadDefault",children:r.domain}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.color.accentPrimaryStrongest,s.l0.justify.center,s.l0.align.center,s.l0.py(16)],children:[(0,o.tZ)(A.Z,{}),(0,o.tZ)(P.xv,{children:"Swapping domain..."})]})]});break;case An.Finished:t=(0,o.BX)(u.G,{css:[s.l0.rowWithGap(16),s.l0.align.center,s.l0.justify.spaceBetween],children:[(0,o.tZ)(P.xv,{variant:"subheadDefault",children:r.domain}),n?(0,o.tZ)(Ae.Z,{color:"green"}):(0,o.tZ)(Gn.Z,{})]})}return(0,o.BX)(_.T,{elevated:!0,css:[s.l0.p(8),s.l0.colWithGap(8),s.l0.borderRadius(8)],children:[b?(0,o.tZ)(d.E,{colorway:"negative",text:b}):null,b?null:t]})},Nn=t(6543),Xn=t(34017),Fn=t(10434),On=t(76232),Mn=t(55021),Wn=function(e){var n=e.replId,t=168,r=(0,Nn.Z)((0,Xn.Z)(new Date),167);return c.useEffect((function(){ke({context:D.kO.Analytics})}),[]),(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(24)],children:[(0,o.tZ)(Fn.Z,{replId:n,start:r,hours:t,deployment:!0}),(0,o.tZ)(On.Z,{replId:n,metric:Mn.Pc.Url,start:r,hours:t,deployment:!0,count:5}),(0,o.tZ)(On.Z,{replId:n,metric:Mn.Pc.Referrer,start:r,hours:t,deployment:!0,count:5})]})})};function Hn(){var e=(0,q.Z)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return Hn=function(){return e},e}function zn(){var e=(0,q.Z)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return zn=function(){return e},e}var Vn={},jn=(0,Y.Ps)(Hn()),qn=(0,Y.Ps)(zn(),jn);var Yn=function(e){var n,t=e.onError,r=(0,U.hn)(),i=(0,U.$y)(),a=function(e){var n=(0,h.Z)({},Vn,e);return K.a(qn,n)}({skip:!r||!i,variables:{replId:null!==(n=null===i||void 0===i?void 0:i.repl.id)&&void 0!==n?n:"",deploymentId:null!==r&&void 0!==r?r:""}}),u=a.data,s=a.loading,d=a.error,f=(0,l.Z)(c.useState(null),2),p=f[0],v=f[1];c.useEffect((function(){ke({context:D.kO.Logs})}),[]),c.useEffect((function(){if(null===u||void 0===u?void 0:u.repl)if("Repl"===u.repl.__typename){if(u.repl.hostingDeploymentLogs&&"ReplLogs"===u.repl.hostingDeploymentLogs.__typename)v(u.repl.hostingDeploymentLogs.result)}else t("Unexpected typename.")}),[u,t]),c.useEffect((function(){d&&t(d.message)}),[d,t]);var g=null;return!s&&p&&(g=p.length>0?(0,o.tZ)(Kn,{logs:p}):(0,o.tZ)($n,{})),r&&i?(0,o.BX)(I,{fullWidth:!0,children:[(0,o.tZ)(ve,{loading:s}),g]}):(t("No current build found"),null)},Kn=function(e){var n=e.logs;return(0,o.tZ)(u.G,{css:[s.l0.overflow("auto")],children:(0,o.tZ)("table",{css:[{borderCollapse:"separate"}],children:(0,o.tZ)("tbody",{children:n.map((function(e,n){var t=[s.l0.font.code,s.l0.fontSize(12),{border:"1px solid transparent",padding:"6px"},n%2===0?[s.l0.backgroundColor.backgroundHigher,{borderTopColor:"".concat(s.TV.backgroundHighest)},{borderBottomColor:"".concat(s.TV.backgroundHighest)}]:null];return(0,o.BX)("tr",{children:[(0,o.tZ)("td",{css:[t,s.l0.color.foregroundDimmest],children:new Date(e.timestamp).toLocaleString()}),(0,o.tZ)("td",{css:[t],children:e.line})]},"logLine-".concat(n))}))})})})},$n=function(){return(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),s.l0.pt(4)],children:[(0,o.tZ)(P.xv,{multiline:!0,css:s.l0.textAlign.center,children:"No logs are available because the most recent build failed before it was promoted."}),(0,o.BX)(P.xv,{multiline:!0,color:"dimmer",css:s.l0.textAlign.center,children:["Having trouble?"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return ke({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},Qn=t(76963),Jn=t(40735),et=t(54873),nt=t(2041),tt=t(43117),rt=(0,He.X)({container:s.l0.colWithGap(16),pauseAndResumeButtons:[s.l0.colWithGap(8),s.l0.pt(16),{borderTop:"solid 1px ".concat(s.TV.backgroundHighest)}],shutDownContainer:s.l0.colWithGap(8),shutDownButton:[s.l0.color.accentNegativeStrongest,s.l0.transition.snappy,(0,p.Z)({backgroundColor:y.vb.interactiveBackground,borderColor:"transparent"},s.wl.hover,{borderColor:"transparent"})]}),it=function(e){var n=e.hideResume,t=void 0!==n&&n,r=e.hideSuspend,i=void 0!==r&&r,a=e.onViewAction,s=(0,U.kW)(),d=(0,U.$y)(),p=(0,U.Sl)(),h=(0,U.mF)(),v=(0,l.Z)(c.useState(!1),2),y=v[0],Z=v[1],b=(0,l.Z)(c.useState(!1),2),w=b[0],x=b[1],k=function(){var e=(0,f.Z)((function(e){return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return[4,h(e)];case 1:return n.sent(),a({type:D.ap.SendDeploymentLifecycleCommand,payload:e}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),C=null!==p,S=(null===d||void 0===d?void 0:d.status)===B.Fe.Resuming,T=(null===d||void 0===d?void 0:d.status)===B.Fe.Suspending,E=(null===d||void 0===d?void 0:d.status)===B.Fe.Suspended,R=S||T||s===U.z4.ProcessingLifecycleCommand||s===U.z4.Deploying,I=!t&&C&&(E||S)&&(null===d||void 0===d?void 0:d.hasImageTag),G=!i&&!E&&!S&&(T||s===U.z4.Deploying||s===U.z4.Ready)&&(null===d||void 0===d?void 0:d.hasImageTag);return(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{css:rt.container,children:[(0,o.BX)(u.G,{css:rt.pauseAndResumeButtons,children:[I?(0,o.BX)(o.HY,{children:[(0,o.tZ)(m.zx,{text:S?"Resuming":"Resume",onClick:function(){return k(B.Qc.Resume)},loading:S,disabled:R,iconLeft:S?(0,o.tZ)(A.Z,{}):(0,o.tZ)(Jn.Z,{})}),(0,o.tZ)(P.xv,{children:"Your app will become accessible to users again"})]}):null,G?(0,o.BX)(o.HY,{children:[(0,o.tZ)(m.zx,{text:"Pause",onClick:function(){return k(B.Qc.Suspend)},loading:T,disabled:R,iconLeft:T?(0,o.tZ)(A.Z,{}):(0,o.tZ)(Qn.Z,{})}),(0,o.tZ)(P.xv,{children:"Your hosting subscription will continue, but all users will lose access to your app"})]}):null]}),(0,o.BX)(u.G,{css:rt.shutDownContainer,children:[(0,o.tZ)(m.zx,{text:"Shut down",colorway:"negative",outlined:!0,css:rt.shutDownButton,onClick:function(){return Z(!0)},disabled:w,iconLeft:(0,o.tZ)(et.Z,{})}),(0,o.tZ)(P.xv,{children:"Your hosting subscription will be canceled, and your hosted app will cease to exist"})]})]}),(0,o.tZ)(nt.u,{isOpen:y,onRequestClose:function(){return Z(!1)},children:(0,o.tZ)(tt.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){x(!0),Z(!1),k(B.Qc.Destroy)},onCancel:function(){return Z(!1)},children:"This will destroy your deployment and any associated hosting tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})},ot=function(e){var n=e.onError,t=(0,U.$y)(),r=(0,We.Z)(),i=(0,l.Z)(c.useState(null),2),a=i[0],d=i[1],p=(0,l.Z)(c.useState(null),2),v=p[0],m=p[1],y=(0,l.Z)(c.useState(!0),2),Z=y[0],b=y[1];return c.useEffect((function(){ke({context:D.kO.Settings})}),[]),c.useEffect((function(){(0,f.Z)((function(){var e,t,i,o;return(0,g.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,ln.o)(r.dotReplit)];case 1:return e=a.sent(),t=e.buildCommand,i=e.runCommand,d(t),m(i),[3,3];case 2:return o=a.sent(),n(o),[3,3];case 3:return b(!1),[2]}}))}))()}),[r.dotReplit,t,n]),t?(0,o.BX)(o.HY,{children:[(0,o.BX)(I,{children:[(0,o.tZ)(ve,{loading:Z}),Z?null:(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(an,{id:"settingsBuildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,o.tZ)(un.II,{value:a||"No build command set",css:[a?s.l0.color.greyStrongest:s.l0.color.greyDefault],disabled:!0})}),(0,o.tZ)(an,{id:"settingsRunCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,o.tZ)(un.II,{value:v||"No run command set",css:[v?s.l0.color.greyStrongest:s.l0.color.greyDefault],disabled:!0})}),(0,o.tZ)(an,{id:"settingsEnvVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8)],children:t.envVars.length>0?t.envVars.map((function(e,n){var t=e.name,r=e.value;return(0,o.tZ)(bn,{index:n,name:t,value:r,updateEnvVarName:function(){},updateEnvVarValue:function(){},removeEnvVar:function(){},disabled:!0},n)})):(0,o.tZ)(un.II,{value:"No environment variables set",css:[s.l0.color.greyDefault],disabled:!0})})})]})]}),(0,o.tZ)(I,{children:(0,o.tZ)(it,(0,h.Z)({},e))})]}):(n("No current build found"),null)},at=t(48330),lt=function(){var e=(0,U.gg)(),n=e.isDeployableRepl,t=e.reason;return n?null:(0,o.tZ)(d.E,{colorway:"warning",text:t})},ct=t(9396),ut=t(70232),st=t(70104),dt=t(78728),ft=t(58321),pt=t.n(ft),ht=t(35004),vt=t(80806);function gt(){var e=(0,q.Z)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeploymentPermissions {\n          canDeployStatic {\n            isDeployable\n            deploymentCount\n            limit\n          }\n        }\n      }\n    }\n  }\n"]);return gt=function(){return e},e}var mt={},yt=(0,Y.Ps)(gt());var Zt=(0,He.X)({self:[s.l0.rowWithGap(2),s.l0.align.baseline],price:s.l0.fontWeight.medium,timePeriod:[s.l0.color.foregroundDimmer,s.l0.fontSize(12)]});function bt(e){var n=e.price,t=e.timePeriod;return(0,o.BX)(u.G,{css:Zt.self,children:[(0,o.tZ)(P.xv,{css:Zt.price,children:n}),(0,o.tZ)(P.xv,{css:Zt.timePeriod,children:"/".concat(t)})]})}var wt=(0,T.iv)([s.l0.reset.button,s.l0.cursor.pointer,s.l0.display.flex,s.l0.align.center,s.l0.focusRing,s.l0.rowWithGap(16),s.l0.borderRadius(8),s.l0.p(8)]),xt=(0,He.X)({loading:[wt,Ue.p.foregroundPulse(),s.l0.border({color:s.TV.backgroundHighest})],self:[wt,y.gU.outlined,s.l0.border({color:s.TV.backgroundHighest})],selfActive:[wt,s.l0.backgroundColor.accentPrimaryDimmer,s.l0.border({color:s.TV.accentPrimaryStronger})],disabled:[wt,s.l0.color.foregroundDimmest],icon:[s.l0.mx(16)],body:[s.l0.align.start,s.l0.flex.grow(1)],header:[s.l0.width("100%"),s.l0.display.flex,s.l0.flex.row,s.l0.justify.spaceBetween],tiersTitle:[s.l0.rowWithGap(8),s.l0.align.center]});function kt(e){var n=e.loading,t=e.disabled,r=e.active;return n?xt.loading:t?xt.disabled:r?xt.selfActive:xt.self}function Ct(e){var n,t,r,i,a=e.loading,l=e.active,c=e.provider,d=e.onClick,f=e.canDeploy,p=void 0;switch(c){case B.r4.CloudRun:n=(0,o.tZ)(ct.Z,{size:48}),t="On Demand",r="Only pay for the resources you use",i="Beta";break;case B.r4.Gce:n=(0,o.tZ)(st.Z,{size:48}),t="Reserved VM",r="Host apps and servers that stay on",p=(0,o.tZ)(bt,{price:"Starting at $10",timePeriod:"month"});break;case B.r4.Static:n=(0,o.tZ)(dt.Z,{size:48}),t="Static",r="For static websites",i="Beta";break;default:(0,ut.Z)(c)}var h=void 0!==f&&!f.isDeployable;return(0,o.tZ)(_.T,{background:"higher",css:s.l0.borderRadius(8),children:(0,o.BX)("button",{css:kt({loading:a,disabled:h,active:l}),onClick:function(){return d(c)},disabled:a||h,children:[(0,o.tZ)(u.G,{css:xt.icon,children:n}),(0,o.BX)(u.G,{css:xt.body,children:[(0,o.BX)(u.G,{css:xt.header,children:[(0,o.tZ)(P.xv,{variant:"subheadDefault",children:t}),(0,o.BX)(u.G,{css:s.l0.rowWithGap(4),children:[i?(0,o.tZ)(_e.D,{text:i,css:[l?s.l0.backgroundColor.accentPrimaryDefault:s.l0.backgroundColor.backgroundDefault]}):null,f?(0,o.tZ)(mn.u,{tooltip:"You can have up to ".concat(f.limit," free ").concat(V[c]," deployments live at one time."),children:(0,o.tZ)(_e.D,{text:"".concat(f.deploymentCount," / ").concat(f.limit),css:[l?s.l0.backgroundColor.accentPrimaryDefault:s.l0.backgroundColor.backgroundDefault]})}):null]})]}),p||null,(0,o.tZ)(P.xv,{children:r})]})]})})}var St,Tt=[B.r4.Gce,B.r4.CloudRun,B.r4.Static],Et=(St={},(0,p.Z)(St,B.r4.Gce,["Discord/Slack bots","Stock trading bot","Web scraping","Long-running tasks"]),(0,p.Z)(St,B.r4.CloudRun,["Dynamic websites","Cloud functions","Stateless apps"]),(0,p.Z)(St,B.r4.Static,["Simple HTML websites"]),St),Rt=(0,T.iv)([s.l0.width("100%"),s.l0.maxWidth(400)]),It=function(e){var n=e.replId,t=e.onViewAction,r=e.onError,i=(0,U.gg)().isDeployableRepl,a=(0,We.Z)(),d=(0,l.Z)(c.useState(void 0),2),p=d[0],v=d[1];c.useEffect((function(){ke({context:"intro"})}),[]);var y=(0,z.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1}),Z=function(e){var n=(0,h.Z)({},mt,e);return K.a(yt,n)}({skip:!y,variables:{id:n},onError:function(e){return r(e.message)}}),b=Z.loading,w=Z.data;c.useEffect((function(){y&&(0,f.Z)((function(){var e,n,t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,ln.o)(a.dotReplit)];case 1:return null===(e=i.sent()).target?(v(B.r4.Gce),[2]):(n=(0,vt.oU)(e.target))===B.r4.Goval?(r("Did not recognize template deployment provider"),[2]):(v(n),[3,3]);case 2:return t=i.sent(),r(t),[3,3];case 3:return[2]}}))}))()}),[y,r,a.dotReplit]);var x=b||void 0===p;return(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(16),s.l0.py(32),s.l0.align.center,s.l0.textAlign.center],children:[(0,o.tZ)(u.G,{css:[s.l0.px(32)],children:(0,o.tZ)(C.Z,{size:48})}),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),Rt],children:[(0,o.tZ)(P.xv,{variant:"headerDefault",multiline:!0,children:"Share your Repl with the world"}),(0,o.tZ)(P.xv,{multiline:!0,children:"Create a production build of your project so people can use it without being interrupted by changes in progress."})]}),y?(0,o.BX)(u.G,{css:[s.l0.colWithGap(16),s.l0.textAlign.left,Rt],children:[(0,o.BX)(o.HY,{children:[(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8),s.l0.textAlign.left],children:Tt.map((function(e){var n=e===B.r4.Static&&"Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl.hostingDeploymentPermissions.canDeployStatic:void 0;return(0,o.tZ)(Ct,{provider:e,loading:x,active:p===e,onClick:v,canDeploy:n},e)}))}),p?(0,o.BX)(u.G,{css:[s.l0.colWithGap(4),s.l0.align.start],children:[(0,o.BX)(P.xv,{css:s.l0.color.foregroundDimmer,children:["Example apps for"," ",V[p],":"]}),(0,o.tZ)(u.G,{css:[s.l0.rowWithGap(8),s.l0.flex.grow(1),s.l0.width("100%")],children:pt()(Et[p],2).map((function(e,n){return(0,o.tZ)(P.xv,{multiline:!0,css:s.l0.flex.grow(1),children:e.map((function(e){return(0,o.BX)(o.HY,{children:["\u2022 ".concat(e),(0,o.tZ)("br",{})]})}))},n)}))})]}):null]}),(0,o.tZ)(m.zx,{colorway:"primary",onClick:function(){if(p)switch(p){case B.r4.Gce:t({type:D.ap.ChangeView,payload:{view:D.kO.TierSelection}});break;case B.r4.CloudRun:case B.r4.Static:t({type:D.ap.ChangeView,payload:{view:D.kO.DeploymentOptions,data:{provider:p}}});break;default:(0,ut.Z)(p)}},text:"Continue",iconRight:(0,o.tZ)(ht.Z,{}),disabled:!i,loading:x})]}):(0,o.tZ)(u.G,{css:[s.l0.px(8),s.l0.colWithGap(16)],children:(0,o.tZ)(m.zx,{colorway:"primary",onClick:function(){return t({type:D.ap.ChangeView,payload:{view:D.kO.TierSelection}})},text:"Deploy your project",disabled:!i})}),(0,o.tZ)(lt,{}),(0,o.tZ)(P.xv,{multiline:!0,css:[s.l0.textAlign.center,s.l0.fontSize(12),s.l0.color],children:(0,o.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"What is a deployment?"})})]})})},Dt=t(73204),Gt=t(66195),Pt=function(e){var n=e.replId,t=e.onViewAction,r=e.onError,i=(0,U.hn)(),a=(0,U.Sl)(),p=!(void 0!==(0,U.pn)())&&!("string"===typeof i),y=void 0!==a,Z=(0,l.Z)(c.useState(!1),2),b=Z[0],w=Z[1],x=(0,Gt.P)({step:"not_shown"});c.useEffect((function(){ke({context:"tier_selection"})}),[]),c.useEffect((function(){"checkout_success"!==x.currentStep.step?"not_shown"===x.currentStep.step&&x.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"}):w(!0)}),[x,n]);var k=!y||!p,C=y&&p;if("not_shown"===x.currentStep.step)return(0,o.tZ)(o.HY,{});var S=function(){var e=(0,f.Z)((function(){return(0,g.__generator)(this,(function(e){return b?(t({type:D.ap.CheckoutSuccess}),[2]):(t({type:D.ap.GoBack}),[2])}))}));return function(){return e.apply(this,arguments)}}();return(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:s.l0.colWithGap(16),children:[k?(0,o.tZ)(Dt.s,(0,v.Z)((0,h.Z)({},x),{analyticsContext:"workspace_hosting_pane",goBack:(0,f.Z)((function(){return(0,g.__generator)(this,(function(e){return"power_up_details"===x.currentStep.step?b?t({type:D.ap.CheckoutSuccess}):S():x.goBack(),[2]}))}))})):null,b?(0,o.tZ)(m.zx,{colorway:p?"primary":void 0,onClick:S,text:p?"Deploy your project":"Back to deployment"}):null,C?(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,o.tZ)(j.h,{alt:"Back",onClick:S,children:(0,o.tZ)(Me.ArrowLeft,{})}),(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,o.tZ)(it,{hideResume:!0,hideSuspend:!0,onViewAction:t,onError:r})]}):null]})})},_t=t(27549),Bt=t(94716);function At(e){return"alias"in e}function Ut(e){return"tabs"in e&&void 0!==e.tabs&&e.tabs}function Lt(e){var n=e.views,t=e.activeView,r=e.handleOnViewAction,i=n[t],a=At(i)?i.alias:t;return(0,o.tZ)(o.HY,{children:Object.keys(n).map((function(e){if((0,D.D1)(e)){var t=n[e];if(!At(t))if(t.display&&Ut(t)){var i=t.title,l=t.icon,c=a===e;return(0,o.tZ)(m.zx,{css:[y.gU.nofill,s.l0.borderRadius(0),s.l0.px(12),s.l0.position.relative,{transition:"none",height:38,marginRight:1,borderBottom:"1px solid ".concat(c?s.TV.foregroundDefault:"transparent"),"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:s.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],text:i,iconLeft:(0,o.tZ)(l,{}),onClick:function(){var n={view:e};(0,D.Em)(n)&&r({type:D.ap.ChangeView,payload:n})}},e)}}}))})}var Nt=function(e){var n,t=e.initialView,r=e.onViewUpdate,i=e.onError,a=e.refetch,d=e.openFile,m=(0,at.Z)(),y=(0,U.hn)(),S=(0,U.Sl)(),T=(0,U.pn)(),E=(0,U.$y)(),R=void 0!==S&&void 0!==S,I=!(void 0!==T)&&!("string"===typeof y),G=E?E.provider:void 0,P=(0,z.P5)({controlName:"flag-deployment-analytics",logFlagToAnalytics:!1}),_=(n={},(0,p.Z)(n,D.kO.Intro,{fc:It,display:!0}),(0,p.Z)(n,D.kO.TierSelection,{fc:Pt,display:!0}),(0,p.Z)(n,D.kO.Deployment,{title:"Deployment",icon:C.Z,fc:En,display:!0,tabs:Boolean(E)}),(0,p.Z)(n,D.kO.DeploymentOptions,{alias:D.kO.Deployment}),(0,p.Z)(n,D.kO.DeploymentInProgress,{alias:D.kO.Deployment}),(0,p.Z)(n,D.kO.Domains,{title:"Domains",icon:w.Z,fc:Bn,display:!0,tabs:!0}),(0,p.Z)(n,D.kO.History,{title:"History",icon:x.Z,fc:Ke,display:!0,tabs:!0}),(0,p.Z)(n,D.kO.Analytics,{title:"Analytics",icon:k.Z,fc:Wn,display:P,tabs:!0}),(0,p.Z)(n,D.kO.Logs,{title:"Logs",icon:b.Z,fc:Yn,display:G!==B.r4.Static,tabs:!0}),(0,p.Z)(n,D.kO.Settings,{title:"Settings",icon:Z.Z,fc:ot,display:!0,tabs:!0}),n),A=(0,l.Z)(c.useState(function(e){var n=e.initialView,t=e.views,r=e.isNewDeployment,i=e.hasHostingTier;return r?i?{view:D.kO.DeploymentOptions,data:{provider:B.r4.Gce}}:{view:D.kO.Intro}:(0,D.Em)(n)&&n.view in t?n:{view:D.kO.Deployment}}({initialView:t,views:_,isNewDeployment:I,hasHostingTier:R})),2),L=A[0],N=A[1],X=L.view,F=c.useRef(void 0),O=function(){var e=(0,f.Z)((function(e){return(0,g.__generator)(this,(function(n){switch(r(),e.type){case D.ap.SendDeploymentLifecycleCommand:if(e.payload===B.Qc.Destroy)return N({view:D.kO.Intro}),a(),[2];N({view:D.kO.Deployment});break;case D.ap.CheckoutSuccess:N(I?{view:D.kO.DeploymentOptions,data:{provider:B.r4.Gce}}:{view:D.kO.Deployment}),a();break;case D.ap.ChangeView:F.current=L,N(e.payload);break;case D.ap.GoBack:if(F.current){if(F.current.view===D.kO.DeploymentInProgress)return N({view:D.kO.Deployment}),[2];N(F.current)}}return[2]}))}));return function(n){return e.apply(this,arguments)}}(),M=function(e){var n=e.views,t=n[e.activeView];if(At(t)){var r=n[t.alias];return!At(r)&&r||null}return t}({views:_,activeView:X})||_[D.kO.Deployment],W=M.fc,H=(0,Bt.Z)(M),V=(0,Bt.Z)(_),j=(0,Bt.Z)(O);return(0,_t.L5)((function(){return{type:"deployments",getTabs:function(){var e;if(null===(e=H.current)||void 0===e?void 0:e.tabs){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(V.current)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=(0,l.Z)(o.value,2),u=c[0],s=c[1];"display"in s&&s.display&&Ut(s)&&"title"in s&&n.push({label:s.title,Icon:s.icon,id:u})}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}return null},setTab:function(e){var n={view:e};(0,D.Em)(n)&&j.current({type:D.ap.ChangeView,payload:n})}}}),[H,V,j]),(0,o.BX)(o.HY,{children:[(null===M||void 0===M?void 0:M.tabs)?(0,o.tZ)(u.G,{css:{borderBottom:"1px solid ".concat(s.TV.outlineDimmest)},children:(0,o.tZ)(u.G,{css:[s.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],children:(0,o.tZ)(u.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.overflowX("auto"),s.l0.pl(8)],children:(0,o.tZ)(Lt,{views:_,activeView:X,handleOnViewAction:O})})})}):null,M.display?(0,o.tZ)(W,(0,v.Z)((0,h.Z)({},M,L),{replId:m,onViewAction:O,onError:i,openFile:d})):null]})};function Xt(e){var n=e.initialView,t=e.onViewUpdate,r=e.openFile,i=(0,U.m8)(),a=(0,U.kW)(),f=(0,U.ev)(),p=(0,l.Z)(c.useState(null),2),h=p[0],v=p[1];return a===U.z4.Loading?(0,o.tZ)(u.G,{css:[s.l0.center,s.l0.my(32)],children:(0,o.tZ)(A.Z,{size:16})}):(0,o.BX)(E,{children:[(0,o.tZ)(Nt,{initialView:n,onViewUpdate:function(){h&&v(null),t()},onError:v,refetch:i,openFile:r}),h||f?(0,o.tZ)(I,{css:[s.l0.flex.grow(0),s.l0.mt(0)],children:(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:h||f})}):null]})}var Ft={Content:function(e){var n=e.pane.data,t=e.options.performPaneOperation,r=(0,c.useRef)(function(e){if((0,D.Em)(e)&&(0,D.D1)(e.view))return e}(n)),i=(0,c.useCallback)((function(e){return t({operation:"open",secondary:!0,pane:{type:(0,a.Dp)(e),data:e}})}),[t]);return(0,o.tZ)(Xt,{initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,t({operation:"replace",pane:{type:"deployments"}}))},openFile:i})},Icon:function(e){var n=e.size;return(0,o.tZ)(C.Z,{size:n})},getTitle:function(){return"Deployments"}}},42916:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(74985),i=(t(50959),t(85368)),o=t(76735),a=t(24743),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"}}},23807:function(e,n,t){t.d(n,{R:function(){return f},b:function(){return p}});var r=t(74985),i=t(43330),o=t(45285),a=t(78728),l=t(19660),c=t(62946),u=t(10578),s=t(83505),d=t(95587),f={Content:function(e){var n=e.options,t=n.isHidden,a=n.performPaneOperation,f=(0,o.Z)(),h=f.container,v=f.fs,g=f.session,m=f.runner,y=(0,c.Dv)(u.f),Z=(0,u.Z)();return(0,s.Z)({container:h,runner:m,refreshWebView:Z}),(0,d.Z)({runner:m,refreshWebView:Z}),(0,i.x)(p,{run:function(){Z()}}),(0,r.tZ)(l.Z,{fs:v,session:g,runner:m,ref:y,isVisible:!t,openPane:function(e){a({operation:"open",pane:e})}})},Icon:function(e){var n=e.size;return(0,r.tZ)(a.Z,{size:n})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},65109:function(e,n,t){t.d(n,{U:function(){return rg}});var r=t(74985),i=t(57389),o=t(2272),a=t(50959),l=t(34495),c=t(4421),u=t(84815),s=t(91821),d=t(45285),f=t(48468),p=t(30826),h=t.n(p),v=t(87978),g=t(79339),m=t(39541),y=t(85368),Z=t(61284),b=t(82568),w=t(4561),x=t(92355),k=t(80906),C=t(94716),S=(0,a.memo)(g.Z);var T=(0,b.X)({root:[m.l0.colWithGap(8),m.l0.height("100%"),m.l0.width("100%"),m.l0.overflow("auto"),m.l0.zIndex(2),m.l0.align.center,m.l0.py(16),m.l0.px(16),m.l0.borderRadius(8),(0,i.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c.j.tabletMin,"px)"),m.l0.px(32))],header:[m.l0.rowWithGap(4),m.l0.height(30),m.l0.width("100%"),m.l0.align.center],markdownContainer:[m.l0.width("100%"),{"& .rendered-markdown":[m.l0.flex.column,m.l0.center],"& .rendered-markdown > *":[m.l0.maxWidth(840),m.l0.width("100%")],"& .rendered-markdown > table":m.l0.maxWidth("100%")}]});function E(e){var n=(0,d.Z)().fs,t=(0,o.Z)(function(){var e=(0,a.useRef)(!1),n=(0,a.useRef)(null);return[(0,f.Z)((function(){e.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),i=t[0],c=t[1],p=(0,a.useState)(e.path),g=p[0],b=p[1],E=(0,C.Z)(g),R=(0,a.useRef)(null),I=(0,x.T)(),D=e.path;(0,a.useEffect)((function(){D&&b(D)}),[D]);var G=e.isHidden,P=(0,k.p5)();(0,a.useEffect)((function(){if(!G){P.current&&(0,v.gK)(P.current.path)&&b(P.current.path);var e=h()((function(e){(0,l.Z)(e,{behavior:I?"auto":"smooth",scrollMode:"if-needed"})}),100),n=h()((function(n){if(n)if(n.path===E.current){if(!c.current){var t=R.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===t||void 0===t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,a=n.column,l=!0,c=!1,u=void 0;try{for(var s,d=r[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=f.dataset.sourcepos;if(!p)throw new Error("Expected data source pos on selected element");var h=(0,o.Z)(p.split("-"),2),v=h[0],g=h[1],m=(0,o.Z)(v.split(":").map(Number),2),y=m[0],Z=m[1],b=(0,o.Z)(g.split(":").map(Number),2),w=b[0],x=b[1];if(i>=y&&a>=Z&&(i<w||i===w&&a<=x))return f}}catch(k){c=!0,u=k}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}(R.current,n.position):null;t&&e(t)}}else(0,v.gK)(n.path)&&b(n.path)}),200),t=P.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}}),[P,G,I]);var _=(0,a.useState)(null),B=_[0],A=_[1];return(0,a.useEffect)((function(){if(A(null),g&&(0,v.Mb)(g))return n.watchTextFile(g,{onReady:function(e){var n=e.initialContent;A(n.toString())},onChange:function(e){var n=e.latestContent;A(n)},onMoveOrDelete:function(e){e.eventType===w.kS.Delete&&b(null)}})}),[g,n]),g?null===B?(0,r.tZ)(s.Z,{preventHighlightBorder:!0}):(0,r.BX)(y.G,{css:T.root,innerRef:i,children:[(0,r.BX)(y.G,{css:T.header,children:[(0,r.tZ)(u.Z,{}),(0,r.BX)(Z.xv,{color:"dimmer",children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(g),children:g})]})]}),(0,r.tZ)(y.G,{innerRef:R,css:T.markdownContainer,children:(0,r.tZ)(S,{path:g,source:B,fs:n,sourcePos:!0})})]}):(0,r.tZ)(y.G,{css:[m.l0.height("100%"),m.l0.width("100%"),m.l0.center],children:(0,r.tZ)(Z.xv,{children:"No previewed file"})})}var R=t(98215),I={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(E,{path:n.data.path,isHidden:Boolean(t.isHidden)})},Icon:function(e){var n=e.size;return(0,r.tZ)(R.Z,{fill:"currentColor",size:n})},getTitle:function(){return"Markdown"}},D=t(86956),G=t(92508),P=t(55281),_=t(4747),B=t(73872),A=t(27549),U=t(49514),L=t(77511),N={Content:function(e){var n=e.options;return(0,r.tZ)(X,{isActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(_.Z,{size:n})},getTitle:function(){return"Console"}};function X(e){var n=e.isActive,t=e.performPaneOperation,i=(0,d.Z)(),o=i.runner,l=i.packager,c=i.container,u=i.debuggest,s=i.fs,f=a.useRef(null),p=(0,B.Z)(u.mainClient),h=(0,U.K)();a.useEffect((function(){if(p)return p.onOutput((function(e){f.current&&f.current.write(e)}))}),[p]);var v=(0,L.T3)();a.useEffect((function(){if(!v)return o.onLocalRun((function(){var e,t;(null===(e=f.current)||void 0===e||e.clear(),n)&&(null===(t=f.current)||void 0===t||t.focus())}))}),[v,n,o]);var g=(0,A.Wk)();(0,A.L5)((function(){return{type:"runnerOutput",clear:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.clear()},write:function(e){var n;return null===(n=f.current)||void 0===n?void 0:n.write(e)}}}),[f]);var m=a.useCallback((function(e){t({operation:"open",secondary:!0,pane:{type:(0,G.Dp)(e),data:e}})}),[t]);return"html"===o.mode?null:(0,r.tZ)(P.Z,{tracker:h,runner:o,debugClient:p,packager:l,ref:f,onBootStatus:c.client().onBootStatus,openPane:function(e){t({operation:"open",pane:e})},focusOnLoad:n&&!v,focusRef:g,openFile:m,listFiles:s.listFiles})}var F,O=t(57135),M=t(72006),W=t(4405),H=t(96583),z=t(34489),V=t(63064),j=t(1050),q=t(11969),Y=t(68825),K=t(625),$=t(31672),Q=t(28814),J=t(37313),ee=t(64804),ne=t(45510),te=t(2041),re=t(25198),ie=t(63128),oe=t(63837),ae=t(20406),le=t(57467),ce=t(1468),ue=K.U3.ENV_EDITOR_USED;function se(e){var n=e.secrets,t=e.update,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=(0,a.useState)(0),v=h[0],g=h[1],b=0===v,w=(0,a.useRef)();w.current||(w.current=(0,Q.ir)((function(e){var n=de(e.state.doc.toString());return g(n),0!==n?(0,K.j)(ue,{action:"rawEditorUpdatedError"}):(0,K.j)(ue,{action:"rawEditorUpdated"}),[]})));var x=(0,ee.Z)(),k=x.ref,C=x.view,S=function(){u||l(!1)},T=function(){var e=(0,O.Z)((function(){var e,n;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:if(!C)return[2];if(!function(){if(!C)return!1;var e=de(C.state.doc.toString());return g(e),0===e}())return[2];s(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(C.state.doc.toString()),[4,t(e)];case 2:return r.sent(),s(!1),p(!0),setTimeout((function(){S(),setTimeout((function(){p(!1)}),500)}),500),[3,4];case 3:return n=r.sent(),ce.c_.captureException(n),(0,K.j)(ue,{action:"rawEditorUpdatedError"}),g(3),s(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(C){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),C.dispatch({changes:{from:0,to:C.state.doc.length,insert:e}}),C.dispatch({selection:{anchor:C.state.doc.length-2}}),C.focus()}}),[C,n]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.zx,{onClick:function(){return p(!1),l(!0),void(0,K.j)(ue,{action:"rawEditorOpened"})},text:"Edit as JSON",iconLeft:(0,r.tZ)(ae.Z,{}),small:!0}),(0,r.tZ)(te.u,{isOpen:o,onRequestClose:function(){return S()},children:(0,r.BX)(y.G,{css:[m.l0.colWithGap(24)],children:[(0,r.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Secrets are specified in JSON. Values must be strings."}),(0,r.tZ)(ie.T,{css:[m.l0.borderRadius(8),m.l0.transition.snappy,m.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,r.tZ)(J.Z,{ref:k,readOnly:u||f,extensions:w.current,language:"json",hideGutter:!0})}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.justify.end],children:[!b&&(0,r.tZ)(re.E,{icon:(0,r.tZ)(le.Z,{}),colorway:"negative",text:fe(v)}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(12)],children:[(0,r.tZ)(ne.zx,{onClick:S,text:"Cancel"}),(0,r.tZ)(ne.zx,{iconLeft:(0,r.tZ)(oe.Z,{}),stretch:!0,colorway:f?"positive":"primary",text:f?"Saved!":"Save",disabled:!b||u||f,onClick:function(){return T()}})]})]})]})})]})}function de(e){try{var n=JSON.parse(e);for(var t in n){if("string"!==typeof t)return 2;if("string"!==typeof n[t])return 2}return 0}catch(r){return 1}}function fe(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(F||(F={}));var pe=t(39137),he=t(32104),ve=t(13716),ge=t(87076),me=t(62405),ye=t(99397),Ze=t(8622),be=t(86302),we=t(33280),xe=t(54873),ke=t(79637),Ce=t(13233),Se=t(77806),Te=t(31854),Ee=t(5889),Re=t(9493),Ie=t(18171),De=(0,b.X)({addSecretContainer:[m.l0.p(8),m.l0.backgroundColor.backgroundHigher,m.l0.flex.column,m.l0.colWithGap(8)],addSecretHeader:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],colGap4:[m.l0.flex.column,m.l0.colWithGap(4)],colGap8:[m.l0.flex.column,m.l0.colWithGap(8)],secretItemEdit:[m.l0.p(8),m.l0.borderRadius(0),m.l0.backgroundColor.backgroundHigher,m.l0.flex.column,m.l0.colWithGap(8)],secretItem:[m.l0.p(8),m.l0.flex.row,m.l0.rowWithGap(16),m.l0.align.center,m.l0.borderRadius(0),m.l0.backgroundColor.backgroundHigher],secretItemKey:[m.l0.flex.grow(2),m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center,m.l0.pr(16),{minWidth:0,flex:"1 0 0"}],secretItemValue:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.flex.shrink(1),{minWidth:0,flexBasis:0}],secretItemValueToggle:[m.l0.py(2),m.l0.px(4),m.l0.borderRadius(4),m.l0.flex.shrink(1),{minWidth:0}],headerStyle:[m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center,m.l0.p(8)],codeInserter:[m.l0.borderRadius(8),m.l0.p(8),m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center],stepWrapper:[m.l0.p(8),m.l0.colWithGap(8)]}),Ge={fontFamily:"text-security-disc"};function Pe(e){var n=e.onClose,t=e.onAdd,i=e.otherKeys,l=(0,o.Z)(a.useState(!0),2),c=l[0],s=l[1],d=(0,o.Z)(a.useState({key:"",value:""}),2),f=d[0],p=d[1],h=f.key.length>0&&!i.includes(f.key);return(0,r.tZ)(r.HY,{children:(0,r.BX)(ie.T,{elevated:!0,css:[De.addSecretContainer,0!==i.length?m.l0.border({direction:"bottom",color:m.TV.backgroundHighest}):null],children:[(0,r.BX)(y.G,{css:m.l0.layout.columns,children:[(0,r.BX)(y.G,{css:[De.colGap4,m.l0.layout.colSpan(5)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.pt(2),m.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,r.tZ)(pe.II,{value:f.key,onChange:function(e){return p((0,W.Z)((0,M.Z)({},f),{key:e.target.value}))},placeholder:"SECRET_KEY",autoComplete:"off"}),i.includes(f.key)?(0,r.BX)(Z.xv,{variant:"small",css:{color:m.TV.accentNegativeDefault},children:['Secret "',f.key,'" already exists']}):null]}),(0,r.BX)(y.G,{css:[De.colGap4,m.l0.layout.colSpan(7)],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Value"}),(0,r.tZ)(ge.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return s(!c)},children:c?(0,r.tZ)(u.Z,{}):(0,r.tZ)(me.Z,{})})]}),(0,r.tZ)(pe.II,{value:f.value,onChange:function(e){return p((0,W.Z)((0,M.Z)({},f),{value:e.target.value}))},style:c?Ge:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,r.tZ)(ne.zx,{text:"Cancel",onClick:function(){n()}}),(0,r.tZ)(ne.zx,{text:"Save",colorway:"primary",disabled:!h,onClick:function(){t({key:f.key.trim(),value:f.value}),p({key:"",value:""})}})]})]})})}function _e(e){var n=e.value,t=(0,Ce.Z)();return(0,r.tZ)(ge.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(n).then((function(){t.showConfirm("Copied")}))},children:(0,r.tZ)(Se.Z,{})})}function Be(e){var n=e.secret,t=e.onUpdateSecret,i=e.onDeleteSecret,l=e.last,c=(0,o.Z)(a.useState(null),2),s=c[0],d=c[1],f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1],v=(0,o.Z)(a.useState(!1),2),g=v[0],b=v[1],w=(0,o.Z)(a.useState(n.value),2),x=w[0],k=w[1],C=(0,o.Z)(a.useState(!0),2),S=C[0],T=C[1];return s?(0,r.BX)(r.HY,{children:[(0,r.BX)(ie.T,{elevated:!0,css:[De.secretItemEdit,l?{borderBottom:"none"}:m.l0.border({direction:"bottom",color:m.TV.backgroundHighest})],children:[(0,r.BX)(y.G,{css:m.l0.layout.columns,children:[(0,r.BX)(y.G,{css:[De.colGap4,m.l0.layout.colSpan(5)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.pt(2),m.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,r.tZ)(pe.II,{value:s.key,onChange:function(e){return d((function(n){return n?(0,W.Z)((0,M.Z)({},n),{key:e.target.value}):n}))},placeholder:"SECRET_KEY",autoComplete:"off"})]}),(0,r.BX)(y.G,{css:[De.colGap4,m.l0.layout.colSpan(7)],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[m.l0.pt(2),m.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,r.tZ)(ge.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return T(!S)},children:S?(0,r.tZ)(u.Z,{}):(0,r.tZ)(me.Z,{})})]}),(0,r.tZ)(pe.II,{value:s.value,style:S?Ge:void 0,onChange:function(e){return d((function(n){return n?(0,W.Z)((0,M.Z)({},n),{value:e.target.value}):n}))}})]})]}),(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(8)],children:[(0,r.tZ)(ne.zx,{text:"Delete",colorway:"negative",onClick:function(){return b(!0)}}),(0,r.tZ)(y.G,{css:m.l0.flex.grow(1)}),(0,r.tZ)(ne.zx,{text:"Cancel",onClick:function(){return d(null)}}),(0,r.tZ)(ne.zx,{colorway:"primary",text:"Save",disabled:!s.key.length,onClick:function(){t(n.key,{key:s.key.trim(),value:s.value}),d(null)}})]})]}),(0,r.tZ)(te.u,{isOpen:g,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:De.colGap8,children:[(0,r.BX)(Z.xv,{variant:"subheadDefault",children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[m.l0.justify.end,m.l0.flex.row,m.l0.rowWithGap(8)],children:[(0,r.tZ)(ne.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(ne.zx,{text:"Delete",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]}):(0,r.BX)(ie.T,{elevated:!0,children:[(0,r.BX)(y.G,{css:[De.secretItem,l?{borderBottom:"none"}:{borderBottom:"1px solid ".concat(m.TV.backgroundHighest)}],children:[(0,r.BX)(y.G,{css:De.secretItemKey,children:[(0,r.tZ)(_e,{value:n.key}),(0,r.tZ)(Z.xv,{children:n.key})]}),""===n.value?(0,r.BX)(y.G,{css:De.secretItemValue,children:[(0,r.tZ)(pe.II,{value:x,onChange:function(e){return k(e.target.value)},autoComplete:"off",style:S?Ge:void 0,placeholder:"Enter a value",css:[m.l0.maxWidth(200),m.l0.py(2),m.l0.px(6)]}),(0,r.tZ)(ge.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return T(!S)},children:S?(0,r.tZ)(u.Z,{}):(0,r.tZ)(me.Z,{})}),(0,r.tZ)(ge.h,{colorway:"primary",alt:"Save Secret Value",tooltipHidden:!0,onClick:function(){t(n.key,{key:n.key,value:x}),k("")},children:(0,r.tZ)(oe.Z,{})})]}):(0,r.BX)(y.G,{css:De.secretItemValue,children:[(0,r.tZ)(_e,{value:n.value}),(0,r.tZ)(ge.h,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return h(!p)},children:p?(0,r.tZ)(me.Z,{}):(0,r.tZ)(u.Z,{})}),(0,r.tZ)(y.G,{css:De.secretItemValueToggle,children:(0,r.tZ)(Z.xv,{css:{fontFamily:m.TV.fontFamilyCode},children:p?n.value:"\u2022".repeat(12)})})]}),(0,r.tZ)(y.G,{children:(0,r.tZ)(ke.Z,{label:"Options",items:[{label:(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(j.Z,{}),(0,r.tZ)(Z.xv,{children:"Edit"})]}),onClick:function(){d(n)}},{label:(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(xe.Z,{color:m.TV.accentNegativeStronger}),(0,r.tZ)(Z.xv,{css:{color:m.TV.accentNegativeStronger},children:"Delete"})]}),isDescructive:!0,onClick:function(){b(!0)}}],onItemClick:function(e){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)}})})]}),(0,r.tZ)(te.u,{isOpen:g,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:De.colGap8,children:[(0,r.BX)(Z.xv,{variant:"subheadDefault",children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[m.l0.justify.end,m.l0.flex.row,m.l0.rowWithGap(8)],children:[(0,r.tZ)(ne.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(ne.zx,{text:"Delete",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]})}function Ae(e){var n=e.secrets,t=e.onUpdateSecret,i=e.onDeleteSecret,a=e.onAddSecret,l=e.showAddSecret,c=e.onClose,u=Object.entries(n).filter((function(e){var n=(0,o.Z)(e,2);n[0];return""===n[1]})),s=Object.entries(n).filter((function(e){var n=(0,o.Z)(e,2);n[0];return""!==n[1]}));return(0,r.BX)(r.HY,{children:[0!==u.length&&(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.p(8)],children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Configure missing Secret values"}),(0,r.tZ)(Z.xv,{multiline:!0,variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,r.tZ)(ie.T,{css:[m.l0.borderRadius(8),{overflow:"hidden"}],children:u.map((function(e,n){var a=(0,o.Z)(e,2),l=a[0],c=a[1];return(0,r.tZ)(Be,{secret:{key:l,value:c},onUpdateSecret:t,onDeleteSecret:i,last:n===u.length-1},l)}))})]}),0!==u.length&&0!==s.length&&(0,r.tZ)(we.R,{}),(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8),m.l0.p(8)],children:(0,r.BX)(ie.T,{css:[m.l0.borderRadius(8),{overflow:"hidden"}],children:[l?(0,r.tZ)(Pe,{onClose:c,onAdd:a,otherKeys:Object.keys(n)}):null,(0,r.tZ)(y.G,{children:s.map((function(e,n){var a=(0,o.Z)(e,2),l=a[0],c=a[1];return(0,r.tZ)(Be,{secret:{key:l,value:c},onUpdateSecret:t,onDeleteSecret:i,last:n===s.length-1},l)}))})]})})]})}function Ue(e){var n=e.secrets,t=e.activeFile,i=e.onInsertDone,l=(0,o.Z)(a.useState(Object.keys(n)[0]),2),c=l[0],u=l[1],s=(0,$.Z)(t),d=(0,ve.Qt)();return s&&(0,Re.e)(t,c)&&0!==Object.keys(n).length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(we.R,{}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(16),m.l0.p(8)],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Access secret"}),(0,r.tZ)(Te.P,{css:m.l0.minWidth(48),items:Object.keys(n).map((function(e){return{title:e}})),selectedItem:{title:c},onChange:function(e){return u(e.title)}})]}),(0,r.tZ)(ie.T,{background:"default",children:(0,r.tZ)(Re.Z,{elevated:!0,keyName:c,filePath:t,onInsert:function(e){var n,t,r=null!==(t=null===(n=d())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:0;s({code:e,insertAt:r}),i&&i(),(0,K.j)(K.U3.ENV_EDITOR_USED,{action:"insert"})}})})]})]}):null}function Le(e,n){var t=(0,M.Z)({},e);return"add"===n.type?t[n.key]=n.value:"update"===n.type?(delete t[n.oldKey],t[n.key]=n.value):delete t[n.key],t}function Ne(e){var n=e.readRawEnv,t=e.writeRawEnv,i=(0,ve.R3)(),l=(0,V.Z)(),c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1],d=(0,o.Z)(a.useState(!1),2),f=d[0],p=d[1],h=function(){p(!1)},v=(0,Y.Z)();a.useEffect((function(){(0,K.Cn)(K.U3.ENV_EDITOR_USED,{action:"opened"}),q.Z.set("enveditortour",!0)}),[]),a.useEffect((function(){function e(){return(e=(0,O.Z)((function(){var e,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,n()];case 1:if((e=r.sent()).error===w.Df.NotFound)return l.current&&s({}),[2];if(e.error)throw new Error("Error getting .env");return l.current?(t=z.Z.parse(e.content.toString()),s(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,s,l]);var g=a.useRef(null),b=a.useRef([]),x=function(){var e=(0,O.Z)((function(e){var r,i,o,a,l;return(0,H.__generator)(this,(function(c){switch(c.label){case 0:if(!u)throw new Error("trying to write secrets before loading");return r=Le(u,e),s(r),b.current.push(e),i=Math.random(),g.current=i,[4,n()];case 1:return a=c.sent(),g.current!==i?[2]:(a.error?o=r:(o=z.Z.parse(a.content.toString()),b.current.forEach((function(e){o=Le(o,e)})),s(o)),b.current=[],l=z.Z.serialize(o),[4,t(l)]);case 2:return c.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){return(0,K.j)(K.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),x((0,M.Z)({type:"add"},e)),h(),[2]}))}));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,O.Z)((function(e,n){return(0,H.__generator)(this,(function(t){return(0,K.j)(K.U3.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),x((0,M.Z)({type:"update",oldKey:e},n)),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),S=function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){return(0,K.j)(K.U3.ENV_EDITOR_USED,{action:"deleted"}),x({type:"delete",key:e}),[2]}))}));return function(n){return e.apply(this,arguments)}}(),T=(0,Ie.Z)((function(){return u&&Object.keys(u).length>0}),[u]);return u&&v?(0,r.BX)(y.G,{css:[m.l0.flex.column],children:[(0,r.BX)(y.G,{css:De.headerStyle,children:[(0,r.tZ)(Z.xv,{variant:"subheadBig",children:"Secrets"}),(0,r.tZ)(y.G,{css:m.l0.flex.grow(1)}),(0,r.tZ)(se,{secrets:u,update:function(){var e=(0,O.Z)((function(e){var n;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return s(e),n=z.Z.serialize(e),[4,t(n)];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()}),(0,r.tZ)(be.Z,{iconLeft:(0,r.tZ)(ye.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",small:!0,text:"Docs",target:"_blank"}),(0,r.tZ)(ne.zx,{iconLeft:(0,r.tZ)(Ze.Z,{}),text:"New Secret",colorway:"primary",small:!0,onClick:function(){return p(!0)}})]}),(0,r.BX)(r.HY,{children:[(0,r.tZ)(we.R,{}),0===Object.keys(u).length&&!1===f&&(0,r.BX)(y.G,{css:[m.l0.center,m.l0.flex.shrink(1)],children:[(0,r.tZ)(Ee.Z,{alt:"A rotating key",src:"/public/images/secrets/secretskey.gif",height:200,width:200,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Store sensitive information securely using Secrets."}),(0,r.tZ)(Z.xv,{css:[m.l0.textAlign.center,m.l0.mt(8),m.l0.color],children:(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}),(0,r.tZ)(Ae,{secrets:u,onUpdateSecret:C,onDeleteSecret:S,onAddSecret:k,showAddSecret:f,onClose:h}),i&&T?(0,r.tZ)(r.HY,{children:(0,r.tZ)(Ue,{secrets:u,activeFile:i})}):null]})]}):(0,r.tZ)(y.G,{css:[m.l0.center,m.l0.coverContainer],children:(0,r.tZ)(he.Z,{size:24})})}var Xe=t(13548),Fe={Content:function(){return(0,r.tZ)(Oe,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Xe.Z,{size:n})},getTitle:function(){return"Secrets"}};function Oe(){var e=(0,d.Z)().fs;return(0,r.tZ)(Ne,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(n){return e.writeFile(".env",n)}})}var Me=t(88541),We=t(65911),He=t(77637),ze=t(48330),Ve=t(36443),je=t(94045),qe=t(62755),Ye=t(46688),Ke=t(62946);var $e,Qe=t(27691),Je=t(57913),en=t(63740);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}($e||($e={}));var nn=(0,b.X)({self:[m.l0.p(8),m.l0.borderRadius(8),m.l0.width("100%")],header:[m.l0.flex.row,m.l0.justify.spaceBetween],description:[m.l0.colWithGap(16),m.l0.mt(8)]});function tn(e){var n=e.onActionClick,t=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,u=e.itemDescription,s=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,g=(0,a.useState)(!1),m=g[0],b=g[1],w=d||f||p||h&&h.length;return(0,r.BX)(ie.T,{css:nn.self,elevated:!0,children:[(0,r.BX)(y.G,{css:nn.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),w?(0,r.tZ)(ge.h,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,r.tZ)(Je.Z,{rotate:m?90:0})}):null]}),(0,r.BX)(y.G,{css:nn.description,children:[(0,r.tZ)(cn,{title:"Version ".concat(s),value:u||"This package has no description.",showMore:m}),d&&m?(0,r.tZ)(cn,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:m}):null,f&&m?(0,r.tZ)(cn,{title:"License",value:f,showMore:m}):null,p&&m?(0,r.tZ)(cn,{title:"Author",value:p,showMore:m}):null,h&&h.length&&m?(0,r.tZ)(cn,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:m}):null,(0,r.tZ)(ne.zx,(0,M.Z)({iconLeft:(0,r.tZ)(un,{isAlreadyInstalled:t,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return n()},disabled:i&&!o,loading:o},an(l)))]})]})}var rn=(0,b.X)({self:[nn.self,Qe.p.backgroundPulse(),m.l0.height(128)]});function on(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,n){return(0,r.tZ)(ie.T,{css:rn.self,elevated:!0},"itemDetailSkeleton".concat(n))}))})}function an(e){switch(e){case $e.REMOVE:return{colorway:"negative",outlined:!0};case $e.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var ln=(0,b.X)({self:[m.l0.colWithGap(2)],title:[m.l0.color.foregroundDimmer]});function cn(e){var n=e.title,t=e.value,i=e.showMore;return(0,r.BX)(y.G,{css:ln.self,children:[(0,r.tZ)(Z.xv,{css:ln.title,children:n}),t?(0,r.tZ)(Z.xv,{multiline:!0,maxLines:i?void 0:2,children:t}):null]})}function un(e){var n=e.isAlreadyInstalled,t=e.isIconLoading,i=e.htmlItem;return t?(0,r.tZ)(he.Z,{}):n?i?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(xe.Z,{}):(0,r.tZ)(en.Z,{})}var sn,dn=t(35981),fn=(0,Ke.cn)({replId:"",packageManagers:{}});!function(e){e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(sn||(sn={}));var pn="index.html";function hn(e,n){return n.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function vn(e){var n=(0,o.Z)((0,Ke.KO)(fn),2),t=n[0],r=n[1],l=(0,d.Z)(),c=l.fs,u=l.packager;return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!t.packageManagers[e.id]){var n="html"===e.id?function(e){var n=(0,dn.u)(sn.Idle),t=(0,dn.u)(!1),r=(0,dn.u)([]);function i(){return(i=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return t.current=!0,[4,u()];case 1:return e.sent(),t.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return o=(0,O.Z)((function(r){return(0,H.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,O.Z)((function(i){var o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=sn.Installing,[4,e.stat(pn)]);case 1:return a.sent().exists?(o=e.watchTextFile(pn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s='<script src="'.concat(r.sourceCodeURL,'"><\/script>\n'),d=l,f=d.indexOf("<script");-1===f&&(f=d.indexOf("</body>")),c({from:f,insert:s}),e.flush().then((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=sn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=sn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return a=(0,O.Z)((function(r){return(0,H.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,O.Z)((function(i){var o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=sn.Uninstalling,[4,e.stat(pn)]);case 1:return a.sent().exists?(o=e.watchTextFile(pn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s=l,d=0,f=!0,p=!1,h=void 0;try{for(var v,g=s.split("\n")[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m,y=v.value;if(m=y.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var Z=m[1];r.name===Z&&c({from:d,to:d+y.length+1,insert:""})}d+=y.length+1}}catch(b){p=!0,h=b}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}e.flush().then((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=sn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=sn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),a.apply(this,arguments)}function l(){return(l=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function c(){return(c=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:return(t=r.sent())?[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function u(){return s.apply(this,arguments)}function s(){return(s=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,d()];case 1:return(e=n.sent()).error?r.current=[]:e.packages&&(r.current=e.packages),[2]}}))}))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,O.Z)((function(){return(0,H.__generator)(this,(function(n){return[2,new Promise(function(){var n=(0,O.Z)((function(n){var t,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(pn)];case 1:return i.sent().exists?(t=[],r=e.watchTextFile(pn,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,u=i.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s;if(s=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=s[1],f=s[2];t.push({name:d,version:f})}}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(),n({packages:t,error:null})},onError:function(e){r(),n({packages:null,error:e.message})}}),[2]):(n({packages:[],error:null}),[2])}}))}));return function(e){return n.apply(this,arguments)}}())]}))})),f.apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return o.apply(this,arguments)},uninstall:function(e){return a.apply(this,arguments)},search:function(e){return l.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return r.current.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:t,status:n}}(c):function(e,n){var t=(0,dn.u)(sn.Idle),r=(0,dn.u)(!1),i=(0,dn.u)([]);function o(){return(o=(0,O.Z)((function(){var t;return(0,H.__generator)(this,(function(o){switch(o.label){case 0:return r.current=!0,[4,e.listSpecfile(n)];case 1:return(t=o.sent()).error?i.current=[]:t.packages&&(i.current=t.packages),r.current=!1,[2]}}))}))).apply(this,arguments)}function a(){return(a=(0,O.Z)((function(t){return(0,H.__generator)(this,(function(r){return[2,e.searchPackages(t,n)]}))}))).apply(this,arguments)}function l(){return(l=(0,O.Z)((function(o){var a,l,c;return(0,H.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if((0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:o.name}),!o.name)throw new Error("Package has no name");return hn(o,i.current)?[2]:(r.current=!0,t.current=sn.Installing,[4,e.addPackages([o],n)]);case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=sn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))}))).apply(this,arguments)}function c(){return(c=(0,O.Z)((function(o){var a,l,c;return(0,H.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if(!o.name)throw new Error("Package has no name");return hn(o,i.current)?((0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:o.name}),r.current=!0,t.current=sn.Uninstalling,[4,e.removePackages([o.name],n)]):[2];case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=sn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))}))).apply(this,arguments)}function u(){return(u=(0,O.Z)((function(t){return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(t,n)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return o.apply(this,arguments)},install:function(e){return l.apply(this,arguments)},uninstall:function(e){return c.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:i,isInstalled:function(e){return hn(e,i.current)},fetchPackageInfo:function(e){return u.apply(this,arguments)},isRunning:r,status:t}}(u,e.id);r({replId:t.replId,packageManagers:(0,W.Z)((0,M.Z)({},t.packageManagers),(0,i.Z)({},e.id,n))})}}),[c,t,null===e||void 0===e?void 0:e.id,u,r]),e&&t.packageManagers[e.id]||null}var gn=(0,b.X)({self:[m.l0.color.foregroundDefault,m.l0.colWithGap(16)],installedHeader:[m.l0.fontSize(m.TV.fontSizeSubheadDefault)],searchUIOuter:[m.l0.flex.row,m.l0.align.center],searchUIInner:[m.l0.flex.grow(1),m.l0.pr(8)],searchResult:[m.l0.flex.column,{gap:m.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[m.l0.flex.row,m.l0.align.center],packagerSectionExpandHandle:[m.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),mn=t(43312),yn={fadeIn:{animation:"".concat((0,mn.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}};function Zn(e){var n=e.loading,t=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[gn.searchResult,yn.fadeIn],children:n?(0,r.tZ)(on,{}):t},n?"packagerLoading":"packagerLoaded")})}var bn=t(80336),wn=(0,b.X)({self:[m.l0.p(8),m.l0.borderRadius(8),m.l0.colWithGap(16)],header:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],headerTitle:[m.l0.rowWithGap(4),m.l0.align.center]});function xn(e){var n=e.title,t=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],u=l[1];return(0,r.BX)(ie.T,{css:wn.self,elevated:!0,children:[(0,r.BX)(y.G,{css:wn.header,children:[(0,r.BX)(y.G,{css:wn.headerTitle,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),(0,r.tZ)(ge.h,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return u((function(e){return!e}))},children:(0,r.tZ)(Je.Z,{rotate:c?90:0})})]}),(0,r.tZ)(ge.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(bn.Z,{})})]}),c?(0,r.tZ)(y.G,{children:t}):null]})}var kn=t(33064),Cn=(0,b.X)({header:[m.l0.fontSize(m.TV.fontSizeSubheadDefault),m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,{textTransform:"capitalize"}],headerLeft:[m.l0.rowWithGap(8),m.l0.align.center],headerRight:[m.l0.rowWithGap(8)],loading:[m.l0.height(22),m.l0.width("100%"),m.l0.borderRadius(4),Qe.p.backgroundPulse()],container:[yn.fadeIn,m.l0.flex.growAndShrink(1)]});function Sn(e){var n=e.packagerTitle,t=e.error,i=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=e.openFile,u=e.status,s=(0,Ie.Z)((function(){return a?0===o?"No packages installed.":"Installed ".concat(o," packages"):t?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[t,o,a]);return(0,r.tZ)(y.G,{css:Cn.container,children:i?(0,r.tZ)(y.G,{css:Cn.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:Cn.header,children:[(0,r.BX)(y.G,{css:Cn.headerLeft,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),u===sn.Idle?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(he.Z,{})})]}),(0,r.BX)(y.G,{css:Cn.headerRight,children:[(0,r.tZ)(Z.h4,{level:3,children:s}),o>0&&a&&l?(0,r.tZ)(ge.h,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c(l)},children:(0,r.tZ)(kn.Z,{})}):null]})]}),0===o?(0,r.BX)(Z.xv,{multiline:!0,css:[m.l0.pt(4)],children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},i?"packagerTitleLoading":"packagerTitleLoaded")}var Tn=t(40948),En=t(84358);var Rn=y.K.li;function In(e){var n=(0,Tn.I)(),t=(0,a.useState)(null),i=t[0],l=t[1],c=(0,d.Z)().packager,u=(0,ze.Z)(),s=(0,o.Z)((0,Ke.KO)(fn),2),f=s[0],p=s[1];(0,a.useEffect)((function(){u!==f.replId&&p({replId:u,packageManagers:{}})}),[u,f.replId]),(0,a.useEffect)((function(){!function(e,n){var t=e.map((function(e){return e.id})),r=n.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u&&-1===t.indexOf(u)&&n.clearPackager(u)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(n,c)}),[n,c]),(0,a.useEffect)((function(){(null===i&&n.length>0||i&&!n.find((function(e){return e.id===i.id})))&&l(n[0])}),[n,i]);var h=(0,a.useState)(""),v=h[0],g=h[1],m=function(e){var n=e.query,t=e.packagerType,r=e.config,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=vn(r),v=(0,a.useState)(null),g=v[0],m=v[1],y=(0,En.Z)(n,400);return(0,a.useEffect)((function(){if(s(null),""===y)return p(!1),void l([]);p(!0),(0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"searched",query:y,packagerType:t});var e=!1;return h?(h.search(y).then((function(n){e||(l(n.slice(0,50)),m(h))})).catch((function(n){ce.c_.captureException(n),e||s(n)})).finally((function(){e||p(!1)})),function(){e=!0}):void 0}),[h,y,t]),{searchResults:o,isLoading:f,error:u,searchResultsPackageManager:g}}({query:v,packagerType:"upm",config:i}),Z=m.searchResults,b=m.isLoading,w=m.searchResultsPackageManager,x=""===v,k=(0,Ye.Z)("packager","show_packager_about_tooltip"),C=k.shouldDisplay,S=k.register,T=k.dismiss;(0,a.useEffect)((function(){S()}),[S]);var E=(0,Ye.Z)("packager","show_packager_import_tooltip"),R=E.shouldDisplay,I=E.register,D=E.dismiss;return(0,a.useEffect)((function(){I()}),[I]),(0,r.BX)(y.G,{css:gn.self,children:[(0,r.BX)(y.G,{css:gn.searchUIOuter,children:[(0,r.tZ)(y.G,{css:gn.searchUIInner,children:(0,r.tZ)(qe.E,{value:v,placeholder:i?"Search ".concat(i.language," packages"):void 0,onClear:function(){return g("")},onChange:function(e){return g(e.target.value)},loading:b})}),n.length>1&&(0,r.tZ)(Te.P,{items:n,selectedItem:i,onChange:function(e){l(e)},"aria-label":"Select packager configuration"})]}),x?null===n||void 0===n?void 0:n.map((function(n){return(0,r.tZ)(Gn,{config:n,openFile:e.openFile,displayingInstalledPackages:!0},n.id)})):i&&(0,r.tZ)(Dn,{searchResults:Z,packageManager:w,isLoading:b,config:i,openFile:e.openFile}),C&&x?(0,r.BX)(xn,{title:"What are packages?",onClose:function(){return T()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,x&&R?(0,r.tZ)(xn,{title:"Tip\u2014Auto Import",onClose:function(){return D()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function Dn(e){var n,t=e.searchResults,i=e.packageManager,o=e.isLoading,a=e.config,l=e.openFile,c=null!==(n=(0,B.Z)(null===i||void 0===i?void 0:i.status))&&void 0!==n?n:sn.Idle;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Sn,{loading:o,packagesCount:t.length,displayingInstalledPackages:!1,affectedFile:a.packagerFiles&&a.packagerFiles[0],openFile:l,status:c}),(0,r.tZ)(y.G,{children:(0,r.tZ)(Zn,{loading:o,children:t.map((function(e,n){return(0,r.tZ)(Rn,{children:(0,r.tZ)(Pn,{packageManager:i,pkg:e})},e.name||"Unknown"+n)}))})})]})}function Gn(e){var n,t=e.config,i=e.displayingInstalledPackages,o=e.openFile,l=vn(t),c=(0,B.Z)(null===l||void 0===l?void 0:l.installedPackages),u=(null===c||void 0===c?void 0:c.length)||0,s=(0,a.useState)(!1),d=s[0],f=s[1],p=null!==(n=(0,B.Z)(null===l||void 0===l?void 0:l.status))&&void 0!==n?n:sn.Idle;return(0,a.useEffect)((function(){l&&l.initialize()}),[l]),l&&null!==c?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:gn.packagerSection,children:[u>0?(0,r.tZ)(y.G,{onClick:function(){return f((function(e){return!e}))},css:gn.packagerSectionExpandHandle,children:d?(0,r.tZ)(je.Z,{}):(0,r.tZ)(Ve.Z,{})}):null,(0,r.tZ)(Sn,{packagerTitle:"".concat(t.language," Packages"),loading:!1,packagesCount:c.length,displayingInstalledPackages:Boolean(i),affectedFile:t.packagerFiles&&t.packagerFiles[0],openFile:o,status:p})]}),d?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(Zn,{loading:!1,children:c.map((function(e,n){return(0,r.tZ)(Rn,{children:(0,r.tZ)(Pn,{packageManager:l,pkg:e})},e.name||"Unknown"+n)}))})})]}):null}function Pn(e){var n=e.packageManager,t=(0,He.Z)(e,["packageManager"]),i=function(e){var n=e.packageManager,t=e.pkg,r=(0,o.Z)(a.useState(!1),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1];return a.useEffect((function(){if(n&&t.name){var e=!1;return n.fetchPackageInfo(t.name).then((function(n){e||(s(n||null),l(!1))})),function(){e=!0}}s(null)}),[n,t.name]),{isLoading:i,packageInfo:u}}({packageManager:n,pkg:t.pkg}).packageInfo,l=(0,B.Z)(null===n||void 0===n?void 0:n.isRunning)||!1,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,V.Z)(),f=i||t.pkg,p="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,h=(0,Ce.Z)().showNotice,v=(null===n||void 0===n?void 0:n.isInstalled(f))||!1;return(0,r.tZ)(tn,{onActionClick:function(){n&&!l&&(s(!0),v?n.uninstall(f).then((function(){d.current&&s(!1)})):n.install(f).then((function(){d.current&&(h("Installed ".concat(f.name)),s(!1))})))},isAlreadyInstalled:v,isPackagerRunning:l,isIconLoading:u,statusMessage:v?$e.REMOVE:$e.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:p})}var _n,Bn=t(79752);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(_n||(_n={}));var An=(0,b.X)({self:[m.l0.p(8),m.l0.borderRadius(8),m.l0.width("100%")],header:[m.l0.flex.row,m.l0.justify.spaceBetween],description:[m.l0.colWithGap(16),m.l0.mt(8)]});function Un(e){var n=e.onActionClick,t=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,u=e.itemDescription,s=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,g=(0,a.useState)(!1),m=g[0],b=g[1],w=d||f||p||h&&h.length;return(0,r.BX)(ie.T,{css:An.self,elevated:!0,children:[(0,r.BX)(y.G,{css:An.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),w?(0,r.tZ)(ge.h,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,r.tZ)(Je.Z,{rotate:m?90:0})}):null]}),(0,r.BX)(y.G,{css:An.description,children:[(0,r.tZ)(On,{title:"Version ".concat(s),value:u||"This package has no description.",showMore:m}),d&&m?(0,r.tZ)(On,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:m}):null,f&&m?(0,r.tZ)(On,{title:"License",value:f,showMore:m}):null,p&&m?(0,r.tZ)(On,{title:"Author",value:p,showMore:m}):null,h&&h.length&&m?(0,r.tZ)(On,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:m}):null,(0,r.tZ)(ne.zx,(0,M.Z)({iconLeft:(0,r.tZ)(Mn,{isAlreadyInstalled:t,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return n()},disabled:i&&!o,loading:o},Xn(l)))]})]})}var Ln=(0,b.X)({self:[An.self,Qe.p.backgroundPulse(),m.l0.height(128)]});function Nn(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,n){return(0,r.tZ)(ie.T,{css:Ln.self,elevated:!0},"itemDetailSkeleton".concat(n))}))})}function Xn(e){switch(e){case _n.REMOVE:return{colorway:"negative",outlined:!0};case _n.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var Fn=(0,b.X)({self:[m.l0.colWithGap(2)],title:[m.l0.color.foregroundDimmer]});function On(e){var n=e.title,t=e.value,i=e.showMore;return(0,r.BX)(y.G,{css:Fn.self,children:[(0,r.tZ)(Z.xv,{css:Fn.title,children:n}),t?(0,r.tZ)(Z.xv,{multiline:!0,maxLines:i?void 0:2,children:t}):null]})}function Mn(e){var n=e.isAlreadyInstalled,t=e.isIconLoading,i=e.htmlItem;return t?(0,r.tZ)(he.Z,{}):n?i?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(xe.Z,{}):(0,r.tZ)(en.Z,{})}var Wn,Hn=(0,Ke.cn)({replId:"",packageManagers:{}});!function(e){e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(Wn||(Wn={}));var zn="index.html";function Vn(e,n){return n.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function jn(e){var n=(0,o.Z)((0,Ke.KO)(Hn),2),t=n[0],r=n[1],l=(0,d.Z)(),c=l.fs,u=l.packager;return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!t.packageManagers[e.id]){var n="html"===e.id?function(e){var n=(0,dn.u)(Wn.Idle),t=(0,dn.u)(!1),r=(0,dn.u)([]);function i(){return(i=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return t.current=!0,[4,u()];case 1:return e.sent(),t.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return o=(0,O.Z)((function(r){return(0,H.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,O.Z)((function(i){var o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=Wn.Installing,[4,e.stat(zn)]);case 1:return a.sent().exists?(o=e.watchTextFile(zn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s='<script src="'.concat(r.sourceCodeURL,'"><\/script>\n'),d=l,f=d.indexOf("<script");-1===f&&(f=d.indexOf("</body>")),c({from:f,insert:s}),e.flush().then((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=Wn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=Wn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return a=(0,O.Z)((function(r){return(0,H.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,O.Z)((function(i){var o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=Wn.Uninstalling,[4,e.stat(zn)]);case 1:return a.sent().exists?(o=e.watchTextFile(zn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s=l,d=0,f=!0,p=!1,h=void 0;try{for(var v,g=s.split("\n")[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m,y=v.value;if(m=y.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var Z=m[1];r.name===Z&&c({from:d,to:d+y.length+1,insert:""})}d+=y.length+1}}catch(b){p=!0,h=b}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}e.flush().then((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=Wn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=Wn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),a.apply(this,arguments)}function l(){return(l=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function c(){return(c=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:return(t=r.sent())?[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function u(){return s.apply(this,arguments)}function s(){return(s=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,d()];case 1:return(e=n.sent()).error?r.current=[]:e.packages&&(r.current=e.packages),[2]}}))}))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,O.Z)((function(){return(0,H.__generator)(this,(function(n){return[2,new Promise(function(){var n=(0,O.Z)((function(n){var t,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(zn)];case 1:return i.sent().exists?(t=[],r=e.watchTextFile(zn,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,u=i.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s;if(s=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=s[1],f=s[2];t.push({name:d,version:f})}}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(),n({packages:t,error:null})},onError:function(e){r(),n({packages:null,error:e.message})}}),[2]):(n({packages:[],error:null}),[2])}}))}));return function(e){return n.apply(this,arguments)}}())]}))})),f.apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return o.apply(this,arguments)},uninstall:function(e){return a.apply(this,arguments)},search:function(e){return l.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return r.current.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:t,status:n}}(c):function(e,n){var t=(0,dn.u)(Wn.Idle),r=(0,dn.u)(!1),i=(0,dn.u)([]);function o(){return(o=(0,O.Z)((function(){var t;return(0,H.__generator)(this,(function(o){switch(o.label){case 0:return r.current=!0,[4,e.listSpecfile(n)];case 1:return(t=o.sent()).error?i.current=[]:t.packages&&(i.current=t.packages),r.current=!1,[2]}}))}))).apply(this,arguments)}function a(){return(a=(0,O.Z)((function(t){return(0,H.__generator)(this,(function(r){return[2,e.searchPackages(t,n)]}))}))).apply(this,arguments)}function l(){return(l=(0,O.Z)((function(o){var a,l,c;return(0,H.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if((0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:o.name}),!o.name)throw new Error("Package has no name");return Vn(o,i.current)?[2]:(r.current=!0,t.current=Wn.Installing,[4,e.addPackages([o],n)]);case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=Wn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))}))).apply(this,arguments)}function c(){return(c=(0,O.Z)((function(o){var a,l,c;return(0,H.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if(!o.name)throw new Error("Package has no name");return Vn(o,i.current)?((0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:o.name}),r.current=!0,t.current=Wn.Uninstalling,[4,e.removePackages([o.name],n)]):[2];case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=Wn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))}))).apply(this,arguments)}function u(){return(u=(0,O.Z)((function(t){return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(t,n)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return o.apply(this,arguments)},install:function(e){return l.apply(this,arguments)},uninstall:function(e){return c.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:i,isInstalled:function(e){return Vn(e,i.current)},fetchPackageInfo:function(e){return u.apply(this,arguments)},isRunning:r,status:t}}(u,e.id);r({replId:t.replId,packageManagers:(0,W.Z)((0,M.Z)({},t.packageManagers),(0,i.Z)({},e.id,n))})}}),[c,t,null===e||void 0===e?void 0:e.id,u,r]),e&&t.packageManagers[e.id]||null}var qn=(0,b.X)({self:[m.l0.color.foregroundDefault,m.l0.colWithGap(16)],installedHeader:[m.l0.fontSize(m.TV.fontSizeSubheadDefault)],searchUIOuter:[m.l0.flex.row,m.l0.align.center],searchUIInner:[m.l0.flex.grow(1),m.l0.pr(8)],searchResult:[m.l0.flex.column,{gap:m.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[m.l0.flex.row,m.l0.align.center],packagerSectionExpandHandle:[m.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),Yn={fadeIn:{animation:"".concat((0,mn.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}};function Kn(e){var n=e.loading,t=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[qn.searchResult,Yn.fadeIn],children:n?(0,r.tZ)(Nn,{}):t},n?"packagerLoading":"packagerLoaded")})}var $n=(0,b.X)({self:[m.l0.p(8),m.l0.borderRadius(8),m.l0.colWithGap(16)],header:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],headerTitle:[m.l0.rowWithGap(4),m.l0.align.center]});function Qn(e){var n=e.title,t=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],u=l[1];return(0,r.BX)(ie.T,{css:$n.self,elevated:!0,children:[(0,r.BX)(y.G,{css:$n.header,children:[(0,r.BX)(y.G,{css:$n.headerTitle,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),(0,r.tZ)(ge.h,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return u((function(e){return!e}))},children:(0,r.tZ)(Je.Z,{rotate:c?90:0})})]}),(0,r.tZ)(ge.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(bn.Z,{})})]}),c?(0,r.tZ)(y.G,{children:t}):null]})}var Jn=(0,b.X)({header:[m.l0.fontSize(m.TV.fontSizeSubheadDefault),m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,{textTransform:"capitalize"}],headerLeft:[m.l0.rowWithGap(8),m.l0.align.center],headerRight:[m.l0.rowWithGap(8)],loading:[m.l0.height(22),m.l0.width("100%"),m.l0.borderRadius(4),Qe.p.backgroundPulse()],container:[Yn.fadeIn,m.l0.flex.growAndShrink(1)]});function et(e){var n=e.packagerTitle,t=e.error,i=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=e.openFile,u=e.status,s=(0,Ie.Z)((function(){return a?0===o?"No packages installed.":"Installed ".concat(o," packages"):t?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[t,o,a]);return(0,r.tZ)(y.G,{css:Jn.container,children:i?(0,r.tZ)(y.G,{css:Jn.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:Jn.header,children:[(0,r.BX)(y.G,{css:Jn.headerLeft,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),u===Wn.Idle?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(he.Z,{})})]}),(0,r.BX)(y.G,{css:Jn.headerRight,children:[(0,r.tZ)(Z.h4,{level:3,children:s}),o>0&&a&&l?(0,r.tZ)(ge.h,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c(l)},children:(0,r.tZ)(kn.Z,{})}):null]})]}),0===o?(0,r.BX)(Z.xv,{multiline:!0,css:[m.l0.pt(4)],children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},i?"packagerTitleLoading":"packagerTitleLoaded")}var nt=t(60471),tt={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};var rt=y.K.li;function it(e){var n=function(){var e=(0,Y.Z)(),n=(0,nt.T)();return(0,a.useMemo)((function(){var t,r=(null===n||void 0===n?void 0:n.packagers)||[],i=(null===r||void 0===r?void 0:r.map((function(e){var n;return(0,W.Z)((0,M.Z)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=tt[e.language])&&void 0!==t?t:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||i.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),i}),[n,e])}(),t=(0,a.useState)(null),i=t[0],l=t[1],c=(0,d.Z)().packager,u=(0,ze.Z)(),s=(0,o.Z)((0,Ke.KO)(Hn),2),f=s[0],p=s[1];(0,a.useEffect)((function(){u!==f.replId&&p({replId:u,packageManagers:{}})}),[u,f.replId]),(0,a.useEffect)((function(){!function(e,n){var t=e.map((function(e){return e.id})),r=n.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u&&-1===t.indexOf(u)&&n.clearPackager(u)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(n,c)}),[n,c]),(0,a.useEffect)((function(){(null===i&&n.length>0||i&&!n.find((function(e){return e.id===i.id})))&&l(n[0])}),[n,i]);var h=(0,a.useState)(""),v=h[0],g=h[1],m=function(e){var n=e.query,t=e.packagerType,r=e.config,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=jn(r),v=(0,a.useState)(null),g=v[0],m=v[1],y=(0,En.Z)(n,400);return(0,a.useEffect)((function(){if(s(null),""===y)return p(!1),void l([]);p(!0),(0,K.j)(K.U3.PACKAGE_MANAGER_USED,{action:"searched",query:y,packagerType:t});var e=!1;return h?(h.search(y).then((function(n){e||(l(n.slice(0,50)),m(h))})).catch((function(n){ce.c_.captureException(n),e||s(n)})).finally((function(){e||p(!1)})),function(){e=!0}):void 0}),[h,y,t]),{searchResults:o,isLoading:f,error:u,searchResultsPackageManager:g}}({query:v,packagerType:"upm",config:i}),Z=m.searchResults,b=m.isLoading,w=m.searchResultsPackageManager,x=""===v,k=(0,Ye.Z)("packager","show_packager_about_tooltip"),C=k.shouldDisplay,S=k.register,T=k.dismiss;(0,a.useEffect)((function(){S()}),[S]);var E=(0,Ye.Z)("packager","show_packager_import_tooltip"),R=E.shouldDisplay,I=E.register,D=E.dismiss;return(0,a.useEffect)((function(){I()}),[I]),(0,r.BX)(y.G,{css:qn.self,children:[(0,r.BX)(y.G,{css:qn.searchUIOuter,children:[(0,r.tZ)(y.G,{css:qn.searchUIInner,children:(0,r.tZ)(qe.E,{value:v,placeholder:i?"Search ".concat(i.language," packages"):void 0,onClear:function(){return g("")},onChange:function(e){return g(e.target.value)},loading:b})}),n.length>0&&(0,r.tZ)(Te.P,{items:n,selectedItem:i,onChange:function(e){l(e)},"aria-label":"Select packager configuration"})]}),x?null===n||void 0===n?void 0:n.map((function(n){return(0,r.tZ)(at,{config:n,openFile:e.openFile,displayingInstalledPackages:!0},n.id)})):i&&(0,r.tZ)(ot,{searchResults:Z,packageManager:w,isLoading:b,config:i,openFile:e.openFile}),C&&x?(0,r.BX)(Qn,{title:"What are packages?",onClose:function(){return T()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,x&&R?(0,r.tZ)(Qn,{title:"Tip\u2014Auto Import",onClose:function(){return D()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function ot(e){var n,t=e.searchResults,i=e.packageManager,o=e.isLoading,a=e.config,l=e.openFile,c=null!==(n=(0,B.Z)(null===i||void 0===i?void 0:i.status))&&void 0!==n?n:Wn.Idle;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(et,{loading:o,packagesCount:t.length,displayingInstalledPackages:!1,affectedFile:a.packagerFiles&&a.packagerFiles[0],openFile:l,status:c}),(0,r.tZ)(y.G,{children:(0,r.tZ)(Kn,{loading:o,children:t.map((function(e,n){return(0,r.tZ)(rt,{children:(0,r.tZ)(lt,{packageManager:i,pkg:e})},e.name||"Unknown"+n)}))})})]})}function at(e){var n,t=e.config,i=e.displayingInstalledPackages,o=e.openFile,l=jn(t),c=(0,B.Z)(null===l||void 0===l?void 0:l.installedPackages),u=(null===c||void 0===c?void 0:c.length)||0,s=(0,a.useState)(!1),d=s[0],f=s[1],p=null!==(n=(0,B.Z)(null===l||void 0===l?void 0:l.status))&&void 0!==n?n:Wn.Idle;return(0,a.useEffect)((function(){l&&l.initialize()}),[l]),l&&null!==c?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:qn.packagerSection,children:[u>0?(0,r.tZ)(y.G,{onClick:function(){return f((function(e){return!e}))},css:qn.packagerSectionExpandHandle,children:d?(0,r.tZ)(je.Z,{}):(0,r.tZ)(Ve.Z,{})}):null,(0,r.tZ)(et,{packagerTitle:"".concat(t.language," Packages"),loading:!1,packagesCount:c.length,displayingInstalledPackages:Boolean(i),affectedFile:t.packagerFiles&&t.packagerFiles[0],openFile:o,status:p})]}),d?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(Kn,{loading:!1,children:c.map((function(e,n){return(0,r.tZ)(rt,{children:(0,r.tZ)(lt,{packageManager:l,pkg:e})},e.name||"Unknown"+n)}))})})]}):null}function lt(e){var n=e.packageManager,t=(0,He.Z)(e,["packageManager"]),i=function(e){var n=e.packageManager,t=e.pkg,r=(0,o.Z)(a.useState(!1),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1];return a.useEffect((function(){if(n&&t.name){var e=!1;return n.fetchPackageInfo(t.name).then((function(n){e||(s(n||null),l(!1))})),function(){e=!0}}s(null)}),[n,t.name]),{isLoading:i,packageInfo:u}}({packageManager:n,pkg:t.pkg}).packageInfo,l=(0,B.Z)(null===n||void 0===n?void 0:n.isRunning)||!1,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,V.Z)(),f=i||t.pkg,p="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,h=(0,Ce.Z)().showNotice,v=(null===n||void 0===n?void 0:n.isInstalled(f))||!1;return(0,r.tZ)(Un,{onActionClick:function(){n&&!l&&(s(!0),v?n.uninstall(f).then((function(){d.current&&s(!1)})):n.install(f).then((function(){d.current&&(h("Installed ".concat(f.name)),s(!1))})))},isAlreadyInstalled:v,isPackagerRunning:l,isIconLoading:u,statusMessage:v?_n.REMOVE:_n.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:p})}var ct=(0,b.X)({self:[m.l0.p(8),G.F3],packagerWrapper:m.l0.mt(8)}),ut={Content:function(e){var n=e.options;return(0,Me.P5)({controlName:"flag-packager2",default:!1,logFlagToAnalytics:!1})?(0,r.tZ)(y.G,{css:ct.self,children:(0,r.tZ)(it,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,Bn.$E)(e),secondary:!0})}})}):(0,r.BX)(y.G,{css:ct.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:ct.packagerWrapper,children:(0,r.tZ)(In,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,Bn.$E)(e),secondary:!0})}})})]})},Icon:function(e){var n=e.size;return(0,r.tZ)(We.Z,{size:n})},getTitle:function(){return"Packages"}},st=t(70104),dt=t(55749),ft=t(35004),pt=t(60566),ht=(0,b.X)({button:{width:"fit-content"}});function vt(e){var n=e.code,t=e.activeFile,i=(0,$.Z)(t),o=i?{text:"Insert",iconRight:(0,r.tZ)(ft.Z,{}),onClick:function(){return i({code:n,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,r.tZ)(Se.Z,{}),onClick:function(){return(0,pt.Z)(n)}};return(0,r.tZ)(ie.T,{background:"default",children:(0,r.tZ)(ne.zx,(0,M.Z)({small:!0,outlined:!0,css:ht.button},o))})}var gt=(0,b.X)({self:m.l0.colWithGap(4),content:[m.l0.rowWithGap(4),m.l0.backgroundColor.backgroundRoot,m.l0.borderRadius(4),m.l0.p(4),m.l0.align.center,{width:"fit-content"}]});function mt(e){var n=e.method,t=e.content,i=e.activeFile,o=(0,a.useState)(t),l=o[0],c=o[1];return(0,r.BX)(y.G,{css:gt.self,children:[(0,r.tZ)(Ct,{title:n}),(0,r.tZ)(y.G,{css:gt.content,children:l.map((function(e,t){var i="".concat(n,"-").concat(t);return"input"===e.type?(0,r.tZ)(Zt,{i:t,value:e.value,placeholder:e.placeholder,setContent:c},i):(0,r.tZ)(wt,{value:e.value},i)}))}),(0,r.tZ)(vt,{code:St(l),activeFile:i})]})}var yt=(0,b.X)({self:[m.l0.width(64),m.l0.height(24),m.l0.zIndex(1)]});function Zt(e){var n=e.i,t=e.value,i=e.placeholder,o=e.setContent;return(0,r.tZ)(pe.II,{onChange:function(e){o((function(t){return t.map((function(t,r){return n===r?(0,W.Z)((0,M.Z)({},t),{value:e.target.value}):t}))}))},placeholder:i,value:t||"",css:yt.self})}var bt=(0,b.X)({self:[m.l0.borderRadius(0),m.l0.backgroundColor.backgroundRoot],code:[m.l0.font.code,m.l0.color.greyStronger,m.l0.p(4)]});function wt(e){var n=e.value;return(0,r.tZ)(y.G,{css:bt.self,children:(0,r.tZ)(Z.xv,{css:bt.code,children:n})})}var xt,kt=(0,b.X)({self:m.l0.rowWithGap(4),bold:{fontWeight:m.TV.fontWeightMedium}});function Ct(e){var n=e.title,t=(0,o.Z)((0,Ie.Z)((function(){var e=(0,dt.Z)(n.split(" "));return[e[0],e.slice(1).join(" ")]}),[n]),2),i=t[0],a=t[1];return(0,r.BX)(y.G,{css:kt.self,children:[(0,r.tZ)(Z.xv,{css:kt.bold,children:i}),(0,r.tZ)(Z.xv,{color:"dimmer",children:a})]})}function St(e){return e.reduce((function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(xt||(xt={}));var Tt={language:"Bash",methods:[Dt(xt.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),Dt(xt.GET,"curl $REPLIT_DB_URL/{{key}}"),Dt(xt.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),Dt(xt.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},Et={language:"Node",methods:[Dt(xt.IMPORT,'const Database = require("@replit/database")'),Dt(xt.CREATE,"const db = new Database()"),Dt(xt.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),Dt(xt.GET,'db.get("{{key}}").then(value => {})'),Dt(xt.DELETE,'db.delete("{{key}}").then(() => {})'),Dt(xt.LIST,"db.list().then(keys => {})"),Dt(xt.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},Rt={language:"Go",methods:[Dt(xt.IMPORT,'import "github.com/replit/database-go"'),Dt(xt.SET,'db.Set("{{key}}", "{{value}}")'),Dt(xt.GET,'value, _ := database.Get("{{key}}")'),Dt(xt.DELETE,'database.Delete("{{key}}")'),Dt(xt.LIST,'keys, _ := database.ListKeys("")'),Dt(xt.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},It={language:"Python",methods:[Dt(xt.IMPORT,"from replit import db"),Dt(xt.SET,'db["{{key}}"] = "{{value}}"'),Dt(xt.GET,'db["{{key}}"]'),Dt(xt.DELETE,'del db["{{key}}"]'),Dt(xt.LIST,"keys = db.keys()"),Dt(xt.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function Dt(e,n){return{method:e,content:Gt(n)}}function Gt(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),t=i+"}}".length}return n}var Pt=(0,b.X)({self:m.l0.colWithGap(24),code:[m.l0.font.code,m.l0.color.greyStronger,m.l0.backgroundColor.backgroundRoot,m.l0.p(4),m.l0.borderRadius(4)]});function _t(e){var n=e.activeFile,t=(0,Ie.Z)((function(){return function(e){switch(e?(0,v.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return Et;case"go":return Rt;case"py":return It;default:return Tt}}(n)}),[n]);return(0,r.BX)(y.G,{css:Pt.self,children:[(0,r.BX)(Z.xv,{color:"dimmer",multiline:!0,children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,r.tZ)("code",{css:Pt.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),t.methods.map((function(e){return(0,r.tZ)(mt,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))}))]})}var Bt=t(33594),At=(0,b.X)({children:[m.l0.p(12),m.l0.colWithGap(8)]});function Ut(e){var n=e.title,t=e.defaultExpanded,i=e.children;return(0,r.tZ)(Bt.Q,{defaultExpanded:t,headerContent:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n}),children:(0,r.tZ)(y.G,{css:At.children,children:i})})}var Lt=t(2757),Nt=t(84563),Xt=(0,mn.F4)("from{opacity:0}to{opacity:1}"),Ft=(0,b.X)({self:[m.l0.colWithGap(8),{animation:"".concat(Xt," 100ms forwards ease-in-out alternate")}],selfLoadingText:[m.l0.height(16),m.l0.width(48),m.l0.borderRadius(4),Qe.p.backgroundPulse()],selfLoading:[m.l0.height(12),m.l0.borderRadius(16),Qe.p.backgroundPulse()],text:[m.l0.rowWithGap(4)],textSpan:[m.l0.width("fit-content"),m.l0.display.inlineFlex]});function Ot(e){var n=e.database,t=e.loading,i=(null===n||void 0===n?void 0:n.sizeMB)||0,o=function(e){return"".concat((e=1e6*e/1048576).toFixed(),"/50 MiB")}(i),a=t||!n;return(0,r.tZ)(y.G,{css:Ft.self,children:a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.G,{css:Ft.selfLoadingText}),(0,r.tZ)(y.G,{css:Ft.selfLoading})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{color:"dimmer",css:Ft.text,children:[(0,r.tZ)(y.K.span,{css:Ft.textSpan,children:o}),(0,r.tZ)(y.K.span,{css:Ft.textSpan,children:"|"}),(0,r.tZ)(y.K.span,{css:Ft.textSpan,children:Mt(null===n||void 0===n?void 0:n.keysCount)})]}),(0,r.tZ)(Nt.J,{current:i,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function Mt(e){return"".concat(e=e||0," ").concat((0,Lt.Z)("key",e))}var Wt=t(43119),Ht=t(71440),zt=t(24635);function Vt(){var e=(0,Wt.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return Vt=function(){return e},e}function jt(){var e=(0,Wt.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return jt=function(){return e},e}var qt={},Yt=(0,Ht.Ps)(Vt()),Kt=(0,Ht.Ps)(jt(),Yt);function $t(){var e,n,t,r=function(e){var n=(0,M.Z)({},qt,e);return zt.a(Kt,n)}({variables:{replID:(0,ze.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?n=null===i||void 0===i||null===(t=i.repl)||void 0===t?void 0:t.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?n=null:e=o.message),{db:n,loading:a,error:e}}var Qt=t(30504),Jt=(0,b.X)({self:[m.l0.colWithGap(16),m.l0.p(8),m.l0.backgroundColor.backgroundDefault,G.F3],link:[m.l0.color.accentPrimaryStronger,m.l0.pr(4)],sectionWrapper:[m.l0.colWithGap(16),m.l0.overflowY("auto"),m.l0.width("100%"),{flex:"1"}]});function er(e){var n=e.performPaneOperation,t=$t(),i=t.db,o=t.error,a=t.loading,l=(0,ve.R3)();return(0,r.BX)(y.G,{css:Jt.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.BX)(y.G,{css:Jt.sectionWrapper,children:[(0,r.BX)(y.G,{children:[(0,r.BX)(Z.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:Qt.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:Qt.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentNegativeStronger],children:o}):null]}),(0,r.tZ)(Ut,{title:"Database Info",defaultExpanded:!0,children:(0,r.tZ)(Ot,{database:i,loading:a})}),(0,r.tZ)(Ut,{title:"Using the database",defaultExpanded:!0,children:(0,r.tZ)(_t,{activeFile:l})})]})]})}var nr={Content:function(e){var n=e.options.performPaneOperation;return(0,r.tZ)(er,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(st.Z,{size:n})},getTitle:function(){return"Database"}},tr=t(50216);function rr(){var e=(0,Wt.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return rr=function(){return e},e}function ir(){var e=(0,Wt.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return ir=function(){return e},e}function or(){var e=(0,Wt.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return or=function(){return e},e}function ar(){var e=(0,Wt.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return ar=function(){return e},e}var lr={},cr=(0,Ht.Ps)(rr());var ur=(0,Ht.Ps)(ir());var sr=(0,Ht.Ps)(or());var dr=(0,Ht.Ps)(ar());var fr=t(69994),pr=t(98381),hr=t(14806),vr=t(9970),gr=t(44322),mr=t(18988),yr=t(34204),Zr=t(52132),br={"td,th":{border:"1px solid "+m.TV.outlineDefault}},wr={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},xr={outline:"2px solid ".concat(m.TV.accentPrimaryDefault),outlineOffset:"-2px"},kr=(0,mn.iv)({":focus:focus-visible":xr}),Cr=(0,mn.iv)(xr),Sr=(0,mn.iv)([wr,br,kr]),Tr=(0,mn.iv)([m.l0.fontWeight.medium,wr,br,kr]),Er=(0,mn.iv)({"tbody > tr:hover":{backgroundColor:m.TV.backgroundHigher,cursor:"pointer"}});function Rr(e){var n=e.type,t=e.style,i=e.children,o=(0,gr.LA)().rowGroupProps;return(0,r.tZ)(n,(0,W.Z)((0,M.Z)({},o),{style:t,children:i}))}function Ir(e){var n=e.item,t=e.state,i=e.children,o=(0,a.useRef)(null),l=(0,gr.Qm)({node:n},t,o).rowProps;return(0,r.tZ)("tr",(0,W.Z)((0,M.Z)({css:Tr},l),{ref:o,children:i}))}function Dr(e){var n,t=e.column,i=e.state,o=(0,a.useRef)(null),l=(0,gr.WY)({node:t},i,o).columnHeaderProps,c=(0,mr.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("th",(0,W.Z)((0,M.Z)({},(0,yr.dG)(l,s)),{css:[u&&Cr,kr],colSpan:t.colspan,style:{textAlign:(null!==(n=t.colspan)&&void 0!==n?n:1)>1?"center":"left"},ref:o,children:t.rendered}))}function Gr(e){var n=e.item,t=e.children,i=e.state,o=(0,a.useRef)(null),l=(0,gr.U)({node:n},i,o).rowProps,c=(0,mr.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("tr",(0,W.Z)((0,M.Z)({css:[u&&Cr,Sr]},(0,yr.dG)(l,s)),{ref:o,children:t}))}function Pr(e){var n=e.cell,t=e.state,i=(0,a.useRef)(null),o=(0,gr.fs)({node:n},t,i).gridCellProps,l=(0,mr.Fx)(),c=l.isFocusVisible,u=l.focusProps;return(0,r.tZ)("td",(0,W.Z)((0,M.Z)({},(0,yr.dG)(o,u)),{css:[c&&Cr,kr],ref:i,children:n.rendered}))}function _r(e){var n=e.selectionMode,t=e.selectionBehavior,i=(0,Zr.oy)((0,W.Z)((0,M.Z)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),o=(0,a.useRef)(null),l=i.collection,c=(0,gr.x6)(e,i,o).gridProps;return(0,r.BX)("table",(0,W.Z)((0,M.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&Er],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(Rr,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(Ir,{item:e,state:i,children:(0,vr.Z)(e.childNodes).map((function(e){return(0,r.tZ)(Dr,{column:e,state:i},e.key)}))},e.key)}))}),(0,r.tZ)(Rr,{type:"tbody",children:(0,vr.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(Gr,{item:e,state:i,children:(0,vr.Z)(e.childNodes).map((function(e){return(0,r.tZ)(Pr,{cell:e,state:i},e.key)}))},e.key)}))})]}))}var Br=function(e){var n=e.ariaTableProps,t=e.rows,i=e.columns;return(0,r.BX)(_r,(0,W.Z)((0,M.Z)({},n),{children:[(0,r.tZ)(Zr.xD,{columns:i,children:function(e){return(0,r.tZ)(Zr.sg,{children:e.value})}}),(0,r.tZ)(Zr.RM,{items:t,children:function(e){return(0,r.tZ)(Zr.X2,{children:function(n){return(0,r.tZ)(Zr.bL,{children:e[n]})}})}})]}))};function Ar(e){var n=e.headerColumns,t=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,c=n.map((function(e,n){return{key:"string"===typeof e?e:"".concat(n),value:e}})),u=t.map((function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(Br,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:u})}var Ur=function(e,n){var t=(0,d.Z)().psql,r=(0,o.Z)(a.useState(),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],f=a.useCallback(function(){var r=(0,O.Z)((function(){var r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),s(!0),[4,t.run({query:e,connectionString:n})];case 2:return r=i.sent(),l(r),[3,4];case 3:return s(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[n,t,e]);return a.useEffect((function(){f()}),[n,t,e,f]),{data:i,loading:u,refetch:f}},Lr=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!==t&&void 0!==t?t:[],bodyData:n.map((function(e){return Object.values(e)}))}},Nr=function(e){var n=e.connectionString;return Ur("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",n)},Xr=(0,Ke.cn)(void 0),Fr=(0,Ke.cn)((function(e){var n=e(Xr);return null===n||void 0===n?void 0:n.rows.reduce((function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e}),{})})),Or=t(10035),Mr=t(3652),Wr=function(e){var n=e.headerTitle,t=e.onGoBack,i=e.children;return(0,r.BX)(y.G,{css:[m.l0.flex.column,m.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.py(16),m.l0.px(8),m.l0.align.center],children:[(0,r.tZ)(ge.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(Mr.Z,{})}),(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(16),m.l0.ml(8)],children:n})]}),(0,r.tZ)(y.G,{css:[m.l0.overflow("auto"),m.l0.height("calc(100% - 60px)")],children:i})]})},Hr=function(e){(0,K.j)(K.U3.DATABASE_USED,(0,M.Z)({type:"PostgreSQL",provider:"neon"},e))},zr=(0,Ke.cn)(["databaseManager"]),Vr=(0,Ke.cn)(null,(function(e,n,t){var r=e(zr);n(zr,(0,vr.Z)(r).concat([t])),Hr({action:"pageNav",databasePage:t})})),jr=(0,Ke.cn)(null,(function(e,n){var t=e(zr);n(zr,t.slice(0,t.length-1))})),qr=(0,Ke.cn)((function(e){var n=e(zr);return n[n.length-1]})),Yr=function(){return(0,Ke.b9)(Vr)},Kr=function(){return(0,Ke.b9)(jr)},$r=t(5005),Qr=t(40696),Jr=(0,Ke.cn)(""),ei=(0,Ke.cn)(null),ni=(0,Ke.cn)(null,(function(e,n,t){var r=t.query;r&&n(Jr,r);var i=e(ei);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),ti=t(85234),ri=t.n(ti),ii=t(92153),oi=t(53397),ai=(0,oi.O4)("replDatabasesQueryHistory",[]),li=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},ci=function(){return(0,oi.lV)(a.useCallback((function(e,n,t){if(t){var r={id:ri()(),data:t,timestamp:Date.now()},i=e(ai),o=(0,ii.ZP)(i,(function(e){!function(e,n){var t=e.findIndex((function(e){return!e.isPinned&&e.data===n.data}));-1!==t?e.splice(t,1,n):e.push(n),e.sort(li);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));n(ai,o)}}),[]))},ui=t(49129),si=t(57866),di=t(8345),fi=t(72669),pi=t(55143),hi=t(72499),vi=function(e){var n=e.id,t=e.data,i=e.isPinned,o=function(e){return(0,oi.lV)(a.useCallback((function(n,t){var r=n(ai).find((function(n){return n.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(t(ni,{query:i}),Hr({action:"queryHistoryItemSelected"}))}),[e]))}(n),l=function(e){return(0,oi.lV)(a.useCallback((function(n,t){var r=n(ai),i=(0,ii.ZP)(r,(function(n){var t=n.find((function(n){return n.id===e}));t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),n.sort(li)}));t(ai,i),Hr({action:"queryHistoryItemPinned"})}),[e]))}(n);return(0,r.BX)(y.G,{css:[{borderTop:"1px solid ".concat(m.TV.outlineDefault),":hover":{background:m.TV.backgroundHigher}},m.l0.flex.row,m.l0.p(8),m.l0.color.foregroundDimmer,m.l0.align.center,m.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(Z.xv,{css:[m.l0.flex.growAndShrink(1)],children:t}),(0,r.tZ)(ge.h,{alt:"Pin query",onClick:l,children:i?(0,r.tZ)(di.Z,{fill:m.TV.accentPrimaryDefault}):(0,r.tZ)(Qr.Z,{})})]})},gi=function(e){var n=e.onExpand,t=(0,Ke.Dv)(ai);return(0,r.tZ)(Bt.Q,{onClick:n,headerContent:(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.p(2)],children:[(0,r.tZ)(Or.Z,{}),(0,r.tZ)(Z.xv,{css:[m.l0.color.foregroundDimmest],children:"Query History"})]}),children:(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8),m.l0.height("100%")],children:0===t.length?(0,r.tZ)(y.G,{css:[m.l0.p(8)],children:(0,r.tZ)(Z.xv,{css:[m.l0.color.foregroundDimmer],children:"No query history"})}):(0,r.tZ)(y.G,{children:t.map((function(e){return(0,r.tZ)(vi,(0,M.Z)({},e),e.id)}))})})})},mi=new hi.R((function(){return(0,fr.W$)((0,fi.VV)((0,r.tZ)("div",{css:[{fontFamily:m.TV.fontFamilyCode},m.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))})),yi=new pi.j((function(e){return hr.Wl.high((0,pr.sql)((0,M.Z)({dialect:pr.PostgreSQL},e)))})),Zi=function(e){var n=e.queryResult,t=e.scrollRef;if(null===n||void 0===n?void 0:n.error)return(0,r.tZ)(y.G,{css:m.l0.px(8),children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentNegativeDefault],children:null===n||void 0===n?void 0:n.error})});if(!(null===n||void 0===n?void 0:n.rows))return null;var i=Lr(n);if(!i)return(0,r.tZ)(y.G,{css:m.l0.px(8),children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(y.G,{css:m.l0.px(8),children:(0,r.tZ)(Ar,{headerColumns:o,bodyData:a,scrollRef:t})})},bi=(0,mn.iv)([m.l0.height("100%"),m.l0.position.relative,m.l0.overflow("auto")]),wi=(0,mn.iv)([m.l0.position.sticky,m.l0.top(0),m.l0.left(0),m.l0.zIndex(1),m.l0.backgroundColor.backgroundDefault]),xi=function(e){var n=e.connectionString,t=(0,o.Z)((0,Ke.KO)(Jr),2),i=t[0],l=t[1],c=(0,ee.Z)(),u=c.ref,s=c.view,f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1];a.useEffect((function(){return function(){var e;l(null!==(e=null===s||void 0===s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===s||void 0===s?void 0:s.state.doc]);var v=(0,Ke.b9)(ei);a.useEffect((function(){v(s)}),[v,s]),function(e){var n=e.connectionString,t=Ur("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",n).data,r=(0,Ke.b9)(Xr);a.useEffect((function(){r(t)}),[t,r])}({connectionString:n});var g=(0,Ke.Dv)(Fr),Z=(0,ui.Lh)();(0,si.Z)({view:s,filePath:"mark.sql",decorations:Z});var b=(0,d.Z)().psql,w=(0,o.Z)(a.useState(),2),x=w[0],k=w[1],C=(0,o.Z)(a.useState(!1),2),S=C[0],T=C[1],E=ci(),R=a.useCallback((function(){function e(){return(e=(0,O.Z)((function(){var e,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:if(!s)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),T(!0),e=null===s||void 0===s?void 0:s.state.doc.toString(),E(e),[4,b.run({query:e,connectionString:n})];case 2:return t=r.sent(),k(t),Hr({action:"queryRan"}),[3,4];case 3:return T(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,b,E,s]),I=Yr(),D=a.useCallback((function(){I("databaseManager")}),[I]),G=a.useCallback((function(){I("tableSchemas")}),[I]),P=a.useRef(null),_=[yi.use({schema:g})];return(0,r.tZ)(Wr,{headerTitle:"Database Contents",onGoBack:D,children:(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),bi],innerRef:P,children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.px(8),m.l0.pb(8),p?null:wi],children:[(0,r.BX)(y.G,{css:[{border:"1px solid ".concat(m.TV.outlineDefault)},m.l0.borderRadius(2)],children:[(0,r.tZ)(J.Z,{ref:u,css:[m.l0.viewStyle,m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),m.l0.overflow("auto"),m.l0.maxHeight(300),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[mi,_]}),(0,r.tZ)(gi,{expanded:p,onExpand:function(){h((function(e){return!e}))}})]}),(0,r.tZ)(ne.zx,{text:"Run Query",iconLeft:S?(0,r.tZ)(he.Z,{}):(0,r.tZ)(oe.Z,{}),onClick:R,disabled:S})]}),(0,r.tZ)(Zi,{queryResult:x,scrollRef:P}),(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8),m.l0.px(8),m.l0.py(8)],children:(0,r.tZ)(ne.zx,{css:m.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)($r.Z,{}),onClick:G})})]})})},ki=t(49085),Ci=t(22011),Si=t(56169),Ti="DATABASE_URL",Ei="PGDATABASE",Ri="PGHOST",Ii="PGPORT",Di="5432",Gi="PGUSER",Pi="PGPASSWORD",_i=function(e){var n=e.envVarKey,t=e.envVarValue,i=e.isSecret,l=(0,Si.H)()("db-env-var-".concat(n)),c=(0,o.Z)(a.useState(!1),2),s=c[0],d=c[1],f=!i||s?"text":"password";return(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.flex.wrap,m.l0.align.end,m.l0.pb(8),{gap:m.TV.space8}],children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),{flexBasis:250},m.l0.flex.grow(0),m.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:m.l0.color.foregroundDimmer,htmlFor:l,children:n}),(0,r.tZ)(pe.II,{id:l,type:f,readOnly:!0,value:t})]}),(0,r.tZ)(ne.zx,{text:"Copy",iconLeft:(0,r.tZ)(ki.Z,{}),onClick:function(){(0,pt.Z)(t),Hr({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),i?(0,r.tZ)(ne.zx,{text:"View",iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},Bi=function(e){var n,t=e.connectionString,r=e.databaseName,o=new URL(t.replace("postgres://","https://")),a=o.host,l=o.username,c=o.password;return n={},(0,i.Z)(n,Ti,t),(0,i.Z)(n,Ei,r),(0,i.Z)(n,Ri,a),(0,i.Z)(n,Ii,Di),(0,i.Z)(n,Gi,l),(0,i.Z)(n,Pi,c),n},Ai=function(){var e=(0,d.Z)().fs;return a.useCallback((function(n){var t=n.connectionString,r=n.databaseName,i=Bi({connectionString:t,databaseName:r});function a(){return a=(0,O.Z)((function(){var n,t,r,a,l,c,u,s,d,f,p,h,v,g;return(0,H.__generator)(this,(function(m){switch(m.label){case 0:return[4,e.readFile(".env")];case 1:if(n=m.sent(),t="",n.error){if(n.error!==w.Df.NotFound)throw new Error("Error getting .env");t=""}else t=n.content;r=z.Z.parse(t.toString()),a=!1,l=(0,M.Z)({},r),c=!0,u=!1,s=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=(0,o.Z)(f.value,2),h=p[0],v=p[1],l[h]!==v&&(a=!0,l[h]=v)}catch(y){u=!0,s=y}finally{try{c||null==d.return||d.return()}finally{if(u)throw s}}return a?(g=z.Z.serialize(l),[4,e.writeFile(".env",Ci.Z.from(g))]):[2];case 2:return m.sent(),[2]}}))})),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e])},Ui=function(e){var n=e.connectionString,t=e.databaseName,i=(0,Ie.Z)((function(){return Bi({connectionString:n,databaseName:t})}),[n,t]),o=i.PGHOST,l=i.PGUSER,c=i.PGPASSWORD,u=Ai();return a.useEffect((function(){u({connectionString:n,databaseName:t})}),[n,t,u]),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)(_i,{envVarKey:Ti,envVarValue:n,isSecret:!0}),(0,r.tZ)(_i,{envVarKey:Ei,envVarValue:t}),(0,r.tZ)(_i,{envVarKey:Ri,envVarValue:o}),(0,r.tZ)(_i,{envVarKey:Ii,envVarValue:Di}),(0,r.tZ)(_i,{envVarKey:Gi,envVarValue:l}),(0,r.tZ)(_i,{envVarKey:Pi,envVarValue:c,isSecret:!0})]})},Li=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Ni=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function Xi(e,n){var t,r=n||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,u=void 0===c||c,s=r.isKibNotation,d=void 0!==s&&s;if(t=o?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var f=u?1024:1e3,p=d?Li:Ni,h=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(f,h)).toFixed(l))).concat(p[h])}var Fi=t(73162),Oi=t(48667),Mi=function(e){var n=e.tableData,t=e.scrollRef,i=n.headerColumns,o=n.bodyData,l=Yr(),c=a.useCallback((function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=o[n][i.indexOf("Name")];l("table/".concat(t))}}),[l,i,o]);return(0,r.tZ)(Ar,{headerColumns:i,bodyData:o,onRowAction:c,scrollRef:t})},Wi=function(e){var n=e.psqlQueryResult,t=e.scrollRef,i=n.data;if(n.loading)return(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(he.Z,{})});if(null===i||void 0===i?void 0:i.error)return(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentNegativeDefault,m.l0.maxWidth("100%")],children:null===i||void 0===i?void 0:i.error})});var o=i?Lr(i):null;return o?(0,r.tZ)(Mi,{tableData:o,scrollRef:t}):(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentPositiveDefault,m.l0.maxWidth("100%")],children:"No tables found"})})},Hi=function(e){var n=e.connectionString,t=Kr(),i=a.useRef(null),o=Nr({connectionString:n}),l=o.refetch;return(0,r.BX)(y.G,{css:[m.l0.flex.column,m.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.py(16),m.l0.px(8),m.l0.align.center],children:[(0,r.tZ)(ge.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(Mr.Z,{})}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(16),m.l0.ml(8)],children:"All tables"})}),(0,r.tZ)(ge.h,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(Oi.Z,{})})]}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto"),m.l0.px(8)],innerRef:i,children:(0,r.tZ)(Wi,{psqlQueryResult:o,scrollRef:i})})]})},zi="1px solid "+m.TV.outlineDefault,Vi=(0,mn.iv)([m.l0.p(8),m.l0.backgroundColor.backgroundDefault,m.l0.align.center,m.l0.borderRadius(0),{borderLeft:zi,borderRight:zi,borderBottom:zi},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(m.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:m.TV.backgroundHigher}}}]),ji=function(e){var n=e.connectionString,t=Nr({connectionString:n}),i=t.data,l=t.loading,c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],d=a.useCallback((function(){s(!0)}),[]),f=i?Lr(i):null,p=a.useRef(null);if(!f||l)return null;var h=f.bodyData.length,v=f.headerColumns,g=f.bodyData,Z=h-5>0&&!u;return(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[m.l0.overflow("auto"),m.l0.display.grid],innerRef:p,children:[(0,r.tZ)(Mi,{tableData:{headerColumns:v,bodyData:u?g:g.slice(0,5)},scrollRef:p}),Z?(0,r.tZ)(ne.zx,{text:"".concat(h-5," more"),css:Vi,onClick:d}):null]})})},qi=t(14351),Yi=10*Math.pow(1024,3),Ki=qi.z4["neon-database-preview"],$i=(0,qi.qJ)(Ki),Qi="".concat(Ki.toLocaleString()," Cycles (").concat($i,") / day"),Ji="https://docs.replit.com/hosting/databases/postgresql-on-replit",eo=function(e){var n=e.dbSize,t=e.totalSize,i=n,o=t,a=Xi(n),l=Xi(t),c=(0,Ie.Z)((function(){return(0,Ke.cn)(i)}),[i]),u=(0,Ie.Z)((function(){return(0,Ke.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{css:m.l0.color.foregroundDimmer,children:[a,"/",l]}),(0,r.tZ)(Fi.hF,{totalAtom:u,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},no=function(e){var n,t,i=e.connectionString,o=Ur("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=Ur("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),u=c.data,s=c.loading,d=parseInt(null!==(t=null===(n=null===a||void 0===a?void 0:a.rows[0])||void 0===n?void 0:n.sum)&&void 0!==t?t:"0",10),f=null===u||void 0===u?void 0:u.rows.length;return(0,r.BX)(y.G,{css:m.l0.rowWithGap(8),children:[s?null:(0,r.BX)(Z.xv,{children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(eo,{dbSize:d,totalSize:Yi})]})},to=function(e){var n=e.connectionString,t=e.onOpenDatabaseViewerClick;return(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)(no,{connectionString:n}),(0,r.tZ)(ji,{connectionString:n}),(0,r.tZ)(ne.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)($r.Z,{}),onClick:t})]})},ro=(t(87762),function(e){var n=e.size,t=void 0===n?16:n;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}),io=(0,mn.iv)([m.l0.color.foregroundDimmest,{textDecoration:"underline"}]),oo=function(){return(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8),m.l0.py(8),m.l0.width("100%")],children:(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:Ji,css:io,children:"Docs"}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(14)],children:"Powered by"}),(0,r.tZ)(ro,{})]})]})})},ao=t(76735),lo=t(96351),co=function(e){var n=e.psqlQueryResult,t=e.tableName,i=e.connectionString,o=e.scrollRef,a=n.data,l=n.loading,c=function(e){var n=e.tableName,t=e.connectionString,r=Ur(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(n),t).data;return r}({tableName:t,connectionString:i});if(l)return(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(he.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentNegativeDefault,m.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var u=a?Lr(a):null;if(!u)return(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.color.accentPositiveDefault,m.l0.maxWidth("100%")],children:"No rows"})});var s=u.headerColumns,d=u.bodyData;return(0,r.tZ)(Ar,{headerColumns:s.map((function(e,n){var t,i=null===c||void 0===c||null===(t=c.rows)||void 0===t?void 0:t.find((function(n){return n.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(lo.D,{text:o}):null;return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{children:e}),a]},n)})),bodyData:d,scrollRef:o})},uo=function(e){var n=e.tableName,t=e.connectionString,i=Kr(),o=a.useRef(null),l=Ur('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),c=l.refetch;return(0,r.BX)(y.G,{css:[m.l0.flex.column,m.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[m.l0.flex.row,m.l0.py(16),m.l0.px(8),m.l0.align.center],children:[(0,r.tZ)(ge.h,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(Mr.Z,{})}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(16),m.l0.ml(8)],children:n})}),(0,r.tZ)(ge.h,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,r.tZ)(Oi.Z,{})})]}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto"),m.l0.px(8)],innerRef:o,children:(0,r.tZ)(co,{psqlQueryResult:l,tableName:n,connectionString:t,scrollRef:o})})]})},so=function(e){var n=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.fontSize(12),m.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(Qi)}),n?(0,r.tZ)(y.G,{children:(0,r.tZ)(re.E,{icon:(0,r.tZ)(ao.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},fo=t(20811),po=t(26721),ho=t(82108),vo=t(66016),go=t(48506);var mo=t(49810),yo=t(47900),Zo=(0,Ke.cn)(null),bo=(0,Ke.cn)(null),wo=function(e){var n=e.title,t=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8),m.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:m.TV.outlineDefault},o],children:i?(0,r.tZ)(Bt.Q,{headerContent:(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[m.l0.p(12),m.l0.colWithGap(8),m.l0.height("100%")],children:t})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(m.TV.fontSizeSubheadDefault),m.l0.fontWeight.medium],children:n}),t]})})},xo=function(e){var n,t=e.neonDatabases,i=e.onDatabaseDeleted,l=e.onDatabaseUnfreezed,c=t[0],u=(0,Ce.Z)().showError,s=(0,ze.Z)(),d=function(){var e=a.useContext(go.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=(0,Ke.Dv)(qr),p=Yr(),h=a.useCallback((function(){p("queryEditor")}),[p]),v=(0,o.Z)(function(e){var n=(0,M.Z)({},lr,e);return tr.D(ur,n)}(),2),g=v[0],b=v[1].loading,w=a.useCallback((function(){I(!0)}),[]),x=(0,ho.Z)({forceFetch:!1}),k=x.cycles,C=x.formattedBalanceValue,S="number"===typeof k&&k>Ki,T=a.useCallback((0,O.Z)((function(){var e,n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,g({variables:{input:{replId:s,databaseId:c.databaseId}}})];case 1:return e=r.sent(),n=e.data,t=e.errors,I(!1),t&&t.length>0?(u("Error when deleting Neon database: ".concat(null===t||void 0===t?void 0:t.join())),Hr({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.deleteNeonDatabase.__typename)?(u("Error: ".concat(null===n||void 0===n?void 0:n.deleteNeonDatabase.message)),Hr({action:"removed",success:!1}),[2]):((null===n||void 0===n?void 0:n.deleteNeonDatabase.success)?(i(),Hr({action:"removed",success:!0})):(u("Error: Delete Neon Database failed."),Hr({action:"removed",success:!1})),[2])}}))})),[g,c.databaseId,i,s,u]),E=(0,o.Z)(a.useState(!1),2),R=E[0],I=E[1],D=a.useCallback((function(){I(!1)}),[]),G=(0,o.Z)(a.useState(!1),2),P=G[0],_=G[1],B=a.useCallback((function(){_(!0)}),[]),A=(0,o.Z)(function(e){var n=(0,M.Z)({},lr,e);return tr.D(dr,n)}(),2),U=A[0],L=A[1].loading,N=a.useCallback((0,O.Z)((function(){var e,n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,U({variables:{input:{neonProjectId:c.projectId,replId:s}}})];case 1:return e=r.sent(),n=e.data,(t=e.errors)&&t.length>0?(u("Error when unfreezing Neon database: ".concat(null===t||void 0===t?void 0:t.join())),Hr({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.unfreezeNeonDatabase.__typename)?(u("Error: Unfreezes Neon Database failed."),Hr({action:"unfreeze",success:!1}),[2]):((null===n||void 0===n?void 0:n.unfreezeNeonDatabase.success)?(l(),Hr({action:"unfreeze",success:!0})):(u("Error: Unfreezes Neon Database failed."),Hr({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,l,s,u,U]),X=(0,Ke.Dv)(bo),F=Bi({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],W=X||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(F);if("queryEditor"===f)return(0,r.tZ)(xi,{connectionString:W});if("tableSchemas"===f)return(0,r.tZ)(Hi,{connectionString:W});if(f.startsWith("table/")){var z=f.slice(f.indexOf("/")+1);return(0,r.tZ)(uo,{tableName:z,connectionString:W})}return n=c.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(y.G,{css:[m.l0.width(8),m.l0.height(8),m.l0.backgroundColor.foregroundDimmer,m.l0.borderRadius("full")]}),(0,r.tZ)(Z.xv,{css:[m.l0.color.foregroundDimmest],children:"Database paused"})]}),(0,r.BX)(Z.xv,{multiline:!0,css:[m.l0.fontSize(12),m.l0.color.foregroundDimmest],children:["Databases cost ",Qi]}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Xe.Z,{size:32,fill:m.TV.foregroundDimmest,css:m.l0.mt(32)}),(0,r.BX)(Z.xv,{variant:"subheadDefault",css:[m.l0.my(16)],children:["Your Database is paused. You have ",C," cycles."]}),(0,r.BX)(Z.xv,{multiline:!0,children:["Access to your databases will be paused until you"," ",S?"use cycles to resume database":"refill your Cycles balance","."]}),S?(0,r.tZ)(ne.zx,{css:m.l0.pt(8),iconLeft:(0,r.tZ)(vo.Z,{}),onClick:N,disabled:L,text:"Unpause Database",colorway:"primary"}):null,(0,r.tZ)(ne.zx,{css:m.l0.pt(8),iconLeft:(0,r.tZ)(Ze.Z,{}),onClick:B,text:S?"Buy more cycles":"Buy Cycles"})]}),(0,r.tZ)(po.Z,{noPadding:!0,isOpen:P,maxWidth:fo.W,onRequestClose:function(){return _(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles"})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(y.G,{css:[m.l0.width(8),m.l0.height(8),m.l0.backgroundColor.accentPositiveStronger,m.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(m.TV.accentPositiveStronger,")")}]}),(0,r.tZ)(Z.xv,{css:[m.l0.color.accentPositiveStronger],children:"Database connected"})]}),(0,r.tZ)(so,{}),(0,r.tZ)(wo,{title:"Database Info",children:(0,r.tZ)(to,{connectionString:W,onOpenDatabaseViewerClick:h})}),(0,r.tZ)(wo,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(yo.ZP,{css:[mo.Z,m.l0.maxWidth("100%")],children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,r.tZ)(wo,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(Ui,{connectionString:W,databaseName:c.databaseName})})]}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(0),m.l0.height("100%"),m.l0.p(8)],children:[(0,r.tZ)(y.G,{css:[m.l0.colWithGap(16),m.l0.flex.grow(1),m.l0.flex.shrink(0)],children:n}),(0,r.tZ)(y.G,{css:[m.l0.pt(16)],children:R||b?(0,r.BX)(ie.T,{css:[m.l0.p(8),m.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(Qi,".")}),(0,r.tZ)(re.E,{icon:(0,r.tZ)(ao.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(ne.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:b,iconLeft:(0,r.tZ)(xe.Z,{}),onClick:T}),(0,r.tZ)(ne.zx,{text:"Cancel",disabled:b,onClick:D})]}):(0,r.tZ)(ne.zx,{css:[m.l0.py(8)],text:"Remove Database",disabled:b,iconLeft:(0,r.tZ)(xe.Z,{}),onClick:w})}),(0,r.tZ)(oo,{})]})},ko=t(19281),Co=t(93658),So=t(32973),To="Buy Cycles & Create a DB",Eo="Use Cycles to create a DB",Ro='Press "'.concat(To,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),Io='Press "'.concat(Eo,'" to initiate a daily Cycles subscription and activate a Neon Database.'),Do=function(e){var n=e.onDatabaseCreated,t=(0,ze.Z)(),i=(0,Ce.Z)().showError,l=(0,o.Z)(function(e){var n=(0,M.Z)({},lr,e);return tr.D(cr,n)}(),2),c=l[0],u=l[1].loading,s=(0,ho.Z)({forceFetch:!0}),d=s.cycles,f=s.loading,p=null!=d&&d>=Ki,h=f?"Loading Cycles Balance":p?Eo:To,v=p?Io:Ro,g=a.useCallback((0,O.Z)((function(){var e,r,o,a,l,u,s,d,f;return(0,H.__generator)(this,(function(p){switch(p.label){case 0:return[4,c({variables:{input:{replId:t}}})];case 1:return e=p.sent(),r=e.data,(o=e.errors)&&o.length>0?(i("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),Hr({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(i("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),Hr({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,u=a.databaseName,s=a.connectionString,d=a.projectId,f=a.isFrozen,n({__typename:"NeonDatabase",databaseId:l,databaseName:u,connectionString:s,projectId:d,isFrozen:f}),Hr({action:"created",success:!0}),[2])}}))})),[c,t,i,n]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],k=a.useCallback((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){return x(!0),[2]}))})),[]),C=a.useCallback((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){return x(!1),[2]}))})),[]),S=a.useCallback((0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),x(!1),[2]}}))})),[g]);return(0,r.BX)(y.G,{css:[m.l0.colWithGap(0),m.l0.height("100%"),m.l0.align.center,m.l0.p(8)],children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(16),m.l0.flex.grow(1),m.l0.flex.shrink(0),m.l0.maxWidth(600)],children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.align.center],children:[(0,r.tZ)(y.G,{css:[m.l0.p(16)],children:(0,r.tZ)(Ee.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(16),m.l0.fontWeight.bold],children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(14)],children:"10GB of fast read/write storage"}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[m.l0.fontSize(14)],children:Qi}),(0,r.tZ)(ge.h,{alt:v,size:24,children:(0,r.tZ)(Co.Z,{})})]})]}),(0,r.BX)(ie.T,{css:[m.l0.colWithGap(8),m.l0.mb(8)],background:"default",children:[(0,r.tZ)(ne.zx,{text:h,colorway:"primary",iconLeft:(0,r.tZ)(st.Z,{}),disabled:f||u,onClick:k}),(0,r.tZ)(be.Z,{outlined:!0,href:Ji,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(So.Z,{})})]}),(0,r.tZ)("hr",{css:[m.l0.my(16),{borderColor:m.TV.outlineDefault}]}),(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.fontSize(12),m.l0.color.foregroundDimmest],children:v}),(0,r.tZ)(ko.Z,{isOpen:w,onRequestClose:C,onRequestPowerUp:S,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(oo,{})]})},Go=(0,Ke.cn)([]),Po=function(){var e=(0,ze.Z)(),n=(0,Ce.Z)().showError,t=(0,d.Z)().psql,i=function(e){var n=(0,M.Z)({},lr,e);return zt.a(sr,n)}({variables:{input:{replId:e}},fetchPolicy:"no-cache"}),l=i.data,c=i.loading,u=i.refetch,s=(0,o.Z)((0,Ke.KO)(Go),2),f=s[0],p=s[1],h=Ai();a.useEffect((function(){"GetNeonDatabasesResult"===(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&p(l.getNeonDatabases.databases),"UnauthorizedError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&"UserError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)||n("Error: ".concat(null===l||void 0===l?void 0:l.getNeonDatabases.message))}),[null===l||void 0===l?void 0:l.getNeonDatabases,p,n]);var v=a.useCallback(function(){var e=(0,O.Z)((function(e){var r,i,o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),p([e]),r=e.connectionString,i=e.databaseName,h({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),n("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,h,p,n]),g=a.useCallback((function(){p([])}),[p]),Z=a.useCallback((function(){u()}),[u]),b=(0,Ke.Dv)(Zo);return b?(0,r.tZ)(xo,{neonDatabases:[b],onDatabaseDeleted:g,onDatabaseUnfreezed:Z}):c?(0,r.tZ)(y.G,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,r.tZ)(he.Z,{})}):f.length>0?(0,r.tZ)(xo,{neonDatabases:f,onDatabaseDeleted:g,onDatabaseUnfreezed:Z}):(0,r.tZ)(Do,{onDatabaseCreated:v})},_o=t(78707),Bo={Content:function(){return(0,r.tZ)(Po,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(_o.Z,{size:n})},getTitle:function(){return"PostgreSQL"}},Ao=t(23807),Uo=t(78728),Lo=t(79686),No={Content:function(){return(0,r.tZ)(Xo,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Uo.Z,{size:n})},getTitle:function(){return"Output"}};function Xo(){var e=(0,d.Z)(),n=e.fs,t=e.container;return(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Lo.Z,{fs:n,container:t})})}var Fo=t(27495),Oo=t(10671),Mo={Content:function(e){var n,t=e.pane;return(0,r.tZ)(Wo,{initialPwd:null===(n=t.data)||void 0===n?void 0:n.initialPwd})},Icon:function(e){var n=e.size;return(0,r.tZ)(Oo.Z,{size:n})},getTitle:function(){return"Shell"}};function Wo(e){var n=e.initialPwd,t=(0,d.Z)().container,i=(0,o.Z)((0,Fo.St)({container:t,initialPwd:n}),2),a=i[0],l=i[1];return(0,A.Wk)((function(){return a}),[a]),(0,r.tZ)(Fo.N2,{shell:a,shellRef:l})}var Ho=t(86763),zo=t.n(Ho),Vo=t(28737);function jo(){var e=(0,Wt.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return jo=function(){return e},e}function qo(){var e=(0,Wt.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return qo=function(){return e},e}var Yo={},Ko=(0,Ht.Ps)(jo());qo();var $o=t(24746),Qo=t(84630),Jo=function(e,n,t){var r;if(!e)return[];var i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce((function(e,n){var t,r,a;return n.id===(null===(t=o.editingElement)||void 0===t?void 0:t.id)||n.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||n.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version?(e.push(i[n.id]),delete i[n.id]):i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce?(i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]):(e.push(n),delete i[n.id])),e}),[])).concat.apply(r,(0,vr.Z)(Object.values(i)))},ea=function(){var e,n,t=new Promise((function(t,r){e=t,n=r}));return t.resolve=e,t.reject=n,t},na=function(e){return e.reduce((function(e,n){return e[n.id]=n,e}),{})},ta=t(92674),ra=t.n(ta);function ia(e){var n,i=e.fs,l=e.presence,c=e.broadcast,u=e.filePath,s=(0,a.useState)(void 0),d=s[0],f=s[1],p=(0,a.useRef)((function(e){return(0,vr.Z)(e)})),h=(0,a.useRef)((function(e){return-1})),v=(0,a.useRef)({readyPromise:ea()}),g=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([t.e(6655),t.e(3668)]).then(t.t.bind(t,63668,23)).then((function(e){p.current=function(n){return n.filter((function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)}))},h.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var Z=function(){return v.current},b=function(e){var n=(0,M.Z)({},Yo,e);return zt.a(Ko,n)}({ssr:!1}),w=b.data,x=b.loading,k=(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.username)||"",C=(0,Vo.F)().isDarkColorScheme,S=(0,$o.Z)({presence:l}),T=(0,Qo.Z)(),E=null===T||void 0===T?void 0:T.color,R=(0,a.useState)(new Map),I=R[0],D=R[1],G=(0,a.useState)(-1),P=G[0],_=G[1],B=(0,a.useRef)(ra()()).current;(0,a.useEffect)((function(){function e(){return e=(0,O.Z)((function(){var e,n;return(0,H.__generator)(this,(function(t){switch(t.label){case 0:return w&&w.currentUser?[4,v.current.readyPromise]:[2];case 1:return t.sent(),e=Z().getAppState().collaborators,n=new Map,S.forEach((function(t){var r;if(t.username!==(null===w||void 0===w||null===(r=w.currentUser)||void 0===r?void 0:r.username)){var i=e.get(t.username)||{};n.set(t.username,(0,W.Z)((0,M.Z)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}})),Z().updateScene({collaborators:n}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,S]);var A=function(){var e=(0,O.Z)((function(e,n){var t,r,i,o,a,l;return(0,H.__generator)(this,(function(s){n||(e=e.filter((function(e){return!I.has(e.id)||e.version>I.get(e.id)}))),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,I.set(l.id,l.version),D(new Map(I))}catch(d){r=!0,i=d}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage(B,{text:JSON.stringify({elements:e,path:u})}),[2]}))}));return function(n,t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(c)return c.onBroadcastReceived(B,(function(e){var n=e.username,t=e.text,r=JSON.parse(t);if(r.path===u)if(r.collaborator&&v.current){var i=Z().getAppState().collaborators;i.set(n,(0,W.Z)((0,M.Z)({},i.get(n),r.collaborator),{username:n})),Z().updateScene({collaborators:i})}else if(r.elements){var o=Jo(Z(),na,r.elements);_(h.current(o)),Z().updateScene({elements:o})}else if(r.removePresence){var a=Z().getAppState().collaborators;a.delete(r.removePresence),Z().updateScene({collaborators:a})}}))}),[c,u,B]),(0,a.useEffect)((function(){function e(){return e=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){return u&&i?(g.current.promise=new Promise(function(){var e=(0,O.Z)((function(e){var n,t,r,a,l;return(0,H.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([i.readFile(u),v.current.readyPromise])];case 1:return n=o.Z.apply(void 0,[c.sent(),1]),"content"in(t=n[0])&&(r=t.content.toString(),a=JSON.parse(r||"{}"),l=Z().getAppState(),a.appState=(0,M.Z)({},l),a.scrollToContent=!0,e(a)),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u,i]);var U=(0,a.useCallback)(zo()(function(){var e=(0,O.Z)((function(e,n){var t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return t=e.filter((function(e){return!e.isDeleted})),u?[4,i.writeFile(u,Ci.Z.from(JSON.stringify({elements:t,files:n})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),350),[u]);return(0,r.tZ)(y.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:E?"0 3px 0 3px ".concat(E):"none",backgroundColor:m.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){c.broadcastMessage(B,{text:JSON.stringify({removePresence:k,path:u})})},children:d&&!x?(0,r.tZ)(d,{ref:v,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:C?"dark":"light",initialData:g.current.promise,onPointerUpdate:function(e){var n=e.pointer,t=Z().getAppState().selectedElementIds||{};c.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:n,selectedElementIds:t},path:u})})},onChange:function(e,n,t){!function(e){h.current(e)>P&&(P>-1&&A(p.current(e),!1),_(h.current(e)))}(e),_(h.current(e)),h.current(e)>P&&U(e,t)},user:{name:k}}):null})}function oa(e){var n=e.fs,t=e.presence,i=e.broadcast,o=e.filePath;return(0,r.tZ)(ia,{fs:n,presence:t,broadcast:i,filePath:o},o)}var aa=t(3947),la={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(ca,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(aa.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function ca(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)(),o=i.fs,a=i.broadcast,l=i.presence,c=(0,Bn.Mp)({path:n,performPaneOperation:t});return(0,A.L5)((function(){if(c)return{commands:c}}),[c]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bn.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(Bn.VY,{children:(0,r.tZ)(oa,{fs:o,broadcast:a,presence:l,filePath:n})})]})}var ua=t(18196),sa=t(83005),da={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(fa,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,r.tZ)(sa.Z,{path:n.data.path,size:t})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function fa(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)().fs,o=(0,Bn.Mp)({path:n,performPaneOperation:t});return(0,A.L5)((function(){if(o)return{commands:o}}),[o]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bn.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(Bn.VY,{centered:!0,children:(0,r.tZ)(ua.Z,{filePath:n,fs:i})})]})}var pa=t(84607),ha=t(12404),va=t(85281),ga=t(38567),ma=t(70232),ya=t(73377),Za=t(81962),ba=t(73299),wa=t(63181);function xa(e){return!!e&&("string"===typeof e?e.includes(wa.Kd):e.fetch.includes(wa.Kd))}function ka(e){return e.endsWith(".git")?e.slice(0,-4):e}function Ca(e){if(!e)return null;var n="string"===typeof e?e:e.fetch;return xa(n)?ka(n):null}function Sa(){var e=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){return[2,{connectedToGithub:Ta(e),error:null}]}))}));return function(n){return e.apply(this,arguments)}}());return null==e||e.error?null:e.connectedToGithub}function Ta(e){return e.hasProfile(ya.rG.GITHUB)}var Ea=t(33105),Ra=t(89562),Ia=t(9353);function Da(e,n){(0,K.j)(Ia.U3.GIT_FEATURE_USED,(0,M.Z)({action:e,source:"git-pane"},n))}function Ga(e){var n=e.label,t=void 0===n?"Connect to GitHub":n,i=e.allowReconnect,o=void 0!==i&&i,l=e.callback,c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().git,p=Sa(),h=(0,Ea.v)({onAuth:function(){Da("github-user-connected"),s(!1),f.refreshProfiles({preferredProvider:ya.rG.GITHUB}),null===l||void 0===l||l()}});return p&&!o?(0,r.tZ)(ne.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,r.tZ)(oe.Z,{}),disabled:!0}):(0,r.tZ)(ne.zx,{text:u||null===p?"Connecting...":t,colorway:"primary",iconLeft:u?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Ra.Z,{}),loading:u,onClick:function(){s(!0),h()}})}var Pa=(0,mn.iv)(m.l0.p(4),m.l0.colWithGap(8),m.l0.borderRadius(0,0,8,8)),_a=(0,mn.iv)(m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.end);function Ba(e){var n=e.description,t=e.remedies,i=e.error;return(0,r.BX)(ie.T,{css:Pa,elevated:!0,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:n}),(0,r.BX)(y.G,{css:_a,children:[t,(0,r.tZ)(ne.zx,{text:"Dismiss",iconLeft:(0,r.tZ)(bn.Z,{}),onClick:i.dismiss})]})]})}function Aa(e){switch(e.type){case ya.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case ya.aq.UNKNOWN:return"Unknown Git Error";case ya.aq.NOT_INITIALIZED:case ya.aq.UNAUTHENTICATED:case ya.aq.INDEX_FILE_CORRUPT:case ya.aq.UNKNOWN_REMOTE:case ya.aq.INDEX_LOCKED:case ya.aq.NO_COMMITS:case ya.aq.PATH_MATCHED_NO_FILES:case ya.aq.USER_NOT_CONFIGURED:case ya.aq.INVALID_REFERENCE:case ya.aq.BRANCH_ALREADY_EXISTS:case ya.aq.MERGE_CONFLICT:case ya.aq.HEAD_DETACHED:case ya.aq.DIRTY_WORKTREE:case ya.aq.PUSH_REJECTED:case ya.aq.REMOTE_ALREADY_EXISTS:case ya.aq.ALREADY_INITIALIZED:case ya.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}function Ua(e){var n=e.error,t=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var t,i,o,a,l,c,u,s,d;return(0,H.__generator)(this,(function(f){switch(f.label){case 0:switch(n.type){case ya.aq.UNKNOWN_NOT_GIT:return[3,1];case ya.aq.UNKNOWN:return[3,2];case ya.aq.CHANNEL_CLOSED:return[3,3];case ya.aq.NOT_INITIALIZED:return[3,4];case ya.aq.UNAUTHENTICATED:return[3,5];case ya.aq.INDEX_FILE_CORRUPT:return[3,7];case ya.aq.UNKNOWN_REMOTE:return[3,8];case ya.aq.INDEX_LOCKED:return[3,9];case ya.aq.NO_COMMITS:return[3,10];case ya.aq.PATH_MATCHED_NO_FILES:return[3,11];case ya.aq.USER_NOT_CONFIGURED:return[3,12];case ya.aq.INVALID_REFERENCE:return[3,13];case ya.aq.BRANCH_ALREADY_EXISTS:return[3,14];case ya.aq.MERGE_CONFLICT:return[3,15];case ya.aq.UPSTREAM_NOT_SET:return[3,16];case ya.aq.HEAD_DETACHED:return[3,17];case ya.aq.DIRTY_WORKTREE:return[3,18];case ya.aq.PUSH_REJECTED:return[3,19];case ya.aq.REMOTE_ALREADY_EXISTS:return[3,20];case ya.aq.TIMEOUT:return[3,21];case ya.aq.ALREADY_INITIALIZED:return[3,22]}return[3,23];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",i=null,[3,24];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",i=null,[3,24];case 3:return t="The command was interrupted. Please try again.",i=null,[3,24];case 4:return t="There isn't a Git repository in the Repl's root directory.",i=null,[3,24];case 5:return[4,e.getRemotes()];case 6:if((o=f.sent()).error)return[2,o];if(0!==o.remotes.size){a=!1,l=!0,c=!1,u=void 0;try{for(s=o.remotes.values()[Symbol.iterator]();!(l=(d=s.next()).done);l=!0)if(xa(d.value)){a=!0;break}}catch(p){c=!0,u=p}finally{try{l||null==s.return||s.return()}finally{if(c)throw u}}if(a)return Ta(e)?(t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",i=(0,r.tZ)(Ga,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,24]):(t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",i=(0,r.tZ)(Ga,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,24])}return t="Failed to authenticate with the remote.",i=null,[3,24];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",i=null,[3,24];case 8:return t="The remote specified isn't configured.",i=null,[3,24];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",i=null,[3,24];case 10:return t="There are no commits in the repository.",i=null,[3,24];case 11:return t="The path specified didn't match any files.",i=null,[3,24];case 12:return t="There isn't any user information configured for Git.",i=null,[3,24];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",i=null,[3,24];case 14:return t="The branch specified already exists.",i=null,[3,24];case 15:return t="There was an unexpected merge conflict.",i=null,[3,24];case 16:return t="The upstream branch isn't set.",i=null,[3,24];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",i=null,[3,24];case 18:return t="There are uncommitted changes.",i=null,[3,24];case 19:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",i=null,[3,24];case 20:return t="The remote specified already exists.",i=null,[3,24];case 21:return t="The remote operation timed out.",i=null,[3,24];case 22:return t="There is already a Git repository in the Repl's root directory.",i=null,[3,24];case 23:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",i=null,[3,24];case 24:return[2,{description:t,remedies:i,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[n],{refresh:!1});if(!t)return(0,r.tZ)(Ba,{description:null,remedies:null,error:n});if(t.error){return(0,r.tZ)(Ba,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n})}var i=t.description,o=t.remedies;return(0,r.tZ)(Ba,{description:i,remedies:o,error:n})}var La=(0,mn.iv)({pointerEvents:"all"},m.l0.p(1),m.l0.backgroundColor.accentNegativeDimmer,m.l0.borderRadius(8),m.l0.shadow(3)),Na=(0,mn.iv)(m.l0.py(4),m.l0.px(8),m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,m.l0.color.accentNegativeStrongest),Xa=(0,mn.iv)(m.l0.rowWithGap(4),m.l0.align.center),Fa=(0,mn.iv)({opacity:.75},m.l0.font.code),Oa=(0,mn.iv)(m.l0.pt(4),m.l0.pb(8),m.l0.px(8),m.l0.colWithGap(8),m.l0.backgroundColor.backgroundHigher,m.l0.borderRadius(0,0,8,8));function Ma(e){var n=e.error;return(0,r.BX)(y.G,{css:La,children:[(0,r.BX)(y.G,{css:Na,children:[(0,r.BX)(y.G,{css:Xa,children:[(0,r.tZ)(ao.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:Aa(n)})]}),(0,r.tZ)(Z.xv,{css:Fa,children:n.type})]}),(0,r.tZ)(y.G,{css:Oa,children:(0,r.tZ)(Ua,{error:n})})]})}var Wa=Symbol("GitPaneErrorAtomScope"),Ha=(0,Ke.cn)([]),za=(0,Ke.cn)((function(e){return e(Ha)}),(function(e,n,t){var r=e(Ha),i=Math.random().toString(36).substring(7),o={id:i,type:t,dismiss:function(){var t=e(Ha).filter((function(e){return e.id!==i}));n(Ha,t)}};n(Ha,[o].concat((0,vr.Z)(r)))}));function Va(){return(0,Ke.b9)(za,Wa)}var ja=(0,mn.iv)({pointerEvents:"none"},{transition:"background-color 100ms"},m.l0.position.absolute,m.l0.top(0),m.l0.bottom(0),m.l0.left(0),m.l0.right(0),m.l0.p(8),m.l0.colWithGap(16),m.l0.zIndex(10));function qa(){var e=(0,Ke.Dv)(za,Wa);return(0,r.tZ)(y.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:ja,children:e.map((function(e){return(0,r.tZ)(Ma,{error:e},e.id)}))})}var Ya=t(9327),Ka=t(45851),$a=t(12260),Qa=t(33814);function Ja(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,d.Z)().git,o=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],r=(0,d.Z)().git;return(0,a.useEffect)((function(){return r.onBusyChange(t)}),[r]),n}(),l=Va(),c=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n;return(0,H.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.getRemotes()];case 1:return(n=t.sent()).error?(l(n.error),[2,n]):[2,{hasRemotes:n.remotes.size>0,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[l]);if(null===c||void 0===c?void 0:c.error)return null;var u=!!c&&c.hasRemotes,s=o||n||null===c;function f(){return(f=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return i.isBusy()||s?[2]:(t(!0),u?[4,i.fetch()]:[3,2]);case 1:(e=n.sent()).error?l(e.error):Da("remote-fetched"),n.label=2;case 2:return[4,i.refreshProfiles()];case 3:return n.sent(),i.forceRefresh(),setTimeout((function(){return t(!1)}),500),[2]}}))}))).apply(this,arguments)}var p=u?"Refresh and Fetch":"Refresh";return(0,r.tZ)(ge.h,{alt:p,size:24,onClick:function(){return f.apply(this,arguments)},disabled:s,children:s?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Oi.Z,{})})}var el,nl=t(66539),tl=t(24478);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(el||(el={}));var rl=(0,b.X)({root:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.py(4)],circle:[m.l0.width(8),m.l0.height(8),m.l0.borderRadius("full")]});var il=function(e){var n,t,i,o=e.display,a=void 0===o?"inline":o,l=(0,He.Z)(e,["display"]);switch(l.status){case el.SUCCESS:n=m.TV.accentPositiveStronger,t=m.TV.accentPositiveStronger;break;case el.WARNING:n=m.TV.yellowStronger,t=m.TV.yellowStronger;break;case el.FAILED:n=m.TV.accentNegativeStronger,t=m.TV.accentNegativeStronger;break;case el.OFF:n=m.TV.greyStronger,t=m.TV.greyStronger}var c=(0,r.BX)(y.G,{onClick:null!==(i=l.onClick)&&void 0!==i?i:function(){},css:[rl.root,l.onClick?{cursor:"pointer"}:{}],children:[(0,r.tZ)("div",{css:rl.circle,style:{backgroundColor:n,boxShadow:"0px 0px 6px ".concat(t)}}),"inline"===a?(0,r.tZ)(Z.xv,{color:"dimmer",children:l.content}):null]});return"tooltip"===a&&(c=(0,r.tZ)(nl.u,{tooltip:l.content,children:c})),c},ol=(0,mn.iv)(m.l0.color.orangeStronger,m.l0.fontWeight.medium);function al(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:ol,children:n})}var ll=(0,mn.iv)(m.l0.color.purpleStronger,m.l0.fontWeight.medium);function cl(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:ll,children:n})}var ul=(0,mn.iv)(m.l0.fontWeight.medium);function sl(e){var n,t=e.id,i=e.hash,o=void 0===i||i,a=e.className;return n=o?"string"===typeof t&&t.startsWith("#")?t:"#".concat(t):"string"===typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,r.tZ)("span",{className:a,css:ul,children:n})}var dl=(0,mn.iv)(m.l0.fontWeight.medium);function fl(e){var n=e.hash,t=e.length,i=void 0===t?8:t,o=e.className;return(0,r.tZ)("span",{className:o,css:dl,children:n.slice(0,i+1)})}function pl(e){var n=e.subject,t=e.quoted,i=void 0!==t&&t,o=e.className;return(0,r.tZ)("span",{className:o,children:i?'"'.concat(n,'"'):n})}var hl=(0,mn.iv)({whiteSpace:"pre-wrap"},{fontSize:m.TV.fontSizeSmall},m.l0.font.code);function vl(e){var n=e.body,t=e.className;return(0,r.tZ)("pre",{className:t,css:hl,children:n})}var gl=(0,b.X)({headingWrapper:[m.l0.display.inlineFlex,m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1),m.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},m.l0.mr(4),m.l0.color.foregroundDimmest],headingCurrent:[m.l0.px(4)],text:[m.l0.fontWeight.medium],remote:[{verticalAlign:"text-bottom"},{fontSize:m.TV.fontSizeSmall},m.l0.mr(4),m.l0.color.foregroundDimmest],current:[m.l0.position.relative,m.l0.top("-1px"),m.l0.display.inlineFlex,m.l0.pl(2),m.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},m.l0.mr(4)]});function ml(e){var n=e.name,t=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,s=e.onClick,d=e.className,f=null;return!0===u||!u&&o?f=o?(0,r.tZ)("span",{css:l?gl.headingCurrent:gl.current,children:(0,r.tZ)(il,{display:"tooltip",content:"This is your current branch.",status:el.SUCCESS})}):l?(0,r.tZ)(tl.Z,{size:16}):(0,r.tZ)(tl.Z,{css:gl.icon,size:12}):u&&(f=u),l?(0,r.BX)("div",{css:gl.headingWrapper,children:[f,(0,r.BX)(Z.xv,{variant:"subheadDefault",children:[t?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:gl.headingRemote,children:t}),(0,r.tZ)("span",{css:gl.headingRemote,children:"/"})]}):null,s?(0,r.tZ)(Sl,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})]}):(0,r.BX)("span",{className:d,css:gl.text,children:[f,t?(0,r.tZ)("span",{css:gl.remote,children:t}):null,s?(0,r.tZ)(Sl,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})}var yl=(0,mn.iv)(m.l0.color.foregroundDimmest),Zl=(0,mn.iv)({"& > span":{display:"inline-block"}});function bl(e){var n=e.path,t=e.prefix,i=e.onClick,o=e.className,a=(0,v.UO)(n),l=!i&&(a===n||null!==t&&t+a===n);return(0,r.tZ)("span",{css:Zl,children:(0,r.tZ)(nl.u,{maxWidth:"auto",tooltip:(0,r.tZ)(xl,{path:n,openable:Boolean(i)}),isDisabled:l,children:i?(0,r.BX)(Sl,{label:"Open ".concat(a),onClick:i,className:o,children:[t?(0,r.tZ)("span",{css:yl,children:t}):null,(0,r.tZ)("span",{children:a})]}):(0,r.BX)("span",{className:o,children:[t?(0,r.tZ)("span",{css:yl,children:t}):null,(0,r.tZ)("span",{children:a})]})})})}var wl=(0,b.X)({tooltip:[m.l0.display.inlineFlex,m.l0.rowWithGap(4),m.l0.align.center],path:[{fontSize:m.TV.fontSizeSmall},m.l0.font.code]});function xl(e){var n=e.path,t=e.openable,i=void 0===t||t;return(0,r.BX)("span",{css:wl.tooltip,children:[i?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:wl.path,children:n})]})}var kl,Cl=(0,mn.iv)({cursor:"pointer","&:hover":{textDecoration:"underline"}});function Sl(e){var n=e.label,t=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:Cl,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===t||void 0===t||t()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS"}(kl||(kl={}));var Tl=(0,b.X)({container:[m.l0.height(36),m.l0.px(8),m.l0.py(4),m.l0.rowWithGap(8),m.l0.backgroundColor.backgroundDefault,m.l0.align.center,m.l0.justify.spaceBetween,m.l0.zIndex(1),{borderBottom:"1px solid ".concat(m.TV.outlineDimmer)}],left:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.growAndShrink(1)],right:[m.l0.rowWithGap(8),m.l0.align.center],back:{marginLeft:-4}});function El(e){var n=e.mode,t=e.branch,i=e.switchMode,o=e.onBack,l=e.onSearchOpen,c=e.onSearchClose,u=e.onSearchChange,s=(0,a.useState)(!1),d=s[0],f=s[1],p=function(){return i({mode:kl.SETTINGS})},h=n===kl.DASHBOARD||n===kl.BRANCH||n===kl.CURRENT_BRANCH,v=(0,a.useCallback)((function(){if(!h)throw new Error("Cannot open search in this mode");Da("search-started",{mode:n===kl.DASHBOARD?"branches":"commits"}),f(!0),null===l||void 0===l||l()}),[h,n,l]),g=(0,a.useCallback)((function(){f(!1),null===c||void 0===c||c()}),[c]),m=null,b=null;if(d)m=(0,r.tZ)(_l,{mode:n,onSearchChange:u,closeSearch:g}),b=(0,r.tZ)(Pl,{closeSearch:g});else switch(n){case kl.DASHBOARD:m=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ka.Z,{size:16}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Repository"})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gl,{openSettings:p}),(0,r.tZ)(Dl,{openSearch:v}),(0,r.tZ)(Ja,{})]});break;case kl.BRANCH:case kl.CURRENT_BRANCH:if(null===t)throw new Error("Tried to show branch in header, but branch is null");m=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Il,{switchMode:i}),(0,r.tZ)(ml,{name:t.name,remote:t.type===va.HO.REMOTE?t.remote:null,current:n===kl.CURRENT_BRANCH,heading:!0})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gl,{openSettings:p}),(0,r.tZ)(Dl,{openSearch:v}),(0,r.tZ)(Ja,{})]});break;case kl.SETTINGS:m=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Rl,{onBack:o,alt:"Back"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Settings"})]})}return(0,r.BX)(y.G,{css:Tl.container,children:[(0,r.tZ)(y.G,{css:Tl.left,children:m}),(0,r.tZ)(y.G,{css:Tl.right,children:b})]})}function Rl(e){var n=e.onBack,t=e.alt;return(0,r.tZ)(ge.h,{css:Tl.back,alt:t,size:28,onClick:n,children:(0,r.tZ)(Ya.Z,{})})}function Il(e){var n=e.switchMode;return(0,r.tZ)(Rl,{css:Tl.back,onBack:function(){return n({mode:kl.DASHBOARD})},alt:"Back to dashboard"})}function Dl(e){var n=e.openSearch;return(0,r.tZ)(ge.h,{alt:"Search (coming soon!)",size:24,onClick:n,disabled:!0,children:(0,r.tZ)($a.Z,{})})}function Gl(e){var n=e.openSettings;return(0,r.tZ)(ge.h,{alt:"Settings",size:24,onClick:n,children:(0,r.tZ)(Qa.Z,{})})}function Pl(e){var n=e.closeSearch;return(0,r.tZ)(ne.zx,{css:[m.l0.p(4),{background:"none"}],text:"Cancel",onClick:n})}function _l(e){var n=e.mode,t=e.onSearchChange,i=e.closeSearch,o=n===kl.DASHBOARD?"Search for branches...":"Search for commits...";return(0,r.BX)("div",{css:[m.l0.position.relative,m.l0.flex.grow(1)],children:[(0,r.tZ)($a.Z,{css:[m.l0.position.absolute,m.l0.left(8),m.l0.top(8)],color:m.TV.foregroundDimmest}),(0,r.tZ)(pe.II,{css:[m.l0.width("100%"),m.l0.pl(32),m.l0.py(4),m.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||i()},onChange:function(e){return n=e.target.value,void(null===t||void 0===t||t(n));var n},onKeyDown:function(e){"Escape"===e.key&&i()}})]})}function Bl(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are applying a mailbox patch."}),(0,r.tZ)(Z.xv,{children:"Please finish the patch manually."})]})}function Al(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a bisect."}),(0,r.tZ)(Z.xv,{children:"Please finish the bisect manually."})]})}var Ul=/\s\(#(\d+)\)$/,Ll=/^Revert "(.+)"/,Nl=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function Xl(e){var n=Ll.exec(e.subject),t=Nl.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=Ul.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var Fl=/\B#\d+\b/g,Ol=/^Merged? pull request (#\d+\b)/,Ml=/^Merge branch '(.+)'/,Wl=/into (.+)$/;var Hl=t(88132),zl=t(28199),Vl=20,jl=(0,mn.iv)({minHeight:Vl,minWidth:Vl,display:"flex",alignItems:"center",justifyContent:"center"});function ql(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,r.tZ)(Kl,{});case"revert":return(0,r.tZ)(Ql,{});case"merge":return(0,r.tZ)(ic,{});case"boundary":return(0,r.tZ)(ac,{});case"collapsed":return(0,r.tZ)(sc,{})}}(e.type);return n?(0,r.tZ)("div",{css:jl,children:n}):null}var Yl=(0,mn.iv)({height:4,width:4,backgroundColor:m.TV.foregroundDefault,borderRadius:"50%"});function Kl(){return(0,r.tZ)("div",{css:Yl})}var $l=(0,mn.iv)({display:"flex",height:Vl,width:Vl,backgroundColor:m.TV.orangeDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"});function Ql(){return(0,r.tZ)("div",{css:$l,children:(0,r.tZ)(zl.Z,{size:12,color:m.TV.orangeStrongest})})}var Jl=(0,mn.iv)({display:"flex",height:Vl,width:Vl,backgroundColor:m.TV.purpleDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),ec=(0,mn.iv)({position:"relative",height:9,width:13}),nc={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(m.TV.purpleStrongest),borderRadius:"50%"},tc=(0,mn.iv)((0,W.Z)((0,M.Z)({},nc),{left:0})),rc=(0,mn.iv)((0,W.Z)((0,M.Z)({},nc),{right:0}));function ic(){return(0,r.tZ)("div",{css:Jl,children:(0,r.BX)("div",{css:ec,children:[(0,r.tZ)("div",{css:tc}),(0,r.tZ)("div",{css:rc})]})})}var oc=(0,mn.iv)({height:6,width:6,backgroundColor:m.TV.backgroundDefault,border:"1px solid ".concat(m.TV.backgroundHighest),borderRadius:"50%"});function ac(){return(0,r.tZ)("div",{css:oc})}var lc=(0,mn.iv)({display:"flex",height:Vl,width:Vl,backgroundColor:m.TV.backgroundHighest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),cc=(0,mn.iv)({display:"flex",alignItems:"center",justifyContent:"center","div + div":{marginLeft:1}}),uc=(0,mn.iv)({width:3,height:3,backgroundColor:m.TV.foregroundDimmer,borderRadius:"50%"});function sc(){return(0,r.tZ)("div",{css:lc,children:(0,r.BX)("div",{css:cc,children:[(0,r.tZ)("div",{css:uc}),(0,r.tZ)("div",{css:uc}),(0,r.tZ)("div",{css:uc})]})})}function dc(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,u=void 0!==c&&c,s=e.hideBottom,d=void 0!==s&&s;if(u&&d)return null;if(t===o&&!u&&!d)return(0,r.tZ)(gc,{top:0,bottom:0,dashed:t&&o});var f=u?null:(0,r.tZ)(fc,{start:"top",joint:l,dashed:t}),p=d?null:(0,r.tZ)(fc,{start:"bottom",joint:l,dashed:o});return(0,r.BX)(r.HY,{children:[f,p]})}function fc(e){var n,t,o=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,u="center"===a?(n={},(0,i.Z)(n,o,0),(0,i.Z)(n,"height","50%"),n):(t={},(0,i.Z)(t,o,0),(0,i.Z)(t,o===a?"height":a,8),t);return(0,r.tZ)(gc,(0,W.Z)((0,M.Z)({},u),{dashed:c}))}var pc=(0,mn.iv)({position:"absolute",left:0,width:18}),hc=(0,mn.iv)({borderRight:"1px solid ".concat(m.TV.outlineDimmest)}),vc=(0,mn.iv)({borderRight:"1px dashed ".concat(m.TV.outlineDimmest)});function gc(e){var n=e.top,t=e.bottom,i=e.height,o=e.dashed,a=void 0!==o&&o;return(0,r.tZ)("div",{css:[pc,a?vc:hc,{top:n,bottom:t,height:i}]})}var mc=t(17807),yc=(0,b.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[mc.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[m.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:Vl},nodeUnfoldedContentSurface:[m.l0.mt(4),m.l0.mb(8),m.l0.p(8),m.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[m.l0.position.relative]});function Zc(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,l=e.hideConnectorTop,c=void 0!==l&&l,u=e.hideConnectorBottom,s=void 0!==u&&u,d=e.joint,f=void 0===d?"top":d,p=e.marker,h=e.header,v=e.unfoldedContent,g=e.children,Z=e.className,b=(0,a.useState)(!0),w=b[0],x=b[1];return(0,r.BX)(y.G,{className:Z,css:m.l0.position.relative,children:[(0,r.tZ)(dc,{boundaryTop:t,boundaryBottom:o,joint:f,hideTop:c,hideBottom:s}),p?(0,r.tZ)(wc,{joint:f,children:p}):null,v?(0,r.BX)(y.G,{css:yc.containerInteractive,role:"button",tabIndex:0,onClick:function(){x(!w)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||x(!w)},children:[w?(0,r.tZ)("div",{css:yc.nodeFoldedIconContainer,children:(0,r.tZ)(Ve.Z,{})}):(0,r.tZ)("div",{css:yc.nodeUnFoldedIconContainer,children:(0,r.tZ)(je.Z,{})}),(0,r.BX)(y.G,{css:yc.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:yc.nodeHeader,children:h}):null,g?(0,r.tZ)(y.G,{children:g}):null]})]}):(0,r.tZ)(y.G,{css:yc.container,children:(0,r.BX)(y.G,{css:yc.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:yc.nodeHeader,children:h}):null,g?(0,r.tZ)(y.G,{children:g}):null]})}),!v||w?null:(0,r.BX)(y.G,{css:yc.unfoldedContentContainer,children:[s?null:(0,r.tZ)(gc,{top:0,bottom:0,dashed:o}),(0,r.tZ)(ie.T,{css:yc.nodeUnfoldedContentSurface,elevated:!0,children:v})]})]})}var bc=(0,b.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function wc(e){var n=e.joint,t=void 0===n?"top":n,i=e.children;return(0,r.tZ)("div",{css:bc[t],children:i})}var xc=(0,mn.iv)(m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height("100%")),kc=(0,mn.iv)(m.l0.rowWithGap(4),m.l0.center),Cc=(0,mn.iv)(m.l0.flex.shrink(0));function Sc(e){var n=e.text,t=(0,He.Z)(e,["text"]);return(0,r.tZ)(Zc,(0,M.Z)({marker:(0,r.tZ)(ql,{type:"boundary"}),joint:"center",header:(0,r.BX)(y.G,{css:xc,children:[(0,r.tZ)(we.R,{}),(0,r.BX)(y.G,{css:kc,children:[(0,r.tZ)(Hl.Z,{size:12,color:m.TV.foregroundDimmest}),(0,r.tZ)(Z.xv,{css:Cc,variant:"small",color:"dimmest",children:n})]}),(0,r.tZ)(we.R,{})]})},t))}var Tc=t(3923),Ec=t(90349),Rc=t(79032),Ic=t(79597),Dc=t(17705),Gc=t(9125);function Pc(){var e=(0,Wt.Z)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Pc=function(){return e},e}var _c={},Bc=(0,Ht.Ps)(Pc());var Ac=t(7914);function Uc(e){var n=e.name,t=e.email,i=e.allowPlaceholderAvatar,o=void 0!==i&&i,a=e.color,l=void 0===a?"default":a,c=e.small,u=void 0!==c&&c,s=e.flip,d=void 0!==s&&s;return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.align.baseline,d?m.l0.flex.rowReverse:m.l0.flex.row,m.l0.flex.shrink(1)],children:[(0,r.tZ)(Lc,{email:t,name:n,enablePlaceholder:o,small:u}),(0,r.tZ)(Z.xv,{css:[m.l0.fontWeight.medium],color:l,variant:u?"small":"text",children:n})]})}function Lc(e){var n=e.name,t=e.email,i=e.enablePlaceholder,l=void 0!==i&&i,c=e.small,u=void 0!==c&&c,s=(0,o.Z)(function(e){var n=(0,M.Z)({},_c,e);return Gc.t(Bc,n)}({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],d=(0,a.useState)(null),f=d[0],p=d[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,O.Z)((function(){var e,n,r,i,a,l,c,u,d,f,h,v,g;return(0,H.__generator)(this,(function(m){switch(m.label){case 0:return t.endsWith("@".concat(Ic.O))?(e=t.split("@")[0],n=(0,o.Z)(e.split("+"),2),n[0],r=n[1],i=(0,Ac.vt)("https://github.com/".concat(r,".png")),p(i),[3,4]):[3,1];case 1:return t.endsWith("@".concat(Ic.J))?(c=t.split("@")[0],u=(0,o.Z)(c.split("-"),2),u[0],d=u[1],[4,s({variables:{username:d}})]):[3,3];case 2:return f=m.sent(),(h=null===(a=f.data)||void 0===a||null===(l=a.userByUsername)||void 0===l?void 0:l.image)&&p(h),[3,4];case 3:v=(0,Rc.FB)(t),(g=new URL("https://gravatar.com/avatar/".concat(v))).searchParams.append("d","404"),p(g.toString()),m.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t,s]),(0,a.useMemo)((function(){var e=u?12:16;return null===f?l?(0,r.tZ)(Dc.Z,{css:{alignSelf:"center"},size:e}):null:(0,r.tZ)(Ec.q,{css:{alignSelf:"center"},username:n,src:f,onError:function(){return p(null)},size:e})}),[f,l,u,n])}var Nc=(0,b.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:m.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:m.TV.space2},"> dd":{marginLeft:m.TV.space12,paddingBottom:m.TV.space2}},listHeader:[m.l0.fontWeight.medium],content:[m.l0.colWithGap(8)],description:[m.l0.colWithGap(8)],commitList:[m.l0.colWithGap(2),m.l0.pl(4)]});function Xc(e){var n=e.commit,t=e.info,i=void 0===t?null:t,o=n.committer.name!==n.author.name&&n.committer.email!==n.author.email,a=Math.abs(n.author.date-n.committer.date)>6e4,l=!n.body,c=null,u=null;return i&&"type"in i?(c=i,"pull-request"===i.type&&(i.reverts&&(u=i.reverts),i.subject&&(l=!0))):i&&(u=i),(0,r.BX)(y.G,{css:Nc.content,children:[l?null:(0,r.BX)(y.G,{css:Nc.description,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:(0,r.tZ)(vl,{body:n.body})}),(0,r.tZ)(we.R,{css:m.l0.backgroundColor.outlineDimmer})]}),(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Nc.listHeader,children:"Author"}),(0,r.BX)("dl",{css:Nc.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.author.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.author.email})]})]}),o?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Nc.listHeader,children:"Committer"}),(0,r.BX)("dl",{css:Nc.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.committer.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.committer.email})]})]}):null,(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Nc.listHeader,children:"Commit"}),(0,r.BX)("dl",{css:Nc.definitionList,children:[a?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Authored:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Tc.E,{date:n.author.date,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Committed:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Tc.E,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Date:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Tc.E,{date:n.author.date,dateFormat:"absolute"})})]}),(0,r.tZ)("dt",{children:"Hash:"}),(0,r.tZ)("dd",{children:n.hash}),c&&"pull-request"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"PR:"}),(0,r.BX)("dd",{children:["#",c.id]})]}):null,c&&"branch"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Merged:"}),(0,r.tZ)("dd",{children:c.source}),c.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Into:"}),(0,r.tZ)("dd",{children:c.target})]}):null]}):null,u?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Reverted:"}),(0,r.tZ)("dd",{children:u.hash})]}):null]})]}),c&&"simple"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Nc.listHeader,children:"Merged"}),(0,r.BX)(y.G,{css:Nc.commitList,children:[(0,r.tZ)(Z.xv,{children:c.a}),(0,r.tZ)(Z.xv,{children:c.b})]})]}):null,c&&"octopus"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Nc.listHeader,children:"Merged"}),(0,r.tZ)(y.G,{css:Nc.commitList,children:c.parents.map((function(e,n){return(0,r.tZ)(Z.xv,{children:e},n)}))})]}):null]})}function Fc(e){var n=e.commit,t=(0,He.Z)(e,["commit"]);return(0,r.tZ)(Zc,(0,W.Z)((0,M.Z)({marker:(0,r.tZ)(ql,{type:"commit"}),header:(0,r.tZ)(Z.xv,{css:m.l0.fontWeight.medium,children:(0,r.tZ)(pl,{subject:n.subject})}),unfoldedContent:(0,r.tZ)(Xc,{commit:n})},t),{children:(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.baseline],children:[(0,r.tZ)(Uc,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Tc.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}var Oc=t(63651);function Mc(e){var n,t=e.commit,i=e.info,o=(0,He.Z)(e,["commit","info"]);return"branch"!==i.type&&(n="pull-request"===i.type&&i.subject?i.subject:t.subject),(0,r.tZ)(Zc,(0,W.Z)((0,M.Z)({marker:(0,r.tZ)(ql,{type:"merge"}),header:(0,r.BX)(Z.xv,{css:[m.l0.rowWithGap(4),m.l0.align.baseline],children:[(0,r.tZ)(cl,{text:"merged"}),(0,r.tZ)(Wc,{info:i,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,r.tZ)(Xc,{commit:t,info:i})},o),{children:(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[n?(0,r.tZ)(Z.xv,{color:"dimmer",variant:"small",children:(0,r.tZ)(pl,{subject:n})}):null,(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.baseline,m.l0.flex.shrink(1)],children:[(0,r.tZ)(Uc,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Tc.E,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})]})}))}function Wc(e){var n=e.info,t=e.hash,i=e.subject,o=(0,r.tZ)("span",{css:m.l0.fontWeight.medium,children:i});switch(n.type){case"pull-request":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"pull request"}),(0,r.tZ)(sl,{id:n.id}),n.reverts&&n.reverts.pr?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"-"}),(0,r.tZ)(al,{text:"reverts"}),(0,r.tZ)(sl,{id:n.reverts.pr})]}):null]});case"branch":return n.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ml,{name:n.source}),(0,r.tZ)("span",{children:"into"}),(0,r.tZ)(ml,{name:n.target})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"branch"}),(0,r.tZ)(ml,{name:n.source})]});case"simple":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(fl,{hash:n.a}),(0,r.tZ)(Oc.Z,{css:{alignSelf:"center"},size:12}),(0,r.tZ)(fl,{hash:n.b})]});case"octopus":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"commit"}),(0,r.tZ)(fl,{hash:t}),(0,r.BX)("span",{children:["(",n.parents.length," parents)"]})]});default:return o}}function Hc(e){var n=e.commit,t=e.info,i=(0,He.Z)(e,["commit","info"]);return(0,r.tZ)(Zc,(0,W.Z)((0,M.Z)({marker:(0,r.tZ)(ql,{type:"revert"}),header:(0,r.BX)(Z.xv,{css:[m.l0.rowWithGap(4),m.l0.align.baseline],children:[(0,r.tZ)(al,{text:"reverted"}),(0,r.tZ)(fl,{hash:t.hash}),(0,r.tZ)(pl,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,r.tZ)(Xc,{commit:n,info:t})},i),{children:(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.baseline],children:[(0,r.tZ)(Uc,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Tc.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}function zc(e){var n=e.button,t=(0,He.Z)(e,["button"]);return(0,r.tZ)(Zc,(0,W.Z)((0,M.Z)({marker:(0,r.tZ)(ql,{type:"boundary"}),joint:"center"},t),{children:(0,r.tZ)(y.G,{children:n})}))}function Vc(e){var n=e.items;return(0,r.tZ)(y.G,{children:n.map((function(e,t){return function(e,n){var t=e[n],i=0===n,o=n===e.length-1;if("boundary"===t.type)return(0,r.tZ)(Sc,{text:t.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.text);if("button"===t.type)return(0,r.tZ)(zc,{button:t.button,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.key);var a=e[n-1]?e[n-1].type:null,l=e[n+1]?e[n+1].type:null,c="commit"!==a,u="commit"!==l;return(0,r.tZ)(jc,{commit:t.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:c,boundaryBottom:u},t.commit.hash)}(n,t)}))})}function jc(e){var n=e.commit,t=(0,He.Z)(e,["commit"]),i=function(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(Fl);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return Ul.test(e.subject)&&(t=e.subject.replace(Ul,"").trim()),!t&&Ol.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:Xl(e)}}}if(Ol.test(e.subject)){var i,o=Ol.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:Xl(e)}}if(Ml.test(e.subject)){var a=Ml.exec(e.subject);if(a){var l=Wl.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}(n);if(i)return(0,r.tZ)(Mc,(0,M.Z)({info:i,commit:n},t));var o=Xl(n);return o?(0,r.tZ)(Hc,(0,M.Z)({info:o,commit:n},t)):(0,r.tZ)(Fc,(0,M.Z)({commit:n},t))}var qc=(0,mn.F4)({from:{opacity:0},to:{opacity:1}}),Yc=(0,mn.iv)({animation:"".concat(qc," 0.125s 0.25s linear backwards")},m.l0.flex.grow(1),m.l0.display.flex,m.l0.center);function Kc(){return(0,r.tZ)(y.G,{css:Yc,children:(0,r.tZ)(he.Z,{size:48})})}var $c=t(32985);var Qc=t(84682);function Jc(e){var n,t,i,o,l,c,u=e.status,s=e.gotoPendingState,f=(0,a.useState)(!1),p=f[0],h=f[1],v=Va(),g=(0,d.Z)().git,m=u.branch,y=null!==(o=null===(n=u.upstream)||void 0===n?void 0:n.branch)&&void 0!==o?o:null,Z=null!==(l=null===(t=u.upstream)||void 0===t?void 0:t.behind)&&void 0!==l?l:0,b=null!==(c=null===(i=u.upstream)||void 0===i?void 0:i.ahead)&&void 0!==c?c:0,w=u.changes.length>0,x=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return m&&y&&Z&&!w?[4,e.canMergeBranches(m,y)]:[2,{canPull:!1,mode:Qc.T.FF_ONLY,error:null}];case 1:return(n=r.sent()).error?(v(n.error),[2,n]):(t=Qc.T.FF_ONLY,b>0&&(t=n.canMerge?Qc.T.REBASE:Qc.T.MERGE),[2,{canPull:!0,mode:t,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[v,m,y,Z,b,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var k,C,S,T=null===x,E=null!==(k=null===x||void 0===x?void 0:x.canPull)&&void 0!==k&&k,R=null!==(C=null===x||void 0===x?void 0:x.mode)&&void 0!==C?C:Qc.T.FF_ONLY;function I(){return(I=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return p?[2]:(h(!0),[4,g.pull({mode:R,allowConflicts:!0})]);case 1:return e=n.sent(),g.forceRefresh(),e.error?(v(e.error),h(!1)):(e.hasConflicts&&s(),Da("upstream-pulled")),[2]}}))}))).apply(this,arguments)}return p?S="Pulling...":m?w?S="Cannot pull with uncommitted changes":0===Z?S="Nothing to pull":T?S="Checking for merge conflicts\u2026":E?(S="Pull ".concat(Z," ").concat((0,Lt.Z)("commit",Z)),R===Qc.T.REBASE?S+=" with rebase":R===Qc.T.MERGE&&(S+=" with merge")):S="Cannot pull due to merge conflict":S="Cannot pull - the HEAD is detached",(0,r.tZ)(ne.zx,{text:S,iconLeft:T||p?(0,r.tZ)(he.Z,{}):(0,r.tZ)(en.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:T||p,disabled:!E})}var eu=t(88467);function nu(e){var n,t,i,o,l,c=e.status,u=(0,a.useState)(!1),s=u[0],f=u[1],p=Va(),h=(0,d.Z)().git,v=null===c.branch,g=null!==(i=null===(n=c.upstream)||void 0===n?void 0:n.behind)&&void 0!==i?i:0,m=null!==(o=null===(t=c.upstream)||void 0===t?void 0:t.ahead)&&void 0!==o?o:0,y=v||g>0||0===m;function Z(){return(Z=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return y||s?[2]:(f(!0),[4,h.push()]);case 1:return e=n.sent(),h.forceRefresh(),e.error?(p(e.error),f(!1)):Da("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return l=s?"Pushing...":v?"Cannot push - the HEAD is detached":0===m?"Nothing to push":g>0?"Cannot push due to unpulled changes":"Push ".concat(m," ").concat((0,Lt.Z)("commit",m)),(0,r.tZ)(ne.zx,{text:l,iconLeft:s?(0,r.tZ)(he.Z,{}):(0,r.tZ)(eu.Z,{}),onClick:function(){return Z.apply(this,arguments)},disabled:y,loading:s})}function tu(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=Va(),c=(0,d.Z)().git;function u(){return(u=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(t){switch(t.label){case 0:return i?[2]:(o(!0),[4,c.switchBranch(n)]);case 1:return(e=t.sent()).error?(l(e.error),o(!1)):(c.forceRefresh(),Da("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){return o(!1)}),[n]);var s=i?"Switching to branch...":"Switch to Branch";return(0,r.tZ)(ne.zx,{text:s,colorway:"primary",onClick:function(){return u.apply(this,arguments)},iconLeft:i?(0,r.tZ)(he.Z,{}):(0,r.tZ)(tl.Z,{}),loading:i})}var ru=t(49760);function iu(e){for(var n=e.split("/").slice(0,-1),t=[],r=0;r<n.length;r++){var i=n.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),t.push(i)}return t.reverse()}function ou(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var n=new Map,t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,v.UO)(c),s=n.get(u);s||(s=[],n.set(u,s)),s.push(c)}}catch(Z){r=!0,i=Z}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,p=!1,h=void 0;try{for(var g,m=function(){var e=function(e){var n=[],i=new Map,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=(0,o.Z)(u.value,2),p=f[0],h=f[1];if(!r.has(p)){var v=h[e];v||(v=h[h.length-1]),n.push(v),i.set(v,p)}}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(0===n.length)return"break";var g=!0,m=!1,y=void 0;try{for(var b,w=function(){var e=b.value,t=i.get(e);if(void 0===t)throw new Error("Unpopulated segment map");1===n.filter((function(n){return n===e})).length&&(r.add(t),d.set(t,e))},x=n[Symbol.iterator]();!(g=(b=x.next()).done);g=!0)w()}catch(Z){m=!0,y=Z}finally{try{g||null==x.return||x.return()}finally{if(m)throw y}}},n=(0,o.Z)(g.value,2)[1];if(1===n.length)return d.set(n[0],null),"continue";var t=new Map,r=new Set,i=0,a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=u.value;if(-1!==f.indexOf("/")){var p=iu(f);t.set(f,p),p.length>i&&(i=p.length)}else d.set(f,null),r.add(f)}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}for(var h=0;h<=i;h++){if("break"===e(h))break}if(r.size!==n.length){var v=!0,m=!1,y=void 0;try{for(var b,w=n[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(!r.has(x)){var k=x.split("/").slice(0,-1).join("/");d.set(x,k)}}}catch(Z){m=!0,y=Z}finally{try{v||null==w.return||w.return()}finally{if(m)throw y}}}},y=n[Symbol.iterator]();!(f=(g=y.next()).done);f=!0)m()}catch(Z){p=!0,h=Z}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}return d}var au=t(59884),lu=(0,b.X)({actionsIndex:[m.l0.height(24),m.l0.align.center,m.l0.borderRadius(4)],actionsWorktree:[m.l0.height(24),m.l0.flex.row,m.l0.align.center,m.l0.borderRadius(4)],unstage:[m.l0.height(24),m.l0.width(24),m.l0.borderRadius(2)],stage:[m.l0.px(12),m.l0.height(24),m.l0.width(24),m.l0.borderRadius(2)],reset:[m.l0.pl(16),m.l0.pr(12),m.l0.height(24),m.l0.width(24),m.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[m.l0.height("75%"),m.l0.width(1),m.l0.backgroundColor.outlineStronger]});function cu(e){var n=e.file,t=e.list,i=e.stageFiles,o=e.restoreFiles,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1];function v(){return(v=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({reset:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({add:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return c||"worktree"!==t?[2]:(h(!0),[4,o(n.path)]);case 1:return e.sent(),h(!1),[2]}}))}))).apply(this,arguments)}return c=c||p||s,"index"===t?(0,r.tZ)(ie.T,{elevated:!0,css:lu.actionsIndex,children:(0,r.tZ)(ge.h,{css:lu.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(he.Z,{}):(0,r.tZ)(au.Z,{})})}):(0,r.BX)(ie.T,{elevated:!0,css:lu.actionsWorktree,children:[(0,r.tZ)(ge.h,{css:lu.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:c,children:p?(0,r.tZ)(he.Z,{}):(0,r.tZ)(zl.Z,{css:lu.resetIcon})}),(0,r.tZ)("div",{css:lu.divider}),(0,r.tZ)(ge.h,{css:lu.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Ze.Z,{})})]})}var uu=(0,b.X)({path:[m.l0.rowWithGap(8),m.l0.flex.growAndShrink(1),m.l0.align.center],source:[m.l0.color.foregroundDimmest],sourceArrow:[m.l0.mx(8)]});function su(e){var n=e.path,t=e.prefix,i=e.source,o=e.onClick;return(0,r.BX)(y.G,{css:uu.path,children:[(0,r.tZ)(sa.Z,{path:n}),(0,r.BX)(Z.xv,{children:[(0,r.tZ)(bl,{path:n,prefix:t,onClick:o}),i?(0,r.BX)("span",{css:uu.source,children:[(0,r.tZ)("span",{css:uu.sourceArrow,children:"\u2190"}),(0,r.tZ)(bl,{path:i})]}):null]})]})}var du=(0,mn.iv)({width:60,height:24},m.l0.display.flex,m.l0.center,m.l0.borderRadius(4),m.l0.fontSize(m.TV.fontSizeSmall));function fu(e){var n,t,i;switch(e.type){case ru.h.ADDED:case ru.h.UNTRACKED:n="Added",t=m.TV.greenDimmest,i=m.TV.greenStrongest;break;case ru.h.MODIFIED:n="Modified",t=m.TV.yellowDimmest,i=m.TV.yellowStrongest;break;case ru.h.DELETED:n="Deleted",t=m.TV.redDimmest,i=m.TV.redStrongest;break;case ru.h.RENAMED:n="Renamed",t=m.TV.tealDimmest,i=m.TV.tealStrongest;break;case ru.h.COPIED:n="Copy",t=m.TV.limeDimmest,i=m.TV.limeStrongest;break;default:return null}return(0,r.tZ)(y.G,{style:{backgroundColor:t,color:i},css:du,children:(0,r.tZ)("span",{children:n})})}var pu=(0,mn.iv)(m.l0.py(2),m.l0.rowWithGap(4),m.l0.align.center);function hu(e){var n,t=e.file,i=e.list,o=e.stageFiles,a=e.restoreFiles,l=e.pathMap,c=e.disabled,u=void 0!==c&&c,s=e.onFilePathClick,d=null===l||void 0===l?void 0:l.get(t.path),f=null===(n=t.source)||void 0===n?void 0:n.path,p="index"===i?t.type.index:t.type.worktree,h=(0,Ie.Z)((function(){if(p!==ru.h.DELETED)return function(){return s(t.path)}}),[t.path,s,p]);return(0,r.BX)(y.G,{css:pu,children:[(0,r.tZ)(su,{path:t.path,prefix:d,source:f,onClick:h}),(0,r.tZ)(fu,{type:p}),(0,r.tZ)(cu,{file:t,list:i,stageFiles:o,restoreFiles:a,disabled:u})]})}var vu=(0,b.X)({actions:[m.l0.rowWithGap(2),m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(8)],buttonReset:[m.l0.borderRadius(8,0,0,8)],buttonStage:[m.l0.borderRadius(0,8,8,0)],divider:[m.l0.my(8),m.l0.width(1),m.l0.backgroundColor.outlineStronger]});function gu(e){var n=e.type,t=e.stageFiles,i=e.restoreFiles,o=e.disabled,l=void 0!==o&&o,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1];function h(){return v.apply(this,arguments)}function v(){return(v=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return l?[2]:(s(!0),[4,t({all:"index"!==n})]);case 1:return e.sent(),s(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return l||"worktree"!==n?[2]:(p(!0),[4,i(!0)]);case 1:return e.sent(),p(!1),[2]}}))}))).apply(this,arguments)}return l=l||f||u,"index"===n?(0,r.tZ)(ne.zx,{text:"Unstage All",iconLeft:u?(0,r.tZ)(he.Z,{}):(0,r.tZ)(au.Z,{}),onClick:h,disabled:l,loading:u,small:!0}):(0,r.BX)(y.G,{css:vu.actions,children:[(0,r.tZ)(ne.zx,{css:vu.buttonReset,text:"Reset All",iconLeft:f?(0,r.tZ)(he.Z,{}):(0,r.tZ)(zl.Z,{}),onClick:function(){return g.apply(this,arguments)},disabled:l,loading:f,small:!0}),(0,r.tZ)("div",{css:vu.divider}),(0,r.tZ)(ne.zx,{css:vu.buttonStage,text:"Stage All",iconLeft:u?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Ze.Z,{}),onClick:h,disabled:l,loading:u,small:!0})]})}var mu=t(94629),yu=(0,b.X)({list:[m.l0.pt(4),m.l0.pb(8),m.l0.colWithGap(4)],listFolded:[m.l0.py(4)],header:[m.l0.px(8),m.l0.rowWithGap(4),m.l0.align.center],headerFoldable:[m.l0.py(4),m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center],headerText:[m.l0.flex.grow(1)],body:[m.l0.px(8),m.l0.maxHeight("50vh"),m.l0.overflowY("auto")]});function Zu(e){var n,t=e.files,i=e.type,o=e.stageFiles,l=e.restoreFiles,c=e.onFilePathClick,u=e.pathMap,s=e.foldable,d=void 0!==s&&s,f=e.disabled,p=void 0!==f&&f,h=(0,a.useState)(!1),v=h[0],g=h[1],m=(0,a.useRef)(null),Z=(0,a.useRef)(null),b=(0,mu.MG)({count:t.length,getScrollElement:function(){return Z.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),w=b.getVirtualItems();return d&&v?(0,r.tZ)(y.G,{css:yu.listFolded,children:(0,r.BX)(y.G,{css:d?yu.headerFoldable:yu.header,children:[(0,r.tZ)(bu,{files:t,type:i,setFolded:g,foldable:!0,folded:!0}),(0,r.tZ)(gu,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]})}):(0,r.BX)(y.G,{innerRef:m,css:yu.list,children:[(0,r.BX)(y.G,{css:d?yu.headerFoldable:yu.header,children:[(0,r.tZ)(bu,{files:t,type:i,setFolded:g,foldable:d}),(0,r.tZ)(gu,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]}),(0,r.tZ)(y.K.div,{ref:Z,css:yu.body,children:(0,r.tZ)("div",{style:{minHeight:b.getTotalSize()},children:(0,r.tZ)("div",{style:{transform:"translateY(".concat(null===(n=w[0])||void 0===n?void 0:n.start,"px)"),willChange:"transform"},children:w.map((function(e){var n=t[e.index];return(0,r.tZ)("div",{"data-index":e.index,children:(0,r.tZ)(hu,{file:n,list:i,stageFiles:o,restoreFiles:l,onFilePathClick:c,pathMap:u,disabled:p},n.path)},e.key)}))})})})]})}function bu(e){var n=e.files,t=e.type,i=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,u="index"===t?"staged":"changed",s=(0,Lt.Z)("file",n.length),d="".concat(n.length," ").concat(u," ").concat(s);return a&&c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ge.h,{alt:"Show list",onClick:function(){return i(!1)},children:(0,r.tZ)(Ve.Z,{})}),(0,r.tZ)(Z.xv,{css:yu.headerText,children:d})]}):(0,r.BX)(r.HY,{children:[a?(0,r.tZ)(ge.h,{alt:"Hide list",onClick:function(){return i(!0)},children:(0,r.tZ)(je.Z,{color:m.TV.foregroundDimmest})}):null,(0,r.tZ)(Z.xv,{css:yu.headerText,color:"dimmest",children:d})]})}var wu=t(60803),xu=(0,b.X)({container:[m.l0.colWithGap(8)],buttons:[m.l0.rowWithGap(8),m.l0.justify.end],restoringBoth:[m.l0.colWithGap(12)],listContainer:[m.l0.colWithGap(4)],list:[m.l0.px(4),m.l0.colWithGap(2)]});function ku(e){var n=e.show,t=e.files,i=e.pathMap,o=e.callback,l=(0,C.Z)(o),c=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)}),[l]),u=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)}),[l]);return(0,r.tZ)(te.u,{isOpen:n,onRequestClose:u,children:n?(0,r.BX)(y.G,{css:xu.container,children:[(0,r.BX)(Z.h4,{level:2,children:["Discard ",(0,Lt.Z)("Change",t.length)]}),(0,r.tZ)(Cu,{files:t,pathMap:i}),(0,r.BX)(y.G,{css:xu.buttons,children:[(0,r.tZ)(ne.zx,{text:"Cancel",iconLeft:(0,r.tZ)(wu.Z,{}),onClick:u}),(0,r.tZ)(ne.zx,{text:"Discard ".concat((0,Lt.Z)("Change",t.length)),iconLeft:(0,r.tZ)(zl.Z,{}),colorway:"negative",onClick:c})]})]}):null})}function Cu(e){var n=e.files,t=e.pathMap,i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.type.worktree===ru.h.UNTRACKED?o.push(d):i.push(d)}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return!i.length&&o.length?(0,r.BX)(y.G,{css:xu.listContainer,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:1===o.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,r.tZ)(Su,{files:o,pathMap:t})]}):i.length&&!o.length?(0,r.BX)(y.G,{css:xu.listContainer,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:1===i.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,r.tZ)(Su,{files:i,pathMap:t})]}):(0,r.BX)(y.G,{css:xu.restoringBoth,children:[i.length?(0,r.BX)(y.G,{css:xu.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Tracked ",(0,Lt.Z)("File",i.length)]}),(0,r.tZ)(Z.xv,{children:1===i.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,r.tZ)(Su,{files:i,pathMap:t})]}):null,o.length?(0,r.BX)(y.G,{css:xu.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Untracked ",(0,Lt.Z)("File",o.length)]}),(0,r.tZ)(Z.xv,{children:1===o.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,r.tZ)(Su,{files:o,pathMap:t})]}):null]})}function Su(e){var n=e.files,t=e.pathMap,i=(0,a.useMemo)((function(){return n.length>20?n.slice(0,20):n}),[n]);return(0,r.tZ)(y.G,{children:(0,r.BX)("ul",{css:xu.list,children:[i.map((function(e){var n;return(0,r.tZ)("li",{children:(0,r.tZ)(su,{path:e.path,prefix:t.get(e.path),source:null===(n=e.source)||void 0===n?void 0:n.path})},e.path)})),n.length<=20?null:(0,r.tZ)("li",{children:(0,r.BX)(Z.xv,{multiline:!0,color:"dimmer",children:["... ",n.length-20," more"," ",(0,Lt.Z)("file",n.length-20)]})})]})})}var Tu=[{"& > span:first-child":[m.l0.flex.grow(1),m.l0.textAlign.left]},{"& > span":[m.l0.flex.shrink(1)]}],Eu=(0,b.X)({buttonFolded:[Tu,m.l0.height("auto"),m.l0.py(8),m.l0.fontWeight.medium],buttonUnfolded:[Tu,m.l0.height("auto"),m.l0.py(8),m.l0.fontWeight.medium,m.l0.border({color:m.TV.outlineDimmer,direction:"bottom"}),m.l0.borderRadius(8,8,0,0)],container:[m.l0.flex.grow(1),m.l0.borderRadius(8)],lists:[m.l0.borderRadius(0,0,8,8)],divider:[m.l0.height(1),m.l0.minHeight(1),m.l0.width("100%"),m.l0.backgroundColor.outlineDimmer],autoStageMessage:[m.l0.pt(4),m.l0.pb(8),m.l0.px(4),m.l0.center],noChangesMessage:[m.l0.py(16),m.l0.px(4),m.l0.center],buttonText:[m.l0.flex.grow(1)],details:[m.l0.rowWithGap(4),m.l0.fontWeight.normal,m.l0.color.foregroundDimmest]});function Ru(e){var n=e.status,t=e.stageFiles,i=e.restoreFiles,o=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),g=v[0],m=v[1],b=(0,a.useMemo)((function(){return ou(n.changes.map((function(e){return e.path})))}),[n]),w=(0,a.useMemo)((function(){var e=[],t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==ru.h.UNMODIFIED&&t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]}),[n.changes]),x=w[0],k=w[1],C=x.length>0&&k.length>0,S=function(e){var n=(0,a.useState)((function(){return{show:!1,files:[]}})),t=n[0],i=n[1],o=(0,a.useCallback)((function(e){return new Promise((function(n){0===e.length&&n(!1),i({show:!0,files:e,callback:function(e){i({show:!1,files:[],callback:void 0}),n(e)}})}))}),[]);return{openRestoreConfirmationModal:o,restoreConfirmationModal:(0,a.useMemo)((function(){return(0,r.tZ)(ku,(0,W.Z)((0,M.Z)({},t),{pathMap:e}))}),[t,e])}}(b),T=S.openRestoreConfirmationModal,E=S.restoreConfirmationModal,R=(0,a.useCallback)(function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return"all"in e?(h(!0),[4,t(e)]):[3,2];case 1:return n.sent(),h(!1),[3,4];case 2:return[4,t(e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t]),I=(0,a.useCallback)(function(){var e=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return!0!==e?[3,4]:(m(!0),[4,T(k)]);case 1:return r.sent()?[4,i(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return m(!1),[3,8];case 4:if("string"===typeof e){if(!(t=k.find((function(n){return n.path===e}))))throw m(!1),new Error("Could not find file in worktree list");n=[t]}else n=k.filter((function(n){return e.includes(n.path)}));return[4,T(n)];case 5:return r.sent()?[4,i(e)]:[3,7];case 6:r.sent(),r.label=7;case 7:m(!1),r.label=8;case 8:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[T,i,k]);return s?(0,r.tZ)(Iu,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c,folded:!0}):0===x.length&&0===k.length?(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:Eu.container,children:[(0,r.tZ)(Iu,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.tZ)(ie.T,{css:Eu.lists,elevated:!0,children:(0,r.tZ)(y.G,{css:Eu.noChangesMessage,children:(0,r.tZ)(Z.xv,{color:"dimmest",children:"No changed or staged files."})})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:Eu.container,children:[(0,r.tZ)(Iu,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.BX)(ie.T,{css:Eu.lists,elevated:!0,children:[0===x.length?null:(0,r.tZ)(Zu,{type:"index",files:x,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||g}),C?(0,r.tZ)("div",{css:Eu.divider}):null,0===k.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Zu,{type:"worktree",files:k,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||g}),C?null:(0,r.tZ)(y.G,{css:Eu.autoStageMessage,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"Committing will automatically stage your changes."})})]})]})]}),E]})}function Iu(e){var n=e.folded,t=void 0!==n&&n,i=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,r.tZ)(ne.zx,{css:t?Eu.buttonFolded:Eu.buttonUnfolded,text:"Staging Area",secondaryText:(0,r.tZ)(Du,{folded:t,changeCount:o,stagedCount:a}),onClick:function(){return i(!t)},iconRight:t?(0,r.tZ)(Ve.Z,{}):(0,r.tZ)(je.Z,{}),disabled:c,small:!0})}function Du(e){var n=e.folded,t=e.changeCount,i=e.stagedCount;if(!n)return null;var o=t>0,a=i>0;return o||a?(0,r.BX)("span",{css:Eu.details,children:[o?(0,r.BX)("span",{children:[t," ",(0,Lt.Z)("change",t)]}):null,o&&a?(0,r.tZ)("span",{children:"/"}):null,a?(0,r.BX)("span",{children:[i," staged"]}):null]}):(0,r.tZ)("span",{css:Eu.details,children:(0,r.tZ)("span",{children:"no changes"})})}var Gu=t(95434),Pu=t(47518),_u=t(45353),Bu=t(82001),Au=t(15823),Uu=t(95245),Lu=(0,mn.iv)({height:32,width:"100%",resize:"none",border:"none"}),Nu=(0,mn.iv)({width:"100%",resize:"none",border:"none"}),Xu=(0,b.X)({surface:[m.l0.p(8),m.l0.colWithGap(12),m.l0.borderRadius(0,0,8,8)],button:[m.l0.height("auto"),m.l0.py(8),m.l0.fontWeight.medium,m.l0.borderRadius(8,8,0,0),m.l0.justify.start,m.l0.border({color:m.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[m.l0.display.inlineFlex,m.l0.rowWithGap(4)],subjectField:[m.l0.colWithGap(8)],bodyField:[m.l0.colWithGap(8)],subjectInput:Lu,bodyInput:Nu,subjectInputDisabled:[Lu,{opacity:.5}],bodyInputDisabled:[Nu,{opacity:.5}],required:[m.l0.color.accentNegativeStronger],keyCombo:[m.l0.display.inlineFlex,m.l0.rowWithGap(4),m.l0.flex.grow(1),m.l0.align.center],keyComboText:[m.l0.fontWeight.normal,m.l0.color.foregroundDimmest]});function Fu(e){var n=e.message,t=e.disabled,i=void 0!==t&&t,o=e.onMessageChange,l=e.onCommitShortcut,c=function(e,n){e=e.replaceAll("\n"," "),o(e+(n?"\n\n"+n:""))},u=(0,a.useState)(!0),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),g=v[0],m=v[1],Z=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,dt.Z)(n.split("\n\n")),x=w[0],k=void 0===x?"":x,C=w.slice(1).join("\n\n"),S=(0,Uu.d)(),T=(0,_u.gf)(Au.CN.gitCommit.id);return(0,Bu.ow)(Au.CT,g),(0,_u.Il)((function(){return[Au.CN.gitCommit.id,{run:function(){null===l||void 0===l||l()},scope:Au.CT,bubble:!1}]}),[l]),(0,r.BX)(y.G,{children:[(0,r.tZ)(ne.zx,{css:Xu.button,text:(0,r.BX)("span",{css:Xu.requiredText,children:[(0,r.tZ)("span",{children:"Commit Message"}),s?(0,r.tZ)(zu,{}):null]}),secondaryText:S||!T?void 0:(0,r.BX)("span",{css:Xu.keyCombo,children:[(0,r.tZ)("span",{css:Xu.keyComboText,children:"Commit:"}),(0,r.tZ)(_u.bM,{keyCombo:T,small:!0})]}),iconRight:s?(0,r.tZ)(Ve.Z,{}):(0,r.tZ)(je.Z,{}),onClick:function(){return d((function(e){return!e}))},small:!0}),(0,r.BX)(ie.T,{css:Xu.surface,elevated:!0,children:[(0,r.tZ)(Mu,{ref:Z,value:k,compact:s,disabled:i,onChange:function(e){c(e,C)},onNewline:function(){if(s)d(!1),h(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){m(!0)},onBlur:function(){m(!1)}}),s&&!C?null:(0,r.tZ)(Hu,{ref:b,value:C,compact:s,disabled:i,onChange:function(e){var n;(c(k,e),s&&!e)?null===(n=Z.current)||void 0===n||n.focus():s&&d(!1)},onBackspaceWhenEmpty:function(){Z.current&&Z.current.focus()},onFocus:function(){p&&h(!1),m(!0)},onBlur:function(){m(!1)},autoFocus:p})]})]})}function Ou(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.onChange,u=e.onNewline,s=e.onFocus,d=e.onBlur;return(0,r.BX)(y.G,{css:Xu.subjectField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:(0,r.BX)("span",{css:Xu.requiredText,children:[(0,r.tZ)("span",{children:"Summary"}),(0,r.tZ)(zu,{})]})}),(0,r.tZ)(pe.B,{ref:n,css:l?Xu.subjectInputDisabled:Xu.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null===u||void 0===u||u())},onFocus:s,onBlur:d})]})}var Mu=(0,a.forwardRef)(Ou);function Wu(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,u=void 0!==c&&c,s=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onFocus,p=e.onBlur,h=(0,Gu.Z)().ref;return(0,r.BX)(y.G,{css:Xu.bodyField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"}),(0,r.tZ)(pe.B,{ref:o?n:(0,Pu.l)(n,h),css:l?Xu.bodyInputDisabled:Xu.bodyInput,placeholder:"Description of your commit...",value:t,disabled:l,onChange:function(e){return null===s||void 0===s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:f,onBlur:p,autoFocus:u})]})}var Hu=(0,a.forwardRef)(Wu);function zu(){return(0,r.tZ)(nl.u,{tooltip:"This field is required.",placement:"top",children:(0,r.tZ)("span",{css:Xu.required,children:"*"})})}var Vu=(0,mn.iv)(m.l0.colWithGap(8));function ju(e){var n=e.status,t=e.onStagedFileClick,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(""),u=c[0],s=c[1],f=(0,a.useState)(0),p=f[0],h=f[1],v=(0,a.useState)(!1),g=v[0],m=v[1],b=Va();(0,a.useEffect)((function(){return l(n)}),[n]);var w=(0,d.Z)().git;if(!o||!o.changes.length)return(0,r.tZ)(y.G,{css:Vu,children:(0,r.tZ)(Z.xv,{color:"dimmest",children:"There are no changes to commit."})});var x=o.changes.length,k=o.changes.filter((function(e){return e.staged})).length;function C(){return(C=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return g?[2]:(h((function(e){return e+1})),[4,w.stageFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function S(){return S=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return g?[2]:(h((function(e){return e+1})),[4,w.restoreFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))})),S.apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=(0,O.Z)((function(){var e,n;return(0,H.__generator)(this,(function(t){switch(t.label){case 0:return g||0===x||p>0?[2]:(m(!0),0!==k?[3,2]:[4,w.stageFiles({all:!0})]);case 1:t.sent(),t.label=2;case 2:return[4,w.commit({message:u})];case 3:return(e=t.sent()).error?(m(!1),b(e.error),[3,6]):[3,4];case 4:return Da("commit-created",{hasDescription:-1!==u.trim().indexOf("\n\n")}),[4,w.status()];case 5:n=t.sent(),m(!1),n.error?b(n.error):(s(""),l(n)),w.forceRefresh(),t.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var R="Nothing to commit";if(g)R="Committing...";else if(k>0){var I=(0,Lt.Z)("change",k);R="Commit ".concat(k," staged ").concat(I)}else x>0&&0===k&&(R="Stage and commit all changes");var D=!u||0===x||p>0||g;return(0,r.BX)(y.G,{css:Vu,children:[(0,r.tZ)(Fu,{message:u,disabled:g,onMessageChange:s,onCommitShortcut:T}),(0,r.tZ)(Ru,{status:o,stageFiles:function(e){return C.apply(this,arguments)},restoreFiles:function(e){return S.apply(this,arguments)},onStagedFileClick:t,disabled:g}),(0,r.tZ)(ne.zx,{text:R,onClick:T,disabled:D,loading:g,colorway:"primary",iconLeft:(0,r.tZ)(oe.Z,{}),stretch:!0})]})}var qu=(0,b.X)({warning:[m.l0.align.start],header:[m.l0.fontWeight.bold]});function Yu(){var e=(0,Me.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(re.E,{css:qu.warning,icon:(0,r.tZ)(ao.Z,{}),colorway:"warning",text:(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:qu.header,children:"Can't push or pull from GitHub"}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),e?null:(0,r.tZ)(Ga,{})]})}var Ku=t(2447),$u=(0,mn.iv)(m.l0.flex.shrink(1));function Qu(e){var n=e.date,t=(0,a.useState)(null),i=t[0],o=t[1];return(0,a.useEffect)((function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,Ku.Z)(n,e,{addSuffix:!0})),t=t.replace(/minutes?/,"min"),o(t)};e();var t=setInterval(e,6e4);return function(){clearInterval(t),o(null)}}}),[n]),i?(0,r.BX)(Z.xv,{css:$u,color:"dimmest",variant:"small",children:["last fetched ",i]}):null}function Ju(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,i=e.hasUnpushedCommits,o=e.workTreeDirty,a=[];return o&&t&&a.push("Can't pull: you have uncommitted changes"),n&&(t||i)&&(t&&i?(o||a.push("Warning: pulling will start a merge with conflicts"),a.push("Can't push: unpulled changes must be merged first")):t?o||a.push("Warning: pulling will start a merge with conflicts"):i&&a.push("Can't push: merge conflict with remote")),(0,r.tZ)(r.HY,{children:a.map((function(e){return(0,r.tZ)(re.E,{text:e,colorway:"warning",icon:(0,r.tZ)(ao.Z,{})},e)}))})}var es=(0,mn.iv)(m.l0.mx(8));function ns(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,r.tZ)(Z.xv,{color:"dimmest",children:"Nothing to pull or push"});var i=null,o=null;if(t){var a=(0,Lt.Z)("commit",t);i="".concat(t," ").concat(a," to pull")}if(n){var l=(0,Lt.Z)("commit",n);o="".concat(n," ").concat(l," to push")}return(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",children:[i?(0,r.tZ)("span",{children:i}):null,i&&o?(0,r.tZ)("span",{css:es,children:"\u2022"}):null,o?(0,r.tZ)("span",{children:o}):null]})}var ts=(0,b.X)({container:[m.l0.flex.grow(1)],branch:[m.l0.mr(4),m.l0.color.foregroundDefault,m.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[m.l0.color.foregroundDimmest],text:[m.l0.ml(4),m.l0.color.foregroundDimmest]});function rs(e){var n=e.upstream,t=e.remotes,i=(0,a.useMemo)((function(){return function(e,n){var t=null,r=null;if((0,Za.Z)(e,Map)){var i=(0,ba.Tg)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=Ca(a)}else t=n,r=Ca(e);return r&&xa(r)?"".concat(r,"/tree/").concat(t):null}(t,n)}),[n,t]);return(0,r.BX)(Z.xv,{css:ts.container,variant:"small",children:[i?(0,r.tZ)("a",{css:ts.branch,href:i,target:"_blank",children:n}):(0,r.tZ)("span",{css:ts.branch,children:n}),(0,r.tZ)("span",{css:ts.divider,children:"\u2022"}),(0,r.tZ)("span",{css:ts.text,children:"upstream"})]})}var is=(0,b.X)({container:[m.l0.borderRadius(8)],loading:[m.l0.height(64),Qe.p.backgroundPulse(),m.l0.borderRadius(8)],header:[m.l0.py(4),m.l0.px(8),m.l0.rowWithGap(8),m.l0.align.center,m.l0.flex.shrink(1),m.l0.border({color:m.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[m.l0.px(8),m.l0.pt(8),m.l0.pb(12),m.l0.colWithGap(8)],buttons:[m.l0.rowWithGap(8),m.l0.flex.grow(1)],sync:[m.l0.flex.grow(1)],pullPush:[m.l0.flex.row],pull:[m.l0.pr(12),m.l0.borderRadius(8,0,0,8),m.l0.border({color:m.TV.outlineDefault,direction:"right"})],push:[m.l0.borderRadius(0,8,8,0)]});function os(e){return as.apply(this,arguments)}function as(){return(as=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise((function(e){return n=setTimeout((function(){ce.c_.withScope((function(e){e.setTag("gitPane",!0),ce.c_.captureException(new Error("Remote update operation timed out"))})),e({error:ya.aq.TIMEOUT})}),9e4)}))])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}}))}))).apply(this,arguments)}function ls(e){var n=e.remotes,t=e.gotoPendingState,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),g=v[0],m=v[1],Z=(0,d.Z)().git,b=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,i,o,a,l,c,u,s,d,f,p,h,v,g,m,y;return(0,H.__generator)(this,(function(Z){switch(Z.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:Qc.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:return(o=Z.sent()).error?[2,o]:(a=o.state,o.type!==ha.y5.NORMAL?[2,{error:ya.aq.INVALID_STATE}]:(a!==ha.yG.DIRTY_WORKTREE&&a!==ha.yG.DIRTY_INDEX||(i.workTreeDirty=!0),[4,e.status()]));case 2:return(l=Z.sent()).error?[2,l]:(c=l.branch,u=null===(n=l.upstream)||void 0===n?void 0:n.branch,d=null!==(s=null===(t=l.upstream)||void 0===t?void 0:t.ahead)&&void 0!==s?s:0,p=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,c?(i.ahead=d,i.behind=p,u?(i.upstream=u,i.hasUnpulledCommits=p>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()]):[3,7]):[2,{error:ya.aq.HEAD_DETACHED}]);case 3:return(h=Z.sent()).error?[2,h]:(i.lastFetched=h.lastFetched,[4,e.canMergeBranches(c,u)]);case 4:return(v=Z.sent()).error?[2,v]:(v.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(ya.rG.GITHUB)?[3,6]:(g=(0,$c.CH)(u))?[4,e.getRemotes()]:[2,{error:ya.aq.INVALID_REFERENCE}]);case 5:if((m=Z.sent()).error)return[2,m];if(!(y=m.remotes.get(g)))return[2,{error:ya.aq.INVALID_REFERENCE}];xa(y)&&(i.needGitHubConnection=!0),Z.label=6;case 6:!i.hasUnpulledCommits||i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?Qc.T.MERGE:Qc.T.REBASE),Z.label=7;case 7:return[2,(0,W.Z)((0,M.Z)({},i),{error:null})]}}))}));return function(n){return e.apply(this,arguments)}}()),w=Va();if((0,a.useEffect)((function(){(null===b||void 0===b?void 0:b.error)&&w(b.error)}),[null===b||void 0===b?void 0:b.error,w]),!b)return(0,r.tZ)(ie.T,{css:is.loading,elevated:!0});if(b.error||!b.upstream)return null;var x=b.upstream,k=b.hasUnpulledCommits,C=b.hasUnpushedCommits,S=b.hasRemoteMergeConflict,T=b.pullMode,E=b.canPull,R=b.canPush,I=b.workTreeDirty,D=b.needGitHubConnection,G=b.ahead,P=b.behind,_=b.lastFetched;if(D)return(0,r.BX)(ie.T,{css:is.container,elevated:!0,children:[(0,r.BX)(y.G,{css:is.header,children:[(0,r.tZ)(rs,{upstream:x,remotes:n}),(0,r.tZ)(ne.zx,{css:is.fetch,text:"Fetch",iconLeft:(0,r.tZ)(Oi.Z,{}),disabled:!0,outlined:!0,small:!0})]}),(0,r.tZ)(y.G,{css:is.body,children:(0,r.tZ)(Yu,{})})]});var B=o||u||p||g,A=!x||D||B,U=!E||B,L=!R||B,N=!E&&!R||S||B;function X(){return(X=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return A?[2]:(l(!0),[4,os(Z.fetch())]);case 1:return e=n.sent(),Z.forceRefresh(),l(!1),e.error?w(e.error):Da("remote-fetched"),[2]}}))}))).apply(this,arguments)}function F(){return(F=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return U?[2]:(s(!0),[4,os(Z.pull({mode:T,allowConflicts:!0}))]);case 1:return e=n.sent(),s(!1),e.error?w(e.error):(e.hasConflicts&&t(),Z.forceRefresh(),Da("upstream-pulled")),[2]}}))}))).apply(this,arguments)}function z(){return(z=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return L?[2]:(h(!0),[4,os(Z.push())]);case 1:return e=n.sent(),Z.forceRefresh(),h(!1),e.error?w(e.error):Da("upstream-pushed"),[2]}}))}))).apply(this,arguments)}function V(){return(V=(0,O.Z)((function(){var e,n;return(0,H.__generator)(this,(function(t){switch(t.label){case 0:return N?[2]:(m(!0),E?[4,os(Z.pull({mode:T}))]:[3,2]);case 1:if((e=t.sent()).error)return w(e.error),m(!1),[2];Da("upstream-pulled"),t.label=2;case 2:return R?[4,Z.push()]:[3,4];case 3:if((n=t.sent()).error)return w(n.error),m(!1),[2];Da("upstream-pushed"),t.label=4;case 4:return Z.forceRefresh(),m(!1),[2]}}))}))).apply(this,arguments)}return(0,r.BX)(ie.T,{css:is.container,elevated:!0,children:[(0,r.BX)(y.G,{css:is.header,children:[(0,r.tZ)(rs,{upstream:x,remotes:n}),(0,r.tZ)(Qu,{date:_}),(0,r.tZ)(ne.zx,{css:is.fetch,text:"Fetch",iconLeft:o?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Oi.Z,{}),onClick:function(){return X.apply(this,arguments)},loading:o,disabled:A,outlined:!0,small:!0})]}),(0,r.BX)(y.G,{css:is.body,children:[(0,r.tZ)(Ju,{hasRemoteMergeConflict:S,hasUnpulledCommits:k,hasUnpushedCommits:C,workTreeDirty:I}),(0,r.tZ)(ns,{ahead:G,behind:P}),(0,r.BX)(y.G,{css:is.buttons,children:[(0,r.tZ)(ne.zx,{css:is.sync,text:"Synchronize",iconLeft:g?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Oc.Z,{rotate:90}),onClick:function(){return V.apply(this,arguments)},loading:g,disabled:N,small:!0}),(0,r.BX)(y.G,{css:is.pullPush,children:[(0,r.tZ)(ne.zx,{css:is.pull,text:"Pull",iconLeft:u?(0,r.tZ)(he.Z,{}):(0,r.tZ)(en.Z,{}),onClick:function(){return F.apply(this,arguments)},loading:u,disabled:U,small:!0}),(0,r.tZ)(ne.zx,{css:is.push,text:"Push",iconLeft:p?(0,r.tZ)(he.Z,{}):(0,r.tZ)(eu.Z,{}),onClick:function(){return z.apply(this,arguments)},loading:p,disabled:L,small:!0})]})]})]})]})}var cs=t(9396);function us(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=Va(),c=(0,d.Z)().git,u=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRemotes()];case 1:return(n=i.sent()).error?(l(n.error),[2,n]):(t=n.remotes,r="",(null===t||void 0===t?void 0:t.size)&&(r=t.has("origin")?"origin":t.keys().next().value),[2,{remote:r,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[l],{keepStaleResult:!1});if(null===u||void 0===u?void 0:u.error)return null;var s,f=u?u.remote:null,p=null===f,h=n.type!==va.HO.LOCAL||!f;function v(){return(v=(0,O.Z)((function(){return(0,H.__generator)(this,(function(e){switch(e.label){case 0:return!f||i?[2]:(o(!0),[4,c.push({publish:{remote:f}})]);case 1:return e.sent().error?o(!1):(c.forceRefresh(),Da("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return s=i?"Publishing...":n.type!==va.HO.LOCAL?"Branch has already been published":p?"Checking if branch can be published...":f?"Publish branch as '".concat(f,"/").concat(n.name,"'"):"No remotes to publish to",(0,r.tZ)(ne.zx,{text:s,iconLeft:p||i?(0,r.tZ)(he.Z,{}):(0,r.tZ)(cs.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:p||i,disabled:h})}var ss=(0,mn.iv)({border:"none"},m.l0.height("auto"),m.l0.py(4),m.l0.px(8));function ds(e){var n=e.branch,t=e.remotes,i=(0,a.useMemo)((function(){if(n.type===va.HO.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=Ca(e),i=function(e){var n="string"===typeof e?e:e.fetch;if(xa(n)){var t=(n=ka(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}(e);return[r,i,xa(r)]}),[n,t]),o=i[0],l=i[1],c=i[2];return o&&l?(0,r.tZ)(be.Z,{css:ss,text:l,href:o,target:"_blank",iconLeft:c?(0,r.tZ)(Ra.Z,{}):void 0,iconRight:(0,r.tZ)(So.Z,{}),outlined:!0,small:!0}):null}var fs=(0,b.X)({view:[m.l0.pt(4),m.l0.pb(8),m.l0.px(4),m.l0.colWithGap(8),m.l0.flex.grow(1)],sectionContainer:[m.l0.colWithGap(8)],section:[m.l0.pt(8),m.l0.pb(16),m.l0.px(8),m.l0.colWithGap(8),m.l0.border({color:m.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.spaceBetween],reviewChangesHeader:[m.l0.rowWithGap(8),m.l0.align.center],changesPill:[m.l0.fontWeight.bold],headerText:[m.l0.fontWeight.medium]});function ps(e){var n,t,i=e.status,l=e.remotes,c=e.branch,u=e.onStagedFileClick,s=e.gotoPendingState,d=e.current,f=void 0!==d&&d,p=function(e,n,t){var r=Va(),i=(0,ga.Z)(function(){var r=(0,O.Z)((function(r){var i,a,l,c,u,s,d,f,p;return(0,H.__generator)(this,(function(h){switch(h.label){case 0:return e?!e.tracking||0===n&&0===t?(i=(0,$c.bF)(e,!0),[4,r.log({max:100,revRange:i})]):[3,2]:[2,{error:null}];case 1:return(a=h.sent()).error?[2,a]:[2,{log:a.commits,error:null}];case 2:return l=(0,$c.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 3:return c=h.sent(),u=(0,o.Z)(c,3),s=u[0],d=u[1],f=u[2],(p=s.error||d.error||f.error)?[2,{error:p}]:[2,{log:s.commits,onlyRemote:d.commits,onlyLocal:f.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,n,t]);return(0,a.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,n=i.onlyRemote,t=i.onlyLocal;if(!n&&!t)return{log:e,error:null};if(e){var o=new Set;if(n){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o.add(d.hash)}}catch(y){l=!0,c=y}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}if(t){var f=!0,p=!1,h=void 0;try{for(var v,g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;o.add(m.hash)}}catch(y){p=!0,h=y}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:n,onlyLocal:t,error:null}}),[r,i])}(c,f?null===i||void 0===i||null===(n=i.upstream)||void 0===n?void 0:n.behind:void 0,f?null===i||void 0===i||null===(t=i.upstream)||void 0===t?void 0:t.ahead:void 0),h=!!l&&l.size>0,v=(null===c||void 0===c?void 0:c.type)===va.HO.LOCAL,g=(0,a.useMemo)((function(){if(!p||p.error)return[];var e,n,t,o=[],a=p.log,l=void 0===a?[]:a,c=p.onlyRemote,u=void 0===c?[]:c,d=p.onlyLocal,h=void 0===d?[]:d,v=l.length>0,g=u.length>0,m=h.length>0;g&&(o.push({type:"boundary",text:"Not pulled from remote"}),f&&i&&o.push({type:"button",key:"pull-button",button:(0,r.tZ)(Jc,{status:i,gotoPendingState:s})}),(e=o).push.apply(e,(0,vr.Z)(hs(u))));m&&(o.push({type:"boundary",text:"Not pushed to remote"}),f&&i&&o.push({type:"button",key:"push-button",button:(0,r.tZ)(nu,{status:i})}),(n=o).push.apply(n,(0,vr.Z)(hs(h))));v&&((g||m)&&o.push({type:"boundary",text:"Up to date with remote"}),(t=o).push.apply(t,(0,vr.Z)(hs(l))));return o}),[p,i,f,s]);return c?(0,r.BX)(y.G,{css:fs.view,children:[(0,r.BX)(y.G,{css:fs.sectionContainer,children:[f?null:(0,r.tZ)(y.G,{css:fs.section,children:(0,r.tZ)(tu,{branch:c})}),v&&h?(0,r.tZ)(y.G,{css:fs.section,children:(0,r.tZ)(us,{branch:c})}):null,f&&!v&&l&&h?(0,r.BX)(y.G,{css:fs.section,children:[(0,r.BX)(y.G,{css:fs.remoteUpdatesHeader,children:[(0,r.tZ)(Z.xv,{css:fs.headerText,children:"Remote Updates"}),(0,r.tZ)(ds,{branch:c,remotes:l})]}),(0,r.tZ)(ls,{remotes:l,gotoPendingState:s})]}):null,f&&i?(0,r.BX)(y.G,{css:fs.section,children:[(0,r.BX)(y.G,{css:fs.reviewChangesHeader,children:[(0,r.tZ)(lo.D,{css:fs.changesPill,colorway:i.changes.length<=0?"grey":"primary",text:i.changes.length.toString()}),(0,r.tZ)(Z.xv,{css:fs.headerText,children:"Review Changes"})]}),(0,r.tZ)(ju,{status:i,onStagedFileClick:u})]}):null]}),p?(0,r.tZ)(Vc,{items:g}):(0,r.tZ)(Kc,{})]}):(0,r.tZ)("div",{children:"No branch"})}function hs(e){return e.map((function(e){return{type:"commit",commit:e}}))}function vs(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,r.tZ)(Z.xv,{children:"Please finish the cherry-pick manually."})]})}var gs=(0,mn.iv)(mc.gU.nofill,m.l0.py(12),m.l0.px(8),m.l0.colWithGap(2),m.l0.justify.center,m.l0.borderRadius(8),m.l0.flex.shrink(1));function ms(e){var n=e.branch,t=e.current,i=void 0!==t&&t,o=e.onPreview;return(0,r.BX)(y.G,{css:gs,tabIndex:0,role:"button","aria-label":"Preview branch ".concat((0,$c.bF)(n,!0)),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,r.tZ)(Z.xv,{children:(0,r.tZ)(ml,{name:n.name,remote:n.type===va.HO.REMOTE?n.remote:null,current:i,onClick:o,icon:!0})}),(0,r.tZ)(Zs,{branch:n})]})}var ys=(0,mn.iv)(m.l0.rowWithGap(8),m.l0.align.baseline,m.l0.flex.shrink(1));function Zs(e){var n=e.branch;return(0,r.BX)(y.G,{css:ys,children:[(0,r.tZ)(Uc,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(Tc.E,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var bs=(0,mn.iv)({verticalAlign:"middle"},m.l0.justify.spaceBetween),ws=(0,mn.iv)(m.l0.display.flex),xs=(0,mn.iv)(m.l0.p(4),m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween),ks=(0,mn.iv)({verticalAlign:"middle"},m.l0.justify.spaceBetween,m.l0.borderRadius(8,8,0,0)),Cs=(0,mn.iv)(m.l0.borderRadius(8)),Ss=(0,mn.iv)(m.l0.borderRadius(0,0,8,8));function Ts(e){var n=e.name,t=e.branches,i=e.current,o=void 0===i?null:i,l=e.switchMode,c=e.foldable,u=void 0!==c&&c,s=e.folded,d=void 0!==s&&s,f=(0,a.useState)(!!u&&d),p=f[0],h=f[1],v=(0,a.useMemo)((function(){return t.map((function(e){return(0,r.tZ)(ms,{branch:e,current:(0,va.p3)(e,o),onPreview:function(){return l({mode:kl.BRANCH,branch:e})}},(0,$c.Qj)(e))}))}),[t,o,l]);return p?(0,r.tZ)(ne.zx,{css:bs,text:n,iconRight:(0,r.tZ)(Ve.Z,{}),onClick:function(){return h(!1)},big:!0}):u?(0,r.BX)(y.G,{css:ws,children:[(0,r.tZ)(ne.zx,{css:ks,text:n,iconRight:(0,r.tZ)(je.Z,{}),onClick:function(){return h(!0)},big:!0}),(0,r.tZ)(ie.T,{css:Ss,elevated:!0,children:v})]}):(0,r.BX)(y.G,{css:ws,children:[(0,r.tZ)(y.G,{css:xs,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),(0,r.tZ)(ie.T,{css:Cs,elevated:!0,children:v})]})}var Es=(0,mn.iv)(m.l0.p(8),m.l0.colWithGap(8),m.l0.borderRadius(8)),Rs=(0,mn.iv)(m.l0.rowWithGap(4)),Is=(0,mn.iv)(m.l0.flex.grow(1));function Ds(){var e=function(){i(!0),c("")},n=(0,a.useState)(!0),t=n[0],i=n[1],o=(0,a.useState)(""),l=o[0],c=o[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=Va(),h=(0,d.Z)().git;function v(){return g.apply(this,arguments)}function g(){return(g=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return t||!l||s?[2]:(f(!0),[4,h.createBranch({name:l,checkout:!0})]);case 1:return(e=n.sent()).error?(p(e.error),f(!1)):(h.forceRefresh(),f(!1),c(""),i(!0),Da("branch-created")),[2]}}))}))).apply(this,arguments)}if(t)return(0,r.tZ)(ne.zx,{text:"Create Branch",iconLeft:(0,r.tZ)(Ze.Z,{}),onClick:function(){return i(!1)}});var m=!l||!(0,$c.Dc)(l);return(0,r.BX)(ie.T,{css:Es,elevated:!0,children:[(0,r.tZ)(Ps,{value:l,onChange:c,onSubmit:v,onCancel:e,disabled:s}),(0,r.BX)(y.G,{css:Rs,children:[(0,r.tZ)(ne.zx,{css:Is,text:"Cancel",onClick:e,disabled:s}),(0,r.tZ)(ne.zx,{css:Is,text:"Create Branch",colorway:"primary",iconLeft:(0,r.tZ)(Ze.Z,{}),onClick:v,loading:s,disabled:m})]})]})}var Gs=(0,mn.iv)({opacity:.75});function Ps(e){var n=e.value,t=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,$c.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(pe.II,{value:n,css:t?Gs:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,t){switch(e){case"Enter":null===o||void 0===o||o(),t();break;case"Escape":null===a||void 0===a||a(),t();break;case" ":if(""===n){t();break}l(n+"-"),t()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===n&&(null===a||void 0===a||a())},autoFocus:!0})}function _s(e){var n=e.currentBranch,t=e.switchMode,i=Va(),o=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,o,a,l,c,u,s,d,f,p,h,v,g,m,y,Z,b,w;return(0,H.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.listBranches()];case 1:return(n=x.sent()).error?(i(n.error),[2,n]):[4,e.findDefaultBranches()];case 2:if((t=x.sent()).error)return i(t.error),[2,t];r=n.branches,o=new Set,a=!0,l=!1,c=void 0;try{for(u=function(){var e=d.value,n=r.find((function(n){return(0,$c.Pi)(n,e)}));n&&o.add(n)},s=t.refs[Symbol.iterator]();!(a=(d=s.next()).done);a=!0)u()}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}f=Date.now()-5184e6,p=[],h=[],v=!0,g=!1,m=void 0;try{for(y=r[Symbol.iterator]();!(v=(Z=y.next()).done);v=!0)b=Z.value,o.has(b)||(b.commit.author.date>f?p.push(b):h.push(b))}catch(k){g=!0,m=k}finally{try{v||null==y.return||y.return()}finally{if(g)throw m}}return w=Array.from(o),[2,{active:p,stale:h,important:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[i]);if(!o)return(0,r.tZ)(Kc,{});if(o.error)return(0,r.tZ)("div",{children:o.error});var a=o.active,l=o.stale,c=o.important;return(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8)],children:(0,r.BX)(y.G,{css:[m.l0.pb(8),m.l0.px(8),m.l0.colWithGap(16)],children:[n?(0,r.BX)(y.G,{css:m.l0.colWithGap(8),children:[(0,r.tZ)(Ts,{branches:[n],current:n,name:"Current",switchMode:t}),(0,r.tZ)(Ds,{})]}):null,0===c.length?null:(0,r.tZ)(Ts,{branches:c,current:n,name:"Important",switchMode:t}),0===a.length?null:(0,r.tZ)(Ts,{branches:a,current:n,name:"Active",switchMode:t,foldable:!0}),0===l.length?null:(0,r.tZ)(Ts,{branches:l,current:n,name:"Stale",switchMode:t,foldable:!0,folded:!0})]})})}function Bs(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: your HEAD is currently detached."}),(0,r.tZ)(Z.xv,{children:"Please checkout a branch."})]})}var As=t(34938),Us=t(62841),Ls=(0,b.X)({container:[m.l0.colWithGap(4)],file:[m.l0.rowWithGap(8),m.l0.align.center],fileLeft:[m.l0.rowWithGap(8),m.l0.flex.grow(1),m.l0.align.center],filePrefix:[m.l0.color.foregroundDimmest]});function Ns(e){var n=e.files,t=e.uniquePathMap,i=e.onFileClick,a=[];if((0,Za.Z)(n,Map)){var l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,o.Z)(s.value,2),p=f[0],h=f[1],v=t.get(p);a.push({path:p,prefix:v,resolved:h})}}catch(T){c=!0,u=T}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}else{var g=!0,b=!1,w=void 0;try{for(var x,k=n[Symbol.iterator]();!(g=(x=k.next()).done);g=!0){var C=x.value,S=t.get(C);a.push({path:C,prefix:S,resolved:!0})}}catch(T){b=!0,w=T}finally{try{g||null==k.return||k.return()}finally{if(b)throw w}}}return(0,r.tZ)(y.G,{css:Ls.container,children:a.map((function(e){var n=e.path,t=e.prefix,o=e.resolved;return(0,r.BX)(y.G,{css:Ls.file,children:[(0,r.BX)(y.G,{css:Ls.fileLeft,children:[(0,r.tZ)(sa.Z,{path:n}),(0,r.tZ)(Z.xv,{children:(0,r.tZ)(bl,{path:n,prefix:t,onClick:function(){return i(n)}})})]}),o?(0,r.tZ)(oe.Z,{color:m.TV.greenStronger}):(0,r.tZ)(ao.Z,{color:m.TV.orangeStronger})]},n)}))})}function Xs(e){var n=e.hasConflicts?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:m.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:m.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,r.tZ)(re.E,{colorway:"warning",icon:(0,r.tZ)(ao.Z,{}),text:n})}var Fs=t(6454),Os=(0,b.X)({container:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},m.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[m.l0.p(8),m.l0.rowWithGap(4),m.l0.flex.grow(1),m.l0.center,m.l0.borderRadius(8)]});function Ms(e){var n,t=e.branch,i=e.refs,a=e.refsAreBranches,l=e.isUpstreamPull;if(!i.length)return null;if(l){var c=(0,o.Z)((0,ba.Tg)(i[0]),2),u=c[0],s=c[1];u&&s&&(n=(0,r.tZ)(ie.T,{css:Os.branch,elevated:!0,children:(0,r.tZ)(ml,{remote:u,name:s,icon:!0,heading:!0})}))}return n||(n=i.map((function(e){return(0,r.tZ)(ie.T,{css:Os.branch,elevated:!0,children:(0,r.tZ)(ml,{name:e,icon:!!a||(0,r.tZ)(Fs.Z,{size:16}),heading:!0})},e)}))),(0,r.BX)(y.G,{css:Os.container,children:[(0,r.tZ)(y.G,{css:Os.left,children:n}),(0,r.tZ)(ft.Z,{size:24,color:m.TV.foregroundDimmest}),(0,r.tZ)(y.G,{css:Os.right,children:(0,r.tZ)(ie.T,{css:Os.branch,elevated:!0,children:(0,r.tZ)(ml,{name:t,icon:!0,current:!0,heading:!0})})})]})}var Ws=(0,b.X)({container:[m.l0.colWithGap(12),m.l0.pt(16),m.l0.pb(8),m.l0.px(8)],fakePaneHeader:[m.l0.p(8),m.l0.rowWithGap(8),m.l0.backgroundColor.backgroundDefault,m.l0.align.center,{borderBottom:"1px solid ".concat(m.TV.outlineDimmer)}],conflictResolution:[m.l0.colWithGap(16)],listContainer:[m.l0.p(8),m.l0.colWithGap(8),m.l0.borderRadius(8)],list:[m.l0.pb(8),m.l0.colWithGap(8)],listDisabled:[{opacity:.5},m.l0.pb(8),m.l0.colWithGap(8)],listHeader:[m.l0.pb(4),m.l0.flex.grow(1),m.l0.border({color:m.TV.outlineDimmer,direction:"bottom"})],listFiles:[m.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},m.l0.rowWithGap(8)],buttons:[m.l0.colWithGap(8)]});function Hs(e){var n=e.onFileClick,t=e.gotoPendingState,i=(0,a.useState)(!0),l=i[0],c=i[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=(0,a.useState)(!1),h=p[0],v=p[1],g=s||h,b=Va(),w=(0,d.Z)().git,x=(0,Si.D)(),k=function(){var e=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,i,a,l,c,u,s,d,f,p,h,v,g,m,y,Z,b,w;return(0,H.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.status()];case 1:return(n=x.sent()).error?[2,n]:(t=n.branch)?[4,e.getConflictingFiles()]:[2,{error:ya.aq.HEAD_DETACHED}];case 2:return(r=x.sent()).error?[2,r]:(i=r.files,[4,e.getMergingRefs()]);case 3:if((a=x.sent()).error)return[2,a];l=a.commits,c=a.branches,u=c.length>0,s=u?c:l,d=n.changes.filter((function(e){return!e.unmerged})).map((function(e){return e.path})),f=!0,p=!0,h=!1,v=void 0;try{for(g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0)if(!(0,o.Z)(m.value,2)[1]){f=!1;break}}catch(k){h=!0,v=k}finally{try{p||null==g.return||g.return()}finally{if(h)throw v}}return y=ou(n.changes.map((function(e){return e.path}))),Z=i.size>0,b=d.length>0,w=null!==n.upstream&&1===c.length&&c[0]===n.upstream.branch,[2,{refs:s,branch:t,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:u,allIsResolved:f,uniquePathMap:y,hasConflicts:Z,hasOtherChanges:b,isUpstreamPull:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}());return e}();if((0,a.useEffect)((function(){(null===k||void 0===k?void 0:k.error)&&b(k.error)}),[null===k||void 0===k?void 0:k.error,b]),!k)return(0,r.tZ)(Kc,{});if(k.error)return null;var C=k.refs,S=k.branch,T=k.conflictingFiles,E=k.otherChangedFiles,R=k.refsAreBranches,I=k.allIsResolved,D=k.uniquePathMap,G=k.hasConflicts,P=k.hasOtherChanges,_=k.isUpstreamPull;function B(){return B=(0,O.Z)((function(){var e,n,r,i,o,a,c,u,s,d,p;return(0,H.__generator)(this,(function(h){switch(h.label){case 0:if(!I||g)return[2];f(!0),e=[],n=!0,r=!1,i=void 0;try{for(o=T.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)c=a.value,e.push(c)}catch(v){r=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l&&(u=e).push.apply(u,(0,vr.Z)(E)),[4,w.stageFiles({all:!1})];case 1:return(s=h.sent()).error?(b(s.error),f(!1),[2]):[4,w.stageFiles({add:e})];case 2:return(d=h.sent()).error?(b(d.error),f(!1),[2]):[4,w.mergeContinue()];case 3:return(p=h.sent()).error?[4,w.stageFiles({all:!1})]:[3,5];case 4:return h.sent(),b(p.error),f(!1),[3,6];case 5:t(),w.forceRefresh(),h.label=6;case 6:return[2]}}))})),B.apply(this,arguments)}function A(){return(A=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return g?[2]:(v(!0),[4,w.mergeAbort()]);case 1:return(e=n.sent()).error?(b(e.error),v(!1)):(t(),w.forceRefresh()),[2]}}))}))).apply(this,arguments)}var U=_?"Complete in-progress pull":"Complete in-progress merge";return G&&(U=_?"Resolve pull conflicts":"Resolve merge conflicts"),(0,r.BX)(y.G,{children:[(0,r.BX)(y.G,{css:Ws.fakePaneHeader,children:[(0,r.tZ)(Us.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:U})]}),(0,r.BX)(y.G,{css:Ws.container,children:[(0,r.tZ)(Ms,{branch:S,refs:C,refsAreBranches:R,isUpstreamPull:_}),(0,r.tZ)(Xs,{hasConflicts:G}),(0,r.BX)(ie.T,{css:Ws.listContainer,elevated:!0,children:[(0,r.BX)(y.G,{css:Ws.list,children:[(0,r.tZ)(y.G,{css:Ws.listHeader,children:(0,r.tZ)(Z.xv,{css:m.l0.fontWeight.medium,children:"Conflicting Files"})}),(0,r.tZ)(y.G,{css:Ws.listFiles,children:G?(0,r.tZ)(Ns,{files:T,uniquePathMap:D,onFileClick:n}):(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"There are no conflicting files in this merge."})})]}),P?(0,r.BX)(y.G,{css:l?Ws.list:Ws.listDisabled,children:[(0,r.tZ)(y.G,{css:Ws.listHeader,children:(0,r.tZ)(Z.xv,{css:m.l0.fontWeight.medium,children:"Other Changed Files"})}),(0,r.tZ)(y.G,{css:Ws.listFiles,children:(0,r.tZ)(Ns,{files:E,uniquePathMap:D,onFileClick:n})})]}):null]}),(0,r.BX)(y.G,{css:Ws.includeOtherFiles,tag:"label",children:[(0,r.tZ)(As.X,{id:x,checked:l,onChange:function(e){return c(e.target.checked)}}),(0,r.tZ)(Z.xv,{children:"Include other changed files in commit"})]}),(0,r.BX)(y.G,{css:Ws.buttons,children:[(0,r.tZ)(ne.zx,{text:_?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,r.tZ)(he.Z,{}):(0,r.tZ)(Us.Z,{}),disabled:!I||g,loading:s,onClick:function(){return B.apply(this,arguments)}}),(0,r.tZ)(ne.zx,{text:_?"Abort pull":"Abort merge",colorway:"negative",iconLeft:h?(0,r.tZ)(he.Z,{}):(0,r.tZ)(wu.Z,{}),disabled:g,loading:h,onClick:function(){return A.apply(this,arguments)}})]})]})]})}function zs(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=Va(),o=(0,d.Z)().git;function l(){return(l=(0,O.Z)((function(){var e;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return n?[2]:(t(!0),[4,o.init()]);case 1:return(e=r.sent()).error?(t(!1),i(e.error)):(o.forceRefresh(),Da("repository-initialized")),[2]}}))}))).apply(this,arguments)}var c=n?"Initializing...":"Initialize Git Repository";return(0,r.tZ)(ne.zx,{text:c,iconLeft:n?(0,r.tZ)(he.Z,{}):(0,r.tZ)(pa.Z,{}),colorway:"primary",loading:n,onClick:function(){return l.apply(this,arguments)}})}var Vs=(0,mn.iv)(m.l0.height("100%"),m.l0.p(16),m.l0.colWithGap(16),m.l0.center),js=(0,mn.iv)(m.l0.colWithGap(16),m.l0.center,m.l0.flex.shrink(1));function qs(){return(0,r.BX)(y.G,{css:Vs,children:[(0,r.BX)(y.G,{css:js,children:[(0,r.tZ)(Ee.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Version control for your Repl."})]}),(0,r.tZ)(zs,{})]})}function Ys(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a rebase."}),(0,r.tZ)(Z.xv,{children:"Please finish the rebase manually."})]})}function Ks(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a revert."}),(0,r.tZ)(Z.xv,{children:"Please finish the revert manually."})]})}var $s=t(81669),Qs=t(48511),Js=t(9247),ed=(0,mn.iv)(m.l0.rowWithGap(8),m.l0.align.center);function nd(e){var n=e.username,t=e.avatar;return(0,r.BX)(y.G,{css:ed,children:[(0,r.tZ)(Js.Z,{url:null!==t&&void 0!==t?t:"/images/evalbot/evalbot_24"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})]})}var td=t(90171),rd=(0,b.X)({list:{"> div:first-child":m.l0.borderRadius(8,8,0,0),"> div:last-child":[m.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[mc.gU.filled,m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.p(12),m.l0.borderRadius(0),m.l0.border({color:m.TV.outlineDefault,direction:"bottom"})],information:[m.l0.colWithGap(4),m.l0.flex.shrink(1)],informationRow:[m.l0.rowWithGap(8),m.l0.align.center],email:[m.l0.flex.shrink(1)],connectToGithubContainer:[m.l0.colWithGap(4),m.l0.p(12),m.l0.backgroundColor.backgroundHigher],divider:[m.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[m.l0.rowWithGap(4),m.l0.align.center],notConnectedText:[m.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function id(e){var n=e.profiles,t=e.current,i=e.showConnectToGithub,o=e.onSelectProvider,a=(0,Me.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1}),l=(0,td.useRouter)(),c=(0,L.Vg)(l),u=(0,Si.D)();return(0,r.BX)(Qs.E,{name:u,css:rd.list,value:null!==t&&void 0!==t?t:"",children:[n.map((function(e){var n;n=e.provider===ya.rG.GITHUB?"GitHub":"Default Profile";var i=void 0;return e.provider===ya.rG.GITHUB&&(i=c?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,r.tZ)(od,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:o,settingsURL:i},e.provider)})),i?(0,r.BX)(y.G,{css:rd.connectToGithubContainer,children:[(0,r.tZ)(y.G,{css:rd.connectToGitHubTitle,children:(0,r.tZ)(nd,{username:"GitHub Account"})}),(0,r.tZ)(Z.xv,{color:"dimmest",css:rd.notConnectedText,children:"Your GitHub account is not connected."}),a?null:(0,r.tZ)(Ga,{})]}):null]})}function od(e){var n=e.profile,t=e.current,i=e.providerName,o=e.settingsURL,a=e.onSelectProvider,l=n.provider,c=n.username,u=n.email,s=n.avatar,d=(0,Si.D)();return(0,r.BX)(y.G,{onClick:function(){return a(l)},css:rd.profile,children:[(0,r.BX)(y.G,{css:rd.information,children:[(0,r.BX)(y.G,{css:rd.informationRow,children:[(0,r.tZ)(nd,{username:c,avatar:s}),o?(0,r.tZ)(be.Z,{css:rd.settingsButton,text:"".concat(i," Settings"),iconRight:(0,r.tZ)(So.Z,{}),href:o,target:"_blank",outlined:!0,small:!0}):(0,r.tZ)(Z.xv,{color:"dimmest",variant:"small",children:i})]}),(0,r.tZ)(Z.xv,{color:"dimmest",css:rd.email,children:u})]}),(0,r.tZ)(Qs.Y,{css:rd.radio,id:d,checked:t,value:l})]})}var ad=(0,mn.iv)(m.l0.flex.column);function ld(){var e=(0,d.Z)().git,n=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,i,o;return(0,H.__generator)(this,(function(a){return n=e.getCurrentProfile(),t=e.getProfiles(),i=null!==(r=null===n||void 0===n?void 0:n.provider)&&void 0!==r?r:null,o=!e.hasProfile(ya.rG.GITHUB),[2,{profiles:t,current:i,hasGitHub:o,error:null}]}))}));return function(n){return e.apply(this,arguments)}}());if(!n||n.error)return null;var t=n.profiles,i=n.current,o=n.hasGitHub;return(0,r.tZ)(y.G,{css:ad,children:(0,r.tZ)(id,{profiles:t,current:i,showConnectToGithub:o,onSelectProvider:function(n){e.setCurrentProfile(n),n===ya.rG.REPLIT_DEFAULT?Da("profile-changed",{profile:"replit"}):n===ya.rG.GITHUB&&Da("profile-changed",{profile:"github"})}})})}var cd=t(75920),ud=t(14654),sd=t(51631);function dd(){var e=(0,Wt.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return dd=function(){return e},e}function fd(){var e=(0,Wt.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return fd=function(){return e},e}function pd(){var e=(0,Wt.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return pd=function(){return e},e}var hd={},vd=(0,Ht.Ps)(dd());fd();var gd=(0,Ht.Ps)(pd());var md=(0,mn.iv)(m.l0.color.accentNegativeStronger,m.l0.pl(4));function yd(e){var n=e.remoteName,t=e.updateRemote,i=(0,d.Z)().git,l=Sa(),c=(0,Si.H)(),u=(0,ze.Z)(),s=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useState)(),h=p[0],v=p[1],g=function(e){var n=(0,M.Z)({},hd,e);return zt.a(vd,n)}({variables:{replId:u}}).data,b="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,x=b.description,k=b.isPrivate,C=b.url,S=(0,o.Z)(function(e){var n=(0,M.Z)({},hd,e);return tr.D(gd,n)}(),2),T=S[0],E=S[1].loading,R=(0,Ea.v)({onAuth:function(){Da("github-user-connected")}}),I=(0,a.useState)(null===k||void 0===k||k),D=I[0],G=I[1],P=(0,a.useState)(w),_=P[0],B=P[1],A=(0,a.useState)(),U=A[0],L=A[1],N=(0,a.useState)(null!==x&&void 0!==x?x:C&&"Repository for https://replit.com".concat(C)),X=N[0],F=N[1],W=(0,a.useState)(),z=W[0],V=W[1],j=function(){var e=(0,O.Z)((function(e){var r,o,a;return(0,H.__generator)(this,(function(l){switch(l.label){case 0:return[4,i.getRemotes()];case 1:return(r=l.sent()).error?(v("Error finding current remotes, ".concat(r.error)),[2]):r.remotes.has(n)?[4,i.setRemoteURL({remote:n,url:e})]:[3,3];case 2:return(o=l.sent()).error?(v("Error (".concat(o.error,") setting ").concat(n," to use ").concat(e," as a remote.")),[2]):(t(e),Da("remote-edited"),[2]);case 3:return[4,i.addRemote({name:n,url:e})];case 4:return(a=l.sent()).error?(v("Error (".concat(a.error,") adding ").concat(n," ").concat(e," as a remote.")),[2]):(t(e),Da("remote-added"),[2])}}))}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,O.Z)((function(){var e,n,t,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:return L(void 0),V(void 0),v(void 0),_?(0,$c.GE)(_)?[4,T({variables:{input:{name:_,description:null!==x&&void 0!==x?x:null,homepage:"replit.com".concat(C),isPrivate:D,ownerType:sd.xJ.User}}})]:(L("Invalid remote name."),[2]):[2];case 1:return r=i.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)?(v(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)&&(j(r.data.createGithubRepo.remoteUrl),Da("github-repository-published")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return l?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{color:"dimmest",children:"Repository name"}),(0,r.tZ)(pe.II,{ref:s,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:_,onChange:function(e){L(void 0),B(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var n;"Enter"===e.key&&(e.preventDefault(),null===(n=f.current)||void 0===n||n.focus())}}),(0,r.tZ)(Z.xv,{css:md,children:U}),(0,r.tZ)($s.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",children:"Repository description"}),(0,r.tZ)(pe.B,{ref:f,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==X&&void 0!==X?X:void 0,onChange:function(e){V(void 0),F(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,r.tZ)(Z.xv,{css:md,children:z}),(0,r.tZ)($s.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",children:"Privacy"}),(0,r.BX)(cd.hE,{tag:"fieldset",id:c("privacy"),name:c("privacy"),value:D,onChange:function(e){return G(e)},row:!0,css:[m.l0.width("100%")],children:[(0,r.tZ)(cd.rK,{id:c("false"),value:!1,text:"Public",icon:(0,r.tZ)(ud.Z,{})}),(0,r.tZ)(cd.rK,{id:c("true"),value:!0,text:"Private",icon:(0,r.tZ)(Xe.Z,{})})]}),(0,r.tZ)($s.Z,{height:2}),(0,r.tZ)(ne.zx,{text:E?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,r.tZ)(Ra.Z,{}),onClick:q,loading:E}),h?(0,r.tZ)(Z.xv,{css:md,maxLines:2,children:h}):null]}):(0,r.tZ)(y.G,{children:(0,r.tZ)(ne.zx,{colorway:"primary",iconLeft:(0,r.tZ)(Ra.Z,{}),text:"Connect to GitHub",onClick:R})})}var Zd=(0,mn.iv)(m.l0.rowWithGap(4)),bd=(0,mn.iv)(m.l0.flex.growAndShrink(1)),wd=(0,mn.iv)(m.l0.color.accentNegativeStronger,m.l0.pl(4));function xd(e){var n=e.initialRemoteUrl,t=e.remoteName,i=e.updateRemote,o=(0,d.Z)().git,l=(0,a.useState)(),c=l[0],u=l[1];(0,a.useEffect)((function(){u(void 0)}),[n]);var s=(0,a.useState)(),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],g=h[1],m=function(){var e=(0,O.Z)((function(){var e,n,r,a;return(0,H.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(g(!0),!(0,$c.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(t)?[4,o.setRemoteURL({remote:t,url:c})]:[3,3];case 2:if((n=l.sent()).error)throw Error("Error (".concat(n.error,") setting ").concat(t," to use ").concat(c," as a remote."));return Da("remote-edited"),i(c),[2];case 3:return[4,o.addRemote({name:t,url:c})];case 4:if((r=l.sent()).error)throw Error("Error (".concat(r.error,") adding ").concat(t," ").concat(c," as a remote."));return Da("remote-added"),[3,7];case 5:return a=l.sent(),p(a.message),[3,7];case 6:return g(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.BX)(y.G,{children:[(0,r.tZ)(pe.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){p(void 0),u(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&m()}}),f?(0,r.tZ)(Z.xv,{variant:"small",css:wd,children:f}):null,c&&c!==n?(0,r.BX)(r.HY,{children:[(0,r.tZ)($s.Z,{height:1}),(0,r.BX)(y.G,{css:Zd,children:[(0,r.tZ)(ne.zx,{css:bd,text:"Cancel",iconLeft:(0,r.tZ)(bn.Z,{}),onClick:function(){return u(void 0)}}),(0,r.tZ)(ne.zx,{css:bd,text:v?"Saving\u2026":"Save",loading:v,colorway:"primary",iconLeft:(0,r.tZ)(oe.Z,{}),onClick:m})]})]}):null]})}var kd=(0,mn.iv)(m.l0.border({width:1,color:m.TV.outlineDimmer}),m.l0.borderRadius(8)),Cd=(0,mn.iv)(mc.gU.filled,m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(8),m.l0.py(4),m.l0.borderRadius(8,8,0,0)),Sd=(0,mn.iv)(m.l0.borderRadius(8,8,0,0)),Td=(0,mn.iv)(m.l0.borderRadius(8)),Ed=(0,mn.iv)(m.l0.p(8)),Rd=(0,mn.iv)(m.l0.flex.growAndShrink(1));function Id(e){var n=e.title,t=e.expanded,i=e.content,o=e.onClick;return(0,r.BX)(y.G,{css:kd,children:[(0,r.BX)(y.G,{css:[Cd,t?Sd:Td],onClick:o,children:[(0,r.tZ)(y.G,{css:Rd,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),t?(0,r.tZ)(je.Z,{size:20}):(0,r.tZ)(Ve.Z,{size:20})]}),t?(0,r.tZ)(y.G,{css:Ed,children:i}):null]})}var Dd,Gd="origin";function Pd(){var e=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,i,a;return(0,H.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(n=l.sent()).error?[2,{url:void 0,name:Gd,error:n.error}]:(r=(0,o.Z)(null!==(t=n.remotes.values())&&void 0!==t?t:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(a=i.name)&&void 0!==a?a:Gd,error:null}]:[2,{url:void 0,name:Gd,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}());return null==e?(0,r.BX)(y.G,{css:m.l0.center,children:[(0,r.tZ)(Z.xv,{color:"dimmest",children:"Loading remote information."}),(0,r.tZ)(Kc,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,r.tZ)(_d,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function _d(e){var n=e.initialRemoteUrl,t=e.remoteName,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=function(e){l(e)};return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Remote"}),(0,r.tZ)($s.Z,{height:1}),(0,r.tZ)(xd,{remoteName:t,initialRemoteUrl:o,updateRemote:d}),(0,r.tZ)($s.Z,{height:2}),(0,r.tZ)(Id,{title:"GitHub",expanded:u===Dd.GitHub,onClick:function(){return s((function(e){return e===Dd.GitHub?void 0:Dd.GitHub}))},content:(0,r.tZ)(yd,{remoteName:t,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}(Dd||(Dd={}));var Bd=(0,mn.iv)(m.l0.px(16));function Ad(){return(0,r.BX)(y.G,{css:Bd,children:[(0,r.tZ)($s.Z,{height:2}),(0,r.tZ)(Pd,{}),(0,r.tZ)($s.Z,{height:2}),(0,r.tZ)(Ud,{})]})}function Ud(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Commit author"}),(0,r.tZ)($s.Z,{height:1}),(0,r.tZ)(ld,{})]})}var Ld=(0,mn.iv)(m.l0.colWithGap(16),m.l0.p(8),m.l0.pt(16)),Nd=(0,mn.iv)(m.l0.colWithGap(16)),Xd=(0,mn.iv)(m.l0.rowWithGap(8));function Fd(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)("Initial Commit"),o=i[0],l=i[1],c=(0,a.useState)(!0),u=c[0],s=c[1],f=Va(),p=(0,d.Z)().git,h=(0,Si.D)();function v(){return(v=(0,O.Z)((function(){var e,r,i;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return n?[2]:(t(!0),u?[4,p.stageFiles({all:!0})]:[3,2]);case 1:return r=a.sent(),[3,4];case 2:return[4,p.stageFiles({all:!1})];case 3:r=a.sent(),a.label=4;case 4:return(e=r).error?(f(e.error),t(!1),[3,7]):[3,5];case 5:return[4,p.commit({message:o})];case 6:(i=a.sent()).error?(f(i.error),t(!1)):p.forceRefresh(),a.label=7;case 7:return[2]}}))}))).apply(this,arguments)}return(0,r.BX)(y.G,{children:[(0,r.tZ)(Md,{}),(0,r.BX)(y.G,{css:Ld,children:[(0,r.tZ)(re.E,{colorway:"orange",icon:(0,r.tZ)(ao.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,r.BX)(y.G,{css:Nd,children:[(0,r.tZ)(Fu,{message:o,onMessageChange:l,disabled:n}),(0,r.BX)(y.G,{css:Xd,tag:"label",children:[(0,r.tZ)(As.X,{id:h,checked:u,onChange:function(e){return s(e.target.checked)}}),(0,r.tZ)(Z.xv,{children:"Include all files in commit"})]}),(0,r.tZ)(ne.zx,{text:n?"Committing...":"Create initial commit",iconLeft:n?(0,r.tZ)(he.Z,{}):(0,r.tZ)(oe.Z,{}),colorway:"primary",disabled:!o,loading:n,onClick:function(){return v.apply(this,arguments)}})]})]})]})}var Od=(0,mn.iv)(m.l0.px(8),m.l0.py(4),m.l0.rowWithGap(8),m.l0.backgroundColor.backgroundDefault,m.l0.align.center,{borderBottom:"1px solid ".concat(m.TV.outlineDimmer)});function Md(){var e=Va(),n=(0,ga.Z)(function(){var n=(0,O.Z)((function(n){var t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.status()];case 1:return(t=r.sent()).error&&e(t.error),[2,t]}}))}));return function(e){return n.apply(this,arguments)}}(),[e]);return(null===n||void 0===n?void 0:n.error)?null:(0,r.BX)(y.G,{css:Od,children:[(0,r.tZ)(ge.h,{alt:"Back to dashboard",size:18,disabled:!0,children:(0,r.tZ)(Ya.Z,{})}),(null===n||void 0===n?void 0:n.branch)?(0,r.tZ)(ml,{name:n.branch,current:!0,heading:!0}):null]})}function Wd(e){var n=e.error;return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Failed to start the Git pane."}),(0,r.BX)(Z.xv,{children:["Error: ",n]})]})}var Hd=(0,mn.iv)(m.l0.position.relative,m.l0.display.flex,m.l0.height("100%")),zd=(0,mn.iv)(m.l0.flex.growAndShrink(1),m.l0.overflow("auto"));function Vd(e){var n=e.isActive,t=void 0!==n&&n,i=e.performPaneOperation,o=(0,a.useRef)(),l=(0,a.useState)(kl.CURRENT_BRANCH),c=l[0],u=l[1],s=(0,a.useState)(null),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],g=h[1];!function(e){var n=(0,d.Z)().git;(0,a.useEffect)((function(){e&&n.forceRefresh()}),[e,n])}(t);var m=(0,ga.Z)(function(){var e=(0,O.Z)((function(e){var n,t,r,i,o,a,l,c,u;return(0,H.__generator)(this,(function(s){switch(s.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=s.sent()).error?[2,n]:(t=n.state,r=n.type,i=null,o=null,a=null,r===ha.y5.INITIALIZING?[3,5]:[4,e.status()]);case 2:return(l=s.sent()).error?[2,l]:(i=l,[4,e.getRemotes()]);case 3:return(c=s.sent()).error?[2,c]:(o=c.remotes,i.branch?[4,e.getBranch(i.branch)]:[3,5]);case 4:if((u=s.sent()).error)return[2,u];a=u.branch,s.label=5;case 5:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),y=!m||m.error?null:m.currentBranch,Z=(0,a.useCallback)((function(e){switch(u(e),e){case kl.DASHBOARD:Da("pane-mode-changed",{mode:"dashboard"});break;case kl.BRANCH:Da("pane-mode-changed",{mode:"branch"});break;case kl.CURRENT_BRANCH:Da("pane-mode-changed",{mode:"current-branch"});break;case kl.SETTINGS:Da("pane-mode-changed",{mode:"settings"})}}),[]),b=(0,a.useCallback)((function(){o.current?(Z(o.current),o.current=void 0):Z(kl.DASHBOARD)}),[Z]),w=(0,a.useCallback)((function(e){var n=function(e){o.current=c,Z(e)};switch(e.mode){case kl.DASHBOARD:n(kl.DASHBOARD);break;case kl.BRANCH:if((0,va.p3)(e.branch,y)){n(kl.CURRENT_BRANCH);break}p(e.branch),n(kl.BRANCH);break;case kl.CURRENT_BRANCH:n(kl.CURRENT_BRANCH);break;case kl.SETTINGS:n(kl.SETTINGS)}}),[Z,c,y]),x=(0,a.useCallback)((function(e){var n=(0,G.Dp)({path:e});i({operation:"open",pane:{type:n,data:{path:e}}})}),[i]),k=(0,a.useCallback)((function(){g(!0)}),[]);if(c===kl.BRANCH&&(0,va.p3)(f,y)&&Z(kl.CURRENT_BRANCH),(0,a.useEffect)((function(){return g(!1)}),[m]),v||!m||m.error)return(0,r.tZ)(jd,{children:(null===m||void 0===m?void 0:m.error)?(0,r.tZ)(Wd,{error:m.error}):(0,r.tZ)(Kc,{})});var C=m.status,S=m.remotes,T=m.state;switch(m.type){case ha.y5.INITIALIZING:case ha.y5.INTERMEDIATE:case ha.y5.DETACHED_HEAD:return(0,r.tZ)(jd,{children:(0,r.tZ)(qd,{state:T,onFileClick:x,gotoPendingState:k})});case ha.y5.NORMAL:return c===kl.BRANCH&&!f||c===kl.CURRENT_BRANCH&&!y?(0,r.tZ)(jd,{header:(0,r.tZ)(El,{mode:kl.DASHBOARD,branch:null,switchMode:w,onBack:b}),children:(0,r.tZ)(_s,{currentBranch:null,switchMode:w})}):(0,r.tZ)(jd,{header:(0,r.tZ)(El,{mode:c,branch:c===kl.CURRENT_BRANCH?y:f,switchMode:w,onBack:b}),children:(0,r.tZ)(Yd,{mode:c,status:C,remotes:S,previewBranch:f,currentBranch:y,switchMode:w,onStagedFileClick:x,gotoPendingState:k})})}}function jd(e){var n=e.header,t=e.children;return(0,r.tZ)(Ke.zt,{scope:Wa,children:(0,r.BX)(y.G,{css:Hd,children:[(0,r.tZ)(qa,{}),n,(0,r.tZ)(y.G,{css:zd,children:t})]})})}function qd(e){var n=e.state,t=e.onFileClick,i=e.gotoPendingState;switch(n){case ha.yG.NOT_INITIALIZED:return(0,r.tZ)(qs,{});case ha.yG.ON_UNBORN_BRANCH:return(0,r.tZ)(Fd,{});case ha.yG.MERGING:return(0,r.tZ)(Hs,{onFileClick:t,gotoPendingState:i});case ha.yG.REBASING:return(0,r.tZ)(Ys,{});case ha.yG.REVERTING:return(0,r.tZ)(Ks,{});case ha.yG.CHERRY_PICKING:return(0,r.tZ)(vs,{});case ha.yG.APPLYING_MAILBOX:return(0,r.tZ)(Bl,{});case ha.yG.BISECTING:return(0,r.tZ)(Al,{});case ha.yG.DETACHED_HEAD:return(0,r.tZ)(Bs,{});default:return null}}function Yd(e){var n=e.mode,t=e.status,i=e.remotes,o=e.previewBranch,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,u=e.gotoPendingState;switch(n){case kl.DASHBOARD:return(0,r.tZ)(_s,{currentBranch:a,switchMode:l});case kl.BRANCH:return(0,r.tZ)(ps,{status:t,branch:o,remotes:i,onStagedFileClick:c,gotoPendingState:u});case kl.CURRENT_BRANCH:return(0,r.tZ)(ps,{status:t,remotes:i,branch:a,onStagedFileClick:c,gotoPendingState:u,current:!0});case kl.SETTINGS:return(0,r.tZ)(Ad,{});default:(0,ma.Z)(n)}}var Kd={Content:function(e){var n=e.options,t=n.isActive,i=n.performPaneOperation;return(0,r.tZ)(Vd,{isActive:t,performPaneOperation:i})},Icon:function(e){var n=e.size;return(0,r.tZ)(pa.Z,{size:n})},getTitle:function(){return"Git"}},$d=t(21303),Qd=t(43668);function Jd(e){var n=e.reversed,t=void 0!==n&&n,i=e.hideName,l=void 0!==i&&i,c=e.color,u=void 0===c?"default":c,s=(0,o.Z)((0,$d.bA)(),1)[0],d=(0,a.useMemo)((function(){return[t?m.l0.rowReverseWithGap(4):m.l0.rowWithGap(4),m.l0.align.center]}),[t]);if(!s)return null;if(0===s.count)return(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(Qd.Z,{size:24}),(0,r.tZ)(Z.xv,{color:u,children:"Server Authored"})]});var f=s.changes[s.version];if(!s.users)return(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(Ec.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Unknown"})]});var p=s.users[f.userId];return p?(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(Ec.q,{size:24,src:p.image,username:p.username}),l?null:(0,r.tZ)(Z.xv,{color:u,children:p.username})]}):f.timestamp>16546464e5?(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(Qd.Z,{size:24}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Server Authored"})]}):(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(Ec.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Unknown"})]})}function ef(){var e=(0,Wt.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ef=function(){return e},e}function nf(){var e=(0,Wt.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return nf=function(){return e},e}var tf=(0,Ht.Ps)(ef());nf();var rf=t(4821),of=t(66091),af=t(5683),lf=t(83451),cf=t(45347),uf=function(e){(0,af.Z)(t,e);var n=(0,cf.Z)(t);function t(e){var r;return(0,of.Z)(this,t),(r=n.call(this,e)).name="UserError",r}return t}((0,lf.Z)(Error));function sf(e,n,t){return new Promise((function(r,i){try{var o=e.watchTextFile(n,{onReady:function(){var e=(0,O.Z)((function(e){var n,a;return(0,H.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var df,ff=rf.I;function pf(e,n){return hf.apply(this,arguments)}function hf(){return hf=(0,O.Z)((function(e,n){var t,r,i,o,a,l,c,u,s,d,f,p,h,v,g,m,y,Z;return(0,H.__generator)(this,(function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&t.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?[2,{}]:t.size>=ff?[2,df.TooManyUsersRequestedError]:[4,e.query({query:tf,variables:{ids:Array.from(t)}})];case 1:if(u=b.sent(),s=u.data,d=u.error)throw d;f=s.currentUser?[s.currentUser].concat((0,vr.Z)(s.usersByIds)):s.usersByIds,p={},h=!0,v=!1,g=void 0;try{for(m=f[Symbol.iterator]();!(h=(y=m.next()).done);h=!0)Z=y.value,p[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(w){v=!0,g=w}finally{try{h||null==m.return||m.return()}finally{if(v)throw g}}return[2,p]}}))})),hf.apply(this,arguments)}function vf(){return vf=(0,O.Z)((function(e,n,t){var r,i,o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return[4,sf(e,t,function(){var e=(0,O.Z)((function(e){var n,t;return(0,H.__generator)(this,(function(r){return n=e.fetchChanges,0===(t=e.version)?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]}))}));return function(n){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,pf(n,i)]);case 2:return(o=a.sent())===df.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),vf.apply(this,arguments)}function gf(e,n,t){return sf(e,n,function(){var n=(0,O.Z)((function(n){var r,i,o,a,l,c,u,s,d;return(0,H.__generator)(this,(function(f){switch(f.label){case 0:if(r=n.fetchChanges,i=n.writeChange,o=n.version,t>o)throw new Error("Cannot restore to a version that does not exist");if(t===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new uf("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new uf("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,dt.Z)(a.slice(t,a.length).reverse()),u=c[0],s=c.slice(1),d=s.reduce((function(e,n){return e.compose(n.invertedChanges)}),u.invertedChanges);try{i(d)}catch(p){throw ce.c_.captureException(p),new uf("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(df||(df={}));var mf=t(46889),yf=(0,mn.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function Zf(){var e=(0,Ce.Z)().showError,n=(0,a.useState)(!1),t=n[0],i=n[1],l=(0,a.useState)(!1),c=l[0],u=l[1],s=(0,a.useContext)($d.ox).closeHistory,f=(0,d.Z)().fs,p=(0,o.Z)((0,$d.bA)(),1)[0],h=(0,mf.j)(),v="Restore",g=!0;function b(){return(b=(0,O.Z)((function(){var n,t,r;return(0,H.__generator)(this,(function(o){switch(o.label){case 0:if(!p||!f||c)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),u(!0),(0,mf.p)("versionRestored"),n=p.filePath,t=p.version,[4,gf(f,n,t+1)];case 2:return o.sent(),null===s||void 0===s||s(),[3,5];case 3:return r=o.sent(),(0,Za.Z)(r,uf)?(e(r.message),[2]):(h(r,"restore"),[3,5]);case 4:return i(!1),u(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return p?0===p.count?(v="No history",g=!0):c||t?(v="Restoring...",g=!0):p.playing?(v="Playing...",g=!0):p.version===p.count-1?(v="Viewing latest",g=!0):(v="Restore to here",g=!1):(v="Loading...",g=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.zx,{text:v,disabled:g,onClick:function(){return i(!0)},colorway:"primary",iconLeft:(0,r.tZ)(Or.Z,{})}),p&&0!==p.count&&(0,r.tZ)(te.u,{isOpen:t,onRequestClose:function(){c||i(!1)},children:(0,r.BX)(y.G,{css:m.l0.colWithGap(24),children:[(0,r.tZ)(Z.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(ie.T,{elevated:!0,css:[m.l0.px(16),m.l0.py(12),m.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:yf,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:p.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[p.version+1,(0,r.BX)("span",{css:[m.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:m.l0.mx(8),children:"/"}),p.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Tc.E,{date:p.changes[p.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Jd,{})})]})}),(0,r.tZ)(re.E,{icon:(0,r.tZ)(Co.Z,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,r.tZ)(ne.zx,{text:"Cancel",disabled:c,onClick:function(){return i(!1)}}),(0,r.tZ)(ne.zx,{text:c?"Restoring Version...":"Restore Version",disabled:c,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(Or.Z,{})})]})]})})]})}var bf=t(12808);function wf(e,n){var t=(0,o.Z)((0,$d.bA)(),1)[0],i=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,(function(){return i.current})),t&&i.current&&(i.current.setAttribute("aria-valuemin","1"),i.current.setAttribute("aria-valuemax",String(t.count)),i.current.setAttribute("aria-valuenow",String(t.version+1)));var l=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:m.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(m.TV.foregroundDefault," inset")}}})}),[]);return t&&t.count>1?l:null}var xf=(0,a.forwardRef)(wf);function kf(e,n){var t=(0,o.Z)((0,$d.bA)(),1)[0],i=(0,a.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:m.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:m.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[n]),l=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:m.TV.backgroundHighest,borderRadius:"2px"}})})}),[n]);return t&&t.count>1?i:l}var Cf,Sf=(0,a.forwardRef)(kf),Tf=["ArrowLeft","ArrowRight","Home","End"];function Ef(){var e=(0,o.Z)((0,$d.bA)(),2),n=e[0],t=e[1],i=(0,a.useState)(!1),l=i[0],c=i[1],u=(0,a.useRef)(null),s=(0,a.useRef)(null),d=(0,a.useRef)(null),f=function(e){(0,bf.A)(u,"--scrubber-transition-time",e)},p=function(e){(0,bf.A)(u,"--scrubber-progress",e.toString())};if(n&&!l){var h=n.version/(n.count-1);p(h),n.playing?f("50ms"):f("100ms")}return(0,a.useEffect)((function(){if(n&&s.current&&d.current&&!l){var e=s.current,r=d.current,i=function(i){if(0===i.button){c(!0),r.focus();var o=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=o.width,u=a.width,s=i.target===e?u/2:i.clientX-a.left,d=null,h=function(e){var r=e-o.left-s,i=Math.max(0,Math.min(1,r/(l-u)));i!==d&&(d=i,p(i),t({version:Math.round(i*(n.count-1)),playing:!1}))};h(i.clientX);var v=function(e){f("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f("100ms"),c(!1)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),i.preventDefault(),i.stopPropagation()}};return e.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){e.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}}),[n,t,l]),(0,a.useEffect)((function(){if(n&&d.current&&!l){var e=d.current,r=function(e){if(n&&Tf.includes(e.key)){var r=e.shiftKey?10:1,i=n.version,o=n.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(e.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(t({version:c,playing:!1}),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[n,t,l]),(0,a.useMemo)((function(){return(0,r.BX)(y.G,{innerRef:u,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(Sf,{ref:s}),(0,r.tZ)(xf,{ref:d})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(Cf||(Cf={}));var Rf=t(57843);function If(e){var n=(0,a.useState)({data:null,loading:!0,error:null,handledError:null}),t=n[0],r=n[1],i=(0,d.Z)().fs,o=(0,Rf.x)();return(0,a.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var n=!1;return function(e,n,t){return vf.apply(this,arguments)}(i,o,e).then((function(e){var t=e.data,i=e.handledError;n||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:t,loading:!1,error:null,handledError:null})})).catch((function(e){n||((0,Za.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){n=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),t}function Df(){var e=(0,a.useContext)($d.ox).closeHistory;if(!e)throw new Error("history pane context not found");return(0,r.tZ)(ne.zx,{text:"Cancel",onClick:function(){(0,mf.p)("historyExplicitlyClosed"),e()}})}var Gf=t(35458),Pf=(0,mn.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function _f(){var e,n="/replEnvironmentMobile"===(0,td.useRouter)().pathname,t=(0,o.Z)((0,$d.bA)(),2),i=t[0],a=t[1],l=(0,Si.H)(),c=!i||0===i.count;return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center,c?Pf:null],children:[(0,r.tZ)(Gf.Z,{id:l("diffButton"),isOn:null!==(e=null===i||void 0===i?void 0:i.comparing)&&void 0!==e&&e,onChange:function(e){if(!c){var n=e.target.checked;a({comparing:n})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},m.l0.flex.column,m.l0.align.center],htmlFor:l("diffButton"),children:(0,r.tZ)(Z.xv,{children:n?"Compare":"Compare Latest"})})]})}function Bf(){var e=(0,o.Z)((0,$d.bA)(),1)[0],n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var i=e?"default":"dimmer";return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.justify.spaceBetween],children:[(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,children:n}),(0,r.tZ)(Z.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",children:"/"}),(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",children:t})]})}var Af=t(40735),Uf=t(76963);function Lf(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function Nf(){var e,n,t,i,l=(0,o.Z)((0,$d.bA)(),2),c=l[0],u=l[1],s=(null!==(n=null===c||void 0===c||null===(e=c.changes)||void 0===e?void 0:e.length)&&void 0!==n?n:1)-1,d=null!==(t=null===c||void 0===c?void 0:c.version)&&void 0!==t?t:0,f=null!==(i=null===c||void 0===c?void 0:c.playing)&&void 0!==i&&i,p=!c||0===c.count,h=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lf,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useCallback)((function(){n(1)}),[n]),u=(0,a.useCallback)((function(){e+1>t?l(!1):n(e+1)}),[n,e,t]),s=function(){l(!0)},d=function(){l(!1)};return(0,a.useEffect)((function(){if(o){var e=setTimeout((function(){u()}),r(t));return function(){return clearTimeout(e)}}}),[o,u,r,t]),{isPlaying:o,start:s,stop:d,reset:c}}(d,(function(e){return u({version:e})}),s),v=h.isPlaying,g=h.start,m=h.stop;(0,a.useEffect)((function(){v&&!f?m():!v&&f&&g()}),[f,v,g,m]);var y="Loading...";return c&&(v?y="Pause":c.version===c.count-1?y="Play file history from beginning":0===c.version?y="Play file history":c.version>0&&(y="Play file history from here")),(0,r.tZ)(ge.h,{alt:y,size:24,disabled:p,onClick:function(){u(d===s?{version:0,playing:!0}:{playing:!f})},children:v?(0,r.tZ)(Uf.Z,{}):(0,r.tZ)(Af.Z,{})})}function Xf(){return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,r.tZ)(Nf,{}),(0,r.tZ)(Ff,{}),(0,r.tZ)(Bf,{}),(0,r.tZ)(Of,{})]})}function Ff(){var e=(0,o.Z)((0,$d.bA)(),2),n=e[0],t=e[1],i=!n||0===n.version||0===n.count;return(0,r.tZ)(ge.h,{alt:"Move backwards one version",size:24,disabled:i,onClick:function(){n&&n.version>0&&t({version:n.version-1})},children:(0,r.tZ)(Ya.Z,{})})}function Of(){var e=(0,o.Z)((0,$d.bA)(),2),n=e[0],t=e[1],i=!n||n.version===n.count-1||0===n.count;return(0,r.tZ)(ge.h,{alt:"Move forwards one version",size:24,disabled:i,onClick:function(){n&&n.version<n.count-1&&t({version:n.version+1})},children:(0,r.tZ)(Je.Z,{})})}function Mf(){var e=(0,o.Z)((0,$d.bA)(),1)[0];if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,r.tZ)(Tc.E,{textColor:"dimmer",dateFormat:"switch",date:n})}function Wf(e){var n=e.filePath,t="/replEnvironmentMobile"===(0,td.useRouter)().pathname,i=t?m.l0.borderRadius(0):m.l0.borderRadius(0,0,8,8),l=(0,o.Z)((0,$d.bA)(),2),c=l[0],u=l[1],s=(0,mf.j)(),d=If(n),f=d.data,p=d.loading,h=d.error;return(0,a.useEffect)((function(){if(h)s(h,"history2-index",{filePath:n});else if(f&&!p)return u({filePath:n,changes:f.changes,users:f.users}),(0,mf.p)("historyLoaded"),function(){u(null)}}),[n,f,p,h,u,s]),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.p(8),m.l0.zIndex(3),m.l0.overflow("hidden"),i,m.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(m.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(ie.T,{css:[m.l0.position.relative,m.l0.colWithGap(4),m.l0.px(12),m.l0.pt(8),m.l0.pb(8),m.l0.align.center,m.l0.borderRadius(8),m.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(Ef,{}),(0,r.BX)(y.G,{css:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,m.l0.width("100%")],children:[(0,r.tZ)(Xf,{}),c&&c.count>0?(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,r.tZ)(Mf,{}),p||t?null:(0,r.tZ)(Z.xv,{color:"dimmer",children:"\u2022"}),(0,r.tZ)(Jd,{color:"dimmer",hideName:t,reversed:!0})]}):null]})]}),(0,r.BX)(y.G,{css:[m.l0.display.flex,m.l0.flex.row],children:[(0,r.tZ)(Hf,{justify:"flex-start",children:(0,r.tZ)(_f,{})}),(0,r.BX)(Hf,{justify:"flex-end",children:[(0,r.tZ)(Df,{}),(0,r.tZ)(Zf,{})]})]})]})}function Hf(e){var n=e.children,t=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:m.TV.space8,minWidth:0},children:n})}var zf=t(68935),Vf=t(52682),jf=t(47581),qf=t(63230),Yf=(0,jf.B)();function Kf(e){if((0,Za.Z)(e,hr.YW)){var n=e.state.field(Yf.state,!1);return{compareTo:n,changed:e.startState.field(Yf.state,!1)!==n}}return{compareTo:e.field(Yf.state,!1),changed:!1}}function $f(e,n){e.state.field(Yf.state,!1)!==n&&e.dispatch({effects:Yf.effect.of(n)})}var Qf,Jf,ep=hr.QQ.define({create:function(){return null},update:function(e,n){var t=Kf(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new qf.PO(o,r)}}),np=null!==(Qf=globalThis.requestIdleCallback)&&void 0!==Qf?Qf:globalThis.requestAnimationFrame,tp=null!==(Jf=globalThis.cancelIdleCallback)&&void 0!==Jf?Jf:globalThis.cancelAnimationFrame,rp=fr.p.line({class:"cm-diff-deleted"}),ip=function(e){(0,af.Z)(t,e);var n=(0,cf.Z)(t);function t(e,r){var i;return(0,of.Z)(this,t),(i=n.call(this)).insertion=e,i.highlight=r,i}var r=t.prototype;return r.destroy=function(){this.pendingHighlight&&tp(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var n=this;return this.pendingHighlight&&(tp(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=np((function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(r){}}}))),!0},t}(fr.l9),op=hr.QQ.define({create:function(){return fr.p.none},update:function(e,n){var t=n.state.field(ep,!1);if(!t)return fr.p.none;var r=Kf(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,c=!1,u=void 0;try{for(var s,d=function(){var e=s.value,t=new ip(e.content,(function(){return ap(n.state,e.content)}));o(0,fr.p.widget({widget:t,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(s=f.next()).done);l=!0)d()}catch(Z){c=!0,u=Z}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}}var p=!0,h=!1,v=void 0;try{for(var g,m=function(){var e=g.value;if(e.isDeleted&&o(e.from,rp),e.insertions){var t=!0,r=!1,i=void 0;try{for(var a,l=function(){var t=a.value,r=new ip(t.content,(function(){return ap(n.state,t.content)}));o(e.to,fr.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)l()}catch(Z){r=!0,i=Z}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}},y=t.lines()[Symbol.iterator]();!(p=(g=y.next()).done);p=!0)m()}catch(Z){h=!0,v=Z}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}return fr.p.set(i,!0)},provide:function(e){return fr.tk.decorations.from(e)}});function ap(e,n){var t,r=document.createDocumentFragment(),i=null===(t=e.facet(zf.dK))||void 0===t?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l={style:function(n){return(0,zf.QN)(e,n)}},c=0;if((0,Vf.bW)(a,l,(function(e,t,i){if(e>c){var o=document.createElement("span");o.textContent=n.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),c=t})),c<n.length){var u=document.createElement("span");u.textContent=n.slice(c),r.append(u)}return r}var lp,cp=function(e){(0,af.Z)(t,e);var n=(0,cf.Z)(t);function t(e){var r;return(0,of.Z)(this,t),(r=n.call(this)).line=e,r}var r=t.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},t}(fr.SJ),up=function(e){(0,af.Z)(t,e);var n=(0,cf.Z)(t);function t(e,r){var i;return(0,of.Z)(this,t),(i=n.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=t.prototype;return r.eq=function(e){var n,t,r,i;if((null===(n=this.lines)||void 0===n?void 0:n.length)!==(null===e||void 0===e||null===(t=e.lines)||void 0===t?void 0:t.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var u=this.lines[c],s=e.lines[c];if(u.height!==s.height||u.left!==s.left||u.right!==s.right)return!1}return!0},r.toDOM=function(){var e,n=this,t=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i+=s.height;var d=this.piece(s);d.style.position="absolute",d.style.top="-".concat(i,"px"),t.prepend(d)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return n.piece(e)}));return(e=t).append.apply(e,(0,vr.Z)(f)),t},r.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),null!==t&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},t}(fr.SJ),sp=(0,fr.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=Kf(e.state).compareTo,i=e.state.field(ep,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=e.state.doc.lineAt(d.from).number;if(d.type===fr.kH.Text)o(d.from,new cp(f));else if(Array.isArray(d.type)){var p=!0,h=!1,v=void 0;try{for(var g,m=d.type[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var y=g.value;if(y.type===fr.kH.Text){o(y.from,new cp(f));break}}}catch(ie){h=!0,v=ie}finally{try{p||null==m.return||m.return()}finally{if(h)throw v}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return hr.Xs.of(t,!0)}var Z=!0,b=!1,w=void 0;try{for(var x,k=n[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value,S=[],T=e.state.doc.lineAt(C.from).number,E=i.line(T);if(E){var R,I=e.defaultLineHeight,D=E.offset,G=E.isDeleted,P=E.insertions,_=1===T?i.startInsertions():null,B=_?_.length:0,A=_?[]:null;if(Array.isArray(C.type)&&C.type.length>=B+(null!==(R=null===P||void 0===P?void 0:P.length)&&void 0!==R?R:0)+1){for(var U=0;U<C.type.length;U++){var L=C.type[U];if((null===L||void 0===L?void 0:L.type)===fr.kH.Text){if(_&&A)for(var N=0;N<_.length;N++){var X,F=_[N],O=C.type[U-N-1];A.push({height:null!==(X=null===O||void 0===O?void 0:O.height)&&void 0!==X?X:I,left:null,right:F.number})}if(S.push({height:L.height,left:T,right:G?null:T+D}),P)for(var M=0;M<P.length;M++){var W,H=P[M],z=C.type[U+M+1];S.push({height:null!==(W=null===z||void 0===z?void 0:z.height)&&void 0!==W?W:I,left:null,right:H.number})}break}}o(C.from,new up(S,A))}else{if(_&&A){var V=!0,j=!1,q=void 0;try{for(var Y,K=_[Symbol.iterator]();!(V=(Y=K.next()).done);V=!0){var $=Y.value;A.push({height:I,left:null,right:$.number})}}catch(ie){j=!0,q=ie}finally{try{V||null==K.return||K.return()}finally{if(j)throw q}}}if(S.push({height:C.height,left:T,right:G?null:T+D}),P){var Q=!0,J=!1,ee=void 0;try{for(var ne,te=P[Symbol.iterator]();!(Q=(ne=te.next()).done);Q=!0){var re=ne.value;S.push({height:I,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==te.return||te.return()}finally{if(J)throw ee}}}o(C.from,new up(S,A))}}}}catch(ie){b=!0,w=ie}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}return hr.Xs.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){if(Kf(i.value).changed)return!0}}catch(a){t=!0,r=a}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new cp(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return Kf(n.state).compareTo?new up([{height:0,left:t,right:t}]):new cp(t)}}),dp="#0053A644",fp="#c93c3733",pp=[fr.tk.theme({".cm-diff-inserted":{backgroundColor:dp},".cm-diff-deleted":{backgroundColor:fp},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:dp,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:fp,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),Yf.state,ep,op,sp,(0,zf.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],hp=t(57988),vp=function(){function e(n){var t=this;(0,of.Z)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,u=t.elements.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=s.dom,f=s.pos,p=s.offsetX,h=s.offsetY,v=t.view.coordsAtPos(f),g=t.view.lineBlockAt(f);if(v){var m=g.top-r+n.top+t.view.documentPadding.top,y=Math.round((v.top-m)/t.view.defaultLineHeight)*t.view.defaultLineHeight+m,Z=i+v.left-n.left+p,b=r+y-n.top+h;e.push({dom:d,x:Z,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none","continue";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame((function(){n.style.transition=""}))},a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,hr.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(lp||(lp={}));var gp=Symbol.iterator,mp=function(){function e(n){(0,of.Z)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(!(t-u.time>this.duration)){var s=n.changes.mapPos(u.from,-1,hr.gc.TrackDel),d=n.changes.mapPos(u.to,-1,hr.gc.TrackDel);if(null!==s&&null!==d){var f=u.cursor;n.docChanged&&(f=!1),r.set(s,d,u.time,u.type,f)}}}}catch(p){o=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges((function(e,n,i,o){var a=i!==o?lp.Insertion:lp.Deletion;r.set(i,o,t,a,!0)}),!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,H.__generator)(this,(function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},n[gp]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.values()[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;e.push(f)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){t=!0,r=p}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),yp=1e3,Zp="cm-flash-insertion",bp="cm-flash-deletion",wp="cm-flash-element",xp=fr.tk.theme((0,i.Z)({},".".concat(Zp,", .").concat(bp),{display:"inline-block"}));function kp(e){return fr.p.mark({class:bp,tagName:wp,attributes:{"data-time":e.toString()}})}function Cp(e,n){var t=e===lp.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var Sp=function(e){(0,af.Z)(t,e);var n=(0,cf.Z)(t);function t(){return(0,of.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,Za.Z)(e,t)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,n;null===(e=this.animation)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>yp)){var t=this.type===lp.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:yp,easing:"ease-in-out",delay:-n};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,hp.Z)(t,[{key:"type",get:function(){return this.classList.contains(Zp)?lp.Insertion:lp.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),t}((0,lf.Z)(HTMLElement));customElements.get(wp)||customElements.define(wp,Sp);var Tp=function(){function e(n){(0,of.Z)(this,e),this.view=n,this.prevFlashes=new mp(yp),this.decorations=fr.p.set([]),this.hasRenderedOnce=!1,this.overlay=new vp(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(this.hasRenderedOnce){var n,t=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.type){case lp.Insertion:r.push({from:u.from,to:u.to,value:(n=u.time,fr.p.mark({class:Zp,tagName:wp,attributes:{"data-time":n.toString()}}))});break;case lp.Deletion:var s=e.state.wordAt(u.from);s&&r.push({from:s.from,to:u.to,value:kp(u.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,p=!1,h=void 0;try{for(var v,g=t.cursors()[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value,y=m.type,Z=m.pos,b=Cp(y,d);this.overlay.addElement(b,Z)}}catch(w){p=!0,h=w}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}this.prevFlashes=t,this.decorations=fr.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),Ep=fr.lg.fromClass(Tp,{decorations:function(e){return e.decorations}}),Rp=hr.Wl.lowest([xp,Ep]),Ip=t(74121),Dp=t(52491),Gp=t(20864),Pp=function(){function e(n){(0,of.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges((function(e,n,t,o){i||(r||(r=o),t!==o&&(i=!0))})),a.forward.push(n),a.inverted.push(t),a.locations.push(r)},c=n[Symbol.iterator]();!(t=(o=c.next()).done);t=!0)l()}catch(u){r=!0,i=u}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||n>this.length||e<0||n<0)throw new Error("Invalid version range");if(e===n){if(0===this.length)return[hr.as.empty(0),null];var t=this.forward[e].newLength;return[hr.as.empty(t),null]}var r,i=_p(e<n?this.forward.slice(e,n):this.inverted.slice(n,e).reverse()),o=e<n?e:n-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var n=(0,o.Z)(this.slice(0,e),1)[0],t=hr.xv.of([""]);return n.apply(t).sliceString(0)},(0,hp.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function _p(e){if(0===e.length)return hr.as.empty(0);if(1===e.length)return e[0];var n=(0,dt.Z)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i=i.compose(s)}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}function Bp(e,n){var t=(0,a.useMemo)((function(){return(null===n||void 0===n?void 0:n.changes)?new Pp(n.changes):null}),[null===n||void 0===n?void 0:n.changes]),r=(0,a.useMemo)((function(){return t?t.documentFor(t.length):null}),[t]),i=(0,a.useRef)({current:-1,next:0,pending:!1});(0,a.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,a.useEffect)((function(){if(e&&n&&t){n.comparing?$f(e,r):$f(e,null);var a=i.current;a.next=n.version,a.pending||a.current===a.next||(a.pending=!0,requestAnimationFrame((function(){!1!==a.pending&&(a.pending=!1,e&&t&&a.current!==a.next&&(!function(e,n,t,r){var i=(0,o.Z)(n.slice(t+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var c=(0,o.Z)(n.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:a,effects:l?fr.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,t,a.current,a.next),a.current=a.next))})))}}),[e,n,t,r])}var Ap=t(88253),Up=[Rp,pp];function Lp(e){var n=e.filePath,t=(0,o.Z)((0,$d.bA)(),1)[0],i=(0,ee.Z)(),l=i.ref,c=i.view;(0,Ip.VD)(c),(0,$d._H)(c);var u=(0,mf.j)();(0,Dp.Y)({view:c}),Bp(c,t);var s=(0,td.useRouter)(),d=(0,L.Vg)(s),f=Ap.U.use(d),p=(0,a.useMemo)((function(){return[f,Up]}),[f]);return(0,r.tZ)("div",{css:Gp.ev,children:(0,r.tZ)("div",{css:Gp.ac,children:t&&0===t.count?(0,r.tZ)(Np,{}):(0,r.tZ)("div",{css:Gp.ac,children:(0,r.tZ)(J.Z,{ref:l,css:Gp.Mp,filePath:n,extensions:p,initializing:!t,onException:function(e){u(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function Np(){return(0,r.tZ)("div",{css:[Gp.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var Xp={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(Fp,(0,W.Z)((0,M.Z)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,r.tZ)(Or.Z,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,v.UO)(e.data.path)):"History - no file open"}};function Fp(e){var n=e.path,t=e.performPaneOperation,i=(0,$d.EI)(n,t),o=(0,Bn.Mp)({path:n,performPaneOperation:t});return(0,A.L5)((function(){if(o)return{commands:o}}),[o]),n?(0,r.tZ)(Ke.zt,{scope:Ip.d8,children:(0,r.tZ)($d.ox.Provider,{value:i,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(Bn.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(Lp,{filePath:n}),(0,r.tZ)(Wf,{filePath:n})]})})}):null}var Op=t(91715),Mp=t.n(Op),Wp=t(89025),Hp=t(86785),zp=(0,b.X)({create:[m.l0.colWithGap(8),m.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[m.l0.position.absolute,m.l0.top(8),m.l0.left("50%"),{transform:"translateX(-50%)"}]});function Vp(e){var n=e.data,t=e.onSave,i=a.useRef(null),l=a.useRef(null),c=(0,d.Z)().fs,u=(0,Ce.Z)(),s=u.showError,p=u.showConfirm,h=(0,o.Z)(a.useState(!1),2),v=h[0],g=h[1],m=(0,f.Z)((function(){var e=i.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return a.useEffect((function(){var e=i.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=Mp()({canvas:e,data:n}),o=function(){return t(r.save())};return r.on("change",o),r.on("save",o),r.on("export",(function(){return g(!0)})),l.current=r,e.focus(),function(){r&&r.cleanUp(),l.current&&(l.current=null)}}}),[n,t,i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)("canvas",{css:zp.canvas,ref:function(e){i.current=e,m(e)},tabIndex:0}),(0,r.tZ)(te.u,{isOpen:v,onRequestClose:function(){return g(!1)},children:(0,r.tZ)(Wp.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return g(!1)},onConfirm:function(e){if(l.current){var n="".concat(e,".png"),t=l.current.curFrame().toPNG();c.writeFile(n,Ci.Z.from(t)).then((function(e){e.error?s("Failed to write to file ".concat(n)):(p("Successfully exported to ".concat(n)),g(!1))}))}else g(!1)}})})]})}function jp(e){var n=e.activeFile,t=(0,d.Z)().fs,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],u=(0,o.Z)(a.useState(null),2),s=u[0],f=u[1],p=(0,Ce.Z)().showError,h=n.endsWith(".kbmsprite");a.useEffect((function(){var e=!1;function r(){return(r=(0,O.Z)((function(){var r,i,o;return(0,H.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.readFile(n)];case 1:return r=a.sent(),c(!1),e?[2]:r.error?(p("failed to read ".concat(n)),[2]):(i=r.content.toString(),o=i&&JSON.parse(i),f(h?(0,Hp.C)(o):o),[2])}}))}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[t,n,p,h]);var v=a.useCallback(function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return h?[4,(0,Hp.u)(e)]:[3,2];case 1:e=r.sent(),r.label=2;case 2:return[4,t.writeFile(n,Ci.Z.from(JSON.stringify(e)))];case 3:return r.sent().error&&p("Failed to save ".concat(n,", please try again")),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,n,p,h]);return l?(0,r.tZ)(he.Z,{}):s?(0,r.tZ)(Vp,{data:s,onSave:v}):(0,r.tZ)(qp,{onCreate:function(e){return f(e)}})}function qp(e){var n=e.onCreate,t=(0,o.Z)(a.useState(""),2),i=t[0],l=t[1],c=(0,o.Z)(a.useState(""),2),u=c[0],s=c[1],d=Number(i),f=Number(u),p=d>0&&f>0;return(0,r.BX)(y.G,{css:zp.create,children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Create a Pedit file"}),(0,r.tZ)(pe.II,{placeholder:"width",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.tZ)(pe.II,{placeholder:"height",value:u,onChange:function(e){return s(e.target.value)}}),(0,r.tZ)(ne.zx,{text:"Create",disabled:!p,onClick:function(){n({width:Math.ceil(d),height:Math.ceil(f)})}})]})}var Yp={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(Kp,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(j.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Kp(e){var n=e.path,t=e.performPaneOperation,i=(0,Bn.Mp)({path:n,performPaneOperation:t});return(0,A.L5)((function(){if(i)return{commands:i}}),[i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bn.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(Bn.VY,{children:(0,r.tZ)(jp,{activeFile:n})})]})}var $p=t(71603),Qp=t(53472),Jp={Content:function(e){var n=e.options,t=function(){var e=i().find((function(e){var n=(0,o.Z)(e,2);n[0];return"runnerOutput"===n[1].type}));if(e)return e[0]},i=(0,Qp.nC)(),a=(0,A.dr)();return(0,r.tZ)(y.G,{css:[m.l0.p(8),G.F3],children:(0,r.tZ)($p.Z,{getRunnerOutput:function(){var e=t();if(e||n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=t()){var r=a(e);if("runnerOutput"===(null===r||void 0===r?void 0:r.type))return r}}})})},Icon:function(e){var n=e.size;return(0,r.tZ)(oe.Z,{size:n})},getTitle:function(){return"Unit Tests"}},eh=t(12470),nh=t(52364),th=t(14292),rh=t(22642),ih=t(16988),oh=t(2954),ah=t(6009),lh=t(21225),ch=function(e){var n=e.title,t=e.json,i=e.initialExpanded,o=void 0===i||i,l=(0,a.useState)(o),c=l[0],u=l[1];return(0,r.tZ)(Bt.Q,{expanded:c,onClick:function(){return u((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[m.l0.p(12),m.l0.colWithGap(8),m.l0.height("100%")],children:(0,r.tZ)(oh.Z,{json:t})})})},uh=function(e){var n=e.title,t=e.text,i=(0,a.useState)(!0),o=i[0],l=i[1];return(0,r.tZ)(Bt.Q,{expanded:o,onClick:function(){return l((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[m.l0.p(12),m.l0.colWithGap(8),m.l0.height("100%")],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[m.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:t})})})},sh=t(49520),dh=t(6394),fh=t(16022),ph=t(98059);function hh(){var e=(0,Wt.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return hh=function(){return e},e}var vh={},gh=(0,Ht.Ps)(hh());function mh(e){var n=e.event,t=n.input,i=n.output,o=n.error,l=n.start,c=n.end,u=n.cached,s=(0,a.useState)(!0),d=s[0],f=s[1],p=(0,a.useCallback)((function(){return f((function(e){return!e}))}),[]),h="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),v=i.trimEnd();return(0,r.BX)(y.G,{css:[(0,fh.ec)(o?"negative":"positive"),u?{opacity:.75}:void 0,m.l0.borderRadius(8)],children:[(0,r.BX)(y.G,{onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||p()},tabIndex:0,css:[m.l0.rowWithGap(4),m.l0.justify.spaceBetween,m.l0.py(4),m.l0.px(8),m.l0.font.code,m.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",h]}),(0,r.BX)("span",{css:[m.l0.color.foregroundDimmer,m.l0.flex.shrink(0)],children:[o?(0,r.tZ)("span",{css:[m.l0.mr(16)],children:o}):null,u?(0,r.tZ)("span",{children:"CACHED"}):(0,r.BX)("span",{children:[c-l," ms"]})]})]}),d?null:(0,r.tZ)(y.G,{css:[m.l0.px(2),m.l0.pb(2),m.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)(ie.T,{elevated:!0,css:[m.l0.p(8),m.l0.borderRadius(8)],children:(0,r.tZ)(dh.Z,{code:v})})})]})}var yh=t(58424),Zh=t(68282),bh=t(99453);function wh(e){var n=e.t,t=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,r.BX)(Z.xv,{css:{minWidth:"8em"},children:[n,": "]}),(0,r.tZ)("span",{children:t})]})}var xh=t(48306),kh=t.n(xh),Ch=t(44171);var Sh=a.memo((function(e){var n=e.log,t=e.timeRef,i=e.setTimeRef,o=JSON.stringify(n.cmd,null,2),a=t?n.timestamp-t:n.timestamp;return(0,r.BX)("div",{className:"jsx-c576d52646a14c5f "+("log "+(n.highlighted?"highlighted ":"")+("in"===n.dir?"in":"")||0),children:[(0,r.BX)("div",{className:"jsx-c576d52646a14c5f direction",children:[(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:n.dir}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:"in"===n.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:(0,r.tZ)(ne.zx,{small:!0,colorway:"positive",onClick:function(){return i(n.timestamp)},text:a.toFixed(0)+"ms"})})]}),(0,r.BX)("div",{className:"jsx-c576d52646a14c5f message",children:[n.channel.service||n.channel.name?(0,r.BX)("div",{className:"jsx-c576d52646a14c5f channel",children:[(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f service",children:n.channel.service}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f name",children:n.channel.name})]}):null,(0,r.tZ)("pre",{className:"jsx-c576d52646a14c5f",children:o})]}),(0,r.tZ)(kh(),{id:"c576d52646a14c5f",children:".log.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-c576d52646a14c5f{color:red}.highlighted.jsx-c576d52646a14c5f{background:yellow}.direction.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-bottom:1px solid;width:100%}.message.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border-bottom:1px solid}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-right:1px solid}.message.jsx-c576d52646a14c5f>pre.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]},n.index)}),(function(e,n){return e.log.index===n.log.index&&e.log.highlighted===n.log.highlighted&&e.timeRef===n.timeRef})),Th=function(e){var n=e.logs,t=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[n.map((function(e){return(0,r.tZ)(Sh,{log:e,timeRef:t,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,r.tZ)(kh(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};function Eh(e){return"in"===e||"out"===e||""===e}var Rh=function(e){var n=e.filters,t=e.updateFilters;return(0,r.BX)(y.G,{css:m.l0.colWithGap(4),children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,r.tZ)(pe.II,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{n=new RegExp(i,a)}catch(l){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Directions:"}),(0,r.tZ)(Qs.E,{css:m.l0.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:Eh(n)?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8)],children:[(0,r.tZ)(Qs.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,r.tZ)(Qs.E,{css:m.l0.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8)],children:[(0,r.tZ)(Qs.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},Ih=t(91476),Dh=t(63763),Gh=t(89479),Ph=t(94971),_h=t(27522),Bh=t(19791);function Ah(){var e=(0,Wt.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return Ah=function(){return e},e}function Uh(){var e=(0,Wt.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return Uh=function(){return e},e}var Lh={},Nh=(0,Ht.Ps)(Ah()),Xh=(0,Ht.Ps)(Uh(),Nh);var Fh=t(49287),Oh=t(2050),Mh=t(49146);function Wh(e){var n=e.sessionId,t=(0,a.useState)(!1),i=t[0],o=t[1],l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useState)(!1),d=s[0],f=s[1],p=(0,Ce.Z)().showConfirm,h=(0,Si.H)();return null==n?(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.BX)(Z.xv,{variant:"small",children:["RUM Session ID: ",n]}),(0,r.tZ)(Z.xv,{variant:"headerDefault",children:"Submit an Issue"}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(16)],children:[(0,r.tZ)(pe.B,{id:h("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return u(e.target.value)},disabled:i}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8)],children:[(0,r.tZ)(As.X,{id:h("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,r.tZ)("label",{htmlFor:h("issueInRecording"),children:(0,r.tZ)(Z.xv,{children:"Issue is demoed in recording"})})]}),(0,r.tZ)(ne.zx,{onClick:function(){var e=ri()();o(!0),(0,Mh.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),p("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),u(""),f(!1)}),5e3)},text:"Submit",disabled:i||0===c.trim().length,colorway:"primary"})]})]})}var Hh,zh;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(Hh||(Hh={}));var Vh=(zh={},(0,i.Z)(zh,Hh.Repl,(function(){var e,n,t,i,o,a,l,c,u=(0,ze.Z)(),s=function(e){var n=(0,M.Z)({},Lh,e);return zt.a(Xh,n)}({variables:{replId:u}}).data,d="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?JSON.parse(JSON.stringify(s.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(t=d.source)||void 0===t||delete t.__typename,null===(i=d.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,r.BX)(y.G,{css:[m.l0.colWithGap(16),m.l0.p(4)],children:[(0,r.tZ)(Fh.Z,{replId:u}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,r.tZ)(oh.Z,{json:d}):null}),(0,r.tZ)(kh(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(zh,Hh.Logs,(function(){var e=(0,o.Z)((0,bh.Z)(!1),2),n=e[0],t=e[1],i=(0,a.useState)(null),l=i[0],c=i[1],u=(0,Ke.Dv)(Ch.Sj),s=(0,o.Z)((0,Ke.KO)(Ch.a0),2),d=s[0],f=s[1],p=(0,o.Z)((0,Ke.KO)(Ch.ot),2),h=p[0],v=p[1],g=(0,Ke.b9)(Ch.UB);return(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.position.sticky,m.l0.top(0),m.l0.px(4),m.l0.pb(8),m.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(ne.zx,{colorway:d?void 0:"positive",onClick:function(){f((function(e){return!e}))},text:d?"Stop logging goval":"Start logging goval"}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(4),m.l0.justify.spaceBetween],children:[(0,r.tZ)(ne.zx,{onClick:t,text:n?"Hide filters":"Show filters"}),l?(0,r.tZ)(ne.zx,{onClick:function(){return c(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(ge.h,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u)),n=document.createElement("a");n.setAttribute("href",e);var t=(new Date).toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,r.tZ)(en.Z,{})}),(0,r.tZ)(ne.zx,{colorway:"negative",onClick:function(){return g()},text:"Clear logs"})]}),n?(0,r.tZ)(Rh,{filters:h,updateFilters:function(e){v((0,M.Z)({},h,e))}}):null]}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto"),m.l0.height("100%")],children:(0,r.tZ)(Th,{logs:u,timeRef:l,setTimeRef:c})})]})})),(0,i.Z)(zh,Hh.LSP,Ih.L),(0,i.Z)(zh,Hh.AI,sh.ho),(0,i.Z)(zh,Hh.GhostwriterChat,(function(){var e=(0,ih.v)(),n=(0,ze.Z)(),t=(0,lh.a)(),i=(0,ve.R3)(),l=(0,nh.Og)(),c=(0,nh.Cd)(),u=(0,o.Z)((0,ah.Kz)(),1)[0],s=(0,o.Z)((0,ah.u0)(),1)[0],f="chat-".concat(t,".json"),p=(0,a.useState)(".ghostwriter/".concat(f)),h=p[0],v=p[1],g=(0,d.Z)().fs,b=(0,Ce.Z)().showError,w=(0,o.Z)((0,nh.zu)(),2),x=w[0],k=w[1],C=(0,a.useCallback)((function(){return JSON.stringify({chatModel:e,chatId:t,replId:n,messages:x},null,2)}),[e,t,n,x]),S=(0,a.useCallback)((0,O.Z)((function(){var e,n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:e=C(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,g.writeFile(h,Ci.Z.from(e))];case 2:if((n=r.sent()).error)throw new Error("fs error: ".concat(n.error));return[3,4];case 3:return t=r.sent(),b(t.message),[3,4];case 4:return[2]}}))})),[C,g,h,b]),T=(0,a.useCallback)((0,O.Z)((function(){var e,n,t;return(0,H.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.readFile(h)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(n=JSON.parse(e.content.toString()),!Array.isArray(n.messages))throw new Error("invalid chat JSON");return k(n.messages),[3,3];case 2:return t=r.sent(),b(t.message),[3,3];case 3:return[2]}}))})),[h,g,k,b]);return(0,r.tZ)(y.G,{css:m.l0.height("100%"),children:(0,r.BX)(eh.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(eh.td,{withDividers:!1,children:[(0,r.tZ)(eh.OK,{iconLeft:(0,r.tZ)(th.Z,{}),children:"File Context"}),(0,r.tZ)(eh.OK,{iconLeft:(0,r.tZ)(th.Z,{}),children:"Debugger"}),(0,r.tZ)(eh.OK,{iconLeft:(0,r.tZ)(rh.Z,{}),children:"Messages"})]}),(0,r.BX)(eh.nP,{children:[(0,r.BX)(eh.x4,{children:[(0,r.tZ)(ch,{title:"active file",json:i}),(0,r.tZ)(ch,{title:"last stop reason",json:c}),(0,r.tZ)(uh,{title:"last prompt",text:l})]}),(0,r.BX)(eh.x4,{children:[(0,r.tZ)(ch,{title:"buffered output",json:u}),(0,r.tZ)(ch,{title:"debug error context",json:s})]}),(0,r.tZ)(eh.x4,{children:(0,r.BX)(y.G,{css:[m.l0.colWithGap(8),m.l0.m(8)],children:[(0,r.BX)(ie.T,{background:"higher",css:[m.l0.borderRadius(8),m.l0.colWithGap(8),m.l0.p(8)],children:[(0,r.tZ)(Z.xv,{children:"Chat History"}),(0,r.tZ)(pe.II,{type:"text",value:h,onChange:function(e){v(e.target.value)}}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.flex.wrap],children:[(0,r.tZ)(ne.zx,{text:"Download",colorway:"primary",iconLeft:(0,r.tZ)(en.Z,{}),onClick:function(){var e=C(),n="data:text/json;charset=utf-8,"+encodeURIComponent(e),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","".concat(f)),t.click()}}),(0,r.tZ)(ne.zx,{text:"Save to Repl",onClick:S,iconLeft:(0,r.tZ)(en.Z,{})}),(0,r.tZ)(ne.zx,{text:"Load from Repl",onClick:T,iconLeft:(0,r.tZ)(eu.Z,{})})]})]}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:m.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,r.tZ)(pe.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:m.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,r.tZ)(pe.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:n})]}),(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:m.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatId",children:"Chat Id"}),(0,r.tZ)(pe.II,{id:"gw-debug-chatId",type:"text",readOnly:!0,value:t})]})]})})]})]})})})),(0,i.Z)(zh,Hh.AST,Dp.Z),(0,i.Z)(zh,Hh.Git,(function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=function(e){var n=(0,M.Z)({},vh,e);return zt.a(gh,n)}().data,o=(0,B.Z)(ph.e);return(0,a.useEffect)((function(){o&&t((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,vr.Z)(e)).slice(0,100)}))}),[o]),(0,r.BX)(y.G,{css:[m.l0.p(8)],children:[(0,r.BX)(ie.T,{elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.mb(8)],children:[(0,r.tZ)("span",{children:"Git Service Connection Info"}),(0,r.tZ)("pre",{children:(null===i||void 0===i?void 0:i.currentUser)?JSON.stringify(i,(function(e,n){return"accessToken"===e?"censored":n}),2):"No gitHubInfo"})]}),(0,r.tZ)(y.G,{css:[m.l0.colWithGap(4)],children:n.length?n.map((function(e){return(0,r.tZ)(mh,{event:e},e.key)})):"No events yet..."})]})})),(0,i.Z)(zh,Hh.History2,(function(){var e=(0,B.Z)($d.BI)(),n=(0,B.Z)($d.Jp)(),t=(0,o.Z)((0,bh.Z)(!1),2),i=t[0],a=t[1];if(!e)return null;var l=e.filePath,c=e.changes,u=e.users,s=e.version,d=e.playing,f=e.count,p=c[s],h=null===u||void 0===u?void 0:u[p.userId],v=p.timestamp,g=i&&n?function(e,n){try{return(0,Zh.ed)(e,n).op}catch(t){return t}}(p.changes,n.state.doc.sliceString(0)):null;return(0,r.BX)(y.G,{css:[m.l0.colWithGap(16),m.l0.p(4)],children:[(0,r.BX)(y.G,{css:[m.l0.colWithGap(4)],children:[(0,r.tZ)(wh,{t:"File",children:(0,r.tZ)("pre",{children:l})}),(0,r.BX)(wh,{t:"Version",children:[s," / ",f-1]}),(0,r.tZ)(wh,{t:"Playing",children:(0,r.tZ)(yh.Z,{children:d?"true":"false"})}),(0,r.tZ)(wh,{t:"Date",children:(0,r.tZ)(Tc.E,{date:v})})]}),h?(0,r.BX)(y.G,{children:[(0,r.tZ)(wh,{t:"Author",children:h.username}),(0,r.BX)(y.G,{css:[m.l0.pl(8),m.l0.colWithGap(4)],children:[(0,r.tZ)(wh,{t:"ID",children:h.id}),(0,r.tZ)(wh,{t:"Name",children:h.username}),(0,r.tZ)(wh,{t:"Image",children:(0,r.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,r.tZ)(Gf.Z,{id:"toggleIsShowingChanges",isOn:i,onChange:a}),(0,r.tZ)("label",{children:"Changes"})]}),p?null:"No changes",i&&p?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{children:[(0,r.tZ)(wh,{t:"Changeset",children:(0,r.tZ)("pre",{children:JSON.stringify(p,null,2)})}),n?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[m.l0.mt(4)],children:[(0,r.tZ)(wh,{t:"OT",children:(0,r.tZ)("pre",{children:JSON.stringify(g,null,2)})}),(0,r.tZ)("p",{children:(0,r.BX)("small",{children:["Note that the OT value is translated ",(0,r.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,i.Z)(zh,Hh.Metadata,(function(){var e=(0,d.Z)().container;(0,Gh.Z)();var n=e.getConnectionMetadata();if(!n)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var t=n.token,i=new URL(n.conmanURL).host,o='./conman-repl -t "'.concat(t,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(y.G,{css:m.l0.rowWithGap(2),children:[(0,r.BX)(Z.xv,{css:m.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(yh.Z,{children:o})]}),(0,r.tZ)(ge.h,{alt:"Copy to clipboard",onClick:function(){return(0,pt.Z)(o)},children:(0,r.tZ)(ki.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(n,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,Dh.he)(n.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(kh(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(zh,Hh.Override,(function(){var e=(0,o.Z)(a.useState(q.Z.get("gurl","string")||""),2),n=e[0],t=e[1],i=(0,o.Z)(a.useState(""),2),l=i[0],c=i[1],u=function(){var e=(0,Ke.b9)(Zo),n=(0,Ke.b9)(bo);return(0,a.useCallback)((function(t){if(!t)return e(null),void n(null);e({connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),n(t)}),[n,e])}();return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(Ph.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,Bh.t)(n),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(_h.Z,{color:"positive",onClick:function(){q.Z.set("gurl",n),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(_h.Z,{color:"orange",onClick:function(){q.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:q.Z.get("gurl","string")?"currently in localStorage: ".concat(q.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,r.BX)(y.G,{css:[m.l0.pt(16),m.l0.border({direction:"top"})],children:[(0,r.tZ)(Z.xv,{children:"Override Database"}),(0,r.tZ)(Ph.ZP,{type:"text",value:l,onChange:function(e){c(e.target.value)}}),(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8)],children:(0,r.tZ)(_h.Z,{color:"positive",onClick:function(){u(l)},children:"Override Postgres connection string"})})]})]})})),(0,i.Z)(zh,Hh.DDRum,(function(){var e,n=null===(e=Oh.v.getInternalContext())||void 0===e?void 0:e.session_id,t=Oh.v.getInitConfiguration(),i=null!=t&&100===t.sampleRate,o=(0,a.useState)(null!=n),l=o[0],c=o[1];return(0,r.tZ)(y.G,{css:[m.l0.colWithGap(16),m.l0.p(4)],children:i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.zx,{onClick:l?function(){Oh.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,Mh.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:l?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,M.Z)({},l&&Qe.p.backgroundPulse(m.TV.redDimmest,m.TV.redDimmer))}),l?(0,r.tZ)(Wh,{sessionId:n}):null]}):(0,r.tZ)(ne.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),zh),jh=Object.values(Hh);function qh(){var e=(0,a.useState)(Hh.Repl),n=e[0],t=e[1],i=jh.map((function(e){return(0,r.tZ)(ne.zx,{colorway:e===n?"primary":void 0,onClick:function(){return t(e)},text:e},e)}));return(0,r.BX)(ie.T,{background:"default",css:[m.l0.colWithGap(8),m.l0.p(4),m.l0.height("100%")],children:[(0,r.tZ)(y.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:i}),(0,r.tZ)(y.G,{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto")],children:Object.entries(Vh).map((function(e){var t=(0,o.Z)(e,2),i=t[0],a=t[1];return(0,r.tZ)(y.G,{css:i!==n&&m.l0.display.none,children:i===Hh.Override&&n!==Hh.Override?null:(0,r.tZ)(a,{})},i)}))})]})}var Yh=t(50575),Kh={Content:function(){return(0,r.tZ)(qh,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Yh.Z,{size:n})},getTitle:function(){return"Debug"}},$h=t(19065),Qh=t(98355),Jh=t(41120);function ev(){var e=(0,Wt.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return ev=function(){return e},e}var nv={},tv=(0,Ht.Ps)(ev());var rv=t(56997),iv=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function ov(e){return function(n){n.stopPropagation(),e(n)}}function av(e,n){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(n.includes(e))return"You already have this key";var t=e.split(" ");return 3!==t.length?"This seems to be an invalid key.":iv.includes(t[0])?null:"Key type is not valid."}function lv(e){return(0,r.BX)(y.G,{css:[m.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,r.BX)(y.G,{css:[m.l0.rowWithGap(2),m.l0.align.center],children:[(0,r.tZ)(le.Z,{}),(0,r.tZ)(Z.xv,{variant:"small",css:m.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function cv(e){var n=e.authorizedKey,t=e.otherKeys,i=e.onUpdateKey,l=e.onSave,c=(0,o.Z)(a.useState(),2),u=c[0],s=c[1],d=a.useRef(null),f=function(){var e=av(n.key,t);if(e)return s(e),void(d.current&&d.current.focus());l()};a.useEffect((function(){u&&(av(n.key,t)||s(null))}),[n.key,u,t]);var p=ov((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),h=(0,Uu.d)(),v=(0,Si.H)()("key"),g='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,r.BX)(ie.T,{elevated:!0,css:[m.l0.p(16),m.l0.borderRadius(8),m.l0.colWithGap(16)],children:[t&&0!==t.length?null:(0,r.tZ)(Z.xv,{multiline:!0,children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,r.tZ)(lv,{id:v,label:"Key (in OpenSSH Public Key format)",error:u,children:(0,r.tZ)(pe.II,{id:v,ref:d,name:"key",value:n.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:p})}),rv.ED||h?(0,r.tZ)(y.G,{css:[m.l0.colWithGap(8)],children:(0,r.BX)(Z.xv,{multiline:!0,children:["Need a hand? The"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,r.BX)(y.G,{css:[m.l0.colWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"Need a hand? Generate a key:"}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],maxLines:1,children:g}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(g)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Paste the result in the form above."})]}),(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween],children:(0,r.tZ)(y.G,{css:m.l0.rowWithGap(8),children:(0,r.tZ)(ne.zx,{colorway:"primary",onClick:ov(f),text:"Add SSH Key"})})})]})}function uv(e){var n=e.onAdd,t=e.otherKeys,i=(0,o.Z)(a.useState({key:""}),2),l=i[0],c=i[1];return(0,r.tZ)(cv,{authorizedKey:l,otherKeys:t,onUpdateKey:function(e){c((function(n){return n?(0,W.Z)((0,M.Z)({},n),{key:e}):n}))},onSave:function(){c({key:""}),l.key&&n(l)}})}function sv(e){var n=e.authorizedKey,t=e.onDelete;return(0,r.BX)(y.G,{css:[mc.gU.filled,m.l0.p(8),m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.borderRadius(8)],children:[(0,r.tZ)(Qh.Z,{size:24}),(0,r.BX)(Z.xv,{css:[m.l0.flex.growAndShrink(1)],maxLines:1,children:[n.keytype," ",n.key.substring(0,8),"...",n.key.substring(n.key.length-8)," ",n.comment]}),(0,r.tZ)(ge.h,{onClick:function(){return t(n)},alt:"Delete",size:28,children:(0,r.tZ)(Jh.Z,{})})]})}function dv(e){if(!e.length)return null;var n=e.split(" ");return n.length<3?null:{keytype:n[0],key:n[1],comment:n[2]}}function fv(e){var n=e.sshUser,t=e.sshHostname;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,r.BX)(y.G,{css:m.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{children:"Hostname"}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],maxLines:1,children:t}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(t)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]})]}),(0,r.BX)(y.G,{css:m.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{children:"Username"}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],maxLines:1,children:n}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(n)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]})]})]})}function pv(e){var n,t=e.repl,i=e.onlyCommand,o=void 0===i||i,a=(0,Uu.d)();if("Repl"!==t.__typename)return null;var l=t.id,c="".concat(t.slug,".").concat(null===(n=t.user)||void 0===n?void 0:n.username,".repl.co"),u="ssh -i ~/.ssh/replit ".concat(l,"@").concat(c),s="Host ".concat(c,"\n  User ").concat(l,"\n  IdentityFile ~/.ssh/replit"),d="ssh ".concat(c);return rv.ED||a?o?null:(0,r.BX)(y.G,{css:m.l0.colWithGap(16),children:[(0,r.tZ)($h.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(fv,{sshUser:l,sshHostname:c}),(0,r.BX)(Z.xv,{multiline:!0,children:["For more detailed configuration instructions",rv.ED?" on Windows":null,", check the"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,r.tZ)(y.G,{css:m.l0.colWithGap(16),children:o?(0,r.BX)(r.HY,{children:[(0,r.tZ)($h.Z,{level:4,children:"Quick-Start SSH Command"}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],maxLines:1,children:u}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(u)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)($h.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(fv,{sshUser:l,sshHostname:c}),(0,r.tZ)($h.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(Z.xv,{multiline:!0,children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(Z.xv,{css:[m.l0.font.code,m.l0.display.inline,m.l0.align.baseline],multiline:!0,children:"~/.ssh/config"}),"):"]}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],multiline:!0,children:s}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(s)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)(ie.T,{tag:"pre",elevated:!0,css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[m.l0.overflow("auto"),m.l0.font.code,m.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[m.l0.display.none]}],maxLines:1,children:d}),(0,r.tZ)(ge.h,{onClick:function(){return(0,pt.Z)(d)},alt:"Copy",children:(0,r.tZ)(Se.Z,{})})]})]})})}function hv(e){return vv.apply(this,arguments)}function vv(){return(vv=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.createDir(".config")];case 1:return n.sent(),[4,e.createDir(".config/ssh")];case 2:return n.sent(),[2]}}))}))).apply(this,arguments)}function gv(e){var n=e.fs,t=(0,V.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1],u=function(e){var n=(0,M.Z)({},nv,e);return zt.a(tv,n)}({variables:{replId:(0,ze.Z)()}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null;a.useEffect((function(){function e(){return(e=(0,O.Z)((function(){var e,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:return[4,hv(n)];case 1:return i.sent(),[4,n.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===w.Df.NotFound)return t.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return t.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var n=dv(e);null!==n&&(r[n.key]=n)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,c,t]);var d=function(){var e=(0,O.Z)((function(e){var t,r;return(0,H.__generator)(this,(function(i){switch(i.label){case 0:if(!l)throw new Error("trying to write authorized keys before loading");return t=function(e,n){var t=(0,M.Z)({},e);if("add"===n.type){var r=dv(n.key);r&&(t[r.key]=r)}else delete t[n.key];return t}(l,e),c(t),r="# generated file, use the SSH tool instead of editing\n"+Object.values(t).map((function(e){return"".concat((n=e).keytype," ").concat(n.key," ").concat(n.comment);var n})).join("\n"),[4,n.writeFile(".config/ssh/.authorized_keys",Ci.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,d((0,M.Z)({type:"add"},e))];case 1:return n.sent(),(0,K.j)(K.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,O.Z)((function(e){return(0,H.__generator)(this,(function(n){switch(n.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return n.sent(),(0,K.j)(K.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return l&&s?(0,r.tZ)(y.G,{css:m.l0.colWithGap(32),children:(0,r.BX)(y.G,{css:m.l0.colWithGap(16),children:[Object.keys(l).length>0?(0,r.tZ)(pv,{repl:s,onlyCommand:!0}):null,(0,r.tZ)($h.Z,{level:4,children:"Manage SSH Keys"}),Object.values(l).map((function(e){return(0,r.tZ)(sv,{authorizedKey:e,onDelete:p},e.key)})),(0,r.tZ)(uv,{onAdd:f,otherKeys:Object.keys(l)}),Object.keys(l).length>0?(0,r.tZ)(pv,{repl:s,onlyCommand:!1}):null]})}):(0,r.tZ)(y.G,{css:[m.l0.center,m.l0.coverContainer],children:(0,r.tZ)(he.Z,{size:24})})}function mv(e){var n=e.children;return(0,r.tZ)(y.G,{css:[m.l0.height("100%"),m.l0.overflowY("auto"),G.F3],children:(0,r.BX)(y.G,{css:[m.l0.p(8),m.l0.colWithGap(8),m.l0.flex.grow(1)],children:[(0,r.tZ)(y.G,{css:[m.l0.rowWithGap(8)],children:(0,r.tZ)($h.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,r.BX)(Z.xv,{variant:"small",color:"dimmer",multiline:!0,children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(y.G,{css:[m.l0.flex.grow(1),m.l0.py(8),m.l0.position.relative],children:n})]})})}var yv=t(91291),Zv={Content:function(){return(0,r.tZ)(bv,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(yv.Z,{size:n})},getTitle:function(){return"SSH"}};function bv(){var e=(0,d.Z)().fs;return(0,r.tZ)(mv,{children:(0,r.tZ)(gv,{fs:e})})}var wv=t(47880),xv=t(86411),kv=t(54414),Cv=t(21568),Sv=t(13902),Tv=t(62506),Ev=(0,b.X)({container:[m.l0.center,m.l0.backgroundColor.blurpleDimmest,m.l0.py(4),m.l0.border({color:m.TV.outlineDimmer,style:"solid",width:1,direction:"bottom"})],textContainer:[m.l0.rowWithGap(4),m.l0.align.center],text:[m.l0.fontSize(m.TV.fontSizeSmall),m.l0.color.foregroundDimmer],containerWithUpgrade:[m.l0.backgroundColor.backgroundHigher,m.l0.rowWithGap(8),m.l0.py(8),m.l0.borderRadius(0,0,8,8)]}),Rv=function(e){var n=e.isVerified,t=(0,Tv.q)(),i=t.hasAccessToMeteredTrial,o=t.messagesSentInPeriod,a=t.cap,l="You used all your free messages.";if(n){if(i){var c=a-o;l="You have ".concat(c," free ").concat((0,Lt.Z)("message",c)," remaining")}}else l="Verify your email and try Ghostwriter Chat for free!";return(0,r.tZ)(y.G,{css:[Ev.container,i?null:Ev.containerWithUpgrade],children:(0,r.BX)(y.G,{css:Ev.textContainer,children:[(0,r.tZ)(Z.xv,{css:Ev.text,children:l}),(0,r.tZ)(nl.u,{tooltip:"After ".concat(a," free messages, you can upgrade to continue to use Ghostwriter Chat. You won't be charged until you choose to upgrade."),children:(0,r.tZ)(Co.Z,{})})]})})},Iv=t(18180),Dv=t(64918),Gv=t(12171),Pv=t(88161);var _v=(0,b.X)({surface:[m.l0.flex.growAndShrink(0),m.l0.borderRadius(0,0,8,8),{borderTop:"1px solid ".concat(m.TV.outlineDimmer)}],feedback:[m.l0.flex.rowReverse,m.l0.pb(4)],messageBoxContainer:[m.l0.p(8)],messageBoxSubContainer:[m.l0.rowWithGap(8),m.l0.align.center],messageBoxInputContainer:[m.l0.flex.growAndShrink(1),m.l0.maxHeight(300)],messageBoxInput:[m.l0.height(32),m.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],inputCharacterCount:[m.l0.flex.row,m.l0.align.center,m.l0.rowWithGap(4),m.l0.color.foregroundDimmer],inputCharacterCountMax:[m.l0.flex.row,m.l0.align.center,m.l0.rowWithGap(4),m.l0.color.accentNegativeStronger],inputButton:[m.l0.backgroundColor.blueDefault,m.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:m.TV.blueDefault}}}]}),Bv=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.zx,{colorway:"primary",onClick:function(e){e.preventDefault(),t(!0)},text:"Upgrade now"}),(0,r.tZ)(ko.Z,{context:"ghostwriter_chat_metered_trial",isOpen:n,onRequestClose:function(){t(!1)},uponPurchaseGoTo:"workspace",powerUp:"ghostwriter"})]})},Av=function(e){var n=e.currentUser,t=e.inputRef,i=e.model,l=Boolean((0,td.useRouter)().query.hideChatInput),c=(0,Gu.Z)(),u=c.ref,s=c.update,d=(0,o.Z)((0,nh.Jc)(),2),f=d[0],p=d[1],h=(0,nh.gp)(),v=(0,nh.ql)(),g=(0,Iv.d)(),m=(0,Tv.q)(),Z=m.hasAccessToMeteredTrial,b=m.cap,w=(0,L.Vg)((0,td.useRouter)()),x=(0,nh.J)(),k=(0,Dv.yL)(i).messageCharacters,C=!g&&b>0,S=function(e){if(e.preventDefault(),!f)return null;p(""),requestAnimationFrame((function(){s()})),v({chatMessage:{type:"chat",text:f}})},T=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},E=g||Z,R=function(e){var n=e.enableBridge,t=e.model,r=e.sendChatMessage,i=e.abortResponse,l=(0,o.Z)((0,nh.Jc)(),2),c=l[0],u=(l[1],(0,nh.J)()),s=(0,nh.gp)(),d=(0,Me.P5)({controlName:"flag-mb-gw-chat-bridge",logFlagToAnalytics:!0});(0,a.useEffect)((function(){if(n&&d){var e=function(e){return(0,Gv.I6)(e,(function(e){var n=e.type;switch(n){case Pv.cF.GHOSTWRITER_CHAT_SEND:r(e.chatMessage),(0,Gv.gU)(e.id);break;case Pv.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:i(),(0,Gv.gU)(e.id);break;default:(0,ma.Z)(n)}}))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}),[i,r,n,d]);var f=(0,a.useCallback)((function(){var e={messageType:Pv.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,Gv.bG)(e,ra()())}),[]);return(0,a.useEffect)((function(){var e=(0,Dv.yL)(t).messageCharacters,n={messageType:Pv.cF.GHOSTWRITER_CHAT_STATE,chatInputText:c,isSending:s,showStopGenerating:u,characterLimit:e};(0,Gv.bG)(n,ra()())}),[c,t,u,d,s]),{focusNativeMobileInput:f}}({enableBridge:E&&w,model:i,sendChatMessage:function(e){v({chatMessage:{type:"chat",text:e}})},abortResponse:function(){D&&P()}}).focusNativeMobileInput,I=(0,a.useCallback)((function(){var e;(T(),w)?R():null===(e=t.current)||void 0===e||e.focus()}),[t,R,w]);(0,a.useEffect)((function(){w&&E&&I()}),[t,E,R,I]),(0,a.useEffect)((function(){p((function(e){return e.slice(0,k)}))}),[p,k]);var D=(0,Sv.j3)(),G=(0,Sv.em)(),P=(0,a.useCallback)((function(){G(),I()}),[G,I]),_=f.length===k;return l?null:(0,r.BX)(ie.T,{elevated:!0,css:_v.surface,children:[C?(0,r.tZ)(Rv,{isVerified:Boolean(n.isVerified)}):null,g||Z?(0,r.BX)(y.G,{css:_v.messageBoxContainer,children:[(0,r.tZ)(y.G,{css:_v.feedback,children:(0,r.BX)(y.G,{css:_?_v.inputCharacterCountMax:_v.inputCharacterCount,children:[_?(0,r.tZ)(ao.Z,{}):void 0,(0,r.tZ)(xv.Z,{maxLength:k,value:f,hideLabel:!0,fontSize:"inherit"})]})}),(0,r.BX)(y.G,{css:_v.messageBoxSubContainer,tag:"form",disabled:h,onSubmit:S,children:[(0,r.tZ)(Ec.q,{src:n.image,username:n.username,size:24}),(0,r.tZ)(y.G,{css:_v.messageBoxInputContainer,children:(0,r.tZ)(pe.B,{readOnly:h,type:"text",inputMode:"text",maxLength:k,placeholder:"Ask a question about your code\u2026",ref:(0,Pu.l)(u,t),css:_v.messageBoxInput,onChange:function(e){p(e.target.value)},value:f,onFocus:function(){T()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(p((function(e){var n,r;return e.slice(0,null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.selectionStart)+"\n"+e.slice(null===t||void 0===t||null===(r=t.current)||void 0===r?void 0:r.selectionEnd,e.length)})),requestAnimationFrame((function(){s()}))):S(e))}})}),x?(0,r.tZ)(ge.h,{size:28,alt:"Stop generating",onClick:P,children:(0,r.tZ)(Cv.Z,{})}):(0,r.tZ)(ge.h,{alt:"Send message",size:28,type:"submit",disabled:h,css:_v.inputButton,children:(0,r.tZ)(kv.Z,{})})]})]}):(0,r.tZ)(Bv,{})]})},Uv=t(51531),Lv=t(23455),Nv=function(e){var n=e.inputRef,t=e.text,i=e.promptToFill,a=(0,o.Z)((0,nh.Jc)(),2)[1];return(0,r.tZ)(ne.zx,{iconLeft:(0,r.tZ)(kv.Z,{}),text:t,onClick:function(){!function(){var e;a(i),(0,K.j)(K.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{prompt:i}),null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus()}()}})},Xv=[{text:'"How do I scrape a website for <a> tags?"',promptToFill:"How do I scrape a website for <a> tags?"},{text:'"Write a login page in HTML and CSS"',promptToFill:"Write a login page in HTML and CSS"},{text:(0,r.BX)(r.HY,{children:['"How can I improve the code in ',(0,r.tZ)("em",{children:"filename.js"}),'?"']}),promptToFill:"How can I improve the code in "},{text:'"How do I use the pandas apply function?"',promptToFill:"How do I use the pandas apply function?"}],Fv=function(e){var n=e.inputRef,t=e.samplesNumber,i=(0,Ie.Z)((function(){return Xv.sort((function(){return Math.random()-.5}))}),[]);return(0,r.tZ)(r.HY,{children:i.map((function(e,t){return(0,r.tZ)(Nv,{inputRef:n,text:e.text,promptToFill:e.promptToFill},t)})).slice(0,t)})},Ov=(0,b.X)({messageEmptyStateSamplePrompts:[m.l0.rowWithGap(8),m.l0.flex.wrap,m.l0.px(16),m.l0.align.center,{gap:Lv.TV.space8}],messageEmptyState:[m.l0.colWithGap(16),m.l0.overflow("auto"),m.l0.flex.growAndShrink(1),m.l0.pt(12)]}),Mv=function(e){var n=e.inputRef,t=e.username,i=(0,r.tZ)(y.G,{css:Ov.messageEmptyStateSamplePrompts,children:(0,r.tZ)(Fv,{inputRef:n,samplesNumber:3})});return(0,r.tZ)(y.G,{css:Ov.messageEmptyState,role:"log",children:(0,r.tZ)(Uv.v,{message:{id:"empty-state",type:"chat",loading:!1,text:"Hey @".concat(t,", I\u2019m Ghostwriter, Replit\u2019s AI pair programmer. I\u2019m here to answer questions about your code and assist your thinking!"),author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},postMessageComponent:i})})},Wv=function(){return(0,r.BX)(y.G,{css:[m.l0.colWithGap(16),m.l0.align.center,m.l0.p(24),m.l0.height("100%"),m.l0.justify.center],children:[(0,r.tZ)(y.G,{css:[m.l0.maxWidth(200)],children:(0,r.tZ)(Ee.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(m.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(Z.xv,{variant:"subheadBig",children:"Chat with Ghostwriter"}),(0,r.BX)(y.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,r.tZ)(he.Z,{}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Loading\u2026"})]})]})},Hv=t(51624),zv=t(69365),Vv=t(94452),jv=t(40675),qv=t(94236),Yv=t(90273),Kv=function(){return(0,r.BX)(y.G,{css:[m.l0.center,m.l0.textAlign.center,m.l0.px(16),m.l0.colWithGap(8),m.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Z.xv,{variant:"headerBig",multiline:!0,children:"Ghostwriter is currently unavailable. Please try again later."}),(0,r.tZ)(Ee.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(m.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})]})},$v=t(40207),Qv=t(39691);function Jv(e){var n,t=(0,L.T3)(),i=(0,o.Z)((0,nh.zu)(),1)[0],l=(0,Qv.Ne)(),c=l.currentUserData,u=l.currentUserLoading,s=l.currentUserError,d=l.chatModel,f=(0,a.useState)(!1),p=f[0],h=f[1],v=null===c||void 0===c||null===(n=c.currentUser)||void 0===n?void 0:n.isStaff,g=(0,o.Z)((0,$v.RN)(),2),Z=g[0],b=g[1],w=(0,nh.ZT)(),x=(0,Ie.Z)((function(){return[{type:"action",label:"Clear chat history",icon:(0,r.tZ)(xe.Z,{}),run:function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_CLEARED),w()}}]}),[w]),k=(0,Ie.Z)((function(){var e=[{match:Vv.pl,data:{type:"action",icon:(0,r.tZ)(Yv.Z,{}),label:"Share feedback",run:function(){return h(!0)}}}];if(v){var n={match:Vv.pl,data:{type:"action",icon:(0,r.tZ)(Yh.Z,{fill:Z?m.TV.accentPrimaryDefault:m.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){b((function(e){return!e}))}}};e.push(n)}return e}),[Z,b,v]),C=(0,a.useRef)(null);(0,A.Wk)((function(){return C.current}),[]),(0,A.L5)((function(){return{actions:x,commands:k}}),[x,k]);var S=(0,a.useRef)(null),T=(0,o.Z)((0,zv.Z_)(),2),E=T[0],R=T[1],I=(0,o.Z)((0,zv.Z9)(),2),D=I[0],G=I[1],P=(0,a.useCallback)((function(){D?G(!1):null==S.current||S.current.scrollHeight-S.current.scrollTop!==S.current.clientHeight?R(!1):R(!0)}),[D,R,G]);return u?(0,r.tZ)(Wv,{}):s||!(null===c||void 0===c?void 0:c.currentUser)?(0,r.BX)(y.G,{children:["error:"," ",(null===s||void 0===s?void 0:s.message)||"User not found, please log in or reload"]}):(0,r.BX)(y.G,{css:[m.l0.flex.column,m.l0.maxHeight("100%"),m.l0.maxWidth("100%"),m.l0.flex.grow(1)],dataCy:"ghostwriter-chat",children:[(0,r.tZ)(qv.Z,{isOpen:p,setOpen:h,feature:jv.l.GhostWriter}),i.length?(0,r.tZ)(y.G,{innerRef:S,css:[m.l0.colWithGap(16),m.l0.overflow("auto"),m.l0.flex.growAndShrink(1),m.l0.pt(12)],onScroll:P,role:"log",children:i.map((function(n,o){return(0,r.tZ)(Uv.v,{message:n,autoScroll:E&&o===i.length-1&&(e.paneIsActive||!t),canReclassify:i.length-1===o&&"chat"===n.type&&"Assistant"===n.attribution},o)}))}):(0,r.tZ)(Mv,{inputRef:C,username:c.currentUser.username}),(0,r.tZ)(Av,{currentUser:c.currentUser,inputRef:C,model:d})]})}var eg=function(e){var n=(0,Me.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,Hv.e)({performPaneOperation:e.performPaneOperation}),(0,r.tZ)(r.HY,{children:n?(0,r.tZ)(Kv,{}):(0,r.tZ)(Jv,{paneIsActive:e.paneIsActive})})},ng={Content:function(e){var n=e.options;return(0,r.tZ)(eg,{paneIsActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(wv.Z,{size:n})},getTitle:function(){return"Ghostwriter"}},tg=t(42916);function rg(){return{filetree:tg.Z,codeEditor:D.D,webview:Ao.R,media:da,pedit:Yp,vnc:No,unitTests:Jp,adminPanel:Kh,runnerOutput:N,shell:Mo,packager:ut,envEditor:Fe,draw:la,git:Kd,history:Xp,database:nr,neon:Bo,markdown:I,sshConfigurator:Zv,ghostwriterChat:ng}}},92508:function(e,n,t){t.d(n,{kz:function(){return x},F3:function(){return p},fK:function(){return Z},ME:function(){return s},DQ:function(){return f},Dp:function(){return c},Ur:function(){return d},RX:function(){return u},b:function(){return v},v:function(){return r},Se:function(){return w}});var r={filetree:!0,codeEditor:!0,database:!0,neon:!0,replAuth:!0,webview:!0,media:!0,vnc:!0,pedit:!0,education:!0,runnerOutput:!0,unitTests:!0,autograder:!0,markdown:!0,shell:!0,packager:!0,envEditor:!0,commands:!0,draw:!0,preferences:!0,adminPanel:!0,git:!0,history:!0,kaboombar:!0,instructions:!0,debugger:!0,tutorial:!0,config:!0,threadInbox:!0,extension:!0,extensionStore:!0,docs:!0,videoPlayer:!0,chat:!0,deployments:!0,modules:!0,sshConfigurator:!0,multiplayer:!0,ghostwriterChat:!0,submitEduRepl:!0,searchReplace:!0,extensionDevtools:!0},i=t(4561),o=t(43312),a=t(39541),l=t(87978);function c(e){var n=e.path;return n?(0,l.T3)(n)?"media":(0,l.sL)(n)?"draw":(0,l.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function u(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function s(e){return e.filter((function(e){return e.type===i.Tv.File})).map((function(e){return{type:c({path:e.path}),data:{path:e.path}}}))}function d(e){return u(e.type)}function f(e){return d(e)?e.data.path:null}var p=(0,o.iv)([a.l0.width("100%"),a.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),h=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","kaboombar","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools"];function v(e){return h.includes(e)}var g=t(74985),m=t(50959),y={type:"commands",data:{autoFocus:!1}};function Z(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,i=void 0===r?16:r,o=n[t.type]?t:y,a=n[o.type].Icon;return(0,g.tZ)(a,{pane:o,size:i})},Content:function(e){var t=e.pane,r=e.options,i=n[t.type]?t:y,o=n[i.type].Content;return(0,g.tZ)(o,{pane:i,options:r})},getTitle:function(e){var t=n[e.type]?e:y;return n[t.type].getTitle(t)}}}var b=(0,m.createContext)(null);function w(){var e=(0,m.useContext)(b);if(!e)throw new Error("Expected PaneUI in context");return e}var x=b.Provider},80906:function(e,n,t){t.d(n,{NH:function(){return c},Qt:function(){return s},R3:function(){return u},_s:function(){return o},p5:function(){return d}});var r=t(42445),i=t(42082),o=(0,r.cn)(null),a=(0,r.cn)((function(e){var n=e(o);return(null===n||void 0===n?void 0:n.isVisible)?n.path:null})),l=(0,r.cn)(null,(function(e,n,t,r){switch(r.type){case"focus":return void n(o,{hasFocus:!0,isVisible:!0,position:r.position,path:t});case"update":return void n(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:t});case"blur":var i;return void n(o,(function(e){return{hasFocus:!1,isVisible:Boolean(null===e||void 0===e?void 0:e.isVisible),position:null!==(i=null===e||void 0===e?void 0:e.position)&&void 0!==i?i:{line:1,column:1,offset:0},path:t}}));case"unmount":return void n(o,null);case"hidden":var a;return void n(o,(function(e){return{hasFocus:!1,isVisible:!1,position:null!==(a=null===e||void 0===e?void 0:e.position)&&void 0!==a?a:{line:1,column:1,offset:0},path:t}}));case"unhidden":var l;return void n(o,(function(e){return{hasFocus:Boolean(null===e||void 0===e?void 0:e.hasFocus),isVisible:!1,position:null!==(l=null===e||void 0===e?void 0:e.position)&&void 0!==l?l:{line:1,column:1,offset:0},path:t}}))}}));function c(){return(0,i.$X)(l)}function u(){return(0,i.Hg)(a)}function s(){return(0,i.XD)(o)}function d(){return(0,i.yL)(o)}},71002:function(e,n,t){t.d(n,{z4:function(){return W.z},_U:function(){return me},rm:function(){return Ie},XA:function(){return Se},$y:function(){return le},ev:function(){return de},Sl:function(){return oe},hn:function(){return ee},pn:function(){return ue},kW:function(){return Q},H7:function(){return te},_o:function(){return we},gg:function(){return De},U:function(){return ye},m8:function(){return xe},mF:function(){return Ee}});var r=t(57135),i=t(2272),o=t(96583),a=t(94716),l=t(48330),c=t(12379),u=t(72006),s=t(43119),d=t(71440),f=t(27942);function p(){var e=(0,s.Z)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,s.Z)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,s.Z)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,s.Z)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}var m=(0,d.Ps)(p()),y=(0,d.Ps)(h(),m),Z=(0,d.Ps)(v()),b=(0,d.Ps)(g(),y,Z),w=t(9125),x=t(86615),k=t(50216);function C(){var e=(0,s.Z)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function S(){var e=(0,s.Z)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,s.Z)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function E(){var e=(0,s.Z)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}function R(){var e=(0,s.Z)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}function I(){var e=(0,s.Z)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return I=function(){return e},e}function D(){var e=(0,s.Z)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var G={},P=(0,d.Ps)(C(),Z,b),_=(0,d.Ps)(S(),P,f.Fh),B=(0,d.Ps)(T(),_);var A=(0,d.Ps)(E());var U=(0,d.Ps)(R(),b,Z);var L=(0,d.Ps)(I());var N=(0,d.Ps)(D(),b);function X(e){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)((function(e){var n,t,r,i,a,l,u,s,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,!c.l)throw new Error("expected apolloClient to be initialized");return[4,c.l.mutate({mutation:L,variables:{input:{command:n,replId:t,buildId:r}}})];case 1:if(u=o.sent(),null===(i=u.errors)||void 0===i?void 0:i.length)throw new Error(u.errors.map((function(e){return e.message})).join(", "));if("SendDeploymentLifecycleCommandResult"!==(null===(a=u.data)||void 0===a||null===(l=a.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename))throw new Error((null===(s=u.data)||void 0===s||null===(d=s.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}function O(e){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)((function(e){var n,t,r,i,a,l,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!c.l)throw new Error("expected apolloClient to be initialized");return[4,c.l.mutate({mutation:N,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(l=o.sent(),null===(r=l.errors)||void 0===r?void 0:r.length)throw new Error(l.errors.map((function(e){return e.message})).join(", "));if("FailHostingBuildResult"!==(null===(i=l.data)||void 0===i||null===(a=i.failHostingBuild)||void 0===a?void 0:a.__typename))throw new Error((null===(u=l.data)||void 0===u||null===(s=u.failHostingBuild)||void 0===s?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}var W=t(1486),H=t(80806),z=t(51631),V=t(92153),j=t(42445),q=t(50959),Y=t(42082),K=t(88541),$=(0,j.cn)(W.z.Loading);function Q(){return(0,Y.Hg)($)}var J=(0,j.cn)(void 0);function ee(){return(0,Y.Hg)(J)}var ne=(0,j.cn)(void 0);function te(){return(0,Y.Hg)(ne)}var re=(0,j.cn)(void 0);var ie=(0,j.cn)(void 0);function oe(){return(0,Y.Hg)(ie)}var ae=(0,j.cn)(void 0);function le(){return(0,Y.Hg)(ae)}var ce=(0,j.cn)(void 0);function ue(){return(0,Y.Hg)(ce)}var se=(0,j.cn)(void 0);function de(){return(0,Y.Hg)(se)}var fe=(0,j.cn)(null,(function(e,n){n(J,void 0),n(ne,void 0),n(ie,void 0),n(ae,void 0),n(ce,void 0),n($,W.z.Ready)})),pe=(0,j.cn)(null,(function(e,n,t){var r="Repl"===t.repl.__typename?t.repl:null;if(r){var i;n(re,{id:r.lang.id,displayName:r.lang.displayName,isVnc:Boolean(r.config.isVnc)});var o="ReplPowerUpTypes"===r.powerUps.__typename&&null!==(i=r.powerUps.hostingTier)&&void 0!==i?i:void 0;n(ie,o);var a=r.hostingDeployment;if(a)return"HostingDeployment"!==a.__typename?n(se,"Unexpected hosting deployment typename: ".concat(a.__typename)):(n(J,a.id),n(ae,a.currentBuild),n(ne,a.replitAppSubdomain||(0,H.Jw)(r)),a.inProgressBuild?(n(ce,a.inProgressBuild),void n($,W.z.Deploying)):void n($,(0,H.Zx)(a.currentBuild.status)));n(ne,(0,H.Jw)(r)),n($,W.z.Ready)}}));function he(){var e=(0,Y.$X)(pe),n=(0,Y.$X)(ke);return(0,i.Z)(function(e){var n=(0,u.Z)({},G,e);return w.t(B,n)}({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var ve=(0,j.cn)(null,(function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e($),i=e(ce),o=e(ae),a=t.status;if(r===W.z.Deploying){if(!i)return void n(ke,"No deployment in progress found");n(ce,(0,V.ZP)(i,(function(e){e.status=a}))),a!==z.Fe.Success&&a!==z.Fe.Failed||(n(ce,void 0),a!==z.Fe.Success&&o||n(ae,(0,V.ZP)(i,(function(e){e.status=a,e.hasImageTag=i.provider!==z.r4.Static&&a===z.Fe.Success}))))}else if(r===W.z.ProcessingLifecycleCommand){if(!o)return void n(ke,"No current build found");n(ae,(0,V.ZP)(o,(function(e){e.status=a})))}n($,(0,H.Zx)(a)),t.message&&a===z.Fe.Failed&&n(ke,t.message)}})),ge=(0,j.cn)(null);function me(){return(0,Y.Hg)(ge)}function ye(e){var n=(0,Y.yL)(ge),t=(0,a.Z)(e);q.useEffect((function(){return n.subscribe((function(e){e&&t.current(e)}))}),[n,t])}var Ze=(0,j.cn)((function(e){switch(e($)){case W.z.Deploying:var n;return null===(n=e(ce))||void 0===n?void 0:n.id;case W.z.ProcessingLifecycleCommand:var t;return null===(t=e(ae))||void 0===t?void 0:t.id;default:return}})),be=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r;return(0,o.__generator)(this,(function(e){return(r=t.data.data)?(n(ve,r.hostingBuildDeployActionUpdates),n(ge,r.hostingBuildDeployActionUpdates),[2]):[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}());function we(e){var n=he(),t=(0,Y.$X)(be),r=(0,Y.$X)(ke);(0,q.useEffect)((function(){n({variables:{replId:e}})}),[n,e]);var i=(0,Y.Hg)(Ze);!function(e){var n=(0,u.Z)({},G,e);x.m(A,n)}({variables:{input:{buildId:null!==i&&void 0!==i?i:""}},skip:!i,onData:t,onError:function(e){r(e.message)}})}function xe(){var e=(0,l.Z)(),n=he(),t=(0,Y.$X)($);return q.useCallback((function(){return t(W.z.Loading),n({variables:{replId:e}})}),[n,t,e])}var ke=(0,j.cn)(null,(function(e,n,t){n(se,t)}));var Ce=(0,j.cn)(null,(function(e,n,t){var r,i=t.deployHostingBuild2;i&&("DeployHostingBuild2Result"===i.__typename?(n(ce,i.build),n(J,i.targetDeployment.id),n(ne,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n($,W.z.Deploying)):n(ke,i.message))}));function Se(){var e=(0,l.Z)(),n=ee(),t=(0,i.Z)(function(e){var n=(0,u.Z)({},G,e);return k.D(U,n)}(),1)[0],a=(0,Y.$X)(Ce),c=(0,Y.$X)(ke),s=(0,Y.XD)(ce);return q.useCallback(function(){var i=(0,r.Z)((function(r,i,l,u){var d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return s()?(c("Deployment already in progress"),[2]):(d=(0,H.oU)(u),[4,t({variables:{input:{replId:e,targetDeploymentId:n,commands:r,envVars:i,subdomain:l,provider:d,appType:u}},onCompleted:a,onError:function(e){c(e.message)}})]);case 1:return o.sent(),[2]}}))}));return function(e,n,t,r){return i.apply(this,arguments)}}(),[t,a,c,s,n,e])}var Te=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=t.command,i=t.replId,a=void 0,r===z.Qc.Resume||r===z.Qc.Suspend){if(!(l=e(ae)))return n(ke,"No current build found"),[2];a=l.id,(c=(0,H.Ti)(r))&&(n(ae,(0,V.ZP)(l,(function(e){e.status=c}))),n($,(0,H.Zx)(c)))}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,X({command:r,buildId:a,replId:i})];case 2:return o.sent(),r===z.Qc.Destroy&&n(fe),[3,4];case 3:return u=o.sent(),n(ke,u.message),[3,4];case 4:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}());function Ee(){var e=(0,l.Z)(),n=(0,Y.$X)(Te);return q.useCallback(function(){var t=(0,r.Z)((function(t){return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,n({replId:e,command:t})];case 1:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[n,e])}var Re=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!(t=e(J)))return n(ke,"No deployment found"),[2];if(!(r=e(ce)))return n(ke,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,O({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),n(ke,i.message),[2];case 4:return n(ce,void 0),n($,W.z.Ready),!(a=e(ae))||a.status!==z.Fe.Success&&a.status!==z.Fe.Failed?(n(ae,(0,V.ZP)(r,(function(e){e.status=z.Fe.Failed}))),[2]):[2]}}))}));return function(n,t){return e.apply(this,arguments)}}());function Ie(){return(0,Y.$X)(Re)}function De(){var e=(0,Y.Hg)(re),n=(0,K.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});if(!e)return{isDeployableRepl:!1,reason:"Could not find repl language."};if(e.isVnc)return{isDeployableRepl:!1,reason:"VNC deployments are not currently supported."};if("html"===e.id){if(!n)return{isDeployableRepl:!1,reason:"HTML deployments are not currently supported but are coming soon."}}else if("nix"!==e.id)return{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(e.displayName," Repl to a Nix template in order to deploy.")};return{isDeployableRepl:!0}}},1486:function(e,n,t){var r;t.d(n,{z:function(){return r}}),function(e){e.Loading="Loading",e.Ready="Ready",e.Deploying="Deploying",e.ProcessingLifecycleCommand="ProcessingLifecycleCommand",e.Suspended="Suspended"}(r||(r={}))},80806:function(e,n,t){t.d(n,{Jw:function(){return c},Ti:function(){return s},Zx:function(){return u},oU:function(){return d}});var r=t(1486),i=t(51631),o=t(73966),a=t.n(o),l=t(70232);t(30504);function c(e){var n,t=e.owner?"-".concat(null===(n=e.owner)||void 0===n?void 0:n.username):"";return"".concat("").concat(a()(e.slug)).concat(t)}function u(e){switch(e){case i.Fe.Failed:case i.Fe.Success:return r.z.Ready;case i.Fe.Suspended:return r.z.Suspended;case i.Fe.Suspending:case i.Fe.Resuming:case i.Fe.UpdatingTier:return r.z.ProcessingLifecycleCommand;case i.Fe.Pending:case i.Fe.Building:case i.Fe.Running:case i.Fe.Promoting:return r.z.Deploying;default:(0,l.Z)(e)}}function s(e){switch(e){case i.Qc.Destroy:return null;case i.Qc.Suspend:return i.Fe.Suspending;case i.Qc.Resume:return i.Fe.Resuming;default:(0,l.Z)(e)}}function d(e){switch(e){case i.Vp.CloudRun:return i.r4.CloudRun;case i.Vp.Worker:case i.Vp.Server:return i.r4.Gce;case i.Vp.Static:return i.r4.Static;default:(0,l.Z)(e)}}},13716:function(e,n,t){t.d(n,{eA:function(){return _},_s:function(){return S._s},ex:function(){return v},zo:function(){return Z},t9:function(){return G},R3:function(){return S.R3},pV:function(){return m},Qt:function(){return S.Qt},AA:function(){return b},Y_:function(){return x},b2:function(){return I},ev:function(){return k},Bx:function(){return y},VX:function(){return g},OM:function(){return P},Cp:function(){return R},_o:function(){return C},Gg:function(){return h},QH:function(){return w}});var r=t(74985),i=t(42082),o=t(9970),a=t(92153),l=t(42445),c=t(18171),u=(0,l.cn)(null),s=(0,l.cn)([]),d=(0,l.cn)(null,(function(e,n,t){var r=e(s),i=[t].concat((0,o.Z)(r.filter((function(e){return e!==t})))).slice(0,20);n(s,i)})),f=(0,l.cn)(null,(function(e,n,t){var r=e(s),i=r.indexOf(t.path);-1!==i&&n(s,(0,a.ZP)(r,(function(e){"delete"===t.type?e.splice(i,1):e.splice(i,1,t.to)})))})),p=(0,l.cn)(null);function h(){return(0,i.$X)(f)}function v(){return(0,i.Hg)(u)}function g(){return(0,i.$X)(u)}function m(){return(0,i.XD)(u)}function y(){return(0,i.Hg)(s)}function Z(){return(0,i.$X)(d)}function b(){return(0,i.XD)(s)}function w(){var e=(0,i.yL)(u);return(0,c.Z)((function(){return function(n){return e.subscribe(n)}}),[e])}function x(){return(0,i.yL)(u)}function k(){return(0,i.Hg)(p)}function C(){return(0,i.$X)(p)}var S=t(80906),T=(0,l.cn)({chat:"unread"}),E=(0,l.cn)(null,(function(e,n,t){n(T,(function(e){return(0,a.ZP)(e,(function(e){t.indicatorType?e[t.paneType]=t.indicatorType:delete e[t.paneType]}))}))}));function R(){return(0,i.$X)(E)}function I(e){var n=e.paneType;return(0,i.Hg)(function(e){var n=e.paneType;return(0,c.Z)((function(){return(0,l.cn)((function(e){return n?e(T)[n]:void 0}))}),[n])}({paneType:n}))}var D=(0,t(23457).O4)("areHiddenFilesVisible",!1);function G(){return(0,i.Hg)(D)}function P(){return(0,i.$X)(D)}function _(e){var n=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:n,children:e.children})}},27549:function(e,n,t){t.d(n,{L5:function(){return v},Wk:function(){return C},Xq:function(){return R},Y6:function(){return g},bS:function(){return S},dr:function(){return m},u1:function(){return b}});var r=t(9970),i=t(50959),o=t(42445),a=t(92153),l=t(18171),c=t(23457),u=t(94716),s=t(42082),d=t(77511),f=t(53472),p=(0,o.cn)({}),h=(0,o.cn)(null,(function(e,n,t){n(p,(function(e){return(0,a.ZP)(e,(function(e){null===t.actions?delete e[t.paneId]:e[t.paneId]=t.actions}))}))}));function v(e,n){var t=E(),o=(0,s.$X)(h),a=(0,u.Z)(e);(0,i.useEffect)((function(){var e;return o({paneId:t,actions:null!==(e=a.current())&&void 0!==e?e:null}),function(){o({paneId:t,actions:null})}}),[o,t,a].concat((0,r.Z)(n)))}function g(e){var n=(0,l.Z)((function(){return(0,c.kv)(p,(function(n){return e?n[e]:{}}))}),[e]);return(0,s.Hg)(n)}function m(){var e=(0,s.XD)(p);return(0,i.useCallback)((function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:null}),[e])}var y=(0,o.cn)(new Map),Z=(0,o.cn)(null,(function(e,n,t,r){n(y,(function(e){var n=new Map(e);return null===r?n.delete(t):r&&n.set(t,r),n}))}));function b(){return(0,s.$X)(Z)}var w=(0,o.cn)(new Map),x=(0,o.cn)(null,(function(e,n,t){n(w,(function(e){return(0,a.ZP)(e,(function(e){null===t.focus?e.delete(t.paneId):e.set(t.paneId,t.focus)}))}))}));function k(e){var n=document.activeElement;return!(!e||!n)&&(e!==n&&e.contains(n))}function C(e,n){var t=(0,u.Z)(e),o=E(),a=(0,d.T3)(),l=(0,i.useRef)(!a),c=(0,s.$X)(x),p=(0,s.XD)(f.J1),h=(0,s.XD)(y),v=(0,i.useState)(null),g=v[0],m=v[1];return(0,i.useEffect)((function(){t.current&&m(t.current())}),n?(0,r.Z)(n):[]),(0,i.useEffect)((function(){var e=function(e){p()===o&&e.target!==h().get(o)&&(l.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}}),[p,h,o]),(0,i.useEffect)((function(){if(g){var e=function(){g.focus()};return l.current&&p()===o&&!k(h().get(o))&&e(),c({paneId:o,focus:e}),function(){c({paneId:o,focus:null})}}}),[g,c,o,p,h,a]),m}function S(){var e=(0,s.XD)(w),n=(0,s.XD)(y);return(0,l.Z)((function(){return function(t){var r=e().get(t),i=n().get(t);k(i)||(r?r():null===i||void 0===i||i.focus())}}),[e,n])}var T=(0,i.createContext)(null);function E(){var e=(0,i.useContext)(T);if(!e)throw new Error("Expected pane id in context");return e}var R=T.Provider},53472:function(e,n,t){t.d(n,{J1:function(){return p},Np:function(){return R},WU:function(){return h},Xo:function(){return G},fg:function(){return _},gv:function(){return D},jY:function(){return P},nC:function(){return I}});var r=t(2272),i=t(9970),o=t(92508),a=t(81202),l=t.n(a),c=t(92153),u=t(50959),s=t(42445),d=t(42082),f=t(18171),p=(0,s.cn)(null);function h(){return(0,d.XD)(p)}var v=(0,s.cn)(new Map),g=(0,s.cn)([]),m=(0,s.cn)(null,(function(e,n,t){n(v,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t.paneId),r=Date.now();if(n){var i=n.panes.at(-1);n.lastActiveAt=r,l()(t.pane,i)||n.panes.push(t.pane)}else e.set(t.paneId,{panes:[t.pane],lastActiveAt:r})}))})),n(p,t.paneId)})),y=(0,s.cn)(null,(function(e,n,t){var r=e(p),i=e(v).get(t);i&&n(g,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),n(v,(function(e){return(0,c.ZP)(e,(function(e){e.delete(t)}))})),r===t&&n(p,null)})),Z=(0,s.cn)(null,(function(e,n,t){n(v,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t);n&&(n.lastActiveAt=Date.now())}))})),n(p,t)})),b=(0,s.cn)(null,(function(e,n){n(p,null)})),w=(0,s.cn)((function(e){return(0,i.Z)(e(v).values()).sort((function(e,n){return n.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),x=(0,s.cn)((function(e){var n=e(v),t=[];return n.forEach((function(e,n){var r=e.panes.at(-1);r&&t.push([n,r,e.lastActiveAt])})),t.sort((function(e,n){return e[2]-n[2]}))})),k=(0,s.cn)((function(e){var n=[],t=!0,i=!1,a=void 0;try{for(var l,c=e(x)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=(0,r.Z)(l.value,2),s=(u[0],u[1]),d=(0,o.Ur)(s)?s.data.path:null;d&&n.push(d)}}catch(f){i=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}return n})),C=(0,s.cn)((function(e){var n=[],t=!0,r=!1,o=void 0;try{for(var a,l=e(w)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value;u.length<=1||(c=n).push.apply(c,(0,i.Z)(u.slice(0,-1)))}}catch(y){r=!0,o=y}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}var s=!0,d=!1,f=void 0;try{for(var p,h=e(g)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v,m=p.value;(v=n).push.apply(v,(0,i.Z)(m))}}catch(y){d=!0,f=y}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return n})),S=(0,s.cn)(null,(function(e,n){var t=e(g).flat().pop();return n(g,(function(e){return(0,c.ZP)(e,(function(e){var n=e.pop();n&&n.pop()}))})),t})),T=(0,s.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var a,l=e(C)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,o.Ur)(c)?c.data.path:null;u&&n.push(u)}}catch(s){r=!0,i=s}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n})),E=((0,s.cn)((function(e){return(0,i.Z)(e(k)).concat((0,i.Z)(e(T)))})),(0,s.cn)((function(e){var n=e(p);if(!n)return null;var t=e(v).get(n);return(null===t||void 0===t?void 0:t.panes.at(-1))||null})));(0,s.cn)((function(e){var n=e(E);return n&&(0,o.Ur)(n)&&n.data.path||null}));function R(e,n){var t=(0,d.$X)(m),r=(0,d.$X)(y);(0,u.useEffect)((function(){t({paneId:e,pane:n})}),[t,e,n]),(0,u.useEffect)((function(){return function(){r(e)}}),[r,e])}function I(){return(0,d.XD)(x)}function D(){return(0,d.$X)(S)}function G(){return(0,d.$X)(Z)}function P(){return(0,d.$X)(b)}function _(){var e=(0,d.yL)(k);return(0,f.Z)((function(){return function(n){return new Promise((function(t,r){var i=e.subscribe((function(e){e.includes(n)||(i(),t())}))}))}}),[e])}},42082:function(e,n,t){t.d(n,{$X:function(){return p},B3:function(){return u},Hg:function(){return d},XD:function(){return h},ns:function(){return c},yL:function(){return f}});var r=t(50959),i=t(42445),o=t(33523),a=t(2749),l=t(13525);function c(){return(0,r.useState)((function(){return(0,i.MT)()}))[0]}var u=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(u);if(!e)throw new Error("Expected store in context");return e}function d(e){return(0,o.Dv)(e,{store:s()})}function f(e){return(0,l.b)(e,s())}var p=function(e){return(0,o.b9)(e,{store:s()})};function h(e){return(0,a.lV)((0,r.useCallback)((function(n){return n(e)}),[e]),{store:s()})}},98416:function(e,n,t){t.d(n,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-code-v1-3b",i={"replit-code-v1-3b":{},"replit-repltuned-v1-3b":{},"self-hosted-santa-1b":{infill:!0},"gwtraining-test1":{},"gwtraining-test2":{},"gwtraining-test3":{},"language-dependent":{},"gpt-3.5-turbo":{implementation:"chat-as-completion",implementationSettings:{model:"gpt-3.5-turbo"}},"google-augdev-001":{implementation:"google-model-as-completion",infill:!0},"code-gecko@001":{implementation:"google-vertex-model-as-completion",implementationSettings:{model:"code-gecko@001"},infill:!0}},o=new Set(Object.keys(i))},4821:function(e,n,t){t.d(n,{I:function(){return i},z:function(){return r}});var r=100,i=250},63181:function(e,n,t){t.d(n,{F5:function(){return d},Hk:function(){return u},Kd:function(){return s},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",s="https://github.com/",d=/\/$/}}]);
//# sourceMappingURL=6352-d08a618cffc71a43.js.map